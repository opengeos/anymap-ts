import{u as a}from"./mapbox-overlay-CjL5nCza.js";class d{id;topology;vertexCount;indices;attributes;userData={};constructor(t){const{attributes:n={},indices:e=null,vertexCount:u=null}=t;this.id=t.id||a("geometry"),this.topology=t.topology,e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),this.attributes={};for(const[i,s]of Object.entries(n)){const r=ArrayBuffer.isView(s)?{value:s}:s;if(!ArrayBuffer.isView(r.value))throw new Error(`${this._print(i)}: must be typed array or object with value as typed array`);if((i==="POSITION"||i==="positions")&&!r.size&&(r.size=3),i==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=r}else this.attributes[i]=r}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=u||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return`Geometry ${this.id} attribute ${t}`}_setAttributes(t,n){return this}_calculateVertexCount(t,n){if(n)return n.value.length;let e=1/0;for(const u of Object.values(t)){const{value:i,size:s,constant:r}=u;!r&&i&&s!==void 0&&s>=1&&(e=Math.min(e,i.length/s))}return e}}export{d as G};
