var m2=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports);import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */import{h as Zl}from"./maplibre-gl-BZpgQJIL.js";import{M as g2,C as v2}from"./mapbox-overlay-BJyTL8Fv.js";import{P as y2}from"./point-cloud-layer-CM0UWfJB.js";import{G as w2}from"./geojson-layer-CeI9w1cz.js";import{L as M2}from"./maplibre-gl-layer-control-a0RI8_4U.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./preload-helper-PPVm8Dsz.js";import"./color-CUNNsFV-.js";import"./picking-CN0D5Hbh.js";import"./gouraud-material-9DTYX8B2.js";import"./lighting-C4VWeiW3.js";import"./phong-shaders-wgsl-3FV41e28.js";import"./geometry-CoDDy0BW.js";import"./utils-2CUC2toc.js";import"./icon-layer-Bof6haF-.js";import"./scatterplot-layer-Dggjx1PX.js";import"./text-layer-DgSZVaCH.js";import"./composite-layer-Bi-GsFUv.js";import"./path-layer-CHynATzn.js";import"./cut-by-mercator-bounds-_3FpMLkc.js";import"./solid-polygon-layer-D1rmJNiJ.js";import"./polygon-utils-B8iYQ3Og.js";var qR=m2((S9,Wl)=>{var C2=Object.defineProperty,S2=(r,n,o)=>n in r?C2(r,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[n]=o,I=(r,n,o)=>S2(r,typeof n!="symbol"?n+"":n,o);class E2{constructor(n){I(this,"_map"),I(this,"_overlay"),I(this,"_layers"),this._map=n,this._layers=new Map,this._overlay=new g2({interleaved:!1,layers:[]}),this._map.addControl(this._overlay)}addLayer(n,o){this._layers.set(n,o),this._updateOverlay()}removeLayer(n){this._layers.delete(n),this._updateOverlay()}updateLayer(n,o){this._layers.has(n)&&(this._layers.set(n,o),this._updateOverlay())}getLayers(){return Array.from(this._layers.values())}hasLayer(n){return this._layers.has(n)}clearLayers(){this._layers.clear(),this._updateOverlay()}getMap(){return this._map}destroy(){this._layers.clear();try{this._map.removeControl(this._overlay)}catch{}}_updateOverlay(){const n=Array.from(this._layers.entries()).sort(([o],[l])=>{const c=o.includes("cross-section"),u=l.includes("cross-section");return c&&!u?1:!c&&u?-1:0}).map(([,o])=>o);this._overlay.setProps({layers:n}),this._map.triggerRepaint()}}var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b2(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var o=function l(){return this instanceof l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};o.prototype=n.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(r).forEach(function(l){var c=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(o,l,c.get?c:{enumerable:!0,get:function(){return r[l]}})}),o}var Ri={},cr={},fl={},Au;function R2(){return Au||(Au=1,Object.defineProperty(fl,"__esModule",{value:!0})),fl}var Is={},mu;function P2(){if(mu)return Is;mu=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.Hierarchy=void 0,Is.Hierarchy={parse:r};function r(n){return Object.entries(n).reduce((o,[l,c])=>(c===-1?o.pages[l]={}:c&&(o.nodes[l]={pointCount:c}),o),{nodes:{},pages:{}})}return Is}var gu;function x2(){return gu||(gu=1,(function(r){var n=cr&&cr.__createBinding||(Object.create?(function(l,c,u,p){p===void 0&&(p=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,p,d)}):(function(l,c,u,p){p===void 0&&(p=u),l[p]=c[u]})),o=cr&&cr.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&n(c,l,u)};Object.defineProperty(r,"__esModule",{value:!0}),o(R2(),r),o(P2(),r)})(cr)),cr}var on={},hr={},vu;function zl(){return vu||(vu=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.hierarchyItemLength=hr.infoLength=void 0,hr.infoLength=160,hr.hierarchyItemLength=32),hr}var Pi={},an={},ln={},yu;function Dl(){return yu||(yu=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.evlrHeaderLength=ln.vlrHeaderLength=ln.minHeaderLength=void 0,ln.minHeaderLength=375,ln.vlrHeaderLength=54,ln.evlrHeaderLength=60),ln}var Us={},ur={},fr={},wu;function T2(){if(wu)return fr;wu=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.getBigUint64=fr.parseBigInt=void 0;function r(o){if(o>BigInt(Number.MAX_SAFE_INTEGER)||o<BigInt(-Number.MAX_SAFE_INTEGER))throw new Error(`Cannot convert bigint to number: ${o}`);return Number(o)}fr.parseBigInt=r;function n(o,l,c){if(o.getBigUint64)return o.getBigUint64(l,c);const[u,p]=c?[4,0]:[0,4],d=BigInt(o.getUint32(l+u,c)),g=BigInt(o.getUint32(l+p,c));return(d<<BigInt(32))+g}return fr.getBigUint64=n,fr}var cn={},Mu;function F2(){if(Mu)return cn;Mu=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.toCString=cn.toDataView=cn.Binary=void 0,cn.Binary={toDataView:r,toCString:n};function r(o){return new DataView(o.buffer,o.byteOffset,o.length)}cn.toDataView=r;function n(o){const l=r(o);let c="";for(let u=0;u<l.byteLength;++u){const p=l.getInt8(u);if(p===0)return c;c+=String.fromCharCode(p)}return c}return cn.toCString=n,cn}var Ls={},Cu;function k2(){if(Cu)return Ls;Cu=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.Bounds=void 0,Ls.Bounds={min:r,max:n,mid:o,width:l,depth:c,height:u,cube:p,step:d,stepTo:g,intersection:w};function r(M){return[M[0],M[1],M[2]]}function n(M){return[M[3],M[4],M[5]]}function o([M,E,S,P,x,F]){return[M+(P-M)/2,E+(x-E)/2,S+(F-S)/2]}function l(M){return M[3]-M[0]}function c(M){return M[4]-M[1]}function u(M){return M[5]-M[2]}function p(M){const E=o(M),S=Math.max(l(M),c(M),u(M))/2;return[E[0]-S,E[1]-S,E[2]-S,E[0]+S,E[1]+S,E[2]+S]}function d(M,[E,S,P]){const[x,F,G,Z,W,D]=M,[tt,q,K]=o(M);return[E?tt:x,S?q:F,P?K:G,E?Z:tt,S?W:q,P?D:K]}function g(M,[E,S,P,x]){for(let F=E-1;F>=0;--F)M=d(M,[S>>F&1,P>>F&1,x>>F&1]);return M}function w(M,E){return[Math.max(M[0],E[0]),Math.max(M[1],E[1]),Math.max(M[2],E[2]),Math.min(M[3],E[3]),Math.min(M[4],E[4]),Math.min(M[5],E[5])]}return Ls}var Vs={},Su;function N2(){if(Su)return Vs;Su=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.Dimension=void 0;const r={int8:{type:"signed",size:1},int16:{type:"signed",size:2},int32:{type:"signed",size:4},int64:{type:"signed",size:8},uint8:{type:"unsigned",size:1},uint16:{type:"unsigned",size:2},uint32:{type:"unsigned",size:4},uint64:{type:"unsigned",size:8},float32:{type:"float",size:4},float64:{type:"float",size:8},float:{type:"float",size:4},double:{type:"float",size:8},bool:{type:"unsigned",size:1},boolean:{type:"unsigned",size:1}};Vs.Dimension={Type:r,ctype:n};function n({type:o,size:l}){switch(o){case"signed":switch(l){case 1:return"int8";case 2:return"int16";case 4:return"int32";case 8:return"int64"}case"unsigned":switch(l){case 1:return"uint8";case 2:return"uint16";case 4:return"uint32";case 8:return"uint64"}case"float":switch(l){case 4:return"float";case 8:return"double"}}throw new Error(`Invalid dimension type/size: ${o}/${l}`)}return Vs}var si={},ua={exports:{}},Eu;function G2(){return Eu||(Eu=1,(function(r,n){var o=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ha<"u"&&ha,l=(function(){function u(){this.fetch=!1,this.DOMException=o.DOMException}return u.prototype=o,new u})();(function(u){(function(p){var d=typeof u<"u"&&u||typeof self<"u"&&self||typeof ha<"u"&&ha||{},g={searchParams:"URLSearchParams"in d,iterable:"Symbol"in d&&"iterator"in Symbol,blob:"FileReader"in d&&"Blob"in d&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in d,arrayBuffer:"ArrayBuffer"in d};function w(z){return z&&DataView.prototype.isPrototypeOf(z)}if(g.arrayBuffer)var M=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(z){return z&&M.indexOf(Object.prototype.toString.call(z))>-1};function S(z){if(typeof z!="string"&&(z=String(z)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(z)||z==="")throw new TypeError('Invalid character in header field name: "'+z+'"');return z.toLowerCase()}function P(z){return typeof z!="string"&&(z=String(z)),z}function x(z){var it={next:function(){var At=z.shift();return{done:At===void 0,value:At}}};return g.iterable&&(it[Symbol.iterator]=function(){return it}),it}function F(z){this.map={},z instanceof F?z.forEach(function(it,At){this.append(At,it)},this):Array.isArray(z)?z.forEach(function(it){if(it.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+it.length);this.append(it[0],it[1])},this):z&&Object.getOwnPropertyNames(z).forEach(function(it){this.append(it,z[it])},this)}F.prototype.append=function(z,it){z=S(z),it=P(it);var At=this.map[z];this.map[z]=At?At+", "+it:it},F.prototype.delete=function(z){delete this.map[S(z)]},F.prototype.get=function(z){return z=S(z),this.has(z)?this.map[z]:null},F.prototype.has=function(z){return this.map.hasOwnProperty(S(z))},F.prototype.set=function(z,it){this.map[S(z)]=P(it)},F.prototype.forEach=function(z,it){for(var At in this.map)this.map.hasOwnProperty(At)&&z.call(it,this.map[At],At,this)},F.prototype.keys=function(){var z=[];return this.forEach(function(it,At){z.push(At)}),x(z)},F.prototype.values=function(){var z=[];return this.forEach(function(it){z.push(it)}),x(z)},F.prototype.entries=function(){var z=[];return this.forEach(function(it,At){z.push([At,it])}),x(z)},g.iterable&&(F.prototype[Symbol.iterator]=F.prototype.entries);function G(z){if(!z._noBody){if(z.bodyUsed)return Promise.reject(new TypeError("Already read"));z.bodyUsed=!0}}function Z(z){return new Promise(function(it,At){z.onload=function(){it(z.result)},z.onerror=function(){At(z.error)}})}function W(z){var it=new FileReader,At=Z(it);return it.readAsArrayBuffer(z),At}function D(z){var it=new FileReader,At=Z(it),kt=/charset=([A-Za-z0-9_-]+)/.exec(z.type),Vt=kt?kt[1]:"utf-8";return it.readAsText(z,Vt),At}function tt(z){for(var it=new Uint8Array(z),At=new Array(it.length),kt=0;kt<it.length;kt++)At[kt]=String.fromCharCode(it[kt]);return At.join("")}function q(z){if(z.slice)return z.slice(0);var it=new Uint8Array(z.byteLength);return it.set(new Uint8Array(z)),it.buffer}function K(){return this.bodyUsed=!1,this._initBody=function(z){this.bodyUsed=this.bodyUsed,this._bodyInit=z,z?typeof z=="string"?this._bodyText=z:g.blob&&Blob.prototype.isPrototypeOf(z)?this._bodyBlob=z:g.formData&&FormData.prototype.isPrototypeOf(z)?this._bodyFormData=z:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(z)?this._bodyText=z.toString():g.arrayBuffer&&g.blob&&w(z)?(this._bodyArrayBuffer=q(z.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(z)||E(z))?this._bodyArrayBuffer=q(z):this._bodyText=z=Object.prototype.toString.call(z):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof z=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(z)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var z=G(this);if(z)return z;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var z=G(this);return z||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(g.blob)return this.blob().then(W);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var z=G(this);if(z)return z;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(tt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(st)}),this.json=function(){return this.text().then(JSON.parse)},this}var _t=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function nt(z){var it=z.toUpperCase();return _t.indexOf(it)>-1?it:z}function ut(z,it){if(!(this instanceof ut))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');it=it||{};var At=it.body;if(z instanceof ut){if(z.bodyUsed)throw new TypeError("Already read");this.url=z.url,this.credentials=z.credentials,it.headers||(this.headers=new F(z.headers)),this.method=z.method,this.mode=z.mode,this.signal=z.signal,!At&&z._bodyInit!=null&&(At=z._bodyInit,z.bodyUsed=!0)}else this.url=String(z);if(this.credentials=it.credentials||this.credentials||"same-origin",(it.headers||!this.headers)&&(this.headers=new F(it.headers)),this.method=nt(it.method||this.method||"GET"),this.mode=it.mode||this.mode||null,this.signal=it.signal||this.signal||(function(){if("AbortController"in d){var bt=new AbortController;return bt.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&At)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(At),(this.method==="GET"||this.method==="HEAD")&&(it.cache==="no-store"||it.cache==="no-cache")){var kt=/([?&])_=[^&]*/;if(kt.test(this.url))this.url=this.url.replace(kt,"$1_="+new Date().getTime());else{var Vt=/\?/;this.url+=(Vt.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}ut.prototype.clone=function(){return new ut(this,{body:this._bodyInit})};function st(z){var it=new FormData;return z.trim().split("&").forEach(function(At){if(At){var kt=At.split("="),Vt=kt.shift().replace(/\+/g," "),bt=kt.join("=").replace(/\+/g," ");it.append(decodeURIComponent(Vt),decodeURIComponent(bt))}}),it}function vt(z){var it=new F,At=z.replace(/\r?\n[\t ]+/g," ");return At.split("\r").map(function(kt){return kt.indexOf(`
`)===0?kt.substr(1,kt.length):kt}).forEach(function(kt){var Vt=kt.split(":"),bt=Vt.shift().trim();if(bt){var Rt=Vt.join(":").trim();try{it.append(bt,Rt)}catch(Ae){console.warn("Response "+Ae.message)}}}),it}K.call(ut.prototype);function Pt(z,it){if(!(this instanceof Pt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(it||(it={}),this.type="default",this.status=it.status===void 0?200:it.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=it.statusText===void 0?"":""+it.statusText,this.headers=new F(it.headers),this.url=it.url||"",this._initBody(z)}K.call(Pt.prototype),Pt.prototype.clone=function(){return new Pt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new F(this.headers),url:this.url})},Pt.error=function(){var z=new Pt(null,{status:200,statusText:""});return z.ok=!1,z.status=0,z.type="error",z};var Yt=[301,302,303,307,308];Pt.redirect=function(z,it){if(Yt.indexOf(it)===-1)throw new RangeError("Invalid status code");return new Pt(null,{status:it,headers:{location:z}})},p.DOMException=d.DOMException;try{new p.DOMException}catch{p.DOMException=function(it,At){this.message=it,this.name=At;var kt=Error(it);this.stack=kt.stack},p.DOMException.prototype=Object.create(Error.prototype),p.DOMException.prototype.constructor=p.DOMException}function $t(z,it){return new Promise(function(At,kt){var Vt=new ut(z,it);if(Vt.signal&&Vt.signal.aborted)return kt(new p.DOMException("Aborted","AbortError"));var bt=new XMLHttpRequest;function Rt(){bt.abort()}bt.onload=function(){var Gt={statusText:bt.statusText,headers:vt(bt.getAllResponseHeaders()||"")};Vt.url.indexOf("file://")===0&&(bt.status<200||bt.status>599)?Gt.status=200:Gt.status=bt.status,Gt.url="responseURL"in bt?bt.responseURL:Gt.headers.get("X-Request-URL");var qt="response"in bt?bt.response:bt.responseText;setTimeout(function(){At(new Pt(qt,Gt))},0)},bt.onerror=function(){setTimeout(function(){kt(new TypeError("Network request failed"))},0)},bt.ontimeout=function(){setTimeout(function(){kt(new TypeError("Network request timed out"))},0)},bt.onabort=function(){setTimeout(function(){kt(new p.DOMException("Aborted","AbortError"))},0)};function Ae(Gt){try{return Gt===""&&d.location.href?d.location.href:Gt}catch{return Gt}}if(bt.open(Vt.method,Ae(Vt.url),!0),Vt.credentials==="include"?bt.withCredentials=!0:Vt.credentials==="omit"&&(bt.withCredentials=!1),"responseType"in bt&&(g.blob?bt.responseType="blob":g.arrayBuffer&&(bt.responseType="arraybuffer")),it&&typeof it.headers=="object"&&!(it.headers instanceof F||d.Headers&&it.headers instanceof d.Headers)){var oe=[];Object.getOwnPropertyNames(it.headers).forEach(function(Gt){oe.push(S(Gt)),bt.setRequestHeader(Gt,P(it.headers[Gt]))}),Vt.headers.forEach(function(Gt,qt){oe.indexOf(qt)===-1&&bt.setRequestHeader(qt,Gt)})}else Vt.headers.forEach(function(Gt,qt){bt.setRequestHeader(qt,Gt)});Vt.signal&&(Vt.signal.addEventListener("abort",Rt),bt.onreadystatechange=function(){bt.readyState===4&&Vt.signal.removeEventListener("abort",Rt)}),bt.send(typeof Vt._bodyInit>"u"?null:Vt._bodyInit)})}return $t.polyfill=!0,d.fetch||(d.fetch=$t,d.Headers=F,d.Request=ut,d.Response=Pt),p.Headers=F,p.Request=ut,p.Response=Pt,p.fetch=$t,Object.defineProperty(p,"__esModule",{value:!0}),p})({})})(l),l.fetch.ponyfill=!0,delete l.fetch.polyfill;var c=o.fetch?o:l;n=c.fetch,n.default=c.fetch,n.fetch=c.fetch,n.Headers=c.Headers,n.Request=c.Request,n.Response=c.Response,r.exports=n})(ua,ua.exports)),ua.exports}const B2={},O2=Object.freeze(Object.defineProperty({__proto__:null,default:B2},Symbol.toStringTag,{value:"Module"})),I2=b2(O2);var bu;function U2(){if(bu)return si;bu=1;var r=si&&si.__createBinding||(Object.create?(function(w,M,E,S){S===void 0&&(S=E);var P=Object.getOwnPropertyDescriptor(M,E);(!P||("get"in P?!M.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return M[E]}}),Object.defineProperty(w,S,P)}):(function(w,M,E,S){S===void 0&&(S=E),w[S]=M[E]})),n=si&&si.__setModuleDefault||(Object.create?(function(w,M){Object.defineProperty(w,"default",{enumerable:!0,value:M})}):function(w,M){w.default=M}),o=si&&si.__importStar||function(w){if(w&&w.__esModule)return w;var M={};if(w!=null)for(var E in w)E!=="default"&&Object.prototype.hasOwnProperty.call(w,E)&&r(M,w,E);return n(M,w),M},l=si&&si.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(si,"__esModule",{value:!0}),si.Getter=void 0;const c=l(G2());si.Getter={create:u,http:p,file:d};function u(w){return typeof w=="function"?w:w.startsWith("http://")||w.startsWith("https://")?p(w):d(w)}function p(w){return async function(E,S){if(E<0||S<0||E>S)throw new Error("Invalid range");const x=await(await(0,c.default)(w,{headers:{Range:`bytes=${E}-${S-1}`}})).arrayBuffer();return new Uint8Array(x)}}function d(w){return async function(E,S){const P=await Promise.resolve().then(()=>o(I2));async function x(F=0,G=1/0){if(F<0||G<0||F>G)throw new Error("Invalid range");await P.promises.access(w);const Z=P.createReadStream(w,{start:F,end:G-1,autoClose:!0});return g(Z)}return x(E,S)}}async function g(w){return await new Promise((M,E)=>{const S=[];w.on("data",P=>S.push(P)),w.on("error",E),w.on("end",()=>M(Buffer.concat(S)))})}return si}var dl={},Ru;function L2(){return Ru||(Ru=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Key=void 0,r.Key={create:n,parse:o,toString:l,step:c,up:u,compare:p,depth:d};function n(g,w=0,M=0,E=0){return typeof g!="number"?o(g):[g,w,M,E]}function o(g){if(typeof g!="string")return g;const[w,M,E,S,...P]=g.split("-").map(F=>parseInt(F,10)),x=[w,M,E,S];if(P.length!==0||x.some(F=>typeof F!="number"||Number.isNaN(F)))throw new Error(`Invalid key: ${g}`);return x}function l(g){return typeof g=="string"?g:g.join("-")}function c(g,[w,M,E]){const[S,P,x,F]=r.Key.create(g);return[S+1,P*2+w,x*2+M,F*2+E]}function u(g,w=1){const[M,E,S,P]=r.Key.create(g);return[M-w,E>>w,S>>w,P>>w]}function p(g,w){for(let M=0;M<g.length;++M){if(g[M]<w[M])return-1;if(g[M]>w[M])return 1}return 0}function d(g){return g[0]}})(dl)),dl}var Ws={},Pu;function V2(){return Pu||(Pu=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.Scale=void 0,Ws.Scale={apply:(r,n=1,o=0)=>(r-o)/n,unapply:(r,n=1,o=0)=>r*n+o}),Ws}var Zs={},xu;function W2(){if(xu)return Zs;xu=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.Step=void 0,Zs.Step={fromIndex:r,list:n};function r(o){if(o<0||o>=8)throw new Error(`Invalid step index: ${o}`);const l=o>>0&1?1:0,c=o>>1&1?1:0,u=o>>2&1?1:0;return[l,c,u]}function n(){return[[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1]]}return Zs}var Tu;function ki(){return Tu||(Tu=1,(function(r){var n=ur&&ur.__createBinding||(Object.create?(function(M,E,S,P){P===void 0&&(P=S);var x=Object.getOwnPropertyDescriptor(E,S);(!x||("get"in x?!E.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return E[S]}}),Object.defineProperty(M,P,x)}):(function(M,E,S,P){P===void 0&&(P=S),M[P]=E[S]})),o=ur&&ur.__exportStar||function(M,E){for(var S in M)S!=="default"&&!Object.prototype.hasOwnProperty.call(E,S)&&n(E,M,S)};Object.defineProperty(r,"__esModule",{value:!0}),r.Step=r.Scale=r.Key=r.Getter=r.Dimension=r.Bounds=r.Binary=void 0,o(T2(),r);var l=F2();Object.defineProperty(r,"Binary",{enumerable:!0,get:function(){return l.Binary}});var c=k2();Object.defineProperty(r,"Bounds",{enumerable:!0,get:function(){return c.Bounds}});var u=N2();Object.defineProperty(r,"Dimension",{enumerable:!0,get:function(){return u.Dimension}});var p=U2();Object.defineProperty(r,"Getter",{enumerable:!0,get:function(){return p.Getter}});var d=L2();Object.defineProperty(r,"Key",{enumerable:!0,get:function(){return d.Key}});var g=V2();Object.defineProperty(r,"Scale",{enumerable:!0,get:function(){return g.Scale}});var w=W2();Object.defineProperty(r,"Step",{enumerable:!0,get:function(){return w.Step}})})(ur)),ur}var zs={},Fu;function Df(){if(Fu)return zs;Fu=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.ExtraBytes=void 0;const r=ki();zs.ExtraBytes={getDimension:o,parse:l,parseOne:c};const n=192;function o({type:d,length:g}){switch(d){case"signed":case"unsigned":switch(g){case 1:case 2:case 4:case 8:return{type:d,size:g}}case"float":switch(g){case 4:case 8:return{type:d,size:g}}}}function l(d){if(d.byteLength%n!==0)throw new Error(`Invalid extra bytes VLR length: ${d.byteLength}`);const g=[];for(let w=0;w<d.byteLength;w+=n)g.push(c(d.slice(w,w+n)));return g}function c(d){if(d.byteLength!==n)throw new Error(`Invalid extra bytes entry length: ${d.byteLength}`);const g=r.Binary.toDataView(d),w=r.Binary.toCString(d.slice(4,36)),M=r.Binary.toCString(d.slice(60,192)),E=g.getUint8(2),S=g.getUint8(3);if(E>=11)throw new Error(`Invalid extra bytes "type" value: ${E}`);if(E===0)return{name:w,description:M,length:S};const P=p(S),x=u(E);if(!x)throw new Error(`Failed to extract dimension type: ${E}`);const{type:F,size:G}=x;function Z(D){switch(F){case"signed":return(0,r.parseBigInt)(g.getBigInt64(D,!0));case"unsigned":return(0,r.parseBigInt)((0,r.getBigUint64)(g,D,!0));case"float":return g.getFloat64(D,!0)}}const W={name:w,description:M,type:F,length:G};return P.hasNodata&&(W.nodata=Z(40)),P.hasMin&&(W.min=Z(64)),P.hasMax&&(W.max=Z(88)),P.hasScale&&(W.scale=g.getFloat64(112)),P.hasOffset&&(W.offset=g.getFloat64(136)),W}function u(d){switch(d){case 1:return r.Dimension.Type.uint8;case 2:return r.Dimension.Type.int8;case 3:return r.Dimension.Type.uint16;case 4:return r.Dimension.Type.int16;case 5:return r.Dimension.Type.uint32;case 6:return r.Dimension.Type.int32;case 7:return r.Dimension.Type.uint64;case 8:return r.Dimension.Type.int64;case 9:return r.Dimension.Type.float32;case 10:return r.Dimension.Type.float64}}function p(d){return{hasNodata:!!(d&1),hasMin:!!(d>>1&1),hasMax:!!(d>>2&1),hasScale:!!(d>>3&1),hasOffset:!!(d>>4&1)}}return zs}var ku;function Xf(){if(ku)return Us;ku=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.Dimensions=void 0;const r=ki(),n=Df();Us.Dimensions={create:c};const{Type:o}=r.Dimension,l={X:o.float64,Y:o.float64,Z:o.float64,Intensity:o.uint16,ReturnNumber:o.uint8,NumberOfReturns:o.uint8,ScanDirectionFlag:o.boolean,EdgeOfFlightLine:o.boolean,Classification:o.uint8,Synthetic:o.boolean,KeyPoint:o.boolean,Withheld:o.boolean,Overlap:o.boolean,ScanAngle:o.float32,UserData:o.uint8,PointSourceId:o.uint16,GpsTime:o.float64,Red:o.uint16,Green:o.uint16,Blue:o.uint16,ScannerChannel:o.uint8,Infrared:o.uint16};function c(u,p=[]){return Object.keys(u).reduce((d,g)=>{const w=l[g];if(w)return{...d,[g]:w};const M=p.find(S=>S.name===g),E=M&&n.ExtraBytes.getDimension(M);if(E)return{...d,[g]:E};throw new Error(`Failed to look up LAS type: ${g}`)},{})}return Us}var Ds={},Nu;function jf(){if(Nu)return Ds;Nu=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.Extractor=void 0;const r=ki();Ds.Extractor={create:c};function n(P){switch(P){case 0:return 20;case 1:return 28;case 2:return 26;case 3:return 34;case 6:return 30;case 7:return 36;case 8:return 38;default:throw new Error(`Unsupported point data record format: ${P}`)}}function o(P,x,{type:F,length:G}){const Z=S(P);switch(F){case"signed":switch(G){case 1:return(W,D)=>W.getInt8(Z(D)+x);case 2:return(W,D)=>W.getInt16(Z(D)+x,!0);case 4:return(W,D)=>W.getInt32(Z(D)+x,!0);case 8:return(W,D)=>(0,r.parseBigInt)(W.getBigInt64(Z(D)+x,!0))}case"unsigned":switch(G){case 1:return(W,D)=>W.getUint8(Z(D)+x);case 2:return(W,D)=>W.getUint16(Z(D)+x,!0);case 4:return(W,D)=>W.getUint32(Z(D)+x,!0);case 8:return(W,D)=>(0,r.parseBigInt)((0,r.getBigUint64)(W,Z(D)+x,!0))}case"float":switch(G){case 4:return(W,D)=>W.getFloat32(Z(D)+x,!0);case 8:return(W,D)=>W.getFloat64(Z(D)+x,!0)}}}function l(P,x){let G=n(P.pointDataRecordFormat);return x.reduce((Z,W)=>{const D=G;G+=W.length;const tt=o(P,D,W);if(!tt)return Z;const q=(K,_t)=>r.Scale.unapply(tt(K,_t),W.scale,W.offset);return{...Z,[W.name]:q}},{})}function c(P,x=[]){const F=l(P,x);return{...(()=>{const{pointDataRecordFormat:Z}=P;switch(Z){case 0:return u(P);case 1:return p(P);case 2:return d(P);case 3:return g(P);case 6:return w(P);case 7:return M(P);case 8:return E(P);default:throw new Error(`Unsupported point data record format: ${Z}`)}})(),...F}}function u(P){const{scale:x,offset:F}=P,G=S(P);function Z(tt,q){return tt.getUint8(G(q)+14)}function W(tt,q){return tt.getUint8(G(q)+15)}function D(tt,q){return W(tt,q)&31}return{X:(tt,q)=>r.Scale.unapply(tt.getInt32(G(q),!0),x[0],F[0]),Y:(tt,q)=>r.Scale.unapply(tt.getInt32(G(q)+4,!0),x[1],F[1]),Z:(tt,q)=>r.Scale.unapply(tt.getInt32(G(q)+8,!0),x[2],F[2]),Intensity:(tt,q)=>tt.getUint16(G(q)+12,!0),ReturnNumber:(tt,q)=>Z(tt,q)&7,NumberOfReturns:(tt,q)=>(Z(tt,q)&56)>>3,ScanDirectionFlag:(tt,q)=>(Z(tt,q)&64)>>6,EdgeOfFlightLine:(tt,q)=>(Z(tt,q)&128)>>7,Classification:(tt,q)=>{const K=D(tt,q);return K===12?0:K},Synthetic:(tt,q)=>(W(tt,q)&32)>>5,KeyPoint:(tt,q)=>(W(tt,q)&64)>>6,Withheld:(tt,q)=>(W(tt,q)&128)>>7,Overlap:(tt,q)=>D(tt,q)===12?1:0,ScanAngle:(tt,q)=>tt.getInt8(G(q)+16),UserData:(tt,q)=>tt.getUint8(G(q)+17),PointSourceId:(tt,q)=>tt.getUint16(G(q)+18,!0)}}function p(P){const x=S(P);return{...u(P),GpsTime:(F,G)=>F.getFloat64(x(G)+20,!0)}}function d(P){const x=S(P);return{...u(P),Red:(F,G)=>F.getUint16(x(G)+20,!0),Green:(F,G)=>F.getUint16(x(G)+22,!0),Blue:(F,G)=>F.getUint16(x(G)+24,!0)}}function g(P){const x=S(P);return{...u(P),GpsTime:(F,G)=>F.getFloat64(x(G)+20,!0),Red:(F,G)=>F.getUint16(x(G)+28,!0),Green:(F,G)=>F.getUint16(x(G)+30,!0),Blue:(F,G)=>F.getUint16(x(G)+32,!0)}}function w(P){const{scale:x,offset:F}=P,G=S(P);function Z(W,D){return W.getUint8(G(D)+15)}return{X:(W,D)=>r.Scale.unapply(W.getInt32(G(D),!0),x[0],F[0]),Y:(W,D)=>r.Scale.unapply(W.getInt32(G(D)+4,!0),x[1],F[1]),Z:(W,D)=>r.Scale.unapply(W.getInt32(G(D)+8,!0),x[2],F[2]),Intensity:(W,D)=>W.getUint16(G(D)+12,!0),ReturnNumber:(W,D)=>W.getUint16(G(D)+14,!0)&15,NumberOfReturns:(W,D)=>(W.getUint16(G(D)+14,!0)&240)>>4,Synthetic:(W,D)=>Z(W,D)&1,KeyPoint:(W,D)=>(Z(W,D)&2)>>1,Withheld:(W,D)=>(Z(W,D)&4)>>2,Overlap:(W,D)=>(Z(W,D)&8)>>3,ScannerChannel:(W,D)=>(Z(W,D)&48)>>4,ScanDirectionFlag:(W,D)=>(Z(W,D)&64)>>6,EdgeOfFlightLine:(W,D)=>(Z(W,D)&128)>>7,Classification:(W,D)=>W.getUint8(G(D)+16),UserData:(W,D)=>W.getUint8(G(D)+17),ScanAngle:(W,D)=>W.getInt16(G(D)+18,!0)*.006,PointSourceId:(W,D)=>W.getUint16(G(D)+20,!0),GpsTime:(W,D)=>W.getFloat64(G(D)+22,!0)}}function M(P){const x=S(P);return{...w(P),Red:(F,G)=>F.getUint16(x(G)+30,!0),Green:(F,G)=>F.getUint16(x(G)+32,!0),Blue:(F,G)=>F.getUint16(x(G)+34,!0)}}function E(P){const x=S(P);return{...M(P),Infrared:(F,G)=>F.getUint16(x(G)+36,!0)}}function S(P){const{pointDataRecordLength:x}=P;return function(G){return G*x}}return Ds}var Xs={},dr={},Gu;function Z2(){if(Gu)return dr;Gu=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.formatGuid=dr.parsePoint=void 0;const r=ki();function n(l){const c=r.Binary.toDataView(l);if(c.byteLength!==24)throw new Error(`Invalid tuple buffer length: ${c.byteLength}`);return[c.getFloat64(0,!0),c.getFloat64(8,!0),c.getFloat64(16,!0)]}dr.parsePoint=n;function o(l){const c=r.Binary.toDataView(l);if(c.byteLength!==16)throw new Error(`Invalid GUID buffer length: ${c.byteLength}`);let u="";for(let p=0;p<c.byteLength;p+=4){const d=c.getUint32(p,!0);u+=d.toString(16).padStart(8,"0")}return[u.slice(0,8),u.slice(8,12),u.slice(12,16),u.slice(16,32)].join("-")}return dr.formatGuid=o,dr}var Bu;function Hf(){if(Bu)return Xs;Bu=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.Header=void 0;const r=ki(),n=Dl(),o=Z2();Xs.Header={parse:l};function l(p){if(p.byteLength<n.minHeaderLength)throw new Error(`Invalid header: must be at least ${n.minHeaderLength} bytes`);const d=r.Binary.toDataView(p),g=r.Binary.toCString(p.slice(0,4));if(g!=="LASF")throw new Error(`Invalid file signature: ${g}`);const w=d.getUint8(24),M=d.getUint8(25);if(w!==1||M!==2&&M!==4)throw new Error(`Invalid version (only 1.2 and 1.4 supported): ${w}.${M}`);const E={fileSignature:g,fileSourceId:d.getUint16(4,!0),globalEncoding:d.getUint16(6,!0),projectId:(0,o.formatGuid)(p.slice(8,24)),majorVersion:w,minorVersion:M,systemIdentifier:r.Binary.toCString(p.slice(26,58)),generatingSoftware:r.Binary.toCString(p.slice(58,90)),fileCreationDayOfYear:d.getUint16(90,!0),fileCreationYear:d.getUint16(92,!0),headerLength:d.getUint16(94,!0),pointDataOffset:d.getUint32(96,!0),vlrCount:d.getUint32(100,!0),pointDataRecordFormat:d.getUint8(104)&15,pointDataRecordLength:d.getUint16(105,!0),pointCount:d.getUint32(107,!0),pointCountByReturn:u(p.slice(111,131)),scale:(0,o.parsePoint)(p.slice(131,155)),offset:(0,o.parsePoint)(p.slice(155,179)),min:[d.getFloat64(187,!0),d.getFloat64(203,!0),d.getFloat64(219,!0)],max:[d.getFloat64(179,!0),d.getFloat64(195,!0),d.getFloat64(211,!0)],waveformDataOffset:0,evlrOffset:0,evlrCount:0};return M==2?E:{...E,pointCount:(0,r.parseBigInt)((0,r.getBigUint64)(d,247,!0)),pointCountByReturn:c(p.slice(255,375)),waveformDataOffset:(0,r.parseBigInt)((0,r.getBigUint64)(d,227,!0)),evlrOffset:(0,r.parseBigInt)((0,r.getBigUint64)(d,235,!0)),evlrCount:d.getUint32(243,!0)}}function c(p){const d=r.Binary.toDataView(p),g=[];for(let w=0;w<120;w+=8)g.push((0,r.getBigUint64)(d,w,!0));return g.map(w=>(0,r.parseBigInt)(w))}function u(p){const d=r.Binary.toDataView(p),g=[];for(let w=0;w<20;w+=4)g.push(d.getUint32(w,!0));return g}return Xs}var hn={},xi={},pl={exports:{}},Ou;function z2(){return Ou||(Ou=1,(function(r,n){var o=(()=>{var l=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return(function(c){c=c||{};var u=typeof c<"u"?c:{},p,d;u.ready=new Promise(function(b,R){p=b,d=R}),["_main","___getTypeName","__embind_initialize_bindings","_fflush","onRuntimeInitialized"].forEach(b=>{Object.getOwnPropertyDescriptor(u.ready,b)||Object.defineProperty(u.ready,b,{get:()=>Te("You are getting "+b+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>Te("You are setting "+b+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})});var g=Object.assign({},u),w="./this.program",M=!0;if(u.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var E="";function S(b){return u.locateFile?u.locateFile(b,E):E+b}var P;if(typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),l&&(E=l),E.indexOf("blob:")!==0?E=E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):E="",!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var x=u.print||console.log.bind(console),F=u.printErr||console.warn.bind(console);Object.assign(u,g),g=null,Dt(),u.arguments&&u.arguments,G("arguments","arguments_"),u.thisProgram&&(w=u.thisProgram),G("thisProgram","thisProgram"),u.quit&&u.quit,G("quit","quit_"),nt(typeof u.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),nt(typeof u.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),nt(typeof u.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),nt(typeof u.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),nt(typeof u.read>"u","Module.read option was removed (modify read_ in JS)"),nt(typeof u.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),nt(typeof u.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),nt(typeof u.setWindowTitle>"u","Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),nt(typeof u.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),G("read","read_"),G("readAsync","readAsync"),G("readBinary","readBinary"),G("setWindowTitle","setWindowTitle"),nt(!0,"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable."),nt(!0,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable."),nt(!0,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");function G(b,R){Object.getOwnPropertyDescriptor(u,b)||Object.defineProperty(u,b,{configurable:!0,get:function(){Te("Module."+b+" has been replaced with plain "+R+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function Z(b){Object.getOwnPropertyDescriptor(u,b)&&Te("`Module."+b+"` was supplied but `"+b+"` not included in INCOMING_MODULE_JS_API")}function W(b){return b==="FS_createPath"||b==="FS_createDataFile"||b==="FS_createPreloadedFile"||b==="FS_unlink"||b==="addRunDependency"||b==="FS_createLazyFile"||b==="FS_createDevice"||b==="removeRunDependency"}function D(b){typeof globalThis<"u"&&!Object.getOwnPropertyDescriptor(globalThis,b)&&Object.defineProperty(globalThis,b,{configurable:!0,get:function(){var R="`"+b+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";W(b)&&(R+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),Ji(R)}})}function tt(b){Object.getOwnPropertyDescriptor(u,b)||Object.defineProperty(u,b,{configurable:!0,get:function(){var R="'"+b+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";W(b)&&(R+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),Te(R)}})}var q;u.wasmBinary&&(q=u.wasmBinary),G("wasmBinary","wasmBinary"),u.noExitRuntime,G("noExitRuntime","noExitRuntime"),typeof WebAssembly!="object"&&Te("no native wasm support detected");var K,_t=!1;function nt(b,R){b||Te("Assertion failed"+(R?": "+R:""))}var ut=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function st(b,R,U){for(var Y=R+U,et=R;b[et]&&!(et>=Y);)++et;if(et-R>16&&b.buffer&&ut)return ut.decode(b.subarray(R,et));for(var ht="";R<et;){var dt=b[R++];if(!(dt&128)){ht+=String.fromCharCode(dt);continue}var rt=b[R++]&63;if((dt&224)==192){ht+=String.fromCharCode((dt&31)<<6|rt);continue}var ft=b[R++]&63;if((dt&240)==224?dt=(dt&15)<<12|rt<<6|ft:((dt&248)!=240&&Ji("Invalid UTF-8 leading byte 0x"+dt.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),dt=(dt&7)<<18|rt<<12|ft<<6|b[R++]&63),dt<65536)ht+=String.fromCharCode(dt);else{var y=dt-65536;ht+=String.fromCharCode(55296|y>>10,56320|y&1023)}}return ht}function vt(b,R){return b?st(At,b,R):""}function Pt(b,R,U,Y){if(!(Y>0))return 0;for(var et=U,ht=U+Y-1,dt=0;dt<b.length;++dt){var rt=b.charCodeAt(dt);if(rt>=55296&&rt<=57343){var ft=b.charCodeAt(++dt);rt=65536+((rt&1023)<<10)|ft&1023}if(rt<=127){if(U>=ht)break;R[U++]=rt}else if(rt<=2047){if(U+1>=ht)break;R[U++]=192|rt>>6,R[U++]=128|rt&63}else if(rt<=65535){if(U+2>=ht)break;R[U++]=224|rt>>12,R[U++]=128|rt>>6&63,R[U++]=128|rt&63}else{if(U+3>=ht)break;rt>1114111&&Ji("Invalid Unicode code point 0x"+rt.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),R[U++]=240|rt>>18,R[U++]=128|rt>>12&63,R[U++]=128|rt>>6&63,R[U++]=128|rt&63}}return R[U]=0,U-et}function Yt(b,R,U){return nt(typeof U=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Pt(b,At,R,U)}function $t(b){for(var R=0,U=0;U<b.length;++U){var Y=b.charCodeAt(U);Y<=127?R++:Y<=2047?R+=2:Y>=55296&&Y<=57343?(R+=4,++U):R+=3}return R}var z,it,At,kt,Vt,bt,Rt,Ae,oe;function Gt(b){z=b,u.HEAP8=it=new Int8Array(b),u.HEAP16=kt=new Int16Array(b),u.HEAP32=bt=new Int32Array(b),u.HEAPU8=At=new Uint8Array(b),u.HEAPU16=Vt=new Uint16Array(b),u.HEAPU32=Rt=new Uint32Array(b),u.HEAPF32=Ae=new Float32Array(b),u.HEAPF64=oe=new Float64Array(b)}var qt=65536;u.TOTAL_STACK&&nt(qt===u.TOTAL_STACK,"the stack size can no longer be determined at runtime");var Le=u.INITIAL_MEMORY||262144;G("INITIAL_MEMORY","INITIAL_MEMORY"),nt(Le>=qt,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+Le+"! (TOTAL_STACK="+qt+")"),nt(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),nt(!u.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),nt(Le==262144,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var $e;function Ve(){var b=tn();nt((b&3)==0),Rt[b>>2]=34821223,Rt[b+4>>2]=2310721022,Rt[0]=1668509029}function oi(){if(!_t){var b=tn(),R=Rt[b>>2],U=Rt[b+4>>2];(R!=34821223||U!=2310721022)&&Te("Stack overflow! Stack cookie has been overwritten at 0x"+b.toString(16)+", expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+U.toString(16)+" 0x"+R.toString(16)),Rt[0]!==1668509029&&Te("Runtime error: The application has corrupted its heap memory area (address zero)!")}}(function(){var b=new Int16Array(1),R=new Int8Array(b.buffer);if(b[0]=25459,R[0]!==115||R[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})();var Tt=[],We=[],xe=[],mi=!1;function Ni(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Oa(u.preRun.shift());yr(Tt)}function dn(){nt(!mi),mi=!0,oi(),yr(We)}function On(){if(oi(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)Ua(u.postRun.shift());yr(xe)}function Oa(b){Tt.unshift(b)}function Ia(b){We.unshift(b)}function Ua(b){xe.unshift(b)}nt(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),nt(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),nt(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),nt(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var Hi=0,Yi=null,In=null,qe={};function Un(b){Hi++,u.monitorRunDependencies&&u.monitorRunDependencies(Hi),nt(!qe[b]),qe[b]=1,Yi===null&&typeof setInterval<"u"&&(Yi=setInterval(function(){if(_t){clearInterval(Yi),Yi=null;return}var R=!1;for(var U in qe)R||(R=!0,F("still waiting on run dependencies:")),F("dependency: "+U);R&&F("(end of list)")},1e4))}function La(b){if(Hi--,u.monitorRunDependencies&&u.monitorRunDependencies(Hi),nt(qe[b]),delete qe[b],Hi==0&&(Yi!==null&&(clearInterval(Yi),Yi=null),In)){var R=In;In=null,R()}}function Te(b){u.onAbort&&u.onAbort(b),b="Aborted("+b+")",F(b),_t=!0;var R=new WebAssembly.RuntimeError(b);throw d(R),R}var ge={error:function(){Te("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init:function(){ge.error()},createDataFile:function(){ge.error()},createPreloadedFile:function(){ge.error()},createLazyFile:function(){ge.error()},open:function(){ge.error()},mkdev:function(){ge.error()},registerDevice:function(){ge.error()},analyzePath:function(){ge.error()},loadFilesFromDB:function(){ge.error()},ErrnoError:function(){ge.error()}};u.FS_createDataFile=ge.createDataFile,u.FS_createPreloadedFile=ge.createPreloadedFile;var ai="data:application/octet-stream;base64,";function vo(b){return b.startsWith(ai)}function yo(b){return b.startsWith("file://")}function me(b,R){return function(){var U=b,Y=R;return Y=u.asm,nt(mi,"native function `"+U+"` called before runtime initialization"),Y[b]||nt(Y[b],"exported native function `"+U+"` not found"),Y[b].apply(null,arguments)}}var Oe;Oe="laz-perf.wasm",vo(Oe)||(Oe=S(Oe));function wo(b){try{if(b==Oe&&q)return new Uint8Array(q);throw"both async and sync fetching of the wasm failed"}catch(R){Te(R)}}function pn(){return!q&&M&&typeof fetch=="function"?fetch(Oe,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+Oe+"'";return b.arrayBuffer()}).catch(function(){return wo(Oe)}):Promise.resolve().then(function(){return wo(Oe)})}function Mo(){var b={env:Bt,wasi_snapshot_preview1:Bt};function R(rt,ft){var y=rt.exports;u.asm=y,K=u.asm.memory,nt(K,"memory not found in wasm exports"),Gt(K.buffer),$e=u.asm.__indirect_function_table,nt($e,"table not found in wasm exports"),Ia(u.asm.__wasm_call_ctors),La("wasm-instantiate")}Un("wasm-instantiate");var U=u;function Y(rt){nt(u===U,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),U=null,R(rt.instance)}function et(rt){return pn().then(function(ft){return WebAssembly.instantiate(ft,b)}).then(function(ft){return ft}).then(rt,function(ft){F("failed to asynchronously prepare wasm: "+ft),yo(Oe)&&F("warning: Loading from a file URI ("+Oe+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),Te(ft)})}function ht(){return!q&&typeof WebAssembly.instantiateStreaming=="function"&&!vo(Oe)&&typeof fetch=="function"?fetch(Oe,{credentials:"same-origin"}).then(function(rt){var ft=WebAssembly.instantiateStreaming(rt,b);return ft.then(Y,function(y){return F("wasm streaming compile failed: "+y),F("falling back to ArrayBuffer instantiation"),et(Y)})}):et(Y)}if(u.instantiateWasm)try{var dt=u.instantiateWasm(b,R);return dt}catch(rt){return F("Module.instantiateWasm callback failed with error: "+rt),!1}return ht().catch(d),{}}function yr(b){for(;b.length>0;)b.shift()(u)}function Ji(b){Ji.shown||(Ji.shown={}),Ji.shown[b]||(Ji.shown[b]=1,F(b))}function Va(b,R){nt(b.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),it.set(b,R)}function Wa(b){return Nt(b+24)+24}function Za(b){this.excPtr=b,this.ptr=b-24,this.set_type=function(R){Rt[this.ptr+4>>2]=R},this.get_type=function(){return Rt[this.ptr+4>>2]},this.set_destructor=function(R){Rt[this.ptr+8>>2]=R},this.get_destructor=function(){return Rt[this.ptr+8>>2]},this.set_refcount=function(R){bt[this.ptr>>2]=R},this.set_caught=function(R){R=R?1:0,it[this.ptr+12>>0]=R},this.get_caught=function(){return it[this.ptr+12>>0]!=0},this.set_rethrown=function(R){R=R?1:0,it[this.ptr+13>>0]=R},this.get_rethrown=function(){return it[this.ptr+13>>0]!=0},this.init=function(R,U){this.set_adjusted_ptr(0),this.set_type(R),this.set_destructor(U),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var R=bt[this.ptr>>2];bt[this.ptr>>2]=R+1},this.release_ref=function(){var R=bt[this.ptr>>2];return bt[this.ptr>>2]=R-1,nt(R>0),R===1},this.set_adjusted_ptr=function(R){Rt[this.ptr+16>>2]=R},this.get_adjusted_ptr=function(){return Rt[this.ptr+16>>2]},this.get_exception_ptr=function(){var R=Ci(this.get_type());if(R)return Rt[this.excPtr>>2];var U=this.get_adjusted_ptr();return U!==0?U:this.excPtr}}function ts(b,R,U){var Y=new Za(b);throw Y.init(R,U),b+" - Exception catching is disabled, this exception cannot be caught. Compile with -sNO_DISABLE_EXCEPTION_CATCHING or -sEXCEPTION_CATCHING_ALLOWED=[..] to catch."}function za(b,R,U,Y,et){}function wr(b){switch(b){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+b)}}function Ze(){for(var b=new Array(256),R=0;R<256;++R)b[R]=String.fromCharCode(R);$i=b}var $i=void 0;function ve(b){for(var R="",U=b;At[U];)R+=$i[At[U++]];return R}var gi={},_n={},Mr={},es=48,is=57;function Ln(b){if(b===void 0)return"_unknown";b=b.replace(/[^a-zA-Z0-9_]/g,"$");var R=b.charCodeAt(0);return R>=es&&R<=is?"_"+b:b}function Gi(b,R){return b=Ln(b),new Function("body","return function "+b+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(R)}function Kt(b,R){var U=Gi(R,function(Y){this.name=R,this.message=Y;var et=new Error(Y).stack;et!==void 0&&(this.stack=this.toString()+`
`+et.replace(/^Error(:[^\n]*)?\n/,""))});return U.prototype=Object.create(b.prototype),U.prototype.constructor=U,U.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},U}var qi=void 0;function Qt(b){throw new qi(b)}var An=void 0;function ze(b){throw new An(b)}function Vn(b,R,U){b.forEach(function(rt){Mr[rt]=R});function Y(rt){var ft=U(rt);ft.length!==b.length&&ze("Mismatched type converter count");for(var y=0;y<b.length;++y)vi(b[y],ft[y])}var et=new Array(R.length),ht=[],dt=0;R.forEach((rt,ft)=>{_n.hasOwnProperty(rt)?et[ft]=_n[rt]:(ht.push(rt),gi.hasOwnProperty(rt)||(gi[rt]=[]),gi[rt].push(()=>{et[ft]=_n[rt],++dt,dt===ht.length&&Y(et)}))}),ht.length===0&&Y(et)}function vi(b,R,U={}){if(!("argPackAdvance"in R))throw new TypeError("registerType registeredInstance requires argPackAdvance");var Y=R.name;if(b||Qt('type "'+Y+'" must have a positive integer typeid pointer'),_n.hasOwnProperty(b)){if(U.ignoreDuplicateRegistrations)return;Qt("Cannot register type '"+Y+"' twice")}if(_n[b]=R,delete Mr[b],gi.hasOwnProperty(b)){var et=gi[b];delete gi[b],et.forEach(ht=>ht())}}function Da(b,R,U,Y,et){var ht=wr(U);R=ve(R),vi(b,{name:R,fromWireType:function(dt){return!!dt},toWireType:function(dt,rt){return rt?Y:et},argPackAdvance:8,readValueFromPointer:function(dt){var rt;if(U===1)rt=it;else if(U===2)rt=kt;else if(U===4)rt=bt;else throw new TypeError("Unknown boolean type size: "+R);return this.fromWireType(rt[dt>>ht])},destructorFunction:null})}function ns(b){if(!(this instanceof yi)||!(b instanceof yi))return!1;for(var R=this.$$.ptrType.registeredClass,U=this.$$.ptr,Y=b.$$.ptrType.registeredClass,et=b.$$.ptr;R.baseClass;)U=R.upcast(U),R=R.baseClass;for(;Y.baseClass;)et=Y.upcast(et),Y=Y.baseClass;return R===Y&&U===et}function rs(b){return{count:b.count,deleteScheduled:b.deleteScheduled,preservePointerOnDelete:b.preservePointerOnDelete,ptr:b.ptr,ptrType:b.ptrType,smartPtr:b.smartPtr,smartPtrType:b.smartPtrType}}function Cr(b){function R(U){return U.$$.ptrType.registeredClass.name}Qt(R(b)+" instance already deleted")}var ss=!1;function os(b){}function Wn(b){b.smartPtr?b.smartPtrType.rawDestructor(b.smartPtr):b.ptrType.registeredClass.rawDestructor(b.ptr)}function Co(b){b.count.value-=1;var R=b.count.value===0;R&&Wn(b)}function So(b,R,U){if(R===U)return b;if(U.baseClass===void 0)return null;var Y=So(b,R,U.baseClass);return Y===null?null:U.downcast(Y)}var Eo={};function Zn(){return Object.keys(mn).length}function zn(){var b=[];for(var R in mn)mn.hasOwnProperty(R)&&b.push(mn[R]);return b}var Qi=[];function as(){for(;Qi.length;){var b=Qi.pop();b.$$.deleteScheduled=!1,b.delete()}}var Dn=void 0;function Bi(b){Dn=b,Qi.length&&Dn&&Dn(as)}function bo(){u.getInheritedInstanceCount=Zn,u.getLiveInheritedInstances=zn,u.flushPendingDeletes=as,u.setDelayFunction=Bi}var mn={};function Xa(b,R){for(R===void 0&&Qt("ptr should not be undefined");b.baseClass;)R=b.upcast(R),b=b.baseClass;return R}function ja(b,R){return R=Xa(b,R),mn[R]}function gn(b,R){(!R.ptrType||!R.ptr)&&ze("makeClassHandle requires ptr and ptrType");var U=!!R.smartPtrType,Y=!!R.smartPtr;return U!==Y&&ze("Both smartPtrType and smartPtr must be specified"),R.count={value:1},Xn(Object.create(b,{$$:{value:R}}))}function Ro(b){var R=this.getPointee(b);if(!R)return this.destructor(b),null;var U=ja(this.registeredClass,R);if(U!==void 0){if(U.$$.count.value===0)return U.$$.ptr=R,U.$$.smartPtr=b,U.clone();var Y=U.clone();return this.destructor(b),Y}function et(){return this.isSmartPointer?gn(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:R,smartPtrType:this,smartPtr:b}):gn(this.registeredClass.instancePrototype,{ptrType:this,ptr:b})}var ht=this.registeredClass.getActualType(R),dt=Eo[ht];if(!dt)return et.call(this);var rt;this.isConst?rt=dt.constPointerType:rt=dt.pointerType;var ft=So(R,this.registeredClass,rt.registeredClass);return ft===null?et.call(this):this.isSmartPointer?gn(rt.registeredClass.instancePrototype,{ptrType:rt,ptr:ft,smartPtrType:this,smartPtr:b}):gn(rt.registeredClass.instancePrototype,{ptrType:rt,ptr:ft})}function Xn(b){return typeof FinalizationRegistry>"u"?(Xn=R=>R,b):(ss=new FinalizationRegistry(R=>{console.warn(R.leakWarning.stack.replace(/^Error: /,"")),Co(R.$$)}),Xn=R=>{var U=R.$$,Y=!!U.smartPtr;if(Y){var et={$$:U},ht=U.ptrType.registeredClass;et.leakWarning=new Error("Embind found a leaked C++ instance "+ht.name+" <0x"+U.ptr.toString(16)+`>.
We'll free it automatically in this case, but this functionality is not reliable across various environments.
Make sure to invoke .delete() manually once you're done with the instance instead.
Originally allocated`),"captureStackTrace"in Error&&Error.captureStackTrace(et.leakWarning,Ro),ss.register(R,et,R)}return R},os=R=>ss.unregister(R),Xn(b))}function Ha(){if(this.$$.ptr||Cr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var b=Xn(Object.create(Object.getPrototypeOf(this),{$$:{value:rs(this.$$)}}));return b.$$.count.value+=1,b.$$.deleteScheduled=!1,b}function Sr(){this.$$.ptr||Cr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Qt("Object already scheduled for deletion"),os(this),Co(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ya(){return!this.$$.ptr}function Ja(){return this.$$.ptr||Cr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Qt("Object already scheduled for deletion"),Qi.push(this),Qi.length===1&&Dn&&Dn(as),this.$$.deleteScheduled=!0,this}function $a(){yi.prototype.isAliasOf=ns,yi.prototype.clone=Ha,yi.prototype.delete=Sr,yi.prototype.isDeleted=Ya,yi.prototype.deleteLater=Ja}function yi(){}function Po(b,R,U){if(b[R].overloadTable===void 0){var Y=b[R];b[R]=function(){return b[R].overloadTable.hasOwnProperty(arguments.length)||Qt("Function '"+U+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+b[R].overloadTable+")!"),b[R].overloadTable[arguments.length].apply(this,arguments)},b[R].overloadTable=[],b[R].overloadTable[Y.argCount]=Y}}function qa(b,R,U){u.hasOwnProperty(b)?(Qt("Cannot register public name '"+b+"' twice"),Po(u,b,b),u.hasOwnProperty(U)&&Qt("Cannot register multiple overloads of a function with the same number of arguments ("+U+")!"),u[b].overloadTable[U]=R):u[b]=R}function Qa(b,R,U,Y,et,ht,dt,rt){this.name=b,this.constructor=R,this.instancePrototype=U,this.rawDestructor=Y,this.baseClass=et,this.getActualType=ht,this.upcast=dt,this.downcast=rt,this.pureVirtualFunctions=[]}function ls(b,R,U){for(;R!==U;)R.upcast||Qt("Expected null or instance of "+U.name+", got an instance of "+R.name),b=R.upcast(b),R=R.baseClass;return b}function jn(b,R){if(R===null)return this.isReference&&Qt("null is not a valid "+this.name),0;R.$$||Qt('Cannot pass "'+wn(R)+'" as a '+this.name),R.$$.ptr||Qt("Cannot pass deleted object as a pointer of type "+this.name);var U=R.$$.ptrType.registeredClass,Y=ls(R.$$.ptr,U,this.registeredClass);return Y}function Ka(b,R){var U;if(R===null)return this.isReference&&Qt("null is not a valid "+this.name),this.isSmartPointer?(U=this.rawConstructor(),b!==null&&b.push(this.rawDestructor,U),U):0;R.$$||Qt('Cannot pass "'+wn(R)+'" as a '+this.name),R.$$.ptr||Qt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&R.$$.ptrType.isConst&&Qt("Cannot convert argument of type "+(R.$$.smartPtrType?R.$$.smartPtrType.name:R.$$.ptrType.name)+" to parameter type "+this.name);var Y=R.$$.ptrType.registeredClass;if(U=ls(R.$$.ptr,Y,this.registeredClass),this.isSmartPointer)switch(R.$$.smartPtr===void 0&&Qt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:R.$$.smartPtrType===this?U=R.$$.smartPtr:Qt("Cannot convert argument of type "+(R.$$.smartPtrType?R.$$.smartPtrType.name:R.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:U=R.$$.smartPtr;break;case 2:if(R.$$.smartPtrType===this)U=R.$$.smartPtr;else{var et=R.clone();U=this.rawShare(U,ps.toHandle(function(){et.delete()})),b!==null&&b.push(this.rawDestructor,U)}break;default:Qt("Unsupporting sharing policy")}return U}function t0(b,R){if(R===null)return this.isReference&&Qt("null is not a valid "+this.name),0;R.$$||Qt('Cannot pass "'+wn(R)+'" as a '+this.name),R.$$.ptr||Qt("Cannot pass deleted object as a pointer of type "+this.name),R.$$.ptrType.isConst&&Qt("Cannot convert argument of type "+R.$$.ptrType.name+" to parameter type "+this.name);var U=R.$$.ptrType.registeredClass,Y=ls(R.$$.ptr,U,this.registeredClass);return Y}function Ki(b){return this.fromWireType(bt[b>>2])}function e0(b){return this.rawGetPointee&&(b=this.rawGetPointee(b)),b}function i0(b){this.rawDestructor&&this.rawDestructor(b)}function wi(b){b!==null&&b.delete()}function n0(){Fe.prototype.getPointee=e0,Fe.prototype.destructor=i0,Fe.prototype.argPackAdvance=8,Fe.prototype.readValueFromPointer=Ki,Fe.prototype.deleteObject=wi,Fe.prototype.fromWireType=Ro}function Fe(b,R,U,Y,et,ht,dt,rt,ft,y,jt){this.name=b,this.registeredClass=R,this.isReference=U,this.isConst=Y,this.isSmartPointer=et,this.pointeeType=ht,this.sharingPolicy=dt,this.rawGetPointee=rt,this.rawConstructor=ft,this.rawShare=y,this.rawDestructor=jt,!et&&R.baseClass===void 0?Y?(this.toWireType=jn,this.destructorFunction=null):(this.toWireType=t0,this.destructorFunction=null):this.toWireType=Ka}function xo(b,R,U){u.hasOwnProperty(b)||ze("Replacing nonexistant public symbol"),u[b].overloadTable!==void 0&&U!==void 0||(u[b]=R,u[b].argCount=U)}function r0(b,R,U){nt("dynCall_"+b in u,"bad function pointer type - no table for sig '"+b+"'"),U&&U.length?nt(U.length===b.substring(1).replace(/j/g,"--").length):nt(b.length==1);var Y=u["dynCall_"+b];return U&&U.length?Y.apply(null,[R].concat(U)):Y.call(null,R)}var vn=[];function cs(b){var R=vn[b];return R||(b>=vn.length&&(vn.length=b+1),vn[b]=R=$e.get(b)),nt($e.get(b)==R,"JavaScript-side Wasm function table mirror is out of date!"),R}function To(b,R,U){if(b.includes("j"))return r0(b,R,U);nt(cs(R),"missing table entry in dynCall: "+R);var Y=cs(R).apply(null,U);return Y}function Fo(b,R){nt(b.includes("j")||b.includes("p"),"getDynCaller should only be called with i64 sigs");var U=[];return function(){return U.length=0,Object.assign(U,arguments),To(b,R,U)}}function yn(b,R){b=ve(b);function U(){return b.includes("j")?Fo(b,R):cs(R)}var Y=U();return typeof Y!="function"&&Qt("unknown function pointer with signature "+b+": "+R),Y}var ko=void 0;function s0(b){var R=Xt(b),U=ve(R);return Ot(R),U}function hs(b,R){var U=[],Y={};function et(ht){if(!Y[ht]&&!_n[ht]){if(Mr[ht]){Mr[ht].forEach(et);return}U.push(ht),Y[ht]=!0}}throw R.forEach(et),new ko(b+": "+U.map(s0).join([", "]))}function us(b,R,U,Y,et,ht,dt,rt,ft,y,jt,Wt,It){jt=ve(jt),ht=yn(et,ht),rt&&(rt=yn(dt,rt)),y&&(y=yn(ft,y)),It=yn(Wt,It);var pe=Ln(jt);qa(pe,function(){hs("Cannot construct "+jt+" due to unbound types",[Y])}),Vn([b,R,U],Y?[Y]:[],function(ye){ye=ye[0];var Se,Ie;Y?(Se=ye.registeredClass,Ie=Se.instancePrototype):Ie=yi.prototype;var ci=Gi(pe,function(){if(Object.getPrototypeOf(this)!==mt)throw new qi("Use 'new' to construct "+jt);if(Ft.constructor_body===void 0)throw new qi(jt+" has no accessible constructor");var Rr=Ft.constructor_body[arguments.length];if(Rr===void 0)throw new qi("Tried to invoke ctor of "+jt+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ft.constructor_body).toString()+") parameters instead!");return Rr.apply(this,arguments)}),mt=Object.create(Ie,{constructor:{value:ci}});ci.prototype=mt;var Ft=new Qa(jt,ci,mt,It,Se,ht,rt,y),ke=new Fe(jt,Ft,!0,!1,!1),we=new Fe(jt+"*",Ft,!1,!1,!1),nn=new Fe(jt+" const*",Ft,!1,!0,!1);return Eo[b]={pointerType:we,constPointerType:nn},xo(pe,ci),[ke,we,nn]})}function Qe(b,R){for(var U=[],Y=0;Y<b;Y++)U.push(Rt[R+Y*4>>2]);return U}function No(b){for(;b.length;){var R=b.pop(),U=b.pop();U(R)}}function o0(b,R){if(!(b instanceof Function))throw new TypeError("new_ called with constructor type "+typeof b+" which is not a function");var U=Gi(b.name||"unknownFunctionName",function(){});U.prototype=b.prototype;var Y=new U,et=b.apply(Y,R);return et instanceof Object?et:Y}function Go(b,R,U,Y,et){var ht=R.length;ht<2&&Qt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var dt=R[1]!==null&&U!==null,rt=!1,ft=1;ft<R.length;++ft)if(R[ft]!==null&&R[ft].destructorFunction===void 0){rt=!0;break}for(var y=R[0].name!=="void",jt="",Wt="",ft=0;ft<ht-2;++ft)jt+=(ft!==0?", ":"")+"arg"+ft,Wt+=(ft!==0?", ":"")+"arg"+ft+"Wired";var It="return function "+Ln(b)+"("+jt+`) {
if (arguments.length !== `+(ht-2)+`) {
throwBindingError('function `+b+" called with ' + arguments.length + ' arguments, expected "+(ht-2)+` args!');
}
`;rt&&(It+=`var destructors = [];
`);var pe=rt?"destructors":"null",ye=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Se=[Qt,Y,et,No,R[0],R[1]];dt&&(It+="var thisWired = classParam.toWireType("+pe+`, this);
`);for(var ft=0;ft<ht-2;++ft)It+="var arg"+ft+"Wired = argType"+ft+".toWireType("+pe+", arg"+ft+"); // "+R[ft+2].name+`
`,ye.push("argType"+ft),Se.push(R[ft+2]);if(dt&&(Wt="thisWired"+(Wt.length>0?", ":"")+Wt),It+=(y?"var rv = ":"")+"invoker(fn"+(Wt.length>0?", ":"")+Wt+`);
`,rt)It+=`runDestructors(destructors);
`;else for(var ft=dt?1:2;ft<R.length;++ft){var Ie=ft===1?"thisWired":"arg"+(ft-2)+"Wired";R[ft].destructorFunction!==null&&(It+=Ie+"_dtor("+Ie+"); // "+R[ft].name+`
`,ye.push(Ie+"_dtor"),Se.push(R[ft].destructorFunction))}y&&(It+=`var ret = retType.fromWireType(rv);
return ret;
`),It+=`}
`,ye.push(It);var ci=o0(Function,ye).apply(null,Se);return ci}function a0(b,R,U,Y,et,ht){nt(R>0);var dt=Qe(R,U);et=yn(Y,et),Vn([],[b],function(rt){rt=rt[0];var ft="constructor "+rt.name;if(rt.registeredClass.constructor_body===void 0&&(rt.registeredClass.constructor_body=[]),rt.registeredClass.constructor_body[R-1]!==void 0)throw new qi("Cannot register multiple constructors with identical number of parameters ("+(R-1)+") for class '"+rt.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return rt.registeredClass.constructor_body[R-1]=()=>{hs("Cannot construct "+rt.name+" due to unbound types",dt)},Vn([],dt,function(y){return y.splice(1,0,null),rt.registeredClass.constructor_body[R-1]=Go(ft,y,null,et,ht),[]}),[]})}function fs(b,R,U,Y,et,ht,dt,rt){var ft=Qe(U,Y);R=ve(R),ht=yn(et,ht),Vn([],[b],function(y){y=y[0];var jt=y.name+"."+R;R.startsWith("@@")&&(R=Symbol[R.substring(2)]),rt&&y.registeredClass.pureVirtualFunctions.push(R);function Wt(){hs("Cannot call "+jt+" due to unbound types",ft)}var It=y.registeredClass.instancePrototype,pe=It[R];return pe===void 0||pe.overloadTable===void 0&&pe.className!==y.name&&pe.argCount===U-2?(Wt.argCount=U-2,Wt.className=y.name,It[R]=Wt):(Po(It,R,jt),It[R].overloadTable[U-2]=Wt),Vn([],ft,function(ye){var Se=Go(jt,ye,y,ht,dt);return It[R].overloadTable===void 0?(Se.argCount=U-2,It[R]=Se):It[R].overloadTable[U-2]=Se,[]}),[]})}var ds=[],Ce=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function l0(b){b>4&&--Ce[b].refcount===0&&(Ce[b]=void 0,ds.push(b))}function c0(){for(var b=0,R=5;R<Ce.length;++R)Ce[R]!==void 0&&++b;return b}function h0(){for(var b=5;b<Ce.length;++b)if(Ce[b]!==void 0)return Ce[b];return null}function u0(){u.count_emval_handles=c0,u.get_first_emval=h0}var ps={toValue:b=>(b||Qt("Cannot use deleted val. handle = "+b),Ce[b].value),toHandle:b=>{switch(b){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var R=ds.length?ds.pop():Ce.length;return Ce[R]={refcount:1,value:b},R}}}};function f0(b,R){R=ve(R),vi(b,{name:R,fromWireType:function(U){var Y=ps.toValue(U);return l0(U),Y},toWireType:function(U,Y){return ps.toHandle(Y)},argPackAdvance:8,readValueFromPointer:Ki,destructorFunction:null})}function wn(b){if(b===null)return"null";var R=typeof b;return R==="object"||R==="array"||R==="function"?b.toString():""+b}function d0(b,R){switch(R){case 2:return function(U){return this.fromWireType(Ae[U>>2])};case 3:return function(U){return this.fromWireType(oe[U>>3])};default:throw new TypeError("Unknown float type: "+b)}}function p0(b,R,U){var Y=wr(U);R=ve(R),vi(b,{name:R,fromWireType:function(et){return et},toWireType:function(et,ht){if(typeof ht!="number"&&typeof ht!="boolean")throw new TypeError('Cannot convert "'+wn(ht)+'" to '+this.name);return ht},argPackAdvance:8,readValueFromPointer:d0(R,Y),destructorFunction:null})}function _0(b,R,U){switch(R){case 0:return U?function(et){return it[et]}:function(et){return At[et]};case 1:return U?function(et){return kt[et>>1]}:function(et){return Vt[et>>1]};case 2:return U?function(et){return bt[et>>2]}:function(et){return Rt[et>>2]};default:throw new TypeError("Unknown integer type: "+b)}}function A0(b,R,U,Y,et){R=ve(R),et===-1&&(et=4294967295);var ht=wr(U),dt=Wt=>Wt;if(Y===0){var rt=32-8*U;dt=Wt=>Wt<<rt>>>rt}var ft=R.includes("unsigned"),y=(Wt,It)=>{if(typeof Wt!="number"&&typeof Wt!="boolean")throw new TypeError('Cannot convert "'+wn(Wt)+'" to '+It);if(Wt<Y||Wt>et)throw new TypeError('Passing a number "'+wn(Wt)+'" from JS side to C/C++ side to an argument of type "'+R+'", which is outside the valid range ['+Y+", "+et+"]!")},jt;ft?jt=function(Wt,It){return y(It,this.name),It>>>0}:jt=function(Wt,It){return y(It,this.name),It},vi(b,{name:R,fromWireType:dt,toWireType:jt,argPackAdvance:8,readValueFromPointer:_0(R,ht,Y!==0),destructorFunction:null})}function m0(b,R,U){var Y=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],et=Y[R];function ht(dt){dt=dt>>2;var rt=Rt,ft=rt[dt],y=rt[dt+1];return new et(z,y,ft)}U=ve(U),vi(b,{name:U,fromWireType:ht,argPackAdvance:8,readValueFromPointer:ht},{ignoreDuplicateRegistrations:!0})}function g0(b,R){R=ve(R);var U=R==="std::string";vi(b,{name:R,fromWireType:function(Y){var et=Rt[Y>>2],ht=Y+4,dt;if(U)for(var rt=ht,ft=0;ft<=et;++ft){var y=ht+ft;if(ft==et||At[y]==0){var jt=y-rt,Wt=vt(rt,jt);dt===void 0?dt=Wt:(dt+="\0",dt+=Wt),rt=y+1}}else{for(var It=new Array(et),ft=0;ft<et;++ft)It[ft]=String.fromCharCode(At[ht+ft]);dt=It.join("")}return Ot(Y),dt},toWireType:function(Y,et){et instanceof ArrayBuffer&&(et=new Uint8Array(et));var ht,dt=typeof et=="string";dt||et instanceof Uint8Array||et instanceof Uint8ClampedArray||et instanceof Int8Array||Qt("Cannot pass non-string to std::string"),U&&dt?ht=$t(et):ht=et.length;var rt=Nt(4+ht+1),ft=rt+4;if(Rt[rt>>2]=ht,U&&dt)Yt(et,ft,ht+1);else if(dt)for(var y=0;y<ht;++y){var jt=et.charCodeAt(y);jt>255&&(Ot(ft),Qt("String has UTF-16 code units that do not fit in 8 bits")),At[ft+y]=jt}else for(var y=0;y<ht;++y)At[ft+y]=et[y];return Y!==null&&Y.push(Ot,rt),rt},argPackAdvance:8,readValueFromPointer:Ki,destructorFunction:function(Y){Ot(Y)}})}var Bo=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Oo(b,R){nt(b%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var U=b,Y=U>>1,et=Y+R/2;!(Y>=et)&&Vt[Y];)++Y;if(U=Y<<1,U-b>32&&Bo)return Bo.decode(At.subarray(b,U));for(var ht="",dt=0;!(dt>=R/2);++dt){var rt=kt[b+dt*2>>1];if(rt==0)break;ht+=String.fromCharCode(rt)}return ht}function v0(b,R,U){if(nt(R%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),nt(typeof U=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),U===void 0&&(U=2147483647),U<2)return 0;U-=2;for(var Y=R,et=U<b.length*2?U/2:b.length,ht=0;ht<et;++ht){var dt=b.charCodeAt(ht);kt[R>>1]=dt,R+=2}return kt[R>>1]=0,R-Y}function y0(b){return b.length*2}function Oi(b,R){nt(b%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var U=0,Y="";!(U>=R/4);){var et=bt[b+U*4>>2];if(et==0)break;if(++U,et>=65536){var ht=et-65536;Y+=String.fromCharCode(55296|ht>>10,56320|ht&1023)}else Y+=String.fromCharCode(et)}return Y}function w0(b,R,U){if(nt(R%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),nt(typeof U=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),U===void 0&&(U=2147483647),U<4)return 0;for(var Y=R,et=Y+U-4,ht=0;ht<b.length;++ht){var dt=b.charCodeAt(ht);if(dt>=55296&&dt<=57343){var rt=b.charCodeAt(++ht);dt=65536+((dt&1023)<<10)|rt&1023}if(bt[R>>2]=dt,R+=4,R+4>et)break}return bt[R>>2]=0,R-Y}function M0(b){for(var R=0,U=0;U<b.length;++U){var Y=b.charCodeAt(U);Y>=55296&&Y<=57343&&++U,R+=4}return R}function Jt(b,R,U){U=ve(U);var Y,et,ht,dt,rt;R===2?(Y=Oo,et=v0,dt=y0,ht=()=>Vt,rt=1):R===4&&(Y=Oi,et=w0,dt=M0,ht=()=>Rt,rt=2),vi(b,{name:U,fromWireType:function(ft){for(var y=Rt[ft>>2],jt=ht(),Wt,It=ft+4,pe=0;pe<=y;++pe){var ye=ft+4+pe*R;if(pe==y||jt[ye>>rt]==0){var Se=ye-It,Ie=Y(It,Se);Wt===void 0?Wt=Ie:(Wt+="\0",Wt+=Ie),It=ye+R}}return Ot(ft),Wt},toWireType:function(ft,y){typeof y!="string"&&Qt("Cannot pass non-string to C++ string type "+U);var jt=dt(y),Wt=Nt(4+jt+R);return Rt[Wt>>2]=jt>>rt,et(y,Wt+4,jt+R),ft!==null&&ft.push(Ot,Wt),Wt},argPackAdvance:8,readValueFromPointer:Ki,destructorFunction:function(ft){Ot(ft)}})}function Hn(b,R){R=ve(R),vi(b,{isVoid:!0,name:R,argPackAdvance:0,fromWireType:function(){},toWireType:function(U,Y){}})}function C0(){Te("native code called abort()")}function Ii(b,R,U){At.copyWithin(b,R,R+U)}function _s(){return 2147483648}function S0(b){try{return K.grow(b-z.byteLength+65535>>>16),Gt(K.buffer),1}catch(R){F("emscripten_realloc_buffer: Attempted to grow heap from "+z.byteLength+" bytes to "+b+" bytes, but got error: "+R)}}function E0(b){var R=At.length;b=b>>>0,nt(b>R);var U=_s();if(b>U)return F("Cannot enlarge memory, asked to go up to "+b+" bytes, but the limit is "+U+" bytes!"),!1;let Y=(ft,y)=>ft+(y-ft%y)%y;for(var et=1;et<=4;et*=2){var ht=R*(1+.2/et);ht=Math.min(ht,b+100663296);var dt=Math.min(U,Y(Math.max(b,ht),65536)),rt=S0(dt);if(rt)return!0}return F("Failed to grow the heap from "+R+" bytes to "+dt+" bytes, not enough memory!"),!1}var Yn={};function Io(){return w||"./this.program"}function Mn(){if(!Mn.strings){var b=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",R={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:b,_:Io()};for(var U in Yn)Yn[U]===void 0?delete R[U]:R[U]=Yn[U];var Y=[];for(var U in R)Y.push(U+"="+R[U]);Mn.strings=Y}return Mn.strings}function Uo(b,R,U){for(var Y=0;Y<b.length;++Y)nt(b.charCodeAt(Y)===(b.charCodeAt(Y)&255)),it[R++>>0]=b.charCodeAt(Y);it[R>>0]=0}function Er(b,R){var U=0;return Mn().forEach(function(Y,et){var ht=R+U;Rt[b+et*4>>2]=ht,Uo(Y,ht),U+=Y.length+1}),0}function b0(b,R){var U=Mn();Rt[b>>2]=U.length;var Y=0;return U.forEach(function(et){Y+=et.length+1}),Rt[R>>2]=Y,0}function As(b){Te("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")}function k(b,R,U,Y,et){return 70}var T=[null,[],[]];function V(b,R){var U=T[b];nt(U),R===0||R===10?((b===1?x:F)(st(U,0)),U.length=0):U.push(R)}function m(b,R,U,Y){for(var et=0,ht=0;ht<U;ht++){var dt=Rt[R>>2],rt=Rt[R+4>>2];R+=8;for(var ft=0;ft<rt;ft++)V(b,At[dt+ft]);et+=rt}return Rt[Y>>2]=et,0}function J(b){return b%4===0&&(b%100!==0||b%400===0)}function e(b,R){for(var U=0,Y=0;Y<=R;U+=b[Y++]);return U}var O=[31,29,31,30,31,30,31,31,30,31,30,31],ot=[31,28,31,30,31,30,31,31,30,31,30,31];function ct(b,R){for(var U=new Date(b.getTime());R>0;){var Y=J(U.getFullYear()),et=U.getMonth(),ht=(Y?O:ot)[et];if(R>ht-U.getDate())R-=ht-U.getDate()+1,U.setDate(1),et<11?U.setMonth(et+1):(U.setMonth(0),U.setFullYear(U.getFullYear()+1));else return U.setDate(U.getDate()+R),U}return U}function X(b,R,U){var Y=$t(b)+1,et=new Array(Y);return Pt(b,et,0,et.length),et}function Mt(b,R,U,Y){var et=bt[Y+40>>2],ht={tm_sec:bt[Y>>2],tm_min:bt[Y+4>>2],tm_hour:bt[Y+8>>2],tm_mday:bt[Y+12>>2],tm_mon:bt[Y+16>>2],tm_year:bt[Y+20>>2],tm_wday:bt[Y+24>>2],tm_yday:bt[Y+28>>2],tm_isdst:bt[Y+32>>2],tm_gmtoff:bt[Y+36>>2],tm_zone:et?vt(et):""},dt=vt(U),rt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ft in rt)dt=dt.replace(new RegExp(ft,"g"),rt[ft]);var y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],jt=["January","February","March","April","May","June","July","August","September","October","November","December"];function Wt(mt,Ft,ke){for(var we=typeof mt=="number"?mt.toString():mt||"";we.length<Ft;)we=ke[0]+we;return we}function It(mt,Ft){return Wt(mt,Ft,"0")}function pe(mt,Ft){function ke(nn){return nn<0?-1:nn>0?1:0}var we;return(we=ke(mt.getFullYear()-Ft.getFullYear()))===0&&(we=ke(mt.getMonth()-Ft.getMonth()))===0&&(we=ke(mt.getDate()-Ft.getDate())),we}function ye(mt){switch(mt.getDay()){case 0:return new Date(mt.getFullYear()-1,11,29);case 1:return mt;case 2:return new Date(mt.getFullYear(),0,3);case 3:return new Date(mt.getFullYear(),0,2);case 4:return new Date(mt.getFullYear(),0,1);case 5:return new Date(mt.getFullYear()-1,11,31);case 6:return new Date(mt.getFullYear()-1,11,30)}}function Se(mt){var Ft=ct(new Date(mt.tm_year+1900,0,1),mt.tm_yday),ke=new Date(Ft.getFullYear(),0,4),we=new Date(Ft.getFullYear()+1,0,4),nn=ye(ke),Rr=ye(we);return pe(nn,Ft)<=0?pe(Rr,Ft)<=0?Ft.getFullYear()+1:Ft.getFullYear():Ft.getFullYear()-1}var Ie={"%a":function(mt){return y[mt.tm_wday].substring(0,3)},"%A":function(mt){return y[mt.tm_wday]},"%b":function(mt){return jt[mt.tm_mon].substring(0,3)},"%B":function(mt){return jt[mt.tm_mon]},"%C":function(mt){var Ft=mt.tm_year+1900;return It(Ft/100|0,2)},"%d":function(mt){return It(mt.tm_mday,2)},"%e":function(mt){return Wt(mt.tm_mday,2," ")},"%g":function(mt){return Se(mt).toString().substring(2)},"%G":function(mt){return Se(mt)},"%H":function(mt){return It(mt.tm_hour,2)},"%I":function(mt){var Ft=mt.tm_hour;return Ft==0?Ft=12:Ft>12&&(Ft-=12),It(Ft,2)},"%j":function(mt){return It(mt.tm_mday+e(J(mt.tm_year+1900)?O:ot,mt.tm_mon-1),3)},"%m":function(mt){return It(mt.tm_mon+1,2)},"%M":function(mt){return It(mt.tm_min,2)},"%n":function(){return`
`},"%p":function(mt){return mt.tm_hour>=0&&mt.tm_hour<12?"AM":"PM"},"%S":function(mt){return It(mt.tm_sec,2)},"%t":function(){return"	"},"%u":function(mt){return mt.tm_wday||7},"%U":function(mt){var Ft=mt.tm_yday+7-mt.tm_wday;return It(Math.floor(Ft/7),2)},"%V":function(mt){var Ft=Math.floor((mt.tm_yday+7-(mt.tm_wday+6)%7)/7);if((mt.tm_wday+371-mt.tm_yday-2)%7<=2&&Ft++,Ft){if(Ft==53){var we=(mt.tm_wday+371-mt.tm_yday)%7;we!=4&&(we!=3||!J(mt.tm_year))&&(Ft=1)}}else{Ft=52;var ke=(mt.tm_wday+7-mt.tm_yday-1)%7;(ke==4||ke==5&&J(mt.tm_year%400-1))&&Ft++}return It(Ft,2)},"%w":function(mt){return mt.tm_wday},"%W":function(mt){var Ft=mt.tm_yday+7-(mt.tm_wday+6)%7;return It(Math.floor(Ft/7),2)},"%y":function(mt){return(mt.tm_year+1900).toString().substring(2)},"%Y":function(mt){return mt.tm_year+1900},"%z":function(mt){var Ft=mt.tm_gmtoff,ke=Ft>=0;return Ft=Math.abs(Ft)/60,Ft=Ft/60*100+Ft%60,(ke?"+":"-")+("0000"+Ft).slice(-4)},"%Z":function(mt){return mt.tm_zone},"%%":function(){return"%"}};dt=dt.replace(/%%/g,"\0\0");for(var ft in Ie)dt.includes(ft)&&(dt=dt.replace(new RegExp(ft,"g"),Ie[ft](ht)));dt=dt.replace(/\0\0/g,"%");var ci=X(dt);return ci.length>R?0:(Va(ci,b),ci.length-1)}function zt(b,R,U,Y){return Mt(b,R,U,Y)}Ze(),qi=u.BindingError=Kt(Error,"BindingError"),An=u.InternalError=Kt(Error,"InternalError"),$a(),bo(),n0(),ko=u.UnboundTypeError=Kt(Error,"UnboundTypeError"),u0();function Dt(){Z("fetchSettings")}var Bt={__cxa_allocate_exception:Wa,__cxa_throw:ts,_embind_register_bigint:za,_embind_register_bool:Da,_embind_register_class:us,_embind_register_class_constructor:a0,_embind_register_class_function:fs,_embind_register_emval:f0,_embind_register_float:p0,_embind_register_integer:A0,_embind_register_memory_view:m0,_embind_register_std_string:g0,_embind_register_std_wstring:Jt,_embind_register_void:Hn,abort:C0,emscripten_memcpy_big:Ii,emscripten_resize_heap:E0,environ_get:Er,environ_sizes_get:b0,fd_close:As,fd_seek:k,fd_write:m,strftime_l:zt};Mo(),u.___wasm_call_ctors=me("__wasm_call_ctors");var Nt=u._malloc=me("malloc"),Ot=u._free=me("free"),Xt=u.___getTypeName=me("__getTypeName");u.__embind_initialize_bindings=me("_embind_initialize_bindings"),u.___errno_location=me("__errno_location"),u._fflush=me("fflush");var Mi=u._emscripten_stack_init=function(){return(Mi=u._emscripten_stack_init=u.asm.emscripten_stack_init).apply(null,arguments)};u._emscripten_stack_get_free=function(){return(u._emscripten_stack_get_free=u.asm.emscripten_stack_get_free).apply(null,arguments)},u._emscripten_stack_get_base=function(){return(u._emscripten_stack_get_base=u.asm.emscripten_stack_get_base).apply(null,arguments)};var tn=u._emscripten_stack_get_end=function(){return(tn=u._emscripten_stack_get_end=u.asm.emscripten_stack_get_end).apply(null,arguments)};u.stackSave=me("stackSave"),u.stackRestore=me("stackRestore"),u.stackAlloc=me("stackAlloc");var Ci=u.___cxa_is_pointer_type=me("__cxa_is_pointer_type");u.dynCall_viijii=me("dynCall_viijii"),u.dynCall_ji=me("dynCall_ji"),u.dynCall_jiji=me("dynCall_jiji"),u.dynCall_iiiiij=me("dynCall_iiiiij"),u.dynCall_iiiiijj=me("dynCall_iiiiijj"),u.dynCall_iiiiiijj=me("dynCall_iiiiiijj");var br=["run","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createPreloadedFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","getLEB","getFunctionTables","alignFunctionTables","registerFunctions","prettyPrint","getCompilerSetting","print","printErr","callMain","abort","keepRuntimeAlive","wasmMemory","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","ptrToString","zeroMemory","stringToNewUTF8","exitJS","getHeapMax","emscripten_realloc_buffer","ENV","ERRNO_CODES","ERRNO_MESSAGES","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","DNS","getHostByName","Protocols","Sockets","getRandomDevice","warnOnce","traverseStack","UNWIND_CACHE","convertPCtoSourceLocation","readAsmConstArgsArray","readAsmConstArgs","mainThreadEM_ASM","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","setValue","getValue","PATH","PATH_FS","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeArrayToMemory","writeAsciiToMemory","SYSCALLS","getSocketFromFD","getSocketAddress","JSEvents","registerKeyEventCallback","specialHTMLTargets","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","currentFullscreenStrategy","restoreOldWindowedStyle","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","ExitStatus","getEnvStrings","checkWasiClock","flush_NO_FILESYSTEM","dlopenMissingError","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","exception_addRef","exception_decRef","Browser","setMainLoop","wget","FS","MEMFS","TTY","PIPEFS","SOCKFS","_setNetworkCallback","tempFixedLengthArray","miniTempWebGLFloatBuffers","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","GL","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","AL","SDL_unicode","SDL_ttfContext","SDL_audio","SDL","SDL_gfx","GLUT","EGL","GLFW_Window","GLFW","GLEW","IDBStore","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","InternalError","BindingError","UnboundTypeError","PureVirtualError","init_embind","throwInternalError","throwBindingError","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","embindRepr","registeredInstances","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","registeredTypes","awaitingDependencies","typeDependencies","registeredPointers","registerType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","getTypeName","heap32VectorToArray","requireRegisteredType","getShiftFromSize","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","runDestructors","new_","craftInvokerFunction","embind__requireFunction","tupleRegistrations","structRegistrations","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_getPointee","RegisteredPointer_destructor","RegisteredPointer_deleteObject","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","ClassHandle_isAliasOf","throwInstanceAlreadyDeleted","ClassHandle_clone","ClassHandle_delete","deletionQueue","ClassHandle_isDeleted","ClassHandle_deleteLater","flushPendingDeletes","delayFunction","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","emval_handle_array","emval_free_list","emval_symbols","init_emval","count_emval_handles","get_first_emval","getStringOrSymbol","Emval","emval_newers","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_methodCallers","emval_addMethodCaller","emval_registeredMethods"];br.forEach(tt);var Si=["ptrToString","zeroMemory","stringToNewUTF8","exitJS","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","getRandomDevice","traverseStack","convertPCtoSourceLocation","readAsmConstArgs","mainThreadEM_ASM","jstoi_q","jstoi_s","listenOnce","autoResumeAudioContext","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","reallyNegative","unSign","strLen","reSign","formatString","getSocketFromFD","getSocketAddress","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","checkWasiClock","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","exception_addRef","exception_decRef","setMainLoop","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","runAndAbortIfError","registerInheritedInstance","unregisterInheritedInstance","requireRegisteredType","enumReadValueFromPointer","validateThis","getStringOrSymbol","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_addMethodCaller"];Si.forEach(D);var en;In=function b(){en||li(),en||(In=b)};function Jn(){Mi(),Ve()}function li(b){if(Hi>0||(Jn(),Ni(),Hi>0))return;function R(){en||(en=!0,u.calledRun=!0,!_t&&(dn(),p(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),nt(!u._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),On()))}u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),R()},1)):R(),oi()}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();return li(),c.ready})})();r.exports=o})(pl)),pl.exports}var Iu;function Yf(){if(Iu)return xi;Iu=1;var r=xi&&xi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(xi,"__esModule",{value:!0}),xi.LazPerf=xi.create=xi.createLazPerf=void 0;const n=r(z2());return xi.createLazPerf=n.default,xi.create=n.default,xi.LazPerf={create:n.default},xi}var Uu;function D2(){if(Uu)return hn;Uu=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.decompressFile=hn.decompressChunk=hn.PointData=void 0;const r=Yf(),n=Hf();hn.PointData={createLazPerf:r.createLazPerf,decompressChunk:c,decompressFile:u};let o;async function l(p){return p||(o||(o=(0,r.createLazPerf)()),o)}async function c(p,{pointCount:d,pointDataRecordFormat:g,pointDataRecordLength:w},M){const E=await l(M),S=new Uint8Array(d*w),P=E._malloc(p.byteLength),x=E._malloc(w),F=new E.ChunkDecoder;try{E.HEAPU8.set(new Uint8Array(p.buffer,p.byteOffset,p.byteLength),P),F.open(g,w,P);for(let G=0;G<d;++G)F.getPoint(x),S.set(new Uint8Array(E.HEAPU8.buffer,x,w),G*w)}finally{E._free(P),E._free(x),F.delete()}return S}hn.decompressChunk=c;async function u(p,d){const g=await l(d),w=n.Header.parse(p),{pointCount:M,pointDataRecordLength:E}=w,S=new Uint8Array(M*E),P=g._malloc(p.byteLength),x=g._malloc(E),F=new g.LASZip;try{g.HEAPU8.set(new Uint8Array(p.buffer,p.byteOffset,p.byteLength),P),F.open(P,p.byteLength);for(let G=0;G<M;++G)F.getPoint(x),S.set(new Uint8Array(g.HEAPU8.buffer,x,E),G*E)}finally{F.delete()}return S}return hn.decompressFile=u,hn}var js={},Lu;function X2(){if(Lu)return js;Lu=1,Object.defineProperty(js,"__esModule",{value:!0}),js.View=void 0;const r=ki(),n=Xf(),o=jf();js.View={create:l};function l(c,u,p=[],d){let g=o.Extractor.create(u,p);if(d){const x=new Set([...d]);g=Object.entries(g).reduce((F,[G,Z])=>(x.has(G)&&(F[G]=Z),F),{})}const w=n.Dimensions.create(g,p),M=r.Binary.toDataView(c),E=u.pointDataRecordLength;if(M.byteLength%E!==0)throw new Error(`Invalid buffer length (${M.byteLength}) for point length ${E}`);const S=M.byteLength/u.pointDataRecordLength;function P(x){const F=g[x];if(!F)throw new Error(`No extractor for dimension: ${x}`);return function(G){if(G>=S)throw new RangeError(`View index (${G}) out of range: ${S}`);return F(M,G)}}return{pointCount:S,dimensions:w,getter:P}}return js}var Hs={},Vu;function j2(){if(Vu)return Hs;Vu=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.Vlr=void 0;const r=ki(),n=Dl();Hs.Vlr={walk:u,parse:p,find:o,at:l,fetch:c};function o(M,E,S){return M.find(P=>P.userId===E&&P.recordId===S)}function l(M,E,S){const P=o(M,E,S);if(!P)throw new Error(`VLR not found: ${E}/${S}`);return P}function c(M,{contentOffset:E,contentLength:S}){return S===0?new Uint8Array:r.Getter.create(M)(E,E+S)}async function u(M,E){const S=r.Getter.create(M),P=await w({get:S,startOffset:E.headerLength,count:E.vlrCount,isExtended:!1}),x=await w({get:S,startOffset:E.evlrOffset,count:E.evlrCount,isExtended:!0});return[...P,...x]}function p(M,E){return(E?g:d)(M)}function d(M){const E=r.Binary.toDataView(M);if(E.byteLength!==n.vlrHeaderLength)throw new Error(`Invalid VLR header length (must be ${n.vlrHeaderLength}): ${E.byteLength}`);return{userId:r.Binary.toCString(M.slice(2,18)),recordId:E.getUint16(18,!0),contentLength:E.getUint16(20,!0),description:r.Binary.toCString(M.slice(22,54)),isExtended:!1}}function g(M){const E=r.Binary.toDataView(M);if(E.byteLength!==n.evlrHeaderLength)throw new Error(`Invalid EVLR header length (must be ${n.evlrHeaderLength}): ${E.byteLength}`);return{userId:r.Binary.toCString(M.slice(2,18)),recordId:E.getUint16(18,!0),contentLength:(0,r.parseBigInt)((0,r.getBigUint64)(E,20,!0)),description:r.Binary.toCString(M.slice(28,60)),isExtended:!0}}async function w({get:M,startOffset:E,count:S,isExtended:P}){const x=[];let F=E;const G=P?n.evlrHeaderLength:n.vlrHeaderLength;for(let Z=0;Z<S;++Z){const W=G?await M(F,F+G):new Uint8Array,{userId:D,recordId:tt,contentLength:q,description:K}=p(W,P);x.push({userId:D,recordId:tt,contentOffset:F+G,contentLength:q,description:K,isExtended:P}),F+=G+q}return x}return Hs}var Wu;function Jf(){return Wu||(Wu=1,(function(r){var n=an&&an.__createBinding||(Object.create?(function(E,S,P,x){x===void 0&&(x=P);var F=Object.getOwnPropertyDescriptor(S,P);(!F||("get"in F?!S.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(E,x,F)}):(function(E,S,P,x){x===void 0&&(x=P),E[x]=S[P]})),o=an&&an.__setModuleDefault||(Object.create?(function(E,S){Object.defineProperty(E,"default",{enumerable:!0,value:S})}):function(E,S){E.default=S}),l=an&&an.__importStar||function(E){if(E&&E.__esModule)return E;var S={};if(E!=null)for(var P in E)P!=="default"&&Object.prototype.hasOwnProperty.call(E,P)&&n(S,E,P);return o(S,E),S};Object.defineProperty(r,"__esModule",{value:!0}),r.Vlr=r.View=r.PointData=r.Header=r.Extractor=r.ExtraBytes=r.Dimensions=r.Constants=void 0,r.Constants=l(Dl());var c=Xf();Object.defineProperty(r,"Dimensions",{enumerable:!0,get:function(){return c.Dimensions}});var u=Df();Object.defineProperty(r,"ExtraBytes",{enumerable:!0,get:function(){return u.ExtraBytes}});var p=jf();Object.defineProperty(r,"Extractor",{enumerable:!0,get:function(){return p.Extractor}});var d=Hf();Object.defineProperty(r,"Header",{enumerable:!0,get:function(){return d.Header}});var g=D2();Object.defineProperty(r,"PointData",{enumerable:!0,get:function(){return g.PointData}});var w=X2();Object.defineProperty(r,"View",{enumerable:!0,get:function(){return w.View}});var M=j2();Object.defineProperty(r,"Vlr",{enumerable:!0,get:function(){return M.Vlr}})})(an)),an}var Ys={},Zu;function $f(){if(Zu)return Ys;Zu=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.Hierarchy=void 0;const r=ki(),n=zl();Ys.Hierarchy={parse:o,load:l};function o(c){const u=r.Binary.toDataView(c);if(u.byteLength%n.hierarchyItemLength!==0)throw new Error(`Invalid hierarchy page length: ${u.byteLength}`);const p={},d={};for(let g=0;g<u.byteLength;g+=n.hierarchyItemLength){const w=u.getInt32(g+0,!0),M=u.getInt32(g+4,!0),E=u.getInt32(g+8,!0),S=u.getInt32(g+12,!0),P=(0,r.parseBigInt)((0,r.getBigUint64)(u,g+16,!0)),x=u.getInt32(g+24,!0),F=u.getInt32(g+28,!0),G=r.Key.toString([w,M,E,S]);if(F<-1)throw new Error(`Invalid hierarchy point count at key: ${G}`);F===-1?d[G]={pageOffset:P,pageLength:x}:p[G]={pointCount:F,pointDataOffset:P,pointDataLength:x}}return{nodes:p,pages:d}}async function l(c,u){const p=r.Getter.create(c);return o(await p(u.pageOffset,u.pageOffset+u.pageLength))}return Ys}var Js={},zu;function qf(){if(zu)return Js;zu=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.Info=void 0;const r=ki(),n=zl();Js.Info={parse:o};function o(l){const c=r.Binary.toDataView(l);if(c.byteLength!==n.infoLength)throw new Error(`Invalid COPC info VLR length (should be ${n.infoLength}): ${c.byteLength}`);const u=[c.getFloat64(0,!0),c.getFloat64(8,!0),c.getFloat64(16,!0)],p=c.getFloat64(24,!0);return{cube:[u[0]-p,u[1]-p,u[2]-p,u[0]+p,u[1]+p,u[2]+p],spacing:c.getFloat64(32,!0),rootHierarchyPage:{pageOffset:(0,r.parseBigInt)((0,r.getBigUint64)(c,40,!0)),pageLength:(0,r.parseBigInt)((0,r.getBigUint64)(c,48,!0))},gpsTimeRange:[c.getFloat64(56,!0),c.getFloat64(64,!0)]}}return Js}var Du;function H2(){if(Du)return Pi;Du=1;var r=Pi&&Pi.__createBinding||(Object.create?(function(S,P,x,F){F===void 0&&(F=x);var G=Object.getOwnPropertyDescriptor(P,x);(!G||("get"in G?!P.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return P[x]}}),Object.defineProperty(S,F,G)}):(function(S,P,x,F){F===void 0&&(F=x),S[F]=P[x]})),n=Pi&&Pi.__setModuleDefault||(Object.create?(function(S,P){Object.defineProperty(S,"default",{enumerable:!0,value:P})}):function(S,P){S.default=P}),o=Pi&&Pi.__importStar||function(S){if(S&&S.__esModule)return S;var P={};if(S!=null)for(var x in S)x!=="default"&&Object.prototype.hasOwnProperty.call(S,x)&&r(P,S,x);return n(P,S),P};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Copc=void 0;const l=o(Jf()),c=ki(),u=$f(),p=qf();Pi.Copc={create:d,loadHierarchyPage:g,loadCompressedPointDataBuffer:w,loadPointDataBuffer:M,loadPointDataView:E};async function d(S){const P=c.Getter.create(S),x=65536,F=P(0,x);async function G(ut,st){return st>=x?P(ut,st):(await F).slice(ut,st)}const Z=l.Header.parse(await G(0,l.Constants.minHeaderLength)),W=await l.Vlr.walk(G,Z),D=l.Vlr.find(W,"copc",1);if(!D)throw new Error("COPC info VLR is required");const tt=p.Info.parse(await l.Vlr.fetch(G,D));let q;const K=l.Vlr.find(W,"LASF_Projection",2112);K&&K.contentLength&&(q=c.Binary.toCString(await l.Vlr.fetch(G,K)),q===""&&(q=void 0));let _t=[];const nt=l.Vlr.find(W,"LASF_Spec",4);return nt&&(_t=l.ExtraBytes.parse(await l.Vlr.fetch(G,nt))),{header:Z,vlrs:W,info:tt,wkt:q,eb:_t}}async function g(S,P){const x=c.Getter.create(S);return u.Hierarchy.load(x,P)}async function w(S,{pointDataOffset:P,pointDataLength:x}){return c.Getter.create(S)(P,P+x)}async function M(S,{pointDataRecordFormat:P,pointDataRecordLength:x},F,G){const Z=await w(S,F),{pointCount:W}=F;return l.PointData.decompressChunk(Z,{pointCount:W,pointDataRecordFormat:P,pointDataRecordLength:x},G)}async function E(S,P,x,{lazPerf:F,include:G}={}){const Z=await M(S,P.header,x,F);return l.View.create(Z,P.header,P.eb,G)}return Pi}var Xu;function Y2(){return Xu||(Xu=1,(function(r){var n=on&&on.__createBinding||(Object.create?(function(d,g,w,M){M===void 0&&(M=w);var E=Object.getOwnPropertyDescriptor(g,w);(!E||("get"in E?!g.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return g[w]}}),Object.defineProperty(d,M,E)}):(function(d,g,w,M){M===void 0&&(M=w),d[M]=g[w]})),o=on&&on.__setModuleDefault||(Object.create?(function(d,g){Object.defineProperty(d,"default",{enumerable:!0,value:g})}):function(d,g){d.default=g}),l=on&&on.__importStar||function(d){if(d&&d.__esModule)return d;var g={};if(d!=null)for(var w in d)w!=="default"&&Object.prototype.hasOwnProperty.call(d,w)&&n(g,d,w);return o(g,d),g};Object.defineProperty(r,"__esModule",{value:!0}),r.Info=r.Hierarchy=r.Copc=r.Constants=void 0,r.Constants=l(zl());var c=H2();Object.defineProperty(r,"Copc",{enumerable:!0,get:function(){return c.Copc}});var u=$f();Object.defineProperty(r,"Hierarchy",{enumerable:!0,get:function(){return u.Hierarchy}});var p=qf();Object.defineProperty(r,"Info",{enumerable:!0,get:function(){return p.Info}})})(on)),on}var ju;function J2(){return ju||(ju=1,(function(r){var n=Ri&&Ri.__createBinding||(Object.create?(function(u,p,d,g){g===void 0&&(g=d);var w=Object.getOwnPropertyDescriptor(p,d);(!w||("get"in w?!p.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return p[d]}}),Object.defineProperty(u,g,w)}):(function(u,p,d,g){g===void 0&&(g=d),u[g]=p[d]})),o=Ri&&Ri.__setModuleDefault||(Object.create?(function(u,p){Object.defineProperty(u,"default",{enumerable:!0,value:p})}):function(u,p){u.default=p}),l=Ri&&Ri.__importStar||function(u){if(u&&u.__esModule)return u;var p={};if(u!=null)for(var d in u)d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)&&n(p,u,d);return o(p,u),p},c=Ri&&Ri.__exportStar||function(u,p){for(var d in u)d!=="default"&&!Object.prototype.hasOwnProperty.call(p,d)&&n(p,u,d)};Object.defineProperty(r,"__esModule",{value:!0}),r.Las=r.Ept=void 0,r.Ept=l(x2()),c(Y2(),r),r.Las=l(Jf()),c(ki(),r)})(Ri)),Ri}var je=J2(),Qf=Yf();function Hu(r,n){if(!r)throw new Error(n||"loader assertion failed.")}const Kf=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),Yu=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Yu&&parseFloat(Yu[1]);const _l=globalThis,fa=globalThis.process||{};function $2(r){var n,o;if(typeof window<"u"&&((n=window.process)==null?void 0:n.type)==="renderer"||typeof process<"u"&&((o=process.versions)!=null&&o.electron))return!0;const c=typeof navigator<"u"&&navigator.userAgent;return!!(c&&c.indexOf("Electron")>=0)}function Xl(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||$2()}const td="4.1.0";function q2(r){try{const n=window[r],o="__storage_test__";return n.setItem(o,o),n.removeItem(o),n}catch{return null}}class Q2{constructor(n,o,l="sessionStorage"){this.storage=q2(l),this.id=n,this.config=o,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(n){if(Object.assign(this.config,n),this.storage){const o=JSON.stringify(this.config);this.storage.setItem(this.id,o)}}_loadConfiguration(){let n={};if(this.storage){const o=this.storage.getItem(this.id);n=o?JSON.parse(o):{}}return Object.assign(this.config,n),this}}function K2(r){let n;return r<10?n=`${r.toFixed(2)}ms`:r<100?n=`${r.toFixed(1)}ms`:r<1e3?n=`${r.toFixed(0)}ms`:n=`${(r/1e3).toFixed(2)}s`,n}function t5(r,n=8){const o=Math.max(n-r.length,0);return`${" ".repeat(o)}${r}`}var Ca;(function(r){r[r.BLACK=30]="BLACK",r[r.RED=31]="RED",r[r.GREEN=32]="GREEN",r[r.YELLOW=33]="YELLOW",r[r.BLUE=34]="BLUE",r[r.MAGENTA=35]="MAGENTA",r[r.CYAN=36]="CYAN",r[r.WHITE=37]="WHITE",r[r.BRIGHT_BLACK=90]="BRIGHT_BLACK",r[r.BRIGHT_RED=91]="BRIGHT_RED",r[r.BRIGHT_GREEN=92]="BRIGHT_GREEN",r[r.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",r[r.BRIGHT_BLUE=94]="BRIGHT_BLUE",r[r.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",r[r.BRIGHT_CYAN=96]="BRIGHT_CYAN",r[r.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Ca||(Ca={}));const e5=10;function Ju(r){return typeof r!="string"?r:(r=r.toUpperCase(),Ca[r]||Ca.WHITE)}function i5(r,n,o){return!Xl&&typeof r=="string"&&(n&&(r=`\x1B[${Ju(n)}m${r}\x1B[39m`),o&&(r=`\x1B[${Ju(o)+e5}m${r}\x1B[49m`)),r}function n5(r,n=["constructor"]){const o=Object.getPrototypeOf(r),l=Object.getOwnPropertyNames(o),c=r;for(const u of l){const p=c[u];typeof p=="function"&&(n.find(d=>u===d)||(c[u]=p.bind(r)))}}function jl(r,n){if(!r)throw new Error("Assertion failed")}function Ur(){var r,n,o;let l;if(Xl()&&_l.performance)l=(n=(r=_l?.performance)==null?void 0:r.now)==null?void 0:n.call(r);else if("hrtime"in fa){const c=(o=fa?.hrtime)==null?void 0:o.call(fa);l=c[0]*1e3+c[1]/1e6}else l=Date.now();return l}const Lr={debug:Xl()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},r5={enabled:!0,level:0};function Vr(){}const $u={},qu={once:!0};class Hl{constructor({id:n}={id:""}){this.VERSION=td,this._startTs=Ur(),this._deltaTs=Ur(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=n,this.userData={},this._storage=new Q2(`__probe-${this.id}__`,r5),this.timeStamp(`${this.id} started`),n5(this),Object.seal(this)}set level(n){this.setLevel(n)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ur()-this._startTs).toPrecision(10))}getDelta(){return Number((Ur()-this._deltaTs).toPrecision(10))}set priority(n){this.level=n}get priority(){return this.level}getPriority(){return this.level}enable(n=!0){return this._storage.setConfiguration({enabled:n}),this}setLevel(n){return this._storage.setConfiguration({level:n}),this}get(n){return this._storage.config[n]}set(n,o){this._storage.setConfiguration({[n]:o})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(n,o){if(!n)throw new Error(o||"Assertion failed")}warn(n){return this._getLogFunction(0,n,Lr.warn,arguments,qu)}error(n){return this._getLogFunction(0,n,Lr.error,arguments)}deprecated(n,o){return this.warn(`\`${n}\` is deprecated and will be removed in a later version. Use \`${o}\` instead`)}removed(n,o){return this.error(`\`${n}\` has been removed. Use \`${o}\` instead`)}probe(n,o){return this._getLogFunction(n,o,Lr.log,arguments,{time:!0,once:!0})}log(n,o){return this._getLogFunction(n,o,Lr.debug,arguments)}info(n,o){return this._getLogFunction(n,o,console.info,arguments)}once(n,o){return this._getLogFunction(n,o,Lr.debug||Lr.info,arguments,qu)}table(n,o,l){return o?this._getLogFunction(n,o,console.table||Vr,l&&[l],{tag:o5(o)}):Vr}time(n,o){return this._getLogFunction(n,o,console.time?console.time:console.info)}timeEnd(n,o){return this._getLogFunction(n,o,console.timeEnd?console.timeEnd:console.info)}timeStamp(n,o){return this._getLogFunction(n,o,console.timeStamp||Vr)}group(n,o,l={collapsed:!1}){const c=Qu({logLevel:n,message:o,opts:l}),{collapsed:u}=l;return c.method=(u?console.groupCollapsed:console.group)||console.info,this._getLogFunction(c)}groupCollapsed(n,o,l={}){return this.group(n,o,Object.assign({},l,{collapsed:!0}))}groupEnd(n){return this._getLogFunction(n,"",console.groupEnd||Vr)}withGroup(n,o,l){this.group(n,o)();try{l()}finally{this.groupEnd(n)()}}trace(){console.trace&&console.trace()}_shouldLog(n){return this.isEnabled()&&this.getLevel()>=ed(n)}_getLogFunction(n,o,l,c,u){if(this._shouldLog(n)){u=Qu({logLevel:n,message:o,args:c,opts:u}),l=l||u.method,jl(l),u.total=this.getTotal(),u.delta=this.getDelta(),this._deltaTs=Ur();const p=u.tag||u.message;if(u.once&&p)if(!$u[p])$u[p]=Ur();else return Vr;return o=s5(this.id,u.message,u),l.bind(console,o,...u.args)}return Vr}}Hl.VERSION=td;function ed(r){if(!r)return 0;let n;switch(typeof r){case"number":n=r;break;case"object":n=r.logLevel||r.priority||0;break;default:return 0}return jl(Number.isFinite(n)&&n>=0),n}function Qu(r){const{logLevel:n,message:o}=r;r.logLevel=ed(n);const l=r.args?Array.from(r.args):[];for(;l.length&&l.shift()!==o;);switch(typeof n){case"string":case"function":o!==void 0&&l.unshift(o),r.message=n;break;case"object":Object.assign(r,n);break}typeof r.message=="function"&&(r.message=r.message());const c=typeof r.message;return jl(c==="string"||c==="object"),Object.assign(r,{args:l},r.opts)}function s5(r,n,o){if(typeof n=="string"){const l=o.time?t5(K2(o.total)):"";n=o.time?`${r}: ${l}  ${n}`:`${r}: ${n}`,n=i5(n,o.color,o.background)}return n}function o5(r){for(const n in r)for(const o in r[n])return o||"untitled";return"empty"}const Al="4.3.3",a5=Al[0]>="0"&&Al[0]<="9"?`v${Al}`:"";function l5(){const r=new Hl({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=r,globalThis.loaders.version=a5,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=r,r}const c5=l5();function h5(r,n){return id(r||{},n)}function id(r,n,o=0){if(o>3)return n;const l={...r};for(const[c,u]of Object.entries(n))u&&typeof u=="object"&&!Array.isArray(u)?l[c]=id(l[c]||{},n[c],o+1):l[c]=n[c];return l}const u5="latest";function f5(){var r;return(r=globalThis._loadersgl_)!=null&&r.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.3"),globalThis._loadersgl_.version}const d5=f5();function kn(r,n){if(!r)throw new Error(n||"loaders.gl assertion failed.")}const _r=typeof process!="object"||String(process)!=="[object process]"||process.browser,p5=typeof window<"u"&&typeof window.orientation<"u",Ku=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Ku&&parseFloat(Ku[1]);class _5{constructor(n,o){I(this,"name"),I(this,"workerThread"),I(this,"isRunning",!0),I(this,"result"),I(this,"_resolve",()=>{}),I(this,"_reject",()=>{}),this.name=n,this.workerThread=o,this.result=new Promise((l,c)=>{this._resolve=l,this._reject=c})}postMessage(n,o){this.workerThread.postMessage({source:"loaders.gl",type:n,payload:o})}done(n){kn(this.isRunning),this.isRunning=!1,this._resolve(n)}error(n){kn(this.isRunning),this.isRunning=!1,this._reject(n)}}class ml{terminate(){}}const gl=new Map;function A5(r){kn(r.source&&!r.url||!r.source&&r.url);let n=gl.get(r.source||r.url);return n||(r.url&&(n=m5(r.url),gl.set(r.url,n)),r.source&&(n=nd(r.source),gl.set(r.source,n))),kn(n),n}function m5(r){if(!r.startsWith("http"))return r;const n=g5(r);return nd(n)}function nd(r){const n=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(n)}function g5(r){return`try {
  importScripts('${r}');
} catch (error) {
  console.error(error);
  throw error;
}`}function rd(r,n=!0,o){const l=o||new Set;if(r){if(tf(r))l.add(r);else if(tf(r.buffer))l.add(r.buffer);else if(!ArrayBuffer.isView(r)){if(n&&typeof r=="object")for(const c in r)rd(r[c],n,l)}}return o===void 0?Array.from(l):[]}function tf(r){return r?r instanceof ArrayBuffer||typeof MessagePort<"u"&&r instanceof MessagePort||typeof ImageBitmap<"u"&&r instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas:!1}const vl=()=>{};class Tl{constructor(n){I(this,"name"),I(this,"source"),I(this,"url"),I(this,"terminated",!1),I(this,"worker"),I(this,"onMessage"),I(this,"onError"),I(this,"_loadableURL","");const{name:o,source:l,url:c}=n;kn(l||c),this.name=o,this.source=l,this.url=c,this.onMessage=vl,this.onError=u=>console.log(u),this.worker=_r?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&_r||typeof ml<"u"&&!_r}destroy(){this.onMessage=vl,this.onError=vl,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(n,o){o=o||rd(n),this.worker.postMessage(n,o)}_getErrorFromErrorEvent(n){let o="Failed to load ";return o+=`worker ${this.name} from ${this.url}. `,n.message&&(o+=`${n.message} in `),n.lineno&&(o+=`:${n.lineno}:${n.colno}`),new Error(o)}_createBrowserWorker(){this._loadableURL=A5({source:this.source,url:this.url});const n=new Worker(this._loadableURL,{name:this.name});return n.onmessage=o=>{o.data?this.onMessage(o.data):this.onError(new Error("No data received"))},n.onerror=o=>{this.onError(this._getErrorFromErrorEvent(o)),this.terminated=!0},n.onmessageerror=o=>console.error(o),n}_createNodeWorker(){let n;if(this.url){const l=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;n=new ml(l,{eval:!1})}else if(this.source)n=new ml(this.source,{eval:!0});else throw new Error("no worker");return n.on("message",o=>{this.onMessage(o)}),n.on("error",o=>{this.onError(o)}),n.on("exit",o=>{}),n}}class v5{constructor(n){I(this,"name","unnamed"),I(this,"source"),I(this,"url"),I(this,"maxConcurrency",1),I(this,"maxMobileConcurrency",1),I(this,"onDebug",()=>{}),I(this,"reuseWorkers",!0),I(this,"props",{}),I(this,"jobQueue",[]),I(this,"idleQueue",[]),I(this,"count",0),I(this,"isDestroyed",!1),this.source=n.source,this.url=n.url,this.setProps(n)}static isSupported(){return Tl.isSupported()}destroy(){this.idleQueue.forEach(n=>n.destroy()),this.isDestroyed=!0}setProps(n){this.props={...this.props,...n},n.name!==void 0&&(this.name=n.name),n.maxConcurrency!==void 0&&(this.maxConcurrency=n.maxConcurrency),n.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=n.maxMobileConcurrency),n.reuseWorkers!==void 0&&(this.reuseWorkers=n.reuseWorkers),n.onDebug!==void 0&&(this.onDebug=n.onDebug)}async startJob(n,o=(c,u,p)=>c.done(p),l=(c,u)=>c.error(u)){const c=new Promise(u=>(this.jobQueue.push({name:n,onMessage:o,onError:l,onStart:u}),this));return this._startQueuedJob(),await c}async _startQueuedJob(){if(!this.jobQueue.length)return;const n=this._getAvailableWorker();if(!n)return;const o=this.jobQueue.shift();if(o){this.onDebug({message:"Starting job",name:o.name,workerThread:n,backlog:this.jobQueue.length});const l=new _5(o.name,n);n.onMessage=c=>o.onMessage(l,c.type,c.payload),n.onError=c=>o.onError(l,c),o.onStart(l);try{await l.result}catch(c){console.error(`Worker exception: ${c}`)}finally{this.returnWorkerToQueue(n)}}}returnWorkerToQueue(n){!_r||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(n.destroy(),this.count--):this.idleQueue.push(n),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const n=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new Tl({name:n,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return p5?this.maxMobileConcurrency:this.maxConcurrency}}const y5={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},sd=class Dr{constructor(n){I(this,"props"),I(this,"workerPools",new Map),this.props={...y5},this.setProps(n),this.workerPools=new Map}static isSupported(){return Tl.isSupported()}static getWorkerFarm(n={}){return Dr._workerFarm=Dr._workerFarm||new Dr({}),Dr._workerFarm.setProps(n),Dr._workerFarm}destroy(){for(const n of this.workerPools.values())n.destroy();this.workerPools=new Map}setProps(n){this.props={...this.props,...n};for(const o of this.workerPools.values())o.setProps(this._getWorkerPoolProps())}getWorkerPool(n){const{name:o,source:l,url:c}=n;let u=this.workerPools.get(o);return u||(u=new v5({name:o,source:l,url:c}),u.setProps(this._getWorkerPoolProps()),this.workerPools.set(o,u)),u}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};I(sd,"_workerFarm");let od=sd;function w5(r,n={}){const o=n[r.id]||{},l=_r?`${r.id}-worker.js`:`${r.id}-worker-node.js`;let c=o.workerUrl;if(!c&&r.id==="compression"&&(c=n.workerUrl),n._workerType==="test"&&(_r?c=`modules/${r.module}/dist/${l}`:c=`modules/${r.module}/src/workers/${r.id}-worker-node.ts`),!c){let u=r.version;u==="latest"&&(u=u5);const p=u?`@${u}`:"";c=`https://unpkg.com/@loaders.gl/${r.module}${p}/dist/${l}`}return kn(c),c}function M5(r,n=d5){kn(r,"no worker provided");const o=r.version;return!(!n||!o)}function C5(r,n){return!od.isSupported()||!_r&&!n?._nodeWorkers?!1:r.worker&&n?.worker}async function S5(r,n,o,l,c){const u=r.id,p=w5(r,o),g=od.getWorkerFarm(o).getWorkerPool({name:u,url:p});o=JSON.parse(JSON.stringify(o)),l=JSON.parse(JSON.stringify(l||{}));const w=await g.startJob("process-on-worker",E5.bind(null,c));return w.postMessage("process",{input:n,options:o,context:l}),await(await w.result).result}async function E5(r,n,o,l){switch(o){case"done":n.done(l);break;case"error":n.error(new Error(l.error));break;case"process":const{id:c,input:u,options:p}=l;try{const d=await r(u,p);n.postMessage("done",{id:c,result:d})}catch(d){const g=d instanceof Error?d.message:"unknown error";n.postMessage("error",{id:c,error:g})}break;default:console.warn(`parse-with-worker unknown message ${o}`)}}function b5(r,n,o){if(o=o||r.byteLength,r.byteLength<o||n.byteLength<o)return!1;const l=new Uint8Array(r),c=new Uint8Array(n);for(let u=0;u<l.length;++u)if(l[u]!==c[u])return!1;return!0}function R5(...r){return P5(r)}function P5(r){const n=r.map(u=>u instanceof ArrayBuffer?new Uint8Array(u):u),o=n.reduce((u,p)=>u+p.byteLength,0),l=new Uint8Array(o);let c=0;for(const u of n)l.set(u,c),c+=u.byteLength;return l.buffer}async function x5(r){const n=[];for await(const o of r)n.push(o);return R5(...n)}let T5="";const ef={};function F5(r){for(const n in ef)if(r.startsWith(n)){const o=ef[n];r=r.replace(n,o)}return!r.startsWith("http://")&&!r.startsWith("https://")&&(r=`${T5}${r}`),r}function k5(r){return r&&typeof r=="object"&&r.isBuffer}function ad(r){if(k5(r))return r;if(r instanceof ArrayBuffer)return r;if(ArrayBuffer.isView(r))return r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);if(typeof r=="string"){const n=r;return new TextEncoder().encode(n).buffer}if(r&&typeof r=="object"&&r._toArrayBuffer)return r._toArrayBuffer();throw new Error("toArrayBuffer")}function ld(r){const n=r?r.lastIndexOf("/"):-1;return n>=0?r.substr(n+1):""}function N5(r){const n=r?r.lastIndexOf("/"):-1;return n>=0?r.substr(0,n):""}const G5=r=>typeof r=="boolean",eo=r=>typeof r=="function",fo=r=>r!==null&&typeof r=="object",nf=r=>fo(r)&&r.constructor==={}.constructor,B5=r=>!!r&&typeof r[Symbol.iterator]=="function",O5=r=>r&&typeof r[Symbol.asyncIterator]=="function",gr=r=>typeof Response<"u"&&r instanceof Response||r&&r.arrayBuffer&&r.text&&r.json,vr=r=>typeof Blob<"u"&&r instanceof Blob,I5=r=>r&&typeof r=="object"&&r.isBuffer,U5=r=>typeof ReadableStream<"u"&&r instanceof ReadableStream||fo(r)&&eo(r.tee)&&eo(r.cancel)&&eo(r.getReader),L5=r=>fo(r)&&eo(r.read)&&eo(r.pipe)&&G5(r.readable),cd=r=>U5(r)||L5(r);class V5 extends Error{constructor(n,o){super(n),I(this,"reason"),I(this,"url"),I(this,"response"),this.reason=o.reason,this.url=o.url,this.response=o.response}}const W5=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Z5=/^([-\w.]+\/[-\w.+]+)/;function rf(r,n){return r.toLowerCase()===n.toLowerCase()}function z5(r){const n=Z5.exec(r);return n?n[1]:r}function sf(r){const n=W5.exec(r);return n?n[1]:""}const hd=/\?.*/;function D5(r){const n=r.match(hd);return n&&n[0]}function Yl(r){return r.replace(hd,"")}function X5(r){if(r.length<50)return r;const n=r.slice(r.length-15);return`${r.substr(0,32)}...${n}`}function Ga(r){return gr(r)?r.url:vr(r)?r.name||"":typeof r=="string"?r:""}function Jl(r){if(gr(r)){const n=r,o=n.headers.get("content-type")||"",l=Yl(n.url);return z5(o)||sf(l)}return vr(r)?r.type||"":typeof r=="string"?sf(r):""}function j5(r){return gr(r)?r.headers["content-length"]||-1:vr(r)?r.size:typeof r=="string"?r.length:r instanceof ArrayBuffer||ArrayBuffer.isView(r)?r.byteLength:-1}async function ud(r){if(gr(r))return r;const n={},o=j5(r);o>=0&&(n["content-length"]=String(o));const l=Ga(r),c=Jl(r);c&&(n["content-type"]=c);const u=await J5(r);u&&(n["x-first-bytes"]=u),typeof r=="string"&&(r=new TextEncoder().encode(r));const p=new Response(r,{headers:n});return Object.defineProperty(p,"url",{value:l}),p}async function H5(r){if(!r.ok)throw await Y5(r)}async function Y5(r){const n=X5(r.url);let o=`Failed to fetch resource (${r.status}) ${r.statusText}: ${n}`;o=o.length>100?`${o.slice(0,100)}...`:o;const l={reason:r.statusText,url:r.url,response:r};try{const c=r.headers.get("Content-Type");l.reason=!r.bodyUsed&&c?.includes("application/json")?await r.json():await r.text()}catch{}return new V5(o,l)}async function J5(r){if(typeof r=="string")return`data:,${r.slice(0,5)}`;if(r instanceof Blob){const o=r.slice(0,5);return await new Promise(l=>{const c=new FileReader;c.onload=u=>{var p;return l((p=u?.target)==null?void 0:p.result)},c.readAsDataURL(o)})}if(r instanceof ArrayBuffer){const o=r.slice(0,5);return`data:base64,${$5(o)}`}return null}function $5(r){let n="";const o=new Uint8Array(r);for(let l=0;l<o.byteLength;l++)n+=String.fromCharCode(o[l]);return btoa(n)}function q5(r){return!Q5(r)&&!K5(r)}function Q5(r){return r.startsWith("http:")||r.startsWith("https:")}function K5(r){return r.startsWith("data:")}async function of(r,n){var o,l;if(typeof r=="string"){const c=F5(r);return q5(c)&&(o=globalThis.loaders)!=null&&o.fetchNode?(l=globalThis.loaders)==null?void 0:l.fetchNode(c,n):await fetch(c,n)}return await ud(r)}const af=new Hl({id:"loaders.gl"});class t6{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class e6{constructor(){I(this,"console"),this.console=console}log(...n){return this.console.log.bind(this.console,...n)}info(...n){return this.console.info.bind(this.console,...n)}warn(...n){return this.console.warn.bind(this.console,...n)}error(...n){return this.console.error.bind(this.console,...n)}}const fd={fetch:null,mimeType:void 0,nothrow:!1,log:new e6,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Kf,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},i6={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function dd(){globalThis.loaders=globalThis.loaders||{};const{loaders:r}=globalThis;return r._state||(r._state={}),r._state}function pd(){const r=dd();return r.globalOptions=r.globalOptions||{...fd},r.globalOptions}function n6(r,n,o,l){return o=o||[],o=Array.isArray(o)?o:[o],r6(r,o),o6(n,r,l)}function r6(r,n){lf(r,null,fd,i6,n);for(const o of n){const l=r&&r[o.id]||{},c=o.options&&o.options[o.id]||{},u=o.deprecatedOptions&&o.deprecatedOptions[o.id]||{};lf(l,o.id,c,u,n)}}function lf(r,n,o,l,c){const u=n||"Top level",p=n?`${n}.`:"";for(const d in r){const g=!n&&fo(r[d]),w=d==="baseUri"&&!n,M=d==="workerUrl"&&n;if(!(d in o)&&!w&&!M){if(d in l)af.warn(`${u} loader option '${p}${d}' no longer supported, use '${l[d]}'`)();else if(!g){const E=s6(d,c);af.warn(`${u} loader option '${p}${d}' not recognized. ${E}`)()}}}}function s6(r,n){const o=r.toLowerCase();let l="";for(const c of n)for(const u in c.options){if(r===u)return`Did you mean '${c.id}.${u}'?`;const p=u.toLowerCase();(o.startsWith(p)||p.startsWith(o))&&(l=l||`Did you mean '${c.id}.${u}'?`)}return l}function o6(r,n,o){const c={...r.options||{}};return a6(c,o),c.log===null&&(c.log=new t6),cf(c,pd()),cf(c,n),c}function cf(r,n){for(const o in n)if(o in n){const l=n[o];nf(l)&&nf(r[o])?r[o]={...r[o],...n[o]}:r[o]=n[o]}}function a6(r,n){n&&!("baseUri"in r)&&(r.baseUri=n)}function $l(r){return r?(Array.isArray(r)&&(r=r[0]),Array.isArray(r?.extensions)):!1}function _d(r){Hu(r,"null loader"),Hu($l(r),"invalid loader");let n;return Array.isArray(r)&&(n=r[1],r=r[0],r={...r,options:{...r.options,...n}}),(r?.parseTextSync||r?.parseText)&&(r.text=!0),r.text||(r.binary=!0),r}const l6=()=>{const r=dd();return r.loaderRegistry=r.loaderRegistry||[],r.loaderRegistry};function c6(){return l6()}const h6=/\.([^.]+)$/;async function u6(r,n=[],o,l){if(!Ad(r))return null;let c=hf(r,n,{...o,nothrow:!0});if(c)return c;if(vr(r)&&(r=await r.slice(0,10).arrayBuffer(),c=hf(r,n,o)),!c&&!o?.nothrow)throw new Error(md(r));return c}function hf(r,n=[],o,l){if(!Ad(r))return null;if(n&&!Array.isArray(n))return _d(n);let c=[];n&&(c=c.concat(n)),o?.ignoreRegisteredLoaders||c.push(...c6()),d6(c);const u=f6(r,c,o);if(!u&&!o?.nothrow)throw new Error(md(r));return u}function f6(r,n,o,l){const c=Ga(r),u=Jl(r),p=Yl(c)||void 0;let d=null,g="";return o?.mimeType&&(d=yl(n,o?.mimeType),g=`match forced by supplied MIME type ${o?.mimeType}`),d=d||p6(n,p),g=g||(d?`matched url ${p}`:""),d=d||yl(n,u),g=g||(d?`matched MIME type ${u}`:""),d=d||A6(n,r),g=g||(d?`matched initial data ${gd(r)}`:""),o?.fallbackMimeType&&(d=d||yl(n,o?.fallbackMimeType),g=g||(d?`matched fallback MIME type ${u}`:"")),g&&c5.log(1,`selectLoader selected ${d?.name}: ${g}.`),d}function Ad(r){return!(r instanceof Response&&r.status===204)}function md(r){const n=Ga(r),o=Jl(r);let l="No valid loader found (";l+=n?`${ld(n)}, `:"no url provided, ",l+=`MIME type: ${o?`"${o}"`:"not provided"}, `;const c=r?gd(r):"";return l+=c?` first bytes: "${c}"`:"first bytes: not available",l+=")",l}function d6(r){for(const n of r)_d(n)}function p6(r,n){const o=n&&h6.exec(n),l=o&&o[1];return l?_6(r,l):null}function _6(r,n){n=n.toLowerCase();for(const o of r)for(const l of o.extensions)if(l.toLowerCase()===n)return o;return null}function yl(r,n){var o;for(const l of r)if((o=l.mimeTypes)!=null&&o.some(c=>rf(n,c))||rf(n,`application/x.${l.id}`))return l;return null}function A6(r,n){if(!n)return null;for(const o of r)if(typeof n=="string"){if(m6(n,o))return o}else if(ArrayBuffer.isView(n)){if(uf(n.buffer,n.byteOffset,o))return o}else if(n instanceof ArrayBuffer&&uf(n,0,o))return o;return null}function m6(r,n){return n.testText?n.testText(r):(Array.isArray(n.tests)?n.tests:[n.tests]).some(l=>r.startsWith(l))}function uf(r,n,o){return(Array.isArray(o.tests)?o.tests:[o.tests]).some(c=>g6(r,n,o,c))}function g6(r,n,o,l){if(l instanceof ArrayBuffer)return b5(l,r,l.byteLength);switch(typeof l){case"function":return l(r);case"string":const c=Fl(r,n,l.length);return l===c;default:return!1}}function gd(r,n=5){return typeof r=="string"?r.slice(0,n):ArrayBuffer.isView(r)?Fl(r.buffer,r.byteOffset,n):r instanceof ArrayBuffer?Fl(r,0,n):""}function Fl(r,n,o){if(r.byteLength<n+o)return"";const l=new DataView(r);let c="";for(let u=0;u<o;u++)c+=String.fromCharCode(l.getUint8(n+u));return c}const v6=256*1024;function*y6(r,n){const o=n?.chunkSize||v6;let l=0;const c=new TextEncoder;for(;l<r.length;){const u=Math.min(r.length-l,o),p=r.slice(l,l+u);l+=u,yield c.encode(p)}}const w6=256*1024;function*M6(r,n={}){const{chunkSize:o=w6}=n;let l=0;for(;l<r.byteLength;){const c=Math.min(r.byteLength-l,o),u=new ArrayBuffer(c),p=new Uint8Array(r,l,c);new Uint8Array(u).set(p),l+=c,yield u}}const C6=1024*1024;async function*S6(r,n){const o=n?.chunkSize||C6;let l=0;for(;l<r.size;){const c=l+o,u=await r.slice(l,c).arrayBuffer();l=c,yield u}}function ff(r,n){return Kf?E6(r,n):b6(r)}async function*E6(r,n){const o=r.getReader();let l;try{for(;;){const c=l||o.read();n?._streamReadAhead&&(l=o.read());const{done:u,value:p}=await c;if(u)return;yield ad(p)}}catch{o.releaseLock()}}async function*b6(r,n){for await(const o of r)yield ad(o)}function R6(r,n){if(typeof r=="string")return y6(r,n);if(r instanceof ArrayBuffer)return M6(r,n);if(vr(r))return S6(r,n);if(cd(r))return ff(r,n);if(gr(r))return ff(r.body,n);throw new Error("makeIterator")}const vd="Cannot convert supplied data type";function P6(r,n,o){if(n.text&&typeof r=="string")return r;if(I5(r)&&(r=r.buffer),r instanceof ArrayBuffer){const l=r;return n.text&&!n.binary?new TextDecoder("utf8").decode(l):l}if(ArrayBuffer.isView(r)){if(n.text&&!n.binary)return new TextDecoder("utf8").decode(r);let l=r.buffer;const c=r.byteLength||r.length;return(r.byteOffset!==0||c!==l.byteLength)&&(l=l.slice(r.byteOffset,r.byteOffset+c)),l}throw new Error(vd)}async function x6(r,n,o){const l=r instanceof ArrayBuffer||ArrayBuffer.isView(r);if(typeof r=="string"||l)return P6(r,n);if(vr(r)&&(r=await ud(r)),gr(r)){const c=r;return await H5(c),n.binary?await c.arrayBuffer():await c.text()}if(cd(r)&&(r=R6(r,o)),B5(r)||O5(r))return x5(r);throw new Error(vd)}function yd(r,n){const o=pd(),l=r||o;return typeof l.fetch=="function"?l.fetch:fo(l.fetch)?c=>of(c,l.fetch):n?.fetch?n?.fetch:of}function T6(r,n,o){if(o)return o;const l={fetch:yd(n,r),...r};if(l.url){const c=Yl(l.url);l.baseUrl=c,l.queryString=D5(l.url),l.filename=ld(c),l.baseUrl=N5(c)}return Array.isArray(l.loaders)||(l.loaders=null),l}function F6(r,n){if(r&&!Array.isArray(r))return r;let o;if(r&&(o=Array.isArray(r)?r:[r]),n&&n.loaders){const l=Array.isArray(n.loaders)?n.loaders:[n.loaders];o=o?[...o,...l]:l}return o&&o.length?o:void 0}async function Sa(r,n,o,l){n&&!Array.isArray(n)&&!$l(n)&&(l=void 0,o=n,n=void 0),r=await r,o=o||{};const c=Ga(r),p=F6(n,l),d=await u6(r,p,o);return d?(o=n6(o,d,p,c),l=T6({url:c,_parse:Sa,loaders:p},o,l||null),await k6(d,r,o,l)):null}async function k6(r,n,o,l){if(M5(r),o=h5(r.options,o),gr(n)){const u=n,{ok:p,redirected:d,status:g,statusText:w,type:M,url:E}=u,S=Object.fromEntries(u.headers.entries());l.response={headers:S,ok:p,redirected:d,status:g,statusText:w,type:M,url:E}}n=await x6(n,r,o);const c=r;if(c.parseTextSync&&typeof n=="string")return c.parseTextSync(n,o,l);if(C5(r,o))return await S5(r,n,o,l,Sa);if(c.parseText&&typeof n=="string")return await c.parseText(n,o,l);if(c.parse)return await c.parse(n,o,l);throw kn(!c.parseSync),new Error(`${r.id} loader - no parser found and worker is disabled`)}function N6(r){switch(r.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function G6(r){let n=1/0,o=1/0,l=1/0,c=-1/0,u=-1/0,p=-1/0;const d=r.POSITION?r.POSITION.value:[],g=d&&d.length;for(let w=0;w<g;w+=3){const M=d[w],E=d[w+1],S=d[w+2];n=M<n?M:n,o=E<o?E:o,l=S<l?S:l,c=M>c?M:c,u=E>u?E:u,p=S>p?S:p}return[[n,o,l],[c,u,p]]}function B6(r,n={}){return{fields:I6(r),metadata:n}}function O6(r,n,o){const l=N6(n.value),c=o||U6(n);return{name:r,type:{type:"fixed-size-list",listSize:n.size,children:[{name:"value",type:l}]},nullable:!1,metadata:c}}function I6(r){const n=[];for(const o in r){const l=r[o];n.push(O6(o,l))}return n}function U6(r){const n={};return"byteOffset"in r&&(n.byteOffset=r.byteOffset.toString(10)),"byteStride"in r&&(n.byteStride=r.byteStride.toString(10)),"normalized"in r&&(n.normalized=r.normalized.toString()),n}async function wd(r,n,o,l){let c,u;!Array.isArray(n)&&!$l(n)?(c=[],u=n):(c=n,u=o);const p=yd(u);let d=r;return typeof r=="string"&&(d=await p(r)),vr(r)&&(d=await p(r)),Array.isArray(c)?await Sa(d,c,u):await Sa(d,c,u)}const L6="4.3.3",V6={dataType:null,batchType:null,name:"LAS",id:"las",module:"las",version:L6,worker:!0,extensions:["las","laz"],mimeTypes:["application/octet-stream"],text:!0,binary:!0,tests:["LAS"],options:{las:{shape:"mesh",fp64:!1,skip:1,colorDepth:8}}};function W6(){var r=typeof r<"u"?r:{},n={},o;for(o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);var l=!1,c=!1,u=!1,p=!1;l=typeof window=="object",c=typeof importScripts=="function",u=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",p=!l&&!u&&!c;var d="";function g(k){return r.locateFile?r.locateFile(k,d):d+k}var w,M,E,S,P;u?(c?d={dirname:k=>{const T=k.lastIndexOf("/");return T<=0?T===0?"/":".":k.substring(0,T)},normalize:k=>k,join:(...k)=>k.filter(Boolean).join("/").replace(/\/+/g,"/")}.dirname(d)+"/":d=(typeof __dirname<"u"?__dirname:"")+"/",w=function(T,V){var m=Oi(T);return m?V?m:m.toString():(S||(S={}),P||(P={dirname:J=>{const e=J.lastIndexOf("/");return e<=0?e===0?"/":".":J.substring(0,e)},normalize:J=>J,join:(...J)=>J.filter(Boolean).join("/").replace(/\/+/g,"/")}),T=P.normalize(T),S.readFileSync(T,V?null:"utf8"))},E=function(T){var V=w(T,!0);return V.buffer||(V=new Uint8Array(V)),q(V.buffer),V},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),typeof Wl<"u"&&(Wl.exports=r),process.on("uncaughtException",function(k){if(!(k instanceof b0))throw k}),process.on("unhandledRejection",ge),r.inspect=function(){return"[Emscripten Module object]"}):p?(typeof read<"u"&&(w=function(T){var V=Oi(T);return V?Oo(V):read(T)}),E=function(T){var V;return V=Oi(T),V||(typeof readbuffer=="function"?new Uint8Array(readbuffer(T)):(V=read(T,"binary"),q(typeof V=="object"),V))},typeof scriptArgs<"u"&&scriptArgs,typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(l||c)&&(c?d=self.location.href:document.currentScript&&(d=document.currentScript.src),d.indexOf("blob:")!==0?d=d.substr(0,d.lastIndexOf("/")+1):d="",w=function(T){try{var V=new XMLHttpRequest;return V.open("GET",T,!1),V.send(null),V.responseText}catch(J){var m=Oi(T);if(m)return Oo(m);throw J}},c&&(E=function(T){try{var V=new XMLHttpRequest;return V.open("GET",T,!1),V.responseType="arraybuffer",V.send(null),new Uint8Array(V.response)}catch(J){var m=Oi(T);if(m)return m;throw J}}),M=function(T,V,m){var J=new XMLHttpRequest;J.open("GET",T,!0),J.responseType="arraybuffer",J.onload=function(){if(J.status==200||J.status==0&&J.response){V(J.response);return}var O=Oi(T);if(O){V(O.buffer);return}m()},J.onerror=m,J.send(null)});var x=r.print||console.log.bind(console),F=r.printErr||console.warn.bind(console);for(o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);n=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&r.quit,new Array(0);var G=0,Z=function(k){G=k},W=function(){return G},D=8;r.wasmBinary&&r.wasmBinary,r.noExitRuntime&&r.noExitRuntime;var tt=!1;function q(k,T){k||ge("Assertion failed: "+T)}var K=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function _t(k,T,V){for(var m=T+V,J=T;k[J]&&!(J>=m);)++J;if(J-T>16&&k.subarray&&K)return K.decode(k.subarray(T,J));for(var e="";T<J;){var O=k[T++];if(!(O&128)){e+=String.fromCharCode(O);continue}var ot=k[T++]&63;if((O&224)==192){e+=String.fromCharCode((O&31)<<6|ot);continue}var ct=k[T++]&63;if((O&240)==224?O=(O&15)<<12|ot<<6|ct:O=(O&7)<<18|ot<<12|ct<<6|k[T++]&63,O<65536)e+=String.fromCharCode(O);else{var X=O-65536;e+=String.fromCharCode(55296|X>>10,56320|X&1023)}}return e}function nt(k,T){return k?_t(Rt,k,T):""}function ut(k,T,V,m){if(!(m>0))return 0;for(var J=V,e=V+m-1,O=0;O<k.length;++O){var ot=k.charCodeAt(O);if(ot>=55296&&ot<=57343){var ct=k.charCodeAt(++O);ot=65536+((ot&1023)<<10)|ct&1023}if(ot<=127){if(V>=e)break;T[V++]=ot}else if(ot<=2047){if(V+1>=e)break;T[V++]=192|ot>>6,T[V++]=128|ot&63}else if(ot<=65535){if(V+2>=e)break;T[V++]=224|ot>>12,T[V++]=128|ot>>6&63,T[V++]=128|ot&63}else{if(V+3>=e)break;T[V++]=240|ot>>18,T[V++]=128|ot>>12&63,T[V++]=128|ot>>6&63,T[V++]=128|ot&63}}return T[V]=0,V-J}function st(k,T,V){return ut(k,Rt,T,V)}function vt(k){for(var T=0,V=0;V<k.length;++V){var m=k.charCodeAt(V);m>=55296&&m<=57343&&(m=65536+((m&1023)<<10)|k.charCodeAt(++V)&1023),m<=127?++T:m<=2047?T+=2:m<=65535?T+=3:T+=4}return T}var Pt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Yt(k,T){for(var V=k,m=V>>1,J=m+T/2;!(m>=J)&&oe[m];)++m;if(V=m<<1,V-k>32&&Pt)return Pt.decode(Rt.subarray(k,V));for(var e=0,O="";;){var ot=Ae[k+e*2>>1];if(ot==0||e==T/2)return O;++e,O+=String.fromCharCode(ot)}}function $t(k,T,V){if(V===void 0&&(V=2147483647),V<2)return 0;V-=2;for(var m=T,J=V<k.length*2?V/2:k.length,e=0;e<J;++e){var O=k.charCodeAt(e);Ae[T>>1]=O,T+=2}return Ae[T>>1]=0,T-m}function z(k){return k.length*2}function it(k,T){for(var V=0,m="";!(V>=T/4);){var J=Gt[k+V*4>>2];if(J==0)break;if(++V,J>=65536){var e=J-65536;m+=String.fromCharCode(55296|e>>10,56320|e&1023)}else m+=String.fromCharCode(J)}return m}function At(k,T,V){if(V===void 0&&(V=2147483647),V<4)return 0;for(var m=T,J=m+V-4,e=0;e<k.length;++e){var O=k.charCodeAt(e);if(O>=55296&&O<=57343){var ot=k.charCodeAt(++e);O=65536+((O&1023)<<10)|ot&1023}if(Gt[T>>2]=O,T+=4,T+4>J)break}return Gt[T>>2]=0,T-m}function kt(k){for(var T=0,V=0;V<k.length;++V){var m=k.charCodeAt(V);m>=55296&&m<=57343&&++V,T+=4}return T}var Vt,bt,Rt,Ae,oe,Gt,qt,Le,$e;function Ve(k){Vt=k,r.HEAP8=bt=new Int8Array(k),r.HEAP16=Ae=new Int16Array(k),r.HEAP32=Gt=new Int32Array(k),r.HEAPU8=Rt=new Uint8Array(k),r.HEAPU16=oe=new Uint16Array(k),r.HEAPU32=qt=new Uint32Array(k),r.HEAPF32=Le=new Float32Array(k),r.HEAPF64=$e=new Float64Array(k)}var oi=5265264,Tt=22176,We=r.INITIAL_MEMORY||167772160;r.buffer?Vt=r.buffer:Vt=new ArrayBuffer(We),We=Vt.byteLength,Ve(Vt),Gt[Tt>>2]=oi;function xe(k){for(;k.length>0;){var T=k.shift();if(typeof T=="function"){T(r);continue}var V=T.func;typeof V=="number"?T.arg===void 0?r.dynCall_v(V):r.dynCall_vi(V,T.arg):V(T.arg===void 0?null:T.arg)}}var mi=[],Ni=[],dn=[],On=[];function Oa(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Yi(r.preRun.shift());xe(mi)}function Ia(){xe(Ni)}function Ua(){xe(dn)}function Hi(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)In(r.postRun.shift());xe(On)}function Yi(k){mi.unshift(k)}function In(k){On.unshift(k)}var qe=0,Un=null;function La(k){qe++,r.monitorRunDependencies&&r.monitorRunDependencies(qe)}function Te(k){if(qe--,r.monitorRunDependencies&&r.monitorRunDependencies(qe),qe==0&&Un){var T=Un;Un=null,T()}}r.preloadedImages={},r.preloadedAudios={};function ge(k){throw r.onAbort&&r.onAbort(k),k+="",x(k),F(k),tt=!0,k="abort("+k+"). Build with -s ASSERTIONS=1 for more info.",k}var ai=null;function vo(k,T){return String.prototype.startsWith?k.startsWith(T):k.indexOf(T)===0}var yo="data:application/octet-stream;base64,";function me(k){return vo(k,yo)}Ni.push({func:function(){S0()}}),ai="data:application/octet-stream;base64,AAAAAAAAAAAPDg0MCwoJCA4AAQMGCgoJDQECBAcLCwoMAwQFCAwMCwsGBwgJDQ0MCgoLDA0ODg0JCgsMDQ4PDggJCgsMDQ4PAAECAwQFBgcBAAECAwQFBgIBAAECAwQFAwIBAAECAwQEAwIBAAECAwUEAwIBAAECBgUEAwIBAAEHBgUEAwIBAMgPAAAoDQAAEBAAACAQAADIDwAAUA0AABAQAAAgEAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAAREREAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAADAAAAAAJDAAAAAAADAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAANAAAABA0AAAAACQ4AAAAAAA4AAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAADwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhISAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAASEhIAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAKAAAAAAoAAAAACQsAAAAAAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGGRJEOwI/LEcUPTMwChsGRktFNw9JDo4XA0AdPGkrNh9KLRwBICUpIQgMFRYiLhA4Pgs0MRhkdHV2L0EJfzkRI0MyQomKiwUEJignDSoeNYwHGkiTE5SVAAAAAAAAAAAASWxsZWdhbCBieXRlIHNlcXVlbmNlAERvbWFpbiBlcnJvcgBSZXN1bHQgbm90IHJlcHJlc2VudGFibGUATm90IGEgdHR5AFBlcm1pc3Npb24gZGVuaWVkAE9wZXJhdGlvbiBub3QgcGVybWl0dGVkAE5vIHN1Y2ggZmlsZSBvciBkaXJlY3RvcnkATm8gc3VjaCBwcm9jZXNzAEZpbGUgZXhpc3RzAFZhbHVlIHRvbyBsYXJnZSBmb3IgZGF0YSB0eXBlAE5vIHNwYWNlIGxlZnQgb24gZGV2aWNlAE91dCBvZiBtZW1vcnkAUmVzb3VyY2UgYnVzeQBJbnRlcnJ1cHRlZCBzeXN0ZW0gY2FsbABSZXNvdXJjZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZQBJbnZhbGlkIHNlZWsAQ3Jvc3MtZGV2aWNlIGxpbmsAUmVhZC1vbmx5IGZpbGUgc3lzdGVtAERpcmVjdG9yeSBub3QgZW1wdHkAQ29ubmVjdGlvbiByZXNldCBieSBwZWVyAE9wZXJhdGlvbiB0aW1lZCBvdXQAQ29ubmVjdGlvbiByZWZ1c2VkAEhvc3QgaXMgZG93bgBIb3N0IGlzIHVucmVhY2hhYmxlAEFkZHJlc3MgaW4gdXNlAEJyb2tlbiBwaXBlAEkvTyBlcnJvcgBObyBzdWNoIGRldmljZSBvciBhZGRyZXNzAEJsb2NrIGRldmljZSByZXF1aXJlZABObyBzdWNoIGRldmljZQBOb3QgYSBkaXJlY3RvcnkASXMgYSBkaXJlY3RvcnkAVGV4dCBmaWxlIGJ1c3kARXhlYyBmb3JtYXQgZXJyb3IASW52YWxpZCBhcmd1bWVudABBcmd1bWVudCBsaXN0IHRvbyBsb25nAFN5bWJvbGljIGxpbmsgbG9vcABGaWxlbmFtZSB0b28gbG9uZwBUb28gbWFueSBvcGVuIGZpbGVzIGluIHN5c3RlbQBObyBmaWxlIGRlc2NyaXB0b3JzIGF2YWlsYWJsZQBCYWQgZmlsZSBkZXNjcmlwdG9yAE5vIGNoaWxkIHByb2Nlc3MAQmFkIGFkZHJlc3MARmlsZSB0b28gbGFyZ2UAVG9vIG1hbnkgbGlua3MATm8gbG9ja3MgYXZhaWxhYmxlAFJlc291cmNlIGRlYWRsb2NrIHdvdWxkIG9jY3VyAFN0YXRlIG5vdCByZWNvdmVyYWJsZQBQcmV2aW91cyBvd25lciBkaWVkAE9wZXJhdGlvbiBjYW5jZWxlZABGdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQATm8gbWVzc2FnZSBvZiBkZXNpcmVkIHR5cGUASWRlbnRpZmllciByZW1vdmVkAERldmljZSBub3QgYSBzdHJlYW0ATm8gZGF0YSBhdmFpbGFibGUARGV2aWNlIHRpbWVvdXQAT3V0IG9mIHN0cmVhbXMgcmVzb3VyY2VzAExpbmsgaGFzIGJlZW4gc2V2ZXJlZABQcm90b2NvbCBlcnJvcgBCYWQgbWVzc2FnZQBGaWxlIGRlc2NyaXB0b3IgaW4gYmFkIHN0YXRlAE5vdCBhIHNvY2tldABEZXN0aW5hdGlvbiBhZGRyZXNzIHJlcXVpcmVkAE1lc3NhZ2UgdG9vIGxhcmdlAFByb3RvY29sIHdyb25nIHR5cGUgZm9yIHNvY2tldABQcm90b2NvbCBub3QgYXZhaWxhYmxlAFByb3RvY29sIG5vdCBzdXBwb3J0ZWQAU29ja2V0IHR5cGUgbm90IHN1cHBvcnRlZABOb3Qgc3VwcG9ydGVkAFByb3RvY29sIGZhbWlseSBub3Qgc3VwcG9ydGVkAEFkZHJlc3MgZmFtaWx5IG5vdCBzdXBwb3J0ZWQgYnkgcHJvdG9jb2wAQWRkcmVzcyBub3QgYXZhaWxhYmxlAE5ldHdvcmsgaXMgZG93bgBOZXR3b3JrIHVucmVhY2hhYmxlAENvbm5lY3Rpb24gcmVzZXQgYnkgbmV0d29yawBDb25uZWN0aW9uIGFib3J0ZWQATm8gYnVmZmVyIHNwYWNlIGF2YWlsYWJsZQBTb2NrZXQgaXMgY29ubmVjdGVkAFNvY2tldCBub3QgY29ubmVjdGVkAENhbm5vdCBzZW5kIGFmdGVyIHNvY2tldCBzaHV0ZG93bgBPcGVyYXRpb24gYWxyZWFkeSBpbiBwcm9ncmVzcwBPcGVyYXRpb24gaW4gcHJvZ3Jlc3MAU3RhbGUgZmlsZSBoYW5kbGUAUmVtb3RlIEkvTyBlcnJvcgBRdW90YSBleGNlZWRlZABObyBtZWRpdW0gZm91bmQAV3JvbmcgbWVkaXVtIHR5cGUATm8gZXJyb3IgaW5mb3JtYXRpb24AAAAAAADgFgAAmRgAAGAQAAAAAAAA4BYAAEIZAABgEAAAAAAAAOAWAAAqGgAASA8AAAAAAAC4FgAANBsAAOAWAACfGgAAMAoAAAAAAADgFgAAaRsAAEgPAAAAAAAA4BYAAIobAABIDwAAAAAAALgWAAAPHAAA4BYAAHwcAABIDwAAAAAAAOAWAACVHAAASA8AAAAAAADgFgAAHh0AAEgPAAAAAAAA4BYAAHcdAABIDwAAAAAAAOAWAACQHQAASA8AAAAAAADgFgAAQh4AAEgPAAAAAAAA4BYAAIceAABgEAAAAAAAAOAWAACkHwAASA8AAAAAAAC4FgAAZyAAAOAWAADkHwAA8AoAAAAAAADgFgAAjyAAAGAQAAAAAAAAuBYAAMMiAADgFgAAAiIAABgLAAAAAAAA4BYAAOEiAABgEAAAAAAAAOAWAADQJAAAGAsAAAAAAADgFgAAkSUAAGAQAAAAAAAA4BYAAIAnAAAYCwAAAAAAAOAWAAA9KAAAYBAAAAAAAADgFgAAJCoAABgLAAAAAAAA4BYAAOkqAABgEAAAAAAAAOAWAADgLAAA8AoAAAAAAADgFgAAui0AAGAQAAAAAAAA4BYAANsvAADwCgAAAAAAAOAWAADTMAAAYBAAAAAAAADgFgAAMDMAAPAKAAAAAAAA4BYAACQ0AABgEAAAAAAAAOAWAAB5NgAA8AoAAAAAAADgFgAAizcAAGAQAAAAAAAA4BYAABw6AABgEAAAAAAAAOAWAACdOgAAYBAAAAAAAADgFgAAXjsAAPAKAAAAAAAA4BYAALU7AABgEAAAAAAAAOAWAADMPAAAGAsAAAAAAADgFgAATz0AAGAQAAAAAAAA4BYAAL4+AAAYCwAAAAAAAOAWAABBPwAAYBAAAAAAAADgFgAAsEAAABgLAAAAAAAA4BYAADNBAABgEAAAAAAAAOAWAACiQgAAGAsAAAAAAADgFgAAJUMAAGAQAAAAAAAA4BYAAJREAAAYCwAAAAAAAOAWAAAXRQAAYBAAAAAAAADgFgAAhkYAABgLAAAAAAAA4BYAAAlHAABgEAAAAAAAALgWAAB4SAAAiBcAAIBIAAAAAAAAIA0AAIgXAACJSAAAAQAAACANAAC4FgAAqkgAAIgXAAC6SAAAAAAAAEgNAACIFwAAy0gAAAEAAABIDQAAuBYAABhMAAC4FgAAN0wAALgWAABWTAAAuBYAAHVMAAC4FgAAlEwAALgWAACzTAAAuBYAANJMAAC4FgAA8UwAALgWAAAQTQAAuBYAAC9NAAC4FgAATk0AALgWAABtTQAAuBYAAIxNAACkFwAAn00AAAAAAAABAAAA8A0AAAAAAAC4FgAA4U0AAKQXAAAHTgAAAAAAAAEAAADwDQAAAAAAAKQXAABJTgAAAAAAAAEAAADwDQAAAAAAAKQXAACITgAAAAAAAAEAAADwDQAAAAAAAKQXAADHTgAAAAAAAAEAAADwDQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALgWAADNTwAA4BYAAC1QAAAADwAAAAAAAOAWAADaTwAAEA8AAAAAAAC4FgAA+08AAOAWAAAIUAAA8A4AAAAAAADgFgAAhlAAAOgOAAAAAAAA4BYAAJNQAADoDgAAAAAAAOAWAACjUAAA6A4AAAAAAADgFgAAtVAAADgPAAAAAAAA4BYAAMZQAAA4DwAAAAAAAOAWAADXUAAAAA8AAAAAAADgFgAA+VAAAHgPAAAAAAAA4BYAAB1RAAAADwAAAAAAAOAWAABCUQAAeA8AAAAAAADgFgAAjlEAAAAPAAAAAAAAbBcAALZRAABsFwAAuFEAAGwXAAC7UQAAbBcAAL1RAABsFwAAv1EAAGwXAADBUQAAbBcAAMNRAABsFwAAxVEAAGwXAADHUQAAbBcAAMlRAABsFwAAy1EAAGwXAADNUQAAbBcAAM9RAABsFwAA0VEAAOAWAADTUQAA8A4AAAAAAADgFgAARlIAAOgOAAAAAAAAuBYAAGJSAACkFwAAe1IAAAAAAAABAAAAWBAAAAAAAADgFgAA9FIAAIgQAAAAAAAA4BYAABdTAACYEAAAAAAAALgWAAAuUwAA4BYAAHBTAACIEAAAAAAAAOAWAACSUwAASA8AAAAAAAAAAAAAAAoAAAEAAAACAAAAAwAAAAEAAAAEAAAAAAAAABAKAAABAAAABQAAAAYAAAACAAAABwAAAAAAAAAgCgAACAAAAAkAAAABAAAAAAAAADgKAAAKAAAACwAAAAIAAAABAAAADAAAAA0AAAACAAAAAwAAAAMAAAAAAAAASAoAAAgAAAAOAAAAAQAAAAAAAABYCgAACAAAAA8AAAABAAAAAAAAAIAKAAAIAAAAEAAAAAEAAAAAAAAAcAoAAAgAAAARAAAAAQAAAAAAAACQCgAACAAAABIAAAABAAAAAAAAAKAKAAAIAAAAEwAAAAEAAAAAAAAAsAoAAAgAAAAUAAAAAQAAAAAAAADACgAACAAAABUAAAABAAAAAAAAANAKAAABAAAAFgAAABcAAAAEAAAAGAAAAAAAAADgCgAACAAAABkAAAABAAAAAAAAAPgKAAAFAAAAGgAAABsAAAAAAAAA8AoAAAEAAAAcAAAAHQAAAAAAAAAICwAAAQAAAB4AAAAfAAAABgAAACAAAAAAAAAAIAsAACEAAAAiAAAABwAAAAgAAAAAAAAAGAsAACMAAAAkAAAABwAAAAkAAAAAAAAAMAsAAAEAAAAlAAAAJgAAAAoAAAAnAAAAAAAAAEALAAAoAAAAKQAAAAcAAAALAAAAAAAAAFALAAABAAAAKgAAACsAAAAMAAAALAAAAAAAAABgCwAALQAAAC4AAAAHAAAADQAAAAAAAABwCwAAAQAAAC8AAAAwAAAADgAAADEAAAAAAAAAgAsAADIAAAAzAAAABwAAAA8AAAAAAAAAkAsAAAEAAAA0AAAANQAAABAAAAA2AAAAAAAAAKALAAARAAAANwAAADgAAAAAAAAAsAsAAAEAAAA5AAAAOgAAABIAAAA7AAAAAAAAAMALAAATAAAAPAAAAD0AAAAAAAAA0AsAAAEAAAA+AAAAPwAAABQAAABAAAAAAAAAAOALAAAVAAAAQQAAAEIAAAAAAAAA8AsAAAEAAABDAAAARAAAABYAAABFAAAAAAAAAAAMAAAXAAAARgAAAEcAAAAAAAAAEAwAAAEAAABIAAAASQAAABgAAABKAAAAAAAAACAMAAABAAAASwAAAEwAAAAZAAAATQAAAAAAAAAwDAAAAQAAAE4AAABPAAAAGgAAAFAAAAAAAAAAQAwAABsAAABRAAAAUgAAAAAAAABQDAAAAQAAAFMAAABUAAAAHAAAAFUAAAAAAAAAYAwAAFYAAABXAAAABwAAAB0AAAAAAAAAcAwAAAEAAABYAAAAWQAAAB4AAABaAAAAAAAAAIAMAABbAAAAXAAAAAcAAAAfAAAAAAAAAJAMAAABAAAAXQAAAF4AAAAgAAAAXwAAAAAAAACgDAAAYAAAAGEAAAAHAAAAIQAAAAAAAACwDAAAAQAAAGIAAABjAAAAIgAAAGQAAAAAAAAAwAwAAGUAAABmAAAABwAAACMAAAAAAAAA0AwAAAEAAABnAAAAaAAAACQAAABpAAAAAAAAAOAMAABqAAAAawAAAAcAAAAlAAAAAAAAAPAMAAABAAAAbAAAAG0AAAAmAAAAbgAAAAAAAAAADQAAbwAAAHAAAAAHAAAAJwAAAAAAAAAQDQAAAQAAAHEAAAByAAAAKAAAAHMAAAAoDQAAyA8AACgNAAAIEAAAEBAAACgNAABQDQAAyA8AAFANAAAgEAAAyA8AAFANAAAIEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwDgAAdAAAAHUAAAB2AAAAdwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAGA8AAHQAAAB4AAAAdgAAAHcAAAACAAAAAgAAAAIAAAACAAAAAAAAACgPAAB5AAAAegAAAAQAAAAAAAAAOA8AAHsAAAB8AAAABQAAAAAAAABIDwAACAAAAH0AAAABAAAAAAAAAFgPAAB7AAAAfgAAAAUAAAAAAAAAaA8AAHsAAAB/AAAABQAAAAAAAAC4DwAAdAAAAIAAAAB2AAAAdwAAAAMAAAAAAAAAiA8AAHQAAACBAAAAdgAAAHcAAAAEAAAAAAAAADgQAAB0AAAAggAAAHYAAAB3AAAAAgAAAAMAAAADAAAAAwAAAAAAAABIEAAAgwAAAIQAAAAGAAAAAAAAAHgQAACFAAAAhgAAAAcAAAABAAAABQAAAAYAAAACAAAAAAAAAKAQAACFAAAAhwAAAAgAAAADAAAABQAAAAYAAAAEAAAA4BcAAAQYAAAAAAAAsBAAAIgAAACJAAAAAQAAAExBU1ppcABvcGVuAGdldFBvaW50AGdldENvdW50AER5bmFtaWNMQVNaaXAAYWRkRmllbGRGbG9hdGluZwBhZGRGaWVsZFNpZ25lZABhZGRGaWVsZFVuc2lnbmVkAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9wb2ludGVySVBONmxhc3ppcDdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRU5TXzE0ZGVmYXVsdF9kZWxldGVJUzNfRUVOU185YWxsb2NhdG9ySVMzX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXAyaW82cmVhZGVyMTBiYXNpY19maWxlSU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJUzdfRUVOU185YWxsb2NhdG9ySVM3X0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXAyaW82cmVhZGVyMTBiYXNpY19maWxlSU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFAExBU0YATjZsYXN6aXAxM2ludmFsaWRfbWFnaWNFAGFsbG9jYXRvcjxUPjo6YWxsb2NhdGUoc2l6ZV90IG4pICduJyBleGNlZWRzIG1heGltdW0gc3VwcG9ydGVkIHNpemUARmlsZSBtYWdpYyBpcyBub3QgdmFsaWQATlN0M19fMjEwX19mdW5jdGlvbjZfX2Z1bmNJWk42bGFzemlwMmlvNnJlYWRlcjEwYmFzaWNfZmlsZUlOUzJfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRTExX3ZhbGlkYXRvcnNFdkVVbFJOUzNfNmhlYWRlckVFX05TXzlhbGxvY2F0b3JJU0JfRUVGdlNBX0VFRQBOU3QzX18yMTBfX2Z1bmN0aW9uNl9fYmFzZUlGdlJONmxhc3ppcDJpbzZoZWFkZXJFRUVFAE42bGFzemlwMjFvbGRfc3R5bGVfY29tcHJlc3Npb25FAE42bGFzemlwMTRub3RfY29tcHJlc3NlZEUAVGhlIGZpbGUgc2VlbXMgdG8gaGF2ZSBvbGQgc3R5bGUgY29tcHJlc3Npb24gd2hpY2ggaXMgbm90IHN1cHBvcnRlZABUaGUgZmlsZSBkb2Vzbid0IHNlZW0gdG8gYmUgY29tcHJlc3NlZABaTjZsYXN6aXAyaW82cmVhZGVyMTBiYXNpY19maWxlSU5TXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUUxMV92YWxpZGF0b3JzRXZFVWxSTlMwXzZoZWFkZXJFRV8AbGFzemlwIGVuY29kZWQATjZsYXN6aXAxM25vX2xhc3ppcF92bHJFAE42bGFzemlwMjVsYXN6aXBfZm9ybWF0X3Vuc3VwcG9ydGVkRQBPbmx5IExBU3ppcCBQT0lOVFdJU0UgQ0hVTktFRCBkZWNvbXByZXNzb3IgaXMgc3VwcG9ydGVkAE5vIExBU3ppcCBWTFIgd2FzIGZvdW5kIGluIHRoZSBWTFJzIHNlY3Rpb24ATjZsYXN6aXAyMmNodW5rX3RhYmxlX3JlYWRfZXJyb3JFAENodW5rIHRhYmxlIG9mZnNldCA9PSAtMSBpcyBub3Qgc3VwcG9ydGVkIGF0IHRoaXMgdGltZQBONmxhc3ppcDEzbm90X3N1cHBvcnRlZEUATjZsYXN6aXAyNnVua25vd25fY2h1bmtfdGFibGVfZm9ybWF0RQBjaHVua19zaXplID09IHVpbnQubWF4IGlzIG5vdCBzdXBwb3J0ZWQgYXQgdGhpcyB0aW1lLgBUaGVyZSB3YXMgYSBwcm9ibGVtIHJlYWRpbmcgdGhlIGNodW5rIHRhYmxlAFRoZSBjaHVuayB0YWJsZSB2ZXJzaW9uIG51bWJlciBpcyB1bmtub3duAE42bGFzemlwMTFlbmRfb2ZfZmlsZUUAUmVhY2hlZCBFbmQgb2YgZmlsZQBJbnZhbGlkIG51bWJlciBvZiBzeW1ib2xzAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9wb2ludGVySVBONmxhc3ppcDhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOU18xNGRlZmF1bHRfZGVsZXRlSVM5X0VFTlNfOWFsbG9jYXRvcklTOV9FRUVFAE5TdDNfXzIxNGRlZmF1bHRfZGVsZXRlSU42bGFzemlwOGRlY29kZXJzMTBhcml0aG1ldGljSU5TMV8yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOUzFfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRUVFAE42bGFzemlwMTl1bmtub3duX3NjaGVtYV90eXBlRQBUaGUgTEFaIHNjaGVtYSBpcyBub3QgcmVjb2duaXplZABONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2ZpZWxkX2RlY29tcHJlc3NvcklOU184ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlNfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlNfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyMGR5bmFtaWNfZGVjb21wcmVzc29yRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19maWVsZF9kZWNvbXByZXNzb3JJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJU0NfRUVOU185YWxsb2NhdG9ySVNDX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19maWVsZF9kZWNvbXByZXNzb3JJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOU18yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOU183c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMwXzVmaWVsZElOUzBfM2xhczdwb2ludDEwRU5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNDX0VFRUVFRQBONmxhc3ppcDdmb3JtYXRzMTBiYXNlX2ZpZWxkRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19kZWNvbXByZXNzb3JfZmllbGRJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfNWZpZWxkSU5TMl8zbGFzN3BvaW50MTBFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0VfRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTSV9FRU5TXzlhbGxvY2F0b3JJU0lfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TMV8yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOUzFfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMl81ZmllbGRJTlMyXzNsYXM3cG9pbnQxMEVOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRV9FRUVFRUVFRQBONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOU184ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlNfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlNfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMF81ZmllbGRJTlMwXzNsYXM3Z3BzdGltZUVOUzBfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTQ19FRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzVmaWVsZElOUzJfM2xhczdncHN0aW1lRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNFX0VFRUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJU0lfRUVOU185YWxsb2NhdG9ySVNJX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19kZWNvbXByZXNzb3JfZmllbGRJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfNWZpZWxkSU5TMl8zbGFzN2dwc3RpbWVFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0VfRUVFRUVFRUUATjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19kZWNvbXByZXNzb3JfZmllbGRJTlNfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzBfNWZpZWxkSU5TMF8zbGFzM3JnYkVOUzBfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTQ19FRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzVmaWVsZElOUzJfM2xhczNyZ2JFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0VfRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTSV9FRU5TXzlhbGxvY2F0b3JJU0lfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TMV8yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOUzFfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMl81ZmllbGRJTlMyXzNsYXMzcmdiRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNFX0VFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOU18yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOU183c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMwXzVmaWVsZElOUzBfM2xhczEwZXh0cmFieXRlc0VOUzBfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTQ19FRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzVmaWVsZElOUzJfM2xhczEwZXh0cmFieXRlc0VOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRV9FRUVFRUVOU18xNGRlZmF1bHRfZGVsZXRlSVNJX0VFTlNfOWFsbG9jYXRvcklTSV9FRUVFAE5TdDNfXzIxNGRlZmF1bHRfZGVsZXRlSU42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzVmaWVsZElOUzJfM2xhczEwZXh0cmFieXRlc0VOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRV9FRUVFRUVFRQBONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlNfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzBfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzBfNWZpZWxkSU5TMF8zbGFzN3BvaW50MTBFTlMwXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0RfRUVFRUVFRUVFAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9wb2ludGVySVBONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzJfNWZpZWxkSU5TMl8zbGFzN3BvaW50MTBFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0ZfRUVFRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTS19FRU5TXzlhbGxvY2F0b3JJU0tfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzJfNWZpZWxkSU5TMl8zbGFzN3BvaW50MTBFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0ZfRUVFRUVFRUVFRUUATjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOU18yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOU183c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMwXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMwXzVmaWVsZElOUzBfM2xhczdwb2ludDEwRU5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNEX0VFRUVOU0JfSU5TQ183Z3BzdGltZUVOU0VfSVNIX0VFRUVFRUVFRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMyXzVmaWVsZElOUzJfM2xhczdwb2ludDEwRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNGX0VFRUVOU0RfSU5TRV83Z3BzdGltZUVOU0dfSVNKX0VFRUVFRUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJU05fRUVOU185YWxsb2NhdG9ySVNOX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMyXzVmaWVsZElOUzJfM2xhczdwb2ludDEwRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNGX0VFRUVOU0RfSU5TRV83Z3BzdGltZUVOU0dfSVNKX0VFRUVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyMWR5bmFtaWNfZGVjb21wcmVzc29yMUlOU184ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlNfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlNfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMF8xOXJlY29yZF9kZWNvbXByZXNzb3JJSk5TMF81ZmllbGRJTlMwXzNsYXM3cG9pbnQxMEVOUzBfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRF9FRUVFTlNCX0lOU0NfM3JnYkVOU0VfSVNIX0VFRUVFRUVFRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMyXzVmaWVsZElOUzJfM2xhczdwb2ludDEwRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNGX0VFRUVOU0RfSU5TRV8zcmdiRU5TR19JU0pfRUVFRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTTl9FRU5TXzlhbGxvY2F0b3JJU05fRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzJfNWZpZWxkSU5TMl8zbGFzN3BvaW50MTBFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0ZfRUVFRU5TRF9JTlNFXzNyZ2JFTlNHX0lTSl9FRUVFRUVFRUVFRQBONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlNfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzBfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzBfNWZpZWxkSU5TMF8zbGFzN3BvaW50MTBFTlMwXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0RfRUVFRU5TQl9JTlNDXzdncHN0aW1lRU5TRV9JU0hfRUVFRU5TQl9JTlNDXzNyZ2JFTlNFX0lTS19FRUVFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyMWR5bmFtaWNfZGVjb21wcmVzc29yMUlOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TMV8yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOUzFfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMl8xOXJlY29yZF9kZWNvbXByZXNzb3JJSk5TMl81ZmllbGRJTlMyXzNsYXM3cG9pbnQxMEVOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRl9FRUVFTlNEX0lOU0VfN2dwc3RpbWVFTlNHX0lTSl9FRUVFTlNEX0lOU0VfM3JnYkVOU0dfSVNNX0VFRUVFRUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJU1FfRUVOU185YWxsb2NhdG9ySVNRX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMyXzVmaWVsZElOUzJfM2xhczdwb2ludDEwRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNGX0VFRUVOU0RfSU5TRV83Z3BzdGltZUVOU0dfSVNKX0VFRUVOU0RfSU5TRV8zcmdiRU5TR19JU01fRUVFRUVFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUDEwYnVmX3N0cmVhbU5TXzE0ZGVmYXVsdF9kZWxldGVJUzFfRUVOU185YWxsb2NhdG9ySVMxX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJMTBidWZfc3RyZWFtRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTNV9FRU5TXzlhbGxvY2F0b3JJUzVfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZmllbGRfZGVjb21wcmVzc29ySU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRUVFAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9wb2ludGVySVBONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2ZpZWxkX2RlY29tcHJlc3NvcklOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFRUVOU18xNGRlZmF1bHRfZGVsZXRlSVM4X0VFTlNfOWFsbG9jYXRvcklTOF9FRUVFAE5TdDNfXzIxNGRlZmF1bHRfZGVsZXRlSU42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZmllbGRfZGVjb21wcmVzc29ySU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJaU5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSWlFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSWlOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElpRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZElpTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJaUVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJak5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSWpFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSWpOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElqRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZElqTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJakVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJYU5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSWFFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSWFOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElhRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZElhTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJYUVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJc05TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSXNFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSXNOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElzRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZElzTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJc0VFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJaE5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSWhFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSWhOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZEloRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZEloTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJaEVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJdE5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSXRFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSXROUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZEl0RUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZEl0TlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJdEVFRUVFRUVFADZMQVNaaXAAUDZMQVNaaXAAUEs2TEFTWmlwAGlpAHYAdmkAdmlpaWkAdmlpaQBpaWkAMTNEeW5hbWljTEFTWmlwAFAxM0R5bmFtaWNMQVNaaXAAUEsxM0R5bmFtaWNMQVNaaXAAdm9pZABib29sAGNoYXIAc2lnbmVkIGNoYXIAdW5zaWduZWQgY2hhcgBzaG9ydAB1bnNpZ25lZCBzaG9ydABpbnQAdW5zaWduZWQgaW50AGxvbmcAdW5zaWduZWQgbG9uZwBmbG9hdABkb3VibGUAc3RkOjpzdHJpbmcAc3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4Ac3RkOjp3c3RyaW5nAHN0ZDo6dTE2c3RyaW5nAHN0ZDo6dTMyc3RyaW5nAGVtc2NyaXB0ZW46OnZhbABlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxjaGFyPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxzaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2hvcnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGludD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8bG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgbG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MTZfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxkb3VibGU+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGxvbmcgZG91YmxlPgBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0llRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJZEVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWZFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0ltRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJbEVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWpFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lpRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJdEVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXNFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0loRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJYUVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWNFRQBOMTBlbXNjcmlwdGVuM3ZhbEUATlN0M19fMjEyYmFzaWNfc3RyaW5nSURpTlNfMTFjaGFyX3RyYWl0c0lEaUVFTlNfOWFsbG9jYXRvcklEaUVFRUUATlN0M19fMjIxX19iYXNpY19zdHJpbmdfY29tbW9uSUxiMUVFRQBOU3QzX18yMTJiYXNpY19zdHJpbmdJRHNOU18xMWNoYXJfdHJhaXRzSURzRUVOU185YWxsb2NhdG9ySURzRUVFRQBOU3QzX18yMTJiYXNpY19zdHJpbmdJd05TXzExY2hhcl90cmFpdHNJd0VFTlNfOWFsbG9jYXRvckl3RUVFRQBOU3QzX18yMTJiYXNpY19zdHJpbmdJaE5TXzExY2hhcl90cmFpdHNJaEVFTlNfOWFsbG9jYXRvckloRUVFRQBOU3QzX18yMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAtKyAgIDBYMHgAKG51bGwpAC0wWCswWCAwWC0weCsweCAweABpbmYASU5GAG5hbgBOQU4ALgB0ZXJtaW5hdGluZyB3aXRoICVzIGV4Y2VwdGlvbiBvZiB0eXBlICVzOiAlcwB0ZXJtaW5hdGluZyB3aXRoICVzIGV4Y2VwdGlvbiBvZiB0eXBlICVzAHRlcm1pbmF0aW5nIHdpdGggJXMgZm9yZWlnbiBleGNlcHRpb24AdGVybWluYXRpbmcAdW5jYXVnaHQAU3Q5ZXhjZXB0aW9uAE4xMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm9FAFN0OXR5cGVfaW5mbwBOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAHRlcm1pbmF0ZV9oYW5kbGVyIHVuZXhwZWN0ZWRseSByZXR1cm5lZABzdGQ6OmJhZF9hbGxvYwBTdDliYWRfYWxsb2MAU3QxMWxvZ2ljX2Vycm9yAFN0MTNydW50aW1lX2Vycm9yAFN0MTJsZW5ndGhfZXJyb3IAU3QxMm91dF9vZl9yYW5nZQBOMTBfX2N4eGFiaXYxMTdfX3BiYXNlX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTIwX19mdW5jdGlvbl90eXBlX2luZm9FAE4xMF9fY3h4YWJpdjEyOV9fcG9pbnRlcl90b19tZW1iZXJfdHlwZV9pbmZvRQBQdXJlIHZpcnR1YWwgZnVuY3Rpb24gY2FsbGVkIQBOMTBfX2N4eGFiaXYxMjNfX2Z1bmRhbWVudGFsX3R5cGVfaW5mb0UAdgBEbgBiAGMAaABhAHMAdABpAGoAbABtAGYAZABOMTBfX2N4eGFiaXYxMjFfX3ZtaV9jbGFzc190eXBlX2luZm9FAF9fY3hhX2d1YXJkX2FjcXVpcmUgZGV0ZWN0ZWQgcmVjdXJzaXZlIGluaXRpYWxpemF0aW9uAHN0ZDo6YmFkX2Z1bmN0aW9uX2NhbGwATlN0M19fMjE3YmFkX2Z1bmN0aW9uX2NhbGxFAE5TdDNfXzIxNF9fc2hhcmVkX2NvdW50RQBOU3QzX18yMTlfX3NoYXJlZF93ZWFrX2NvdW50RQBtdXRleCBsb2NrIGZhaWxlZABiYXNpY19zdHJpbmcAdW5zcGVjaWZpZWQgZ2VuZXJpY19jYXRlZ29yeSBlcnJvcgBVbmtub3duIGVycm9yICVkAGdlbmVyaWMATlN0M19fMjI0X19nZW5lcmljX2Vycm9yX2NhdGVnb3J5RQBOU3QzX18yMTJfX2RvX21lc3NhZ2VFAE5TdDNfXzIxNGVycm9yX2NhdGVnb3J5RQB1bnNwZWNpZmllZCBzeXN0ZW1fY2F0ZWdvcnkgZXJyb3IAc3lzdGVtAE5TdDNfXzIyM19fc3lzdGVtX2Vycm9yX2NhdGVnb3J5RQBOU3QzX18yMTJzeXN0ZW1fZXJyb3JFADogAHZlY3Rvcg==";var Oe=22368;function wo(k){return _s(k)}var pn={};function Mo(k){if(k){var T=pn[k];T.refcount++}}function yr(k){if(!k||pn[k])return k;for(var T in pn)for(var V=+T,m=pn[V].adjusted,J=m.length,e=0;e<J;e++)if(m[e]===k)return V;return k}function Ji(k){var T=pn[k];return T&&!T.caught&&(T.caught=!0,Hn.uncaught_exceptions--),T&&(T.rethrown=!1),Mo(yr(k)),k}function Va(k,T,V){throw pn[k]={ptr:k,adjusted:[k],type:T,destructor:V,refcount:0,caught:!1,rethrown:!1},"uncaught_exception"in Hn?Hn.uncaught_exceptions++:Hn.uncaught_exceptions=1,k}function Wa(){return Hn.uncaught_exceptions}function Za(){}function ts(k){switch(k){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+k)}}function za(){for(var k=new Array(256),T=0;T<256;++T)k[T]=String.fromCharCode(T);wr=k}var wr=void 0;function Ze(k){for(var T="",V=k;Rt[V];)T+=wr[Rt[V++]];return T}var $i={},ve={},gi={},_n=48,Mr=57;function es(k){if(k===void 0)return"_unknown";k=k.replace(/[^a-zA-Z0-9_]/g,"$");var T=k.charCodeAt(0);return T>=_n&&T<=Mr?"_"+k:k}function is(k,T){return k=es(k),new Function("body","return function "+k+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(T)}function Ln(k,T){var V=is(T,function(m){this.name=T,this.message=m;var J=new Error(m).stack;J!==void 0&&(this.stack=this.toString()+`
`+J.replace(/^Error(:[^\n]*)?\n/,""))});return V.prototype=Object.create(k.prototype),V.prototype.constructor=V,V.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},V}var Gi=void 0;function Kt(k){throw new Gi(k)}var qi=void 0;function Qt(k){throw new qi(k)}function An(k,T,V){k.forEach(function(ot){gi[ot]=T});function m(ot){var ct=V(ot);ct.length!==k.length&&Qt("Mismatched type converter count");for(var X=0;X<k.length;++X)ze(k[X],ct[X])}var J=new Array(T.length),e=[],O=0;T.forEach(function(ot,ct){ve.hasOwnProperty(ot)?J[ct]=ve[ot]:(e.push(ot),$i.hasOwnProperty(ot)||($i[ot]=[]),$i[ot].push(function(){J[ct]=ve[ot],++O,O===e.length&&m(J)}))}),e.length===0&&m(J)}function ze(k,T,V){if(V=V||{},!("argPackAdvance"in T))throw new TypeError("registerType registeredInstance requires argPackAdvance");var m=T.name;if(k||Kt('type "'+m+'" must have a positive integer typeid pointer'),ve.hasOwnProperty(k)){if(V.ignoreDuplicateRegistrations)return;Kt("Cannot register type '"+m+"' twice")}if(ve[k]=T,delete gi[k],$i.hasOwnProperty(k)){var J=$i[k];delete $i[k],J.forEach(function(e){e()})}}function Vn(k,T,V,m,J){var e=ts(V);T=Ze(T),ze(k,{name:T,fromWireType:function(O){return!!O},toWireType:function(O,ot){return ot?m:J},argPackAdvance:8,readValueFromPointer:function(O){var ot;if(V===1)ot=bt;else if(V===2)ot=Ae;else if(V===4)ot=Gt;else throw new TypeError("Unknown boolean type size: "+T);return this.fromWireType(ot[O>>e])},destructorFunction:null})}function vi(k){if(!(this instanceof Bi)||!(k instanceof Bi))return!1;for(var T=this.$$.ptrType.registeredClass,V=this.$$.ptr,m=k.$$.ptrType.registeredClass,J=k.$$.ptr;T.baseClass;)V=T.upcast(V),T=T.baseClass;for(;m.baseClass;)J=m.upcast(J),m=m.baseClass;return T===m&&V===J}function Da(k){return{count:k.count,deleteScheduled:k.deleteScheduled,preservePointerOnDelete:k.preservePointerOnDelete,ptr:k.ptr,ptrType:k.ptrType,smartPtr:k.smartPtr,smartPtrType:k.smartPtrType}}function ns(k){function T(V){return V.$$.ptrType.registeredClass.name}Kt(T(k)+" instance already deleted")}var rs=!1;function Cr(k){}function ss(k){k.smartPtr?k.smartPtrType.rawDestructor(k.smartPtr):k.ptrType.registeredClass.rawDestructor(k.ptr)}function os(k){k.count.value-=1;var T=k.count.value===0;T&&ss(k)}function Wn(k){return typeof FinalizationGroup>"u"?(Wn=function(T){return T},k):(rs=new FinalizationGroup(function(T){for(var V=T.next();!V.done;V=T.next()){var m=V.value;m.ptr?os(m):console.warn("object already deleted: "+m.ptr)}}),Wn=function(T){return rs.register(T,T.$$,T.$$),T},Cr=function(T){rs.unregister(T.$$)},Wn(k))}function Co(){if(this.$$.ptr||ns(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var k=Wn(Object.create(Object.getPrototypeOf(this),{$$:{value:Da(this.$$)}}));return k.$$.count.value+=1,k.$$.deleteScheduled=!1,k}function So(){this.$$.ptr||ns(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Kt("Object already scheduled for deletion"),Cr(this),os(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Eo(){return!this.$$.ptr}var Zn=void 0,zn=[];function Qi(){for(;zn.length;){var k=zn.pop();k.$$.deleteScheduled=!1,k.delete()}}function as(){return this.$$.ptr||ns(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Kt("Object already scheduled for deletion"),zn.push(this),zn.length===1&&Zn&&Zn(Qi),this.$$.deleteScheduled=!0,this}function Dn(){Bi.prototype.isAliasOf=vi,Bi.prototype.clone=Co,Bi.prototype.delete=So,Bi.prototype.isDeleted=Eo,Bi.prototype.deleteLater=as}function Bi(){}var bo={};function mn(k,T,V){if(k[T].overloadTable===void 0){var m=k[T];k[T]=function(){return k[T].overloadTable.hasOwnProperty(arguments.length)||Kt("Function '"+V+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+k[T].overloadTable+")!"),k[T].overloadTable[arguments.length].apply(this,arguments)},k[T].overloadTable=[],k[T].overloadTable[m.argCount]=m}}function Xa(k,T,V){r.hasOwnProperty(k)?(Kt("Cannot register public name '"+k+"' twice"),mn(r,k,k),r.hasOwnProperty(V)&&Kt("Cannot register multiple overloads of a function with the same number of arguments ("+V+")!"),r[k].overloadTable[V]=T):r[k]=T}function ja(k,T,V,m,J,e,O,ot){this.name=k,this.constructor=T,this.instancePrototype=V,this.rawDestructor=m,this.baseClass=J,this.getActualType=e,this.upcast=O,this.downcast=ot,this.pureVirtualFunctions=[]}function gn(k,T,V){for(;T!==V;)T.upcast||Kt("Expected null or instance of "+V.name+", got an instance of "+T.name),k=T.upcast(k),T=T.baseClass;return k}function Ro(k,T){if(T===null)return this.isReference&&Kt("null is not a valid "+this.name),0;T.$$||Kt('Cannot pass "'+Ce(T)+'" as a '+this.name),T.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name);var V=T.$$.ptrType.registeredClass,m=gn(T.$$.ptr,V,this.registeredClass);return m}function Xn(k,T){var V;if(T===null)return this.isReference&&Kt("null is not a valid "+this.name),this.isSmartPointer?(V=this.rawConstructor(),k!==null&&k.push(this.rawDestructor,V),V):0;T.$$||Kt('Cannot pass "'+Ce(T)+'" as a '+this.name),T.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&T.$$.ptrType.isConst&&Kt("Cannot convert argument of type "+(T.$$.smartPtrType?T.$$.smartPtrType.name:T.$$.ptrType.name)+" to parameter type "+this.name);var m=T.$$.ptrType.registeredClass;if(V=gn(T.$$.ptr,m,this.registeredClass),this.isSmartPointer)switch(T.$$.smartPtr===void 0&&Kt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:T.$$.smartPtrType===this?V=T.$$.smartPtr:Kt("Cannot convert argument of type "+(T.$$.smartPtrType?T.$$.smartPtrType.name:T.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:V=T.$$.smartPtr;break;case 2:if(T.$$.smartPtrType===this)V=T.$$.smartPtr;else{var J=T.clone();V=this.rawShare(V,fs(function(){J.delete()})),k!==null&&k.push(this.rawDestructor,V)}break;default:Kt("Unsupporting sharing policy")}return V}function Ha(k,T){if(T===null)return this.isReference&&Kt("null is not a valid "+this.name),0;T.$$||Kt('Cannot pass "'+Ce(T)+'" as a '+this.name),T.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name),T.$$.ptrType.isConst&&Kt("Cannot convert argument of type "+T.$$.ptrType.name+" to parameter type "+this.name);var V=T.$$.ptrType.registeredClass,m=gn(T.$$.ptr,V,this.registeredClass);return m}function Sr(k){return this.fromWireType(qt[k>>2])}function Ya(k){return this.rawGetPointee&&(k=this.rawGetPointee(k)),k}function Ja(k){this.rawDestructor&&this.rawDestructor(k)}function $a(k){k!==null&&k.delete()}function yi(k,T,V){if(T===V)return k;if(V.baseClass===void 0)return null;var m=yi(k,T,V.baseClass);return m===null?null:V.downcast(m)}function Po(){return Object.keys(jn).length}function qa(){var k=[];for(var T in jn)jn.hasOwnProperty(T)&&k.push(jn[T]);return k}function Qa(k){Zn=k,zn.length&&Zn&&Zn(Qi)}function ls(){r.getInheritedInstanceCount=Po,r.getLiveInheritedInstances=qa,r.flushPendingDeletes=Qi,r.setDelayFunction=Qa}var jn={};function Ka(k,T){for(T===void 0&&Kt("ptr should not be undefined");k.baseClass;)T=k.upcast(T),k=k.baseClass;return T}function t0(k,T){return T=Ka(k,T),jn[T]}function Ki(k,T){(!T.ptrType||!T.ptr)&&Qt("makeClassHandle requires ptr and ptrType");var V=!!T.smartPtrType,m=!!T.smartPtr;return V!==m&&Qt("Both smartPtrType and smartPtr must be specified"),T.count={value:1},Wn(Object.create(k,{$$:{value:T}}))}function e0(k){var T=this.getPointee(k);if(!T)return this.destructor(k),null;var V=t0(this.registeredClass,T);if(V!==void 0){if(V.$$.count.value===0)return V.$$.ptr=T,V.$$.smartPtr=k,V.clone();var m=V.clone();return this.destructor(k),m}function J(){return this.isSmartPointer?Ki(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:T,smartPtrType:this,smartPtr:k}):Ki(this.registeredClass.instancePrototype,{ptrType:this,ptr:k})}var e=this.registeredClass.getActualType(T),O=bo[e];if(!O)return J.call(this);var ot;this.isConst?ot=O.constPointerType:ot=O.pointerType;var ct=yi(T,this.registeredClass,ot.registeredClass);return ct===null?J.call(this):this.isSmartPointer?Ki(ot.registeredClass.instancePrototype,{ptrType:ot,ptr:ct,smartPtrType:this,smartPtr:k}):Ki(ot.registeredClass.instancePrototype,{ptrType:ot,ptr:ct})}function i0(){wi.prototype.getPointee=Ya,wi.prototype.destructor=Ja,wi.prototype.argPackAdvance=8,wi.prototype.readValueFromPointer=Sr,wi.prototype.deleteObject=$a,wi.prototype.fromWireType=e0}function wi(k,T,V,m,J,e,O,ot,ct,X,Mt){this.name=k,this.registeredClass=T,this.isReference=V,this.isConst=m,this.isSmartPointer=J,this.pointeeType=e,this.sharingPolicy=O,this.rawGetPointee=ot,this.rawConstructor=ct,this.rawShare=X,this.rawDestructor=Mt,!J&&T.baseClass===void 0?m?(this.toWireType=Ro,this.destructorFunction=null):(this.toWireType=Ha,this.destructorFunction=null):this.toWireType=Xn}function n0(k,T,V){r.hasOwnProperty(k)||Qt("Replacing nonexistant public symbol"),r[k].overloadTable!==void 0&&V!==void 0||(r[k]=T,r[k].argCount=V)}function Fe(k,T){k=Ze(k);function V(e){for(var O=[],ot=1;ot<k.length;++ot)O.push("a"+ot);var ct="dynCall_"+k+"_"+T,X="return function "+ct+"("+O.join(", ")+`) {
`;return X+="    return dynCall(rawFunction"+(O.length?", ":"")+O.join(", ")+`);
`,X+=`};
`,new Function("dynCall","rawFunction",X)(e,T)}var m=r["dynCall_"+k],J=V(m);return typeof J!="function"&&Kt("unknown function pointer with signature "+k+": "+T),J}var xo=void 0;function r0(k){var T=C0(k),V=Ze(T);return Ii(T),V}function vn(k,T){var V=[],m={};function J(e){if(!m[e]&&!ve[e]){if(gi[e]){gi[e].forEach(J);return}V.push(e),m[e]=!0}}throw T.forEach(J),new xo(k+": "+V.map(r0).join([", "]))}function cs(k,T,V,m,J,e,O,ot,ct,X,Mt,zt,Dt){Mt=Ze(Mt),e=Fe(J,e),ot&&(ot=Fe(O,ot)),X&&(X=Fe(ct,X)),Dt=Fe(zt,Dt);var Bt=es(Mt);Xa(Bt,function(){vn("Cannot construct "+Mt+" due to unbound types",[m])}),An([k,T,V],m?[m]:[],function(Nt){Nt=Nt[0];var Ot,Xt;m?(Ot=Nt.registeredClass,Xt=Ot.instancePrototype):Xt=Bi.prototype;var Mi=is(Bt,function(){if(Object.getPrototypeOf(this)!==tn)throw new Gi("Use 'new' to construct "+Mt);if(Ci.constructor_body===void 0)throw new Gi(Mt+" has no accessible constructor");var Jn=Ci.constructor_body[arguments.length];if(Jn===void 0)throw new Gi("Tried to invoke ctor of "+Mt+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ci.constructor_body).toString()+") parameters instead!");return Jn.apply(this,arguments)}),tn=Object.create(Xt,{constructor:{value:Mi}});Mi.prototype=tn;var Ci=new ja(Mt,Mi,tn,Dt,Ot,e,ot,X),br=new wi(Mt,Ci,!0,!1,!1),Si=new wi(Mt+"*",Ci,!1,!1,!1),en=new wi(Mt+" const*",Ci,!1,!0,!1);return bo[k]={pointerType:Si,constPointerType:en},n0(Bt,Mi),[br,Si,en]})}function To(k,T){for(var V=[],m=0;m<k;m++)V.push(Gt[(T>>2)+m]);return V}function Fo(k){for(;k.length;){var T=k.pop(),V=k.pop();V(T)}}function yn(k,T,V,m,J,e){q(T>0);var O=To(T,V);J=Fe(m,J);var ot=[e],ct=[];An([],[k],function(X){X=X[0];var Mt="constructor "+X.name;if(X.registeredClass.constructor_body===void 0&&(X.registeredClass.constructor_body=[]),X.registeredClass.constructor_body[T-1]!==void 0)throw new Gi("Cannot register multiple constructors with identical number of parameters ("+(T-1)+") for class '"+X.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return X.registeredClass.constructor_body[T-1]=function(){vn("Cannot construct "+X.name+" due to unbound types",O)},An([],O,function(zt){return X.registeredClass.constructor_body[T-1]=function(){arguments.length!==T-1&&Kt(Mt+" called with "+arguments.length+" arguments, expected "+(T-1)),ct.length=0,ot.length=T;for(var Bt=1;Bt<T;++Bt)ot[Bt]=zt[Bt].toWireType(ct,arguments[Bt-1]);var Nt=J.apply(null,ot);return Fo(ct),zt[0].fromWireType(Nt)},[]}),[]})}function ko(k,T){if(!(k instanceof Function))throw new TypeError("new_ called with constructor type "+typeof k+" which is not a function");var V=is(k.name||"unknownFunctionName",function(){});V.prototype=k.prototype;var m=new V,J=k.apply(m,T);return J instanceof Object?J:m}function s0(k,T,V,m,J){var e=T.length;e<2&&Kt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var O=T[1]!==null&&V!==null,ot=!1,ct=1;ct<T.length;++ct)if(T[ct]!==null&&T[ct].destructorFunction===void 0){ot=!0;break}for(var X=T[0].name!=="void",Mt="",zt="",ct=0;ct<e-2;++ct)Mt+=(ct!==0?", ":"")+"arg"+ct,zt+=(ct!==0?", ":"")+"arg"+ct+"Wired";var Dt="return function "+es(k)+"("+Mt+`) {
if (arguments.length !== `+(e-2)+`) {
throwBindingError('function `+k+" called with ' + arguments.length + ' arguments, expected "+(e-2)+` args!');
}
`;ot&&(Dt+=`var destructors = [];
`);var Bt=ot?"destructors":"null",Nt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Ot=[Kt,m,J,Fo,T[0],T[1]];O&&(Dt+="var thisWired = classParam.toWireType("+Bt+`, this);
`);for(var ct=0;ct<e-2;++ct)Dt+="var arg"+ct+"Wired = argType"+ct+".toWireType("+Bt+", arg"+ct+"); // "+T[ct+2].name+`
`,Nt.push("argType"+ct),Ot.push(T[ct+2]);if(O&&(zt="thisWired"+(zt.length>0?", ":"")+zt),Dt+=(X?"var rv = ":"")+"invoker(fn"+(zt.length>0?", ":"")+zt+`);
`,ot)Dt+=`runDestructors(destructors);
`;else for(var ct=O?1:2;ct<T.length;++ct){var Xt=ct===1?"thisWired":"arg"+(ct-2)+"Wired";T[ct].destructorFunction!==null&&(Dt+=Xt+"_dtor("+Xt+"); // "+T[ct].name+`
`,Nt.push(Xt+"_dtor"),Ot.push(T[ct].destructorFunction))}X&&(Dt+=`var ret = retType.fromWireType(rv);
return ret;
`),Dt+=`}
`,Nt.push(Dt);var Mi=ko(Function,Nt).apply(null,Ot);return Mi}function hs(k,T,V,m,J,e,O,ot){var ct=To(V,m);T=Ze(T),e=Fe(J,e),An([],[k],function(X){X=X[0];var Mt=X.name+"."+T;ot&&X.registeredClass.pureVirtualFunctions.push(T);function zt(){vn("Cannot call "+Mt+" due to unbound types",ct)}var Dt=X.registeredClass.instancePrototype,Bt=Dt[T];return Bt===void 0||Bt.overloadTable===void 0&&Bt.className!==X.name&&Bt.argCount===V-2?(zt.argCount=V-2,zt.className=X.name,Dt[T]=zt):(mn(Dt,T,Mt),Dt[T].overloadTable[V-2]=zt),An([],ct,function(Nt){var Ot=s0(Mt,Nt,X,e,O);return Dt[T].overloadTable===void 0?(Ot.argCount=V-2,Dt[T]=Ot):Dt[T].overloadTable[V-2]=Ot,[]}),[]})}var us=[],Qe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function No(k){k>4&&--Qe[k].refcount===0&&(Qe[k]=void 0,us.push(k))}function o0(){for(var k=0,T=5;T<Qe.length;++T)Qe[T]!==void 0&&++k;return k}function Go(){for(var k=5;k<Qe.length;++k)if(Qe[k]!==void 0)return Qe[k];return null}function a0(){r.count_emval_handles=o0,r.get_first_emval=Go}function fs(k){switch(k){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var T=us.length?us.pop():Qe.length;return Qe[T]={refcount:1,value:k},T}}}function ds(k,T){T=Ze(T),ze(k,{name:T,fromWireType:function(V){var m=Qe[V].value;return No(V),m},toWireType:function(V,m){return fs(m)},argPackAdvance:8,readValueFromPointer:Sr,destructorFunction:null})}function Ce(k){if(k===null)return"null";var T=typeof k;return T==="object"||T==="array"||T==="function"?k.toString():""+k}function l0(k,T){switch(T){case 2:return function(V){return this.fromWireType(Le[V>>2])};case 3:return function(V){return this.fromWireType($e[V>>3])};default:throw new TypeError("Unknown float type: "+k)}}function c0(k,T,V){var m=ts(V);T=Ze(T),ze(k,{name:T,fromWireType:function(J){return J},toWireType:function(J,e){if(typeof e!="number"&&typeof e!="boolean")throw new TypeError('Cannot convert "'+Ce(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:l0(T,m),destructorFunction:null})}function h0(k,T,V){switch(T){case 0:return V?function(J){return bt[J]}:function(J){return Rt[J]};case 1:return V?function(J){return Ae[J>>1]}:function(J){return oe[J>>1]};case 2:return V?function(J){return Gt[J>>2]}:function(J){return qt[J>>2]};default:throw new TypeError("Unknown integer type: "+k)}}function u0(k,T,V,m,J){T=Ze(T),J===-1&&(J=4294967295);var e=ts(V),O=function(X){return X};if(m===0){var ot=32-8*V;O=function(X){return X<<ot>>>ot}}var ct=T.indexOf("unsigned")!=-1;ze(k,{name:T,fromWireType:O,toWireType:function(X,Mt){if(typeof Mt!="number"&&typeof Mt!="boolean")throw new TypeError('Cannot convert "'+Ce(Mt)+'" to '+this.name);if(Mt<m||Mt>J)throw new TypeError('Passing a number "'+Ce(Mt)+'" from JS side to C/C++ side to an argument of type "'+T+'", which is outside the valid range ['+m+", "+J+"]!");return ct?Mt>>>0:Mt|0},argPackAdvance:8,readValueFromPointer:h0(T,e,m!==0),destructorFunction:null})}function ps(k,T,V){var m=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],J=m[T];function e(O){O=O>>2;var ot=qt,ct=ot[O],X=ot[O+1];return new J(Vt,X,ct)}V=Ze(V),ze(k,{name:V,fromWireType:e,argPackAdvance:8,readValueFromPointer:e},{ignoreDuplicateRegistrations:!0})}function f0(k,T){T=Ze(T);var V=T==="std::string";ze(k,{name:T,fromWireType:function(m){var J=qt[m>>2],e;if(V)for(var O=m+4,ot=0;ot<=J;++ot){var ct=m+4+ot;if(Rt[ct]==0||ot==J){var X=ct-O,Mt=nt(O,X);e===void 0?e=Mt:(e+="\0",e+=Mt),O=ct+1}}else{for(var zt=new Array(J),ot=0;ot<J;++ot)zt[ot]=String.fromCharCode(Rt[m+4+ot]);e=zt.join("")}return Ii(m),e},toWireType:function(m,J){J instanceof ArrayBuffer&&(J=new Uint8Array(J));var e,O=typeof J=="string";O||J instanceof Uint8Array||J instanceof Uint8ClampedArray||J instanceof Int8Array||Kt("Cannot pass non-string to std::string"),V&&O?e=function(){return vt(J)}:e=function(){return J.length};var ot=e(),ct=_s(4+ot+1);if(qt[ct>>2]=ot,V&&O)st(J,ct+4,ot+1);else if(O)for(var X=0;X<ot;++X){var Mt=J.charCodeAt(X);Mt>255&&(Ii(ct),Kt("String has UTF-16 code units that do not fit in 8 bits")),Rt[ct+4+X]=Mt}else for(var X=0;X<ot;++X)Rt[ct+4+X]=J[X];return m!==null&&m.push(Ii,ct),ct},argPackAdvance:8,readValueFromPointer:Sr,destructorFunction:function(m){Ii(m)}})}function wn(k,T,V){V=Ze(V);var m,J,e,O,ot;T===2?(m=Yt,J=$t,O=z,e=function(){return oe},ot=1):T===4&&(m=it,J=At,O=kt,e=function(){return qt},ot=2),ze(k,{name:V,fromWireType:function(ct){for(var X=qt[ct>>2],Mt=e(),zt,Dt=ct+4,Bt=0;Bt<=X;++Bt){var Nt=ct+4+Bt*T;if(Mt[Nt>>ot]==0||Bt==X){var Ot=Nt-Dt,Xt=m(Dt,Ot);zt===void 0?zt=Xt:(zt+="\0",zt+=Xt),Dt=Nt+T}}return Ii(ct),zt},toWireType:function(ct,X){typeof X!="string"&&Kt("Cannot pass non-string to C++ string type "+V);var Mt=O(X),zt=_s(4+Mt+T);return qt[zt>>2]=Mt>>ot,J(X,zt+4,Mt+T),ct!==null&&ct.push(Ii,zt),zt},argPackAdvance:8,readValueFromPointer:Sr,destructorFunction:function(ct){Ii(ct)}})}function d0(k,T){T=Ze(T),ze(k,{isVoid:!0,name:T,argPackAdvance:0,fromWireType:function(){},toWireType:function(V,m){}})}function p0(){ge()}function _0(){return Rt.length}function A0(k){ge("OOM")}function m0(k){A0()}function g0(){ge("trap!")}function Bo(k,T,V){Rt.copyWithin(k,T,T+V)}za(),Gi=r.BindingError=Ln(Error,"BindingError"),qi=r.InternalError=Ln(Error,"InternalError"),Dn(),i0(),ls(),xo=r.UnboundTypeError=Ln(Error,"UnboundTypeError"),a0();function Oo(k){for(var T=[],V=0;V<k.length;V++){var m=k[V];m>255&&(m&=255),T.push(String.fromCharCode(m))}return T.join("")}var v0=typeof atob=="function"?atob:function(k){var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",V="",m,J,e,O,ot,ct,X,Mt=0;k=k.replace(/[^A-Za-z0-9\+\/\=]/g,"");do O=T.indexOf(k.charAt(Mt++)),ot=T.indexOf(k.charAt(Mt++)),ct=T.indexOf(k.charAt(Mt++)),X=T.indexOf(k.charAt(Mt++)),m=O<<2|ot>>4,J=(ot&15)<<4|ct>>2,e=(ct&3)<<6|X,V=V+String.fromCharCode(m),ct!==64&&(V=V+String.fromCharCode(J)),X!==64&&(V=V+String.fromCharCode(e));while(Mt<k.length);return V};function y0(k){if(typeof u=="boolean"&&u){var T;try{T=Buffer.from(k,"base64")}catch{T=new Buffer(k,"base64")}return new Uint8Array(T.buffer,T.byteOffset,T.byteLength)}try{for(var V=v0(k),m=new Uint8Array(V.length),J=0;J<V.length;++J)m[J]=V.charCodeAt(J);return m}catch{throw new Error("Converting base64 string to bytes failed.")}}function Oi(k){if(me(k))return y0(k.slice(yo.length))}var w0={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Float64Array},M0={A:Bo,B:m0,C:g0,D:Oe,a:ge,b:Z,c:W,d:wo,e:Ji,f:Va,g:Wa,h:Mo,i:yr,j:Za,k:Vn,l:cs,m:yn,n:hs,o:ds,p:c0,q:u0,r:ps,s:f0,t:wn,u:d0,v:No,w:fs,x:p0,y:Ce,z:_0},Jt=(function(k,T,V){var m=new k.Int8Array(V),J=new k.Int16Array(V),e=new k.Int32Array(V),O=new k.Uint8Array(V),ot=new k.Uint16Array(V),ct=new k.Float64Array(V),X=T.D|0,Mt=k.Math.imul,zt=k.Math.clz32,Dt=T.a,Bt=T.b,Nt=T.c,Ot=T.d;T.e;var Xt=T.f,Mi=T.g;T.h,T.i,T.j;var tn=T.k,Ci=T.l,br=T.m,Si=T.n,en=T.o,Jn=T.p,li=T.q,b=T.r,R=T.s,U=T.t,Y=T.u;T.v,T.w;var et=T.x;T.y;var ht=T.z,dt=T.A,rt=T.B,ft=T.C,y=22384;function jt(){dy(),py()}function Wt(){It(0)}function It(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0;t=y,y=y+16|0,i=t+8|0,s=t,B=H4()|0,f=Y4()|0,h=Ps()|0,_=$4()|0,A=q4()|0,v=Ph()|0,C=ta()|0,N=ea()|0,a=ea()|0,Ci(h|0,_|0,A|0,v|0,C|0,9,N|0,B|0,a|0,f|0,6204,xh()|0,138),rv(1),e[s>>2]=5,e[s+4>>2]=0,e[i>>2]=e[s>>2],e[i+4>>2]=e[s+4>>2],uv(6211,i),e[s>>2]=3,e[s+4>>2]=0,e[i>>2]=e[s>>2],e[i+4>>2]=e[s+4>>2],mv(6216,i),e[s>>2]=10,e[s+4>>2]=0,e[i>>2]=e[s>>2],e[i+4>>2]=e[s+4>>2],Cv(6225,i),f=kv()|0,a=Nv()|0,B=xs()|0,N=Bv()|0,C=Ov()|0,v=Ph()|0,A=ta()|0,_=ea()|0,h=ea()|0,Ci(B|0,N|0,C|0,v|0,A|0,11,_|0,f|0,h|0,a|0,6234,xh()|0,139),zv(2),e[s>>2]=6,e[s+4>>2]=0,e[i>>2]=e[s>>2],e[i+4>>2]=e[s+4>>2],$v(6211,i),e[s>>2]=4,e[s+4>>2]=0,e[i>>2]=e[s>>2],e[i+4>>2]=e[s+4>>2],Q0(6248,i),e[s>>2]=5,e[s+4>>2]=0,e[i>>2]=e[s>>2],e[i+4>>2]=e[s+4>>2],Q0(6265,i),e[s>>2]=6,e[s+4>>2]=0,e[i>>2]=e[s>>2],e[i+4>>2]=e[s+4>>2],Q0(6280,i),e[s>>2]=7,e[s+4>>2]=0,e[i>>2]=e[s>>2],e[i+4>>2]=e[s+4>>2],ay(6216,i),y=t}function pe(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0;a=y,y=y+32|0,_=a+16|0,h=a+8|0,A=a,f=St(20)|0,we(f,i,s),e[A>>2]=0,e[_>>2]=e[A>>2],Rr(h,f,_),i=e[h>>2]|0,e[h>>2]=e[t>>2],e[t>>2]=i,i=h+4|0,s=t+4|0,f=e[i>>2]|0,e[i>>2]=e[s>>2],e[s>>2]=f,R0(h),s=St(352)|0,nn(s,e[t>>2]|0),f=t+8|0,e[A>>2]=0,e[_>>2]=e[A>>2],i1(h,s,_),s=e[h>>2]|0,e[h>>2]=e[f>>2],e[f>>2]=s,f=h+4|0,s=t+12|0,i=e[f>>2]|0,e[f>>2]=e[s>>2],e[s>>2]=i,P0(h),y=a}function ye(t,i){t=t|0,i=i|0,kp(e[t+8>>2]|0,i)}function Se(t){return t=t|0,t=(Om(e[t+8>>2]|0)|0)+107|0,O[t>>0]|O[t+1>>0]<<8|O[t+2>>0]<<16|O[t+3>>0]<<24|0}function Ie(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0;a=y,y=y+32|0,f=a+16|0,h=a+8|0,_=a,A=St(12)|0,Im(A,i,s),e[_>>2]=0,e[f>>2]=e[_>>2],Vm(h,A,f),A=e[h>>2]|0,e[h>>2]=e[t>>2],e[t>>2]=A,A=h+4|0,s=t+4|0,i=e[A>>2]|0,e[A>>2]=e[s>>2],e[s>>2]=i,X0(h),s=t+8|0,i=St(12)|0,Um(i,e[t>>2]|0),e[_>>2]=0,e[f>>2]=e[_>>2],Xm(h,i,f),i=e[h>>2]|0,e[h>>2]=e[s>>2],e[s>>2]=i,i=h+4|0,_=t+12|0,A=e[i>>2]|0,e[i>>2]=e[_>>2],e[_>>2]=A,vh(h),Lm(h,e[s>>2]|0),s=t+16|0,_=e[h>>2]|0,A=h+4|0,i=e[A>>2]|0,e[h>>2]=0,e[A>>2]=0,e[f>>2]=e[s>>2],e[s>>2]=_,s=t+20|0,e[f+4>>2]=e[s>>2],e[s>>2]=i,Rs(f),Rs(h),y=a}function ci(t,i){t=t|0,i=i|0;var s=0;t=t+16|0,s=e[t>>2]|0;t:do if(s|0)switch(i|0){case 4:{j0(s);break t}case 8:{Qo(s),Qo(e[t>>2]|0);break t}default:break t}while(!1)}function mt(t,i){t=t|0,i=i|0;var s=0;s=t+16|0,t=e[s>>2]|0;t:do if(t|0){switch(i|0){case 1:{Og(t);break t}case 2:{Ig(t);break t}case 8:{j0(t),t=e[s>>2]|0;break}case 4:break;default:break t}j0(t)}while(!1)}function Ft(t,i){t=t|0,i=i|0;var s=0;s=t+16|0,t=e[s>>2]|0;t:do if(t|0){switch(i|0){case 1:{A4(t);break t}case 2:{m4(t);break t}case 8:{Qo(t),t=e[s>>2]|0;break}case 4:break;default:break t}Qo(t)}while(!1)}function ke(t,i){t=t|0,i=i|0,t=e[t+16>>2]|0,t|0&&Ns[e[e[t>>2]>>2]&63](t,i)|0}function we(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,e[t+4>>2]=s,e[t+8>>2]=0,m[t+12>>0]=0,m[t+13>>0]=0,e[t+16>>2]=0}function nn(t,i){t=t|0,i=i|0,e[t>>2]=i,hc(t+4|0,i),u1(t+247|0),e[t+288>>2]=0,e[t+292>>2]=0,e[t+296>>2]=0,uc(t+300|0),i=t+312|0,e[i>>2]=0,e[i+4>>2]=0,e[i+8>>2]=0,e[i+12>>2]=0,f1(t+328|0),d1(t)}function Rr(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4296,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function R0(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function qd(t){t=t|0,yt(t)}function Qd(t){t=t|0,t=e[t+12>>2]|0,t|0&&yt(t)}function Kd(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==6407?t+12|0:0)|0}function t1(t){t=t|0,Ht(t)}function Ht(t,i){t=t|0,e1(t)}function e1(t){t=t|0,yt(t)}function i1(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4324,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function P0(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function n1(t){t=t|0,yt(t)}function r1(t){t=t|0,t=e[t+12>>2]|0,t|0&&(a1(t),yt(t))}function s1(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==6605?t+12|0:0)|0}function o1(t){t=t|0,Ht(t)}function a1(t){t=t|0,Lo(t+320|0),x0(t+312|0),lc(t+300|0),h1(t+288|0),l1(t+247|0),cc(t+4|0)}function Lo(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function x0(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function lc(t){t=t|0,c1(t)}function l1(t){t=t|0,t=t+34|0,t=O[t>>0]|O[t+1>>0]<<8|O[t+2>>0]<<16|O[t+3>>0]<<24,t|0&&iu(t)}function cc(t){t=t|0,Vo(e[t+12>>2]|0)}function c1(t){t=t|0;var i=0,s=0;i=e[t>>2]|0,s=i,i|0&&(e[t+4>>2]=s,Ht(i,(e[t+8>>2]|0)-s|0))}function h1(t){t=t|0;var i=0,s=0;i=e[t>>2]|0,s=i,i|0&&(e[t+4>>2]=s,Ht(i,(e[t+8>>2]|0)-s|0))}function Vo(t){t=t|0,ol(e[t+-4>>2]|0)}function hc(t,i){t=t|0,i=i|0,e[t>>2]=i,e[t+4>>2]=0,e[t+8>>2]=0,e[t+12>>2]=$n(1048576)|0}function u1(t){t=t|0;var i=0;i=t+32|0,m[i>>0]=0,m[i+1>>0]=0,t=t+34|0,m[t>>0]=0,m[t+1>>0]=0,m[t+2>>0]=0,m[t+3>>0]=0}function uc(t){t=t|0,e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0}function f1(t){t=t|0,e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0,e[t+12>>2]=0,t=t+16|0,e[t>>2]=-1,e[t+4>>2]=-1}function d1(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0;if(_=y,y=y+64|0,h=_+32|0,s=_+56|0,i=_+16|0,f=_,qn(e[t>>2]|0,s,4),C1(h,s,s+4|0),s=Pr(6693)|0,a=m[h+11>>0]|0,(s|0)==((a<<24>>24<0?e[h+4>>2]|0:a&255)|0)){if(a=(Fw(h,0,-1,6693,s)|0)==0,ks(h),a){if(s=e[t>>2]|0,e[i>>2]=0,e[i+4>>2]=0,e[i+8>>2]=0,e[i+12>>2]=0,e[h>>2]=e[i>>2],e[h+4>>2]=e[i+4>>2],e[h+8>>2]=e[i+8>>2],e[h+12>>2]=e[i+12>>2],ms(s,h),s=t+20|0,qn(e[t>>2]|0,s,227),_1(t,s),a=A1()|0,i=e[a>>2]|0,a=e[a+4>>2]|0,(i|0)!=(a|0))do m1(h,i),g1(h,s),T0(h),i=i+24|0;while((i|0)!=(a|0));v1(t),y1(t),w1(e[t>>2]|0),a=e[t>>2]|0,i=(e[t+116>>2]|0)+8|0,s=f,e[s>>2]=0,e[s+4>>2]=0,s=f+8|0,e[s>>2]=i,e[s+4>>2]=0,e[h>>2]=e[f>>2],e[h+4>>2]=e[f+4>>2],e[h+8>>2]=e[f+8>>2],e[h+12>>2]=e[f+12>>2],ms(a,h),M1(t+4|0),y=_;return}}else ks(h);_=Ot(8)|0,p1(_),Xt(_|0,2592,8)}function $n(t){t=t|0;var i=0;return i=oa(t+68|0)|0,t=i+68&-64,e[t+-4>>2]=i,t|0}function qn(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0;_=t+13|0,m[_>>0]|0?m[t+12>>0]=1:(f=t+4|0,a=e[f>>2]|0,A=t+8|0,h=e[A>>2]|0,v=a-h|0,s=(v|0)<(s|0)?v:s,s&&(di(i|0,(e[t>>2]|0)+h|0,s|0)|0,h=e[A>>2]|0,a=e[f>>2]|0),v=h+s|0,e[A>>2]=v,e[t+16>>2]=s,(v|0)>=(a|0)&&(m[_>>0]=1))}function p1(t){t=t|0,Ei(t,6791),e[t>>2]=4352}function ms(t,i){t=t|0,i=i|0;var s=0,a=0,h=0;h=i+8|0,i=e[h>>2]|0,h=e[h+4>>2]|0,s=e[t+4>>2]|0,a=((s|0)<0)<<31>>31,(h|0)<(a|0)|(h|0)==(a|0)&i>>>0<s>>>0?e[t+8>>2]=i:m[t+12>>0]=1}function _1(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0;N=i+179|0,m[X>>0]=m[N>>0],m[X+1>>0]=m[N+1>>0],m[X+2>>0]=m[N+2>>0],m[X+3>>0]=m[N+3>>0],m[X+4>>0]=m[N+4>>0],m[X+5>>0]=m[N+5>>0],m[X+6>>0]=m[N+6>>0],m[X+7>>0]=m[N+7>>0],C=+ct[X>>3],_=i+187|0,m[X>>0]=m[_>>0],m[X+1>>0]=m[_+1>>0],m[X+2>>0]=m[_+2>>0],m[X+3>>0]=m[_+3>>0],m[X+4>>0]=m[_+4>>0],m[X+5>>0]=m[_+5>>0],m[X+6>>0]=m[_+6>>0],m[X+7>>0]=m[_+7>>0],B=+ct[X>>3],t=i+195|0,m[X>>0]=m[t>>0],m[X+1>>0]=m[t+1>>0],m[X+2>>0]=m[t+2>>0],m[X+3>>0]=m[t+3>>0],m[X+4>>0]=m[t+4>>0],m[X+5>>0]=m[t+5>>0],m[X+6>>0]=m[t+6>>0],m[X+7>>0]=m[t+7>>0],f=+ct[X>>3],v=i+203|0,m[X>>0]=m[v>>0],m[X+1>>0]=m[v+1>>0],m[X+2>>0]=m[v+2>>0],m[X+3>>0]=m[v+3>>0],m[X+4>>0]=m[v+4>>0],m[X+5>>0]=m[v+5>>0],m[X+6>>0]=m[v+6>>0],m[X+7>>0]=m[v+7>>0],A=+ct[X>>3],h=i+211|0,m[X>>0]=m[h>>0],m[X+1>>0]=m[h+1>>0],m[X+2>>0]=m[h+2>>0],m[X+3>>0]=m[h+3>>0],m[X+4>>0]=m[h+4>>0],m[X+5>>0]=m[h+5>>0],m[X+6>>0]=m[h+6>>0],m[X+7>>0]=m[h+7>>0],s=+ct[X>>3],i=i+219|0,m[X>>0]=m[i>>0],m[X+1>>0]=m[i+1>>0],m[X+2>>0]=m[i+2>>0],m[X+3>>0]=m[i+3>>0],m[X+4>>0]=m[i+4>>0],m[X+5>>0]=m[i+5>>0],m[X+6>>0]=m[i+6>>0],m[X+7>>0]=m[i+7>>0],a=+ct[X>>3],ct[X>>3]=B,m[N>>0]=m[X>>0],m[N+1>>0]=m[X+1>>0],m[N+2>>0]=m[X+2>>0],m[N+3>>0]=m[X+3>>0],m[N+4>>0]=m[X+4>>0],m[N+5>>0]=m[X+5>>0],m[N+6>>0]=m[X+6>>0],m[N+7>>0]=m[X+7>>0],ct[X>>3]=C,m[v>>0]=m[X>>0],m[v+1>>0]=m[X+1>>0],m[v+2>>0]=m[X+2>>0],m[v+3>>0]=m[X+3>>0],m[v+4>>0]=m[X+4>>0],m[v+5>>0]=m[X+5>>0],m[v+6>>0]=m[X+6>>0],m[v+7>>0]=m[X+7>>0],ct[X>>3]=A,m[_>>0]=m[X>>0],m[_+1>>0]=m[X+1>>0],m[_+2>>0]=m[X+2>>0],m[_+3>>0]=m[X+3>>0],m[_+4>>0]=m[X+4>>0],m[_+5>>0]=m[X+5>>0],m[_+6>>0]=m[X+6>>0],m[_+7>>0]=m[X+7>>0],ct[X>>3]=f,m[h>>0]=m[X>>0],m[h+1>>0]=m[X+1>>0],m[h+2>>0]=m[X+2>>0],m[h+3>>0]=m[X+3>>0],m[h+4>>0]=m[X+4>>0],m[h+5>>0]=m[X+5>>0],m[h+6>>0]=m[X+6>>0],m[h+7>>0]=m[X+7>>0],ct[X>>3]=a,m[t>>0]=m[X>>0],m[t+1>>0]=m[X+1>>0],m[t+2>>0]=m[X+2>>0],m[t+3>>0]=m[X+3>>0],m[t+4>>0]=m[X+4>>0],m[t+5>>0]=m[X+5>>0],m[t+6>>0]=m[X+6>>0],m[t+7>>0]=m[X+7>>0],ct[X>>3]=s,m[i>>0]=m[X>>0],m[i+1>>0]=m[X+1>>0],m[i+2>>0]=m[X+2>>0],m[i+3>>0]=m[X+3>>0],m[i+4>>0]=m[X+4>>0],m[i+5>>0]=m[X+5>>0],m[i+6>>0]=m[X+6>>0],m[i+7>>0]=m[X+7>>0]}function A1(){var t=0,i=0,s=0,a=0,h=0,f=0,_=0,A=0;if(h=y,y=y+48|0,s=h+24|0,a=h,t=h+44|0,(m[21440]|0)==0&&nr(21440)|0&&(e[5374]=0,e[5375]=0,e[5376]=0,rr(21440)),(m[21448]|0)==0&&nr(21448)|0&&rr(21448),(e[5374]|0)==(e[5375]|0)&&(Sw(21508),(e[5374]|0)==(e[5375]|0))){m[s>>0]=m[t>>0]|0,E1(a),t=e[5375]|0;do if(t>>>0>=(e[5376]|0)>>>0)if(t=((t-(e[5374]|0)|0)/24|0)+1|0,i=F1()|0,i>>>0<t>>>0)Ge(21496);else{f=e[5374]|0,A=((e[5376]|0)-f|0)/24|0,_=A<<1,P1(s,A>>>0<i>>>1>>>0?_>>>0<t>>>0?t:_:i,((e[5375]|0)-f|0)/24|0,21504),i=s+8|0,F0(e[i>>2]|0,a),e[i>>2]=(e[i>>2]|0)+24,x1(21496,s),T1(s);break}else b1(s,21496,1),A=s+4|0,F0(e[A>>2]|0,a),e[A>>2]=(e[A>>2]|0)+24,R1(s);while(!1);T0(a)}return y=h,21496}function m1(t,i){t=t|0,i=i|0;var s=0,a=0;s=i+16|0,a=e[s>>2]|0;do if(a)if((i|0)==(a|0)){a=fc(t)|0,e[t+16>>2]=a,s=e[s>>2]|0,bn[e[(e[s>>2]|0)+12>>2]&15](s,a);break}else{e[t+16>>2]=la[e[(e[a>>2]|0)+8>>2]&15](a)|0;break}else e[t+16>>2]=0;while(!1)}function g1(t,i){if(t=t|0,i=i|0,t=e[t+16>>2]|0,!t)i=Ot(4)|0,e[i>>2]=0,H1(i),Xt(i|0,4168,131);else{bn[e[(e[t>>2]|0)+24>>2]&15](t,i);return}}function T0(t){t=t|0;var i=0;i=e[t+16>>2]|0,(t|0)!=(i|0)?i|0&&re[e[(e[i>>2]|0)+20>>2]&255](i):re[e[(e[i>>2]|0)+16>>2]&255](i)}function v1(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0;L=y,y=y+96|0,h=L+16|0,N=L,A=L+72|0,f=e[t>>2]|0,v=ot[t+114>>1]|0,C=N,e[C>>2]=0,e[C+4>>2]=0,C=N+8|0,e[C>>2]=v,e[C+4>>2]=0,e[h>>2]=e[N>>2],e[h+4>>2]=e[N+4>>2],e[h+8>>2]=e[N+8>>2],e[h+12>>2]=e[N+12>>2],ms(f,h),f=t+120|0;t:do if(e[f>>2]|0){for(_=h+2|0,v=h+16|0,C=h+20|0,N=h+18|0,s=0;;){if(!(Wo(e[t>>2]|0)|0)||Y1(e[t>>2]|0)|0)break t;for(qn(e[t>>2]|0,h,54),i=7277,a=_;(m[a>>0]|0)==(m[i>>0]|0);)if(a=a+1|0,(a|0)==(v|0)){B=8;break}else i=i+1|0;if((B|0)==8&&(B=0,(O[N>>0]|O[N+1>>0]<<8)<<16>>16==22204))break;if($1(e[t>>2]|0,(O[C>>0]|O[C+1>>0]<<8)&65535,0,1),s=s+1|0,s>>>0>=(e[f>>2]|0)>>>0)break t}N=(O[C>>0]|O[C+1>>0]<<8)&65535,B=eu(N)|0,qn(e[t>>2]|0,B,N),J1(t,B),yt(B),B=t+125|0,Q1(A,t+247|0,(O[B>>0]|O[B+1>>0]<<8)&65535),K1(t+300|0,A)|0,lc(A),y=L;return}while(!1);L=Ot(8)|0,q1(L),Xt(L|0,2672,8)}function y1(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0;if(B=y,y=y+176|0,h=B+40|0,f=B+24|0,i=B+16|0,a=B,v=B+152|0,C=B+136|0,N=B+56|0,A=e[t>>2]|0,_=t+116|0,L=e[_>>2]|0,s=f,e[s>>2]=0,e[s+4>>2]=0,s=f+8|0,e[s>>2]=L,e[s+4>>2]=0,e[h>>2]=e[f>>2],e[h+4>>2]=e[f+4>>2],e[h+8>>2]=e[f+8>>2],e[h+12>>2]=e[f+12>>2],ms(A,h),A=i,e[A>>2]=0,e[A+4>>2]=0,qn(e[t>>2]|0,i,8),Wo(e[t>>2]|0)|0||(L=Ot(8)|0,k0(L),Xt(L|0,2704,8)),s=i,i=e[s>>2]|0,s=e[s+4>>2]|0,(i|0)==-1&(s|0)==-1&&(L=Ot(8)|0,_c(L,7488),Xt(L|0,2720,8)),L=e[t>>2]|0,A=a,e[A>>2]=0,e[A+4>>2]=0,A=a+8|0,e[A>>2]=i,e[A+4>>2]=s,e[h>>2]=e[a>>2],e[h+4>>2]=e[a+4>>2],e[h+8>>2]=e[a+8>>2],e[h+12>>2]=e[a+12>>2],ms(L,h),Wo(e[t>>2]|0)|0||(L=Ot(8)|0,k0(L),Xt(L|0,2704,8)),qn(e[t>>2]|0,h,8),Wo(e[t>>2]|0)|0||(L=Ot(8)|0,k0(L),Xt(L|0,2704,8)),e[h>>2]|0&&(L=Ot(8)|0,up(L),Xt(L|0,2736,8)),f=t+288|0,A=t+292|0,e[A>>2]=e[f>>2],L=t+259|0,(O[L>>0]|O[L+1>>0]<<8|O[L+2>>0]<<16|O[L+3>>0]<<24|0)==-1&&(L=Ot(8)|0,_c(L,7606),Xt(L|0,2720,8)),a=h+4|0,fp(f,(e[a>>2]|0)+1|0),L=e[f>>2]|0,e[L>>2]=(e[_>>2]|0)+8,e[L+4>>2]=0,(e[a>>2]|0)>>>0>1){if(hc(v,e[t>>2]|0),Ac(C,v),Ke(N,32,2,8,0),N0(C),ti(N),!(e[a>>2]|0))f=e[f>>2]|0,s=f;else{s=1;do s>>>0>1?i=e[(e[f>>2]|0)+(s+-1<<3)>>2]|0:i=0,_=Ne(N,C,i,1)|0,i=e[f>>2]|0,L=i+(s<<3)|0,e[L>>2]=_,e[L+4>>2]=((_|0)<0)<<31>>31,s=s+1|0;while(s>>>0<=(e[a>>2]|0)>>>0);s=i,f=i}if(i=e[A>>2]|0,i-s>>3>>>0>1){h=i-f>>3,a=f,i=1,s=e[a>>2]|0,a=e[a+4>>2]|0;do L=f+(i<<3)|0,A=L,s=fi(e[A>>2]|0,e[A+4>>2]|0,s|0,a|0)|0,a=Nt()|0,e[L>>2]=s,e[L+4>>2]=a,i=i+1|0;while(i>>>0<h>>>0)}ei(N),cc(v)}y=B}function w1(t){t=t|0,m[t+12>>0]=0,m[t+13>>0]=0}function M1(t){t=t|0,e[t+8>>2]=0,e[t+4>>2]=0}function Pr(t){return t=t|0,ia(t)|0}function C1(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0;if(_=y,y=y+16|0,h=i,f=_,a=s-h|0,a>>>0>4294967279&&sl(t),a>>>0<11?m[t+11>>0]=a:(v=a+16&-16,A=St(v)|0,e[t>>2]=A,e[t+8>>2]=v|-2147483648,e[t+4>>2]=a,t=A),(i|0)!=(s|0)){for(h=s-h|0,a=t;gs(a,i),i=i+1|0,(i|0)!=(s|0);)a=a+1|0;t=t+h|0}m[f>>0]=0,gs(t,f),y=_}function gs(t,i){t=t|0,i=i|0,m[t>>0]=m[i>>0]|0}function S1(t){t=t|0,ni(t),yt(t)}function E1(t,i){t=t|0,e[t>>2]=4372,e[t+16>>2]=t}function b1(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,i=e[i+4>>2]|0,e[t+4>>2]=i,e[t+8>>2]=i+(s*24|0)}function R1(t){t=t|0,e[(e[t>>2]|0)+4>>2]=e[t+4>>2]}function F0(t,i){t=t|0,i=i|0;var s=0,a=0;s=i+16|0,a=e[s>>2]|0;do if(a)if((i|0)==(a|0)){a=fc(t)|0,e[t+16>>2]=a,s=e[s>>2]|0,bn[e[(e[s>>2]|0)+12>>2]&15](s,a);break}else{e[t+16>>2]=a,e[s>>2]=0;break}else e[t+16>>2]=0;while(!1)}function fc(t){return t=t|0,t|0}function P1(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0;h=t+12|0,e[h>>2]=0,e[t+16>>2]=a;do if(i)if(i>>>0>178956970)h=Ot(8)|0,sn(h,6723),e[h>>2]=5956,Xt(h|0,3928,123);else{a=St(i*24|0)|0;break}else a=0;while(!1);e[t>>2]=a,s=a+(s*24|0)|0,e[t+8>>2]=s,e[t+4>>2]=s,e[h>>2]=a+(i*24|0)}function x1(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0;if(A=e[t>>2]|0,v=t+4|0,s=e[v>>2]|0,_=i+4|0,(s|0)==(A|0))h=_,f=t,a=e[_>>2]|0,s=A;else{a=e[_>>2]|0;do s=s+-24|0,F0(a+-24|0,s),a=(e[_>>2]|0)+-24|0,e[_>>2]=a;while((s|0)!=(A|0));h=_,f=t,s=e[t>>2]|0}e[f>>2]=a,e[h>>2]=s,A=i+8|0,_=e[v>>2]|0,e[v>>2]=e[A>>2],e[A>>2]=_,A=t+8|0,v=i+12|0,t=e[A>>2]|0,e[A>>2]=e[v>>2],e[v>>2]=t,e[i>>2]=e[h>>2]}function T1(t){t=t|0;var i=0,s=0,a=0,h=0;if(s=e[t+4>>2]|0,a=t+8|0,i=e[a>>2]|0,(i|0)!=(s|0))do h=i+-24|0,e[a>>2]=h,T0(h),i=e[a>>2]|0;while((i|0)!=(s|0));i=e[t>>2]|0,i|0&&Ht(i,(e[t+12>>2]|0)-i|0)}function F1(t){return 178956970}function k1(t){t=t|0,yt(t)}function N1(t){return t=t|0,t=St(8)|0,e[t>>2]=4372,t|0}function G1(t,i){i=i|0,e[i>>2]=4372}function B1(t){}function O1(t){t=t|0,Ht(t)}function I1(t,i){t=t|0,i=i|0,W1(t+4|0,i)}function U1(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==7183?t+4|0:0)|0}function L1(t){return 2664}function V1(t){}function W1(t,i){t=t|0,i=i|0,Z1(t,i)}function Z1(t,i){t=t|0,i=i|0;var s=0,a=0;if(t=i+104|0,i=O[t>>0]|0,s=i>>>7,a=i>>>6&1,(s|0)==1&(a|0)!=0&&(a=Ot(8)|0,z1(a),Xt(a|0,2632,8)),(s|0)==(a|0))a=Ot(8)|0,D1(a),Xt(a|0,2648,8);else{m[t>>0]=i&63;return}}function z1(t){t=t|0,Ei(t,7076),e[t>>2]=4416}function D1(t){t=t|0,Ei(t,7144),e[t>>2]=4436}function X1(t){t=t|0,ni(t),yt(t)}function j1(t){t=t|0,ni(t),yt(t)}function H1(t){t=t|0,e[t>>2]=6092}function Wo(t){t=t|0;var i=0;return i=t+12|0,t=(m[i>>0]|0)==0,m[i>>0]=0,t|0}function Y1(t){return t=t|0,(m[t+13>>0]|0)!=0|0}function J1(t,i){t=t|0,i=i|0,t=t+247|0,tp(t,i),(O[t>>0]|O[t+1>>0]<<8)<<16>>16!=2&&(i=Ot(8)|0,dc(i),Xt(i|0,2688,8))}function $1(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;switch(a|0){case 0:break;case 2:{a=e[t+4>>2]|0,i=fi(fi(i|0,s|0,-1,-1)|0,Nt()|0,a|0,((a|0)<0)<<31>>31|0)|0,s=Nt()|0;break}case 1:{a=e[t+8>>2]|0,i=fi(a|0,((a|0)<0)<<31>>31|0,i|0,s|0)|0,s=Nt()|0;break}default:s=0,i=0}h=e[t+4>>2]|0,f=((h|0)<0)<<31>>31,a=t+12|0,(s|0)<0|((s|0)>(f|0)|(s|0)==(f|0)&i>>>0>=h>>>0)?m[a>>0]=1:(m[a>>0]=0,e[t+8>>2]=i)}function q1(t){t=t|0,Ei(t,7410),e[t>>2]=4476}function Q1(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0,C=0;if(_=y,y=y+16|0,f=_,uc(t),h=i+32|0,(O[h>>0]|O[h+1>>0]<<8)<<16>>16){a=i+34|0,i=0;do v=O[a>>0]|O[a+1>>0]<<8|O[a+2>>0]<<16|O[a+3>>0]<<24,C=v+(i*6|0)|0,A=v+(i*6|0)+2|0,v=v+(i*6|0)+4|0,vs(f,(O[C>>0]|O[C+1>>0]<<8)&65535,(O[A>>0]|O[A+1>>0]<<8)&65535,(O[v>>0]|O[v+1>>0]<<8)&65535),pc(t,f),s=s-((O[A>>0]|O[A+1>>0]<<8)&65535)|0,i=i+1|0;while(i>>>0<((O[h>>0]|O[h+1>>0]<<8)&65535)>>>0)}(s|0)<0&&(C=Ot(8)|0,dc(C),Xt(C|0,2688,8)),s|0&&(vs(f,0,s,2),pc(t,f)),y=_}function K1(t,i){t=t|0,i=i|0;var s=0,a=0;return s=y,y=y+16|0,a=s+1|0,m[a>>0]=m[s>>0]|0,cp(t,i,a),y=s,t|0}function tp(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0;if(a=i+2|0,f=O[i>>0]|O[i+1>>0]<<8,m[t>>0]=f,m[t+1>>0]=f>>8,f=t+2|0,a=O[a>>0]|O[a+1>>0]<<8,m[f>>0]=a,m[f+1>>0]=a>>8,m[t+4>>0]=m[i+4>>0]|0,f=i+6|0,m[t+5>>0]=m[i+5>>0]|0,a=i+8|0,s=t+6|0,f=O[f>>0]|O[f+1>>0]<<8,m[s>>0]=f,m[s+1>>0]=f>>8,s=i+12|0,f=t+8|0,a=O[a>>0]|O[a+1>>0]<<8|O[a+2>>0]<<16|O[a+3>>0]<<24,m[f>>0]=a,m[f+1>>0]=a>>8,m[f+2>>0]=a>>16,m[f+3>>0]=a>>24,f=t+12|0,s=O[s>>0]|O[s+1>>0]<<8|O[s+2>>0]<<16|O[s+3>>0]<<24,m[f>>0]=s,m[f+1>>0]=s>>8,m[f+2>>0]=s>>16,m[f+3>>0]=s>>24,f=i+16|0,s=f,s=O[s>>0]|O[s+1>>0]<<8|O[s+2>>0]<<16|O[s+3>>0]<<24,f=f+4|0,f=O[f>>0]|O[f+1>>0]<<8|O[f+2>>0]<<16|O[f+3>>0]<<24,a=t+16|0,_=a,m[_>>0]=s,m[_+1>>0]=s>>8,m[_+2>>0]=s>>16,m[_+3>>0]=s>>24,a=a+4|0,m[a>>0]=f,m[a+1>>0]=f>>8,m[a+2>>0]=f>>16,m[a+3>>0]=f>>24,a=i+32|0,f=i+24|0,_=f,_=O[_>>0]|O[_+1>>0]<<8|O[_+2>>0]<<16|O[_+3>>0]<<24,f=f+4|0,f=O[f>>0]|O[f+1>>0]<<8|O[f+2>>0]<<16|O[f+3>>0]<<24,s=t+24|0,h=s,m[h>>0]=_,m[h+1>>0]=_>>8,m[h+2>>0]=_>>16,m[h+3>>0]=_>>24,s=s+4|0,m[s>>0]=f,m[s+1>>0]=f>>8,m[s+2>>0]=f>>16,m[s+3>>0]=f>>24,s=i+34|0,f=t+32|0,a=O[a>>0]|O[a+1>>0]<<8,m[f>>0]=a,m[f+1>>0]=a>>8,h=t+34|0,t=O[h>>0]|O[h+1>>0]<<8|O[h+2>>0]<<16|O[h+3>>0]<<24,t?(iu(t),t=O[f>>0]|O[f+1>>0]<<8):t=a,a=eu((t&65535)*6|0)|0,m[h>>0]=a,m[h+1>>0]=a>>8,m[h+2>>0]=a>>16,m[h+3>>0]=a>>24,t<<16>>16&&(t=i+36|0,_=O[s>>0]|O[s+1>>0]<<8,m[a>>0]=_,m[a+1>>0]=_>>8,i=i+38|0,_=a+2|0,t=O[t>>0]|O[t+1>>0]<<8,m[_>>0]=t,m[_+1>>0]=t>>8,_=a+4|0,i=O[i>>0]|O[i+1>>0]<<8,m[_>>0]=i,m[_+1>>0]=i>>8,((O[f>>0]|O[f+1>>0]<<8)&65535)>1)){t=1;do i=s,s=s+6|0,_=O[h>>0]|O[h+1>>0]<<8|O[h+2>>0]<<16|O[h+3>>0]<<24,A=i+8|0,a=_+(t*6|0)|0,v=O[s>>0]|O[s+1>>0]<<8,m[a>>0]=v,m[a+1>>0]=v>>8,i=i+10|0,a=_+(t*6|0)+2|0,A=O[A>>0]|O[A+1>>0]<<8,m[a>>0]=A,m[a+1>>0]=A>>8,_=_+(t*6|0)+4|0,i=O[i>>0]|O[i+1>>0]<<8,m[_>>0]=i,m[_+1>>0]=i>>8,t=t+1|0;while(t>>>0<((O[f>>0]|O[f+1>>0]<<8)&65535)>>>0)}}function dc(t){t=t|0,Ei(t,7354),e[t>>2]=4456}function ep(t){t=t|0,ni(t),yt(t)}function ip(t){t=t|0,ni(t),yt(t)}function pc(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0;A=y,y=y+32|0,h=A,f=t+4|0,s=e[f>>2]|0,_=t+8|0;do if((s|0)==(e[_>>2]|0))if(s=((s-(e[t>>2]|0)|0)/12|0)+1|0,a=lp()|0,a>>>0<s>>>0)Ge(t);else{v=e[t>>2]|0,C=((e[_>>2]|0)-v|0)/12|0,_=C<<1,sp(h,C>>>0<a>>>1>>>0?_>>>0<s>>>0?s:_:a,((e[f>>2]|0)-v|0)/12|0,t+8|0),_=h+8|0,f=e[_>>2]|0,e[f>>2]=e[i>>2],e[f+4>>2]=e[i+4>>2],e[f+8>>2]=e[i+8>>2],e[_>>2]=(e[_>>2]|0)+12,op(t,h),ap(h);break}else np(h,t,1),C=h+4|0,v=e[C>>2]|0,e[v>>2]=e[i>>2],e[v+4>>2]=e[i+4>>2],e[v+8>>2]=e[i+8>>2],e[C>>2]=(e[C>>2]|0)+12,rp(h);while(!1);y=A}function vs(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0,e[t>>2]=i,e[t+4>>2]=s,e[t+8>>2]=a}function np(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,i=e[i+4>>2]|0,e[t+4>>2]=i,e[t+8>>2]=i+(s*12|0)}function rp(t){t=t|0,e[(e[t>>2]|0)+4>>2]=e[t+4>>2]}function sp(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0;h=t+12|0,e[h>>2]=0,e[t+16>>2]=a;do if(i)if(i>>>0>357913941)h=Ot(8)|0,sn(h,6723),e[h>>2]=5956,Xt(h|0,3928,123);else{a=St(i*12|0)|0;break}else a=0;while(!1);e[t>>2]=a,s=a+(s*12|0)|0,e[t+8>>2]=s,e[t+4>>2]=s,e[h>>2]=a+(i*12|0)}function op(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;a=e[t>>2]|0,_=t+4|0,f=i+4|0,h=(e[_>>2]|0)-a|0,s=(e[f>>2]|0)+(((h|0)/-12|0)*12|0)|0,e[f>>2]=s,(h|0)>0?(ri(s|0,a|0,h|0)|0,a=f,s=e[f>>2]|0):a=f,f=e[t>>2]|0,e[t>>2]=s,e[a>>2]=f,f=i+8|0,h=e[_>>2]|0,e[_>>2]=e[f>>2],e[f>>2]=h,f=t+8|0,_=i+12|0,t=e[f>>2]|0,e[f>>2]=e[_>>2],e[_>>2]=t,e[i>>2]=e[a>>2]}function ap(t){t=t|0;var i=0,s=0,a=0;i=e[t+4>>2]|0,s=t+8|0,a=e[s>>2]|0,(a|0)!=(i|0)&&(e[s>>2]=a+(~(((a+-12-i|0)>>>0)/12|0)*12|0)),i=e[t>>2]|0,i|0&&Ht(i,(e[t+12>>2]|0)-i|0)}function lp(t){return 357913941}function cp(t,i,s){t=t|0,i=i|0,s=s|0;var a=0;hp(t),e[t>>2]=e[i>>2],s=i+4|0,e[t+4>>2]=e[s>>2],a=i+8|0,e[t+8>>2]=e[a>>2],e[a>>2]=0,e[s>>2]=0,e[i>>2]=0}function hp(t){t=t|0;var i=0,s=0,a=0,h=0;i=e[t>>2]|0,s=i,i|0&&(a=t+4|0,e[a>>2]=s,h=t+8|0,Ht(i,(e[h>>2]|0)-s|0),e[h>>2]=0,e[a>>2]=0,e[t>>2]=0)}function k0(t){t=t|0,Ei(t,7660),e[t>>2]=4496}function _c(t,i){t=t|0,i=i|0,Ei(t,i),e[t>>2]=4516}function up(t){t=t|0,Ei(t,7704),e[t>>2]=4536}function fp(t,i){t=t|0,i=i|0;var s=0,a=0,h=0;s=t+4|0,h=e[t>>2]|0,a=(e[s>>2]|0)-h>>3,a>>>0>=i>>>0?a>>>0>i>>>0&&(e[s>>2]=h+(i<<3)):Ap(t,i-a|0)}function Ac(t,i){t=t|0,i=i|0,e[t>>2]=i,e[t+4>>2]=0,e[t+8>>2]=-1}function Ke(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0;e[t+4>>2]=i,e[t+8>>2]=s,e[t+12>>2]=a,e[t+16>>2]=h,e[t+36>>2]=0,e[t+40>>2]=0,e[t+44>>2]=0,mc(t+48|0),e[t+68>>2]=0,e[t+72>>2]=0,e[t+76>>2]=0;do if(h){for(a=t+20|0,e[a>>2]=0,e[t+24>>2]=h,s=h,f=0;s=s>>>1,i=f+1|0,s;)f=i;e[a>>2]=(1<<f|0)==(h|0)?f:i,s=h>>>1,e[t+28>>2]=0-s,s=h+-1-s|0}else if(s=t+20|0,(i+-1|0)>>>0<31){e[s>>2]=i,h=1<<i,e[t+24>>2]=h,s=h>>>1,e[t+28>>2]=0-s,s=h+-1-s|0;break}else{e[s>>2]=32,e[t+24>>2]=0,e[t+28>>2]=-2147483648,s=2147483647;break}while(!1);e[t+32>>2]=s,e[t>>2]=0}function N0(t){t=t|0;var i=0;i=((ys(e[t>>2]|0)|0)&255)<<24,i=((ys(e[t>>2]|0)|0)&255)<<16|i,i=i|((ys(e[t>>2]|0)|0)&255)<<8,e[t+4>>2]=i|(ys(e[t>>2]|0)|0)&255}function ti(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0,xt=0,gt=0,lt=0;j=y,y=y+64|0,H=j+44|0,$=j,C=t+36|0,N=t+40|0;t:do if((e[C>>2]|0)==(e[N>>2]|0)){B=t+8|0;e:do if(!(e[B>>2]|0))L=t+20|0;else{for(h=t+20|0,f=t+44|0,_=H+4|0,A=t+44|0,v=H+8|0,a=0;;){if(Ee($,(e[h>>2]|0)+1|0,0,0),i=e[N>>2]|0,i>>>0<(e[f>>2]|0)>>>0)vc(H,C,1),zo(e[_>>2]|0,$),e[_>>2]=(e[_>>2]|0)+44,yc(H);else{if(i=((i-(e[C>>2]|0)|0)/44|0)+1|0,s=Sc()|0,s>>>0<i>>>0)break;xt=e[C>>2]|0,lt=((e[f>>2]|0)-xt|0)/44|0,gt=lt<<1,wc(H,lt>>>0<s>>>1>>>0?gt>>>0<i>>>0?i:gt:s,((e[N>>2]|0)-xt|0)/44|0,A),zo(e[v>>2]|0,$),e[v>>2]=(e[v>>2]|0)+44,Mc(C,H),Cc(H)}if(ce($),a=a+1|0,a>>>0>=(e[B>>2]|0)>>>0){L=h;break e}}Ge(C)}while(!1);if(e[L>>2]|0){for(_=t+12|0,A=t+68|0,v=t+72|0,C=t+76|0,N=H+4|0,h=t+76|0,f=H+8|0,a=1;;){if(i=e[_>>2]|0,Ee($,1<<(a>>>0>i>>>0?i:a),0,0),i=e[v>>2]|0,i>>>0<(e[C>>2]|0)>>>0)vc(H,A,1),zo(e[N>>2]|0,$),e[N>>2]=(e[N>>2]|0)+44,yc(H);else{if(i=((i-(e[A>>2]|0)|0)/44|0)+1|0,s=Sc()|0,s>>>0<i>>>0)break;lt=e[A>>2]|0,xt=((e[C>>2]|0)-lt|0)/44|0,gt=xt<<1,wc(H,xt>>>0<s>>>1>>>0?gt>>>0<i>>>0?i:gt:s,((e[v>>2]|0)-lt|0)/44|0,h),zo(e[f>>2]|0,$),e[f>>2]=(e[f>>2]|0)+44,Mc(A,H),Cc(H)}if(ce($),a=a+1|0,a>>>0>(e[L>>2]|0)>>>0)break t}Ge(A)}}while(!1);y=j}function Ne(t,i,s,a){return t=t|0,i=i|0,s=s|0,a=a|0,s=(Tp(t,i,(e[t+36>>2]|0)+(a*44|0)|0)|0)+s|0,i=e[t+24>>2]|0,(s|0)<0?s+i|0:s-(s>>>0<i>>>0?0:i)|0}function ei(t){t=t|0,Zo(t+68|0),Zo(t+36|0)}function dp(t){t=t|0,ni(t),yt(t)}function pp(t){t=t|0,ni(t),yt(t)}function _p(t){t=t|0,ni(t),yt(t)}function Ap(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0;A=y,y=y+32|0,h=A,f=t+8|0,_=t+4|0,s=e[_>>2]|0;do if((e[f>>2]|0)-s>>3>>>0<i>>>0)if(s=(s-(e[t>>2]|0)>>3)+i|0,a=Sp()|0,a>>>0<s>>>0)Ge(t);else{v=e[t>>2]|0,C=(e[f>>2]|0)-v|0,f=C>>2,gp(h,C>>3>>>0<a>>>1>>>0?f>>>0<s>>>0?s:f:a,(e[_>>2]|0)-v>>3,t+8|0),vp(h,i),yp(t,h),wp(h);break}else mp(t,i);while(!1);y=A}function mp(t,i){t=t|0,i=i|0;var s=0,a=0,h=0;h=y,y=y+16|0,a=h,Mp(a,t,i),t=a+4|0,i=e[t>>2]|0,s=e[a+8>>2]|0,(i|0)!=(s|0)&&(s=s+-8-i|0,or(i|0,0,s+8&-8|0)|0,e[t>>2]=i+((s>>>3)+1<<3)),Cp(a),y=h}function gp(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0;h=t+12|0,e[h>>2]=0,e[t+16>>2]=a;do if(i)if(i>>>0>536870911)h=Ot(8)|0,sn(h,6723),e[h>>2]=5956,Xt(h|0,3928,123);else{a=St(i<<3)|0;break}else a=0;while(!1);e[t>>2]=a,s=a+(s<<3)|0,e[t+8>>2]=s,e[t+4>>2]=s,e[h>>2]=a+(i<<3)}function vp(t,i){t=t|0,i=i|0;var s=0,a=0;a=y,y=y+16|0,s=a,Ep(s,t+8|0,i),t=e[s>>2]|0,i=e[s+4>>2]|0,(t|0)!=(i|0)&&(i=i+-8-t|0,or(t|0,0,i+8&-8|0)|0,e[s>>2]=t+((i>>>3)+1<<3)),bp(s),y=a}function yp(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;a=e[t>>2]|0,_=t+4|0,f=i+4|0,h=(e[_>>2]|0)-a|0,s=(e[f>>2]|0)+(0-(h>>3)<<3)|0,e[f>>2]=s,(h|0)>0?(ri(s|0,a|0,h|0)|0,a=f,s=e[f>>2]|0):a=f,f=e[t>>2]|0,e[t>>2]=s,e[a>>2]=f,f=i+8|0,h=e[_>>2]|0,e[_>>2]=e[f>>2],e[f>>2]=h,f=t+8|0,_=i+12|0,t=e[f>>2]|0,e[f>>2]=e[_>>2],e[_>>2]=t,e[i>>2]=e[a>>2]}function wp(t){t=t|0;var i=0,s=0,a=0;i=e[t+4>>2]|0,s=t+8|0,a=e[s>>2]|0,(a|0)!=(i|0)&&(e[s>>2]=a+(~((a+-8-i|0)>>>3)<<3)),i=e[t>>2]|0,i|0&&Ht(i,(e[t+12>>2]|0)-i|0)}function Mp(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,i=e[i+4>>2]|0,e[t+4>>2]=i,e[t+8>>2]=i+(s<<3)}function Cp(t){t=t|0,e[(e[t>>2]|0)+4>>2]=e[t+4>>2]}function Sp(t){return 536870911}function Ep(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=e[i>>2],e[t+4>>2]=(e[i>>2]|0)+(s<<3),e[t+8>>2]=i}function bp(t){t=t|0,e[e[t+8>>2]>>2]=e[t>>2]}function mc(t){t=t|0,e[t+12>>2]=1,e[t+16>>2]=2,e[t+8>>2]=4096,e[t+4>>2]=4,e[t>>2]=4}function Zo(t){t=t|0;var i=0,s=0,a=0;if(s=e[t>>2]|0,s|0){if(a=t+4|0,i=e[a>>2]|0,(i|0)==(s|0))i=s;else{do i=i+-44|0,ce(i);while((i|0)!=(s|0));i=e[t>>2]|0}e[a>>2]=s,Ht(i,(e[t+8>>2]|0)-i|0)}}function ce(t){t=t|0;var i=0;i=e[t+8>>2]|0,i|0&&Vo(i),i=e[t+12>>2]|0,i|0&&Vo(i),i=e[t+16>>2]|0,i|0&&Vo(i)}function ys(t){t=t|0;var i=0,s=0;return s=t+4|0,i=e[s>>2]|0,(i|0)>=(e[t+8>>2]|0)&&(gc(t),i=e[s>>2]|0),t=e[t+12>>2]|0,e[s>>2]=i+1,m[t+i>>0]|0}function gc(t){t=t|0;var i=0;if(e[t+4>>2]=0,qn(e[t>>2]|0,e[t+12>>2]|0,1048576),i=Rp(e[t>>2]|0)|0,e[t+8>>2]=i,!i)i=Ot(8)|0,Pp(i),Xt(i|0,2752,8);else return}function Rp(t){return t=t|0,e[t+16>>2]|0}function Pp(t){t=t|0,Ei(t,7769),e[t>>2]=4556}function xp(t){t=t|0,ni(t),yt(t)}function Ee(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0,_=0;if(e[t>>2]=i,m[t+4>>0]=s&1,f=t+8|0,e[f>>2]=0,_=t+12|0,e[_>>2]=0,h=t+16|0,e[h>>2]=0,(i+-2|0)>>>0>2046&&(t=Ot(8)|0,Ei(t,7789),Xt(t|0,3912,8)),e[t+32>>2]=i+-1,i>>>0>16&(s^1)){for(s=3;1<<s+2>>>0<i>>>0;)s=s+1|0;i=1<<s,e[t+36>>2]=i,e[t+40>>2]=15-s,e[h>>2]=$n((i<<2)+8|0)|0,i=e[t>>2]|0}else e[h>>2]=0,e[t+40>>2]=0,e[t+36>>2]=0;if(e[f>>2]=$n(i<<2)|0,h=$n(e[t>>2]<<2)|0,e[_>>2]=h,e[t+20>>2]=0,i=e[t>>2]|0,s=t+24|0,e[s>>2]=i,i=(i|0)!=0,a){if(i){i=0;do e[h+(i<<2)>>2]=e[a+(i<<2)>>2],i=i+1|0;while(i>>>0<(e[t>>2]|0)>>>0)}}else if(i){i=0;do e[h+(i<<2)>>2]=1,i=i+1|0;while(i>>>0<(e[t>>2]|0)>>>0)}B0(t),a=((e[t>>2]|0)+6|0)>>>1,e[s>>2]=a,e[t+28>>2]=a}function vc(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,i=e[i+4>>2]|0,e[t+4>>2]=i,e[t+8>>2]=i+(s*44|0)}function yc(t){t=t|0,e[(e[t>>2]|0)+4>>2]=e[t+4>>2]}function zo(t,i){t=t|0,i=i|0;var s=0;e[t>>2]=e[i>>2],m[t+4>>0]=m[i+4>>0]|0,s=i+8|0,e[t+8>>2]=e[s>>2],e[t+12>>2]=e[i+12>>2],e[t+16>>2]=e[i+16>>2],e[t+20>>2]=e[i+20>>2],e[t+24>>2]=e[i+24>>2],e[t+28>>2]=e[i+28>>2],e[t+32>>2]=e[i+32>>2],e[t+36>>2]=e[i+36>>2],e[t+40>>2]=e[i+40>>2],e[s>>2]=0,e[s+4>>2]=0,e[s+8>>2]=0}function wc(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0;h=t+12|0,e[h>>2]=0,e[t+16>>2]=a;do if(i)if(i>>>0>97612893)h=Ot(8)|0,sn(h,6723),e[h>>2]=5956,Xt(h|0,3928,123);else{a=St(i*44|0)|0;break}else a=0;while(!1);e[t>>2]=a,s=a+(s*44|0)|0,e[t+8>>2]=s,e[t+4>>2]=s,e[h>>2]=a+(i*44|0)}function Mc(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0;if(A=e[t>>2]|0,v=t+4|0,s=e[v>>2]|0,_=i+4|0,(s|0)==(A|0))h=_,f=t,a=e[_>>2]|0,s=A;else{a=e[_>>2]|0;do s=s+-44|0,G0(a+-44|0,s),a=(e[_>>2]|0)+-44|0,e[_>>2]=a;while((s|0)!=(A|0));h=_,f=t,s=e[t>>2]|0}e[f>>2]=a,e[h>>2]=s,A=i+8|0,_=e[v>>2]|0,e[v>>2]=e[A>>2],e[A>>2]=_,A=t+8|0,v=i+12|0,t=e[A>>2]|0,e[A>>2]=e[v>>2],e[v>>2]=t,e[i>>2]=e[h>>2]}function Cc(t){t=t|0;var i=0,s=0,a=0,h=0;if(s=e[t+4>>2]|0,a=t+8|0,i=e[a>>2]|0,(i|0)!=(s|0))do h=i+-44|0,e[a>>2]=h,ce(h),i=e[a>>2]|0;while((i|0)!=(s|0));i=e[t>>2]|0,i|0&&Ht(i,(e[t+12>>2]|0)-i|0)}function Sc(t){return 97612893}function G0(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;s=e[i>>2]|0,e[t>>2]=s,m[t+4>>0]=m[i+4>>0]|0,e[t+20>>2]=e[i+20>>2],e[t+24>>2]=e[i+24>>2],e[t+28>>2]=e[i+28>>2],e[t+32>>2]=e[i+32>>2],f=t+36|0,e[f>>2]=e[i+36>>2],e[t+40>>2]=e[i+40>>2],s=s<<2,a=$n(s)|0,e[t+8>>2]=a,h=e[t>>2]|0,h|0&&di(a|0,e[i+8>>2]|0,h<<2|0)|0,s=$n(s)|0,e[t+12>>2]=s,a=e[t>>2]|0,a|0&&di(s|0,e[i+12>>2]|0,a<<2|0)|0,s=e[f>>2]|0,s?(a=$n((s<<2)+8|0)|0,e[t+16>>2]=a,s=(e[f>>2]<<2)+8|0,s|0&&di(a|0,e[i+16>>2]|0,s|0)|0):e[t+16>>2]=0}function B0(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0;if($=t+24|0,h=t+20|0,i=(e[h>>2]|0)+(e[$>>2]|0)|0,e[h>>2]=i,i>>>0>32768)if(e[h>>2]=0,!(e[t>>2]|0))i=0;else{a=e[t+12>>2]|0,s=0;do B=a+(s<<2)|0,i=((e[B>>2]|0)+1|0)>>>1,e[B>>2]=i,i=(e[h>>2]|0)+i|0,e[h>>2]=i,s=s+1|0;while(s>>>0<(e[t>>2]|0)>>>0)}B=2147483648/(i>>>0)|0;do if((m[t+4>>0]|0)==0&&(L=t+36|0,(e[L>>2]|0)!=0)){if(e[t>>2]|0){A=e[t+8>>2]|0,v=e[t+12>>2]|0,C=t+40|0,N=t+16|0,i=0,f=0,_=0;do{if(s=(Mt(f,B)|0)>>>16,e[A+(_<<2)>>2]=s,f=(e[v+(_<<2)>>2]|0)+f|0,s=s>>>(e[C>>2]|0),i>>>0<s>>>0){a=_+-1|0,h=e[N>>2]|0;do i=i+1|0,e[h+(i<<2)>>2]=a;while((i|0)!=(s|0));i=s}_=_+1|0}while(_>>>0<(e[t>>2]|0)>>>0);if(s=e[N>>2]|0,e[s>>2]=0,i>>>0>(e[L>>2]|0)>>>0){i=t;break}}else s=e[t+16>>2]|0,e[s>>2]=0,i=0;do i=i+1|0,e[s+(i<<2)>>2]=(e[t>>2]|0)+-1;while(i>>>0<=(e[L>>2]|0)>>>0);i=t}else H=7;while(!1);if((H|0)==7)if(!(e[t>>2]|0))i=t;else{a=e[t+8>>2]|0,h=e[t+12>>2]|0,i=0,s=0;do e[a+(i<<2)>>2]=(Mt(s,B)|0)>>>16,s=(e[h+(i<<2)>>2]|0)+s|0,i=i+1|0;while(i>>>0<(e[t>>2]|0)>>>0);i=t}H=((e[$>>2]|0)*5|0)>>>2,L=(e[i>>2]<<3)+48|0,H=H>>>0>L>>>0?L:H,e[$>>2]=H,e[t+28>>2]=H}function Tp(t,i,s){t=t|0,i=i|0,s=s|0;var a=0;s=be(i,s)|0,e[t>>2]=s;do if(s){if(s>>>0>=32){s=e[t+28>>2]|0;break}if(a=e[t+12>>2]|0,s>>>0>a>>>0?(a=s-a|0,s=be(i,(e[t+68>>2]|0)+((s+-1|0)*44|0)|0)|0,a=s<<a|(Ec(i,a)|0)):a=be(i,(e[t+68>>2]|0)+((s+-1|0)*44|0)|0)|0,s=e[t>>2]|0,(a|0)<(1<<s+-1|0)){s=a+1+(-1<<s)|0;break}else{s=a+1|0;break}}else s=Fp(i,t+48|0)|0;while(!1);return s|0}function be(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0;if(L=t+8|0,B=e[L>>2]|0,h=e[i+16>>2]|0,h){if(a=t+4|0,s=e[a>>2]|0,N=B>>>15,e[L>>2]=N,v=(s>>>0)/(N>>>0)|0,A=v>>>(e[i+40>>2]|0),f=e[h+(A<<2)>>2]|0,A=(e[h+(A+1<<2)>>2]|0)+1|0,_=f+1|0,C=e[i+8>>2]|0,A>>>0>_>>>0){h=f,f=A;do _=(f+h|0)>>>1,A=(e[C+(_<<2)>>2]|0)>>>0>v>>>0,h=A?h:_,f=A?_:f,_=h+1|0;while(f>>>0>_>>>0);f=h}h=Mt(e[C+(f<<2)>>2]|0,N)|0,(f|0)==(e[i+32>>2]|0)?_=B:_=Mt(e[C+(_<<2)>>2]|0,N)|0}else{C=B>>>15,e[L>>2]=C,A=e[i>>2]|0,N=e[i+8>>2]|0,a=t+4|0,s=e[a>>2]|0,v=A>>>1,h=0,_=B,f=0;do H=Mt(e[N+(v<<2)>>2]|0,C)|0,B=H>>>0>s>>>0,_=B?H:_,h=B?h:H,f=B?f:v,A=B?v:A,v=(f+A|0)>>>1;while((v|0)!=(f|0))}return e[a>>2]=s-h,H=_-h|0,e[L>>2]=H,H>>>0<16777216&&Do(t),L=(e[i+12>>2]|0)+(f<<2)|0,e[L>>2]=(e[L>>2]|0)+1,L=i+28|0,H=(e[L>>2]|0)+-1|0,e[L>>2]=H,H||B0(i),f|0}function Ec(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;return i>>>0>19?(s=(O0(t)|0)&65535,(Ec(t,i+-16|0)|0)<<16|s|0):(a=t+4|0,h=e[a>>2]|0,f=t+8|0,s=(e[f>>2]|0)>>>i,e[f>>2]=s,i=(h>>>0)/(s>>>0)|0,e[a>>2]=h-(Mt(i,s)|0),s>>>0<16777216&&Do(t),i|0)}function Fp(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0;return a=t+8|0,h=e[a>>2]|0,s=Mt(h>>>13,e[i+8>>2]|0)|0,f=t+4|0,_=e[f>>2]|0,A=_>>>0>=s>>>0,A?(e[f>>2]=_-s,s=h-s|0,e[a>>2]=s):(e[a>>2]=s,_=i+12|0,e[_>>2]=(e[_>>2]|0)+1),s>>>0<16777216&&Do(t),_=i+4|0,t=(e[_>>2]|0)+-1|0,e[_>>2]=t,t||bc(i),A&1|0}function Do(t){t=t|0;var i=0,s=0,a=0,h=0;i=t+4|0,s=t+8|0,a=e[i>>2]|0;do a=a<<8|(ys(e[t>>2]|0)|0)&255,e[i>>2]=a,h=e[s>>2]<<8,e[s>>2]=h;while(h>>>0<16777216)}function O0(t){t=t|0;var i=0,s=0,a=0,h=0;return s=t+4|0,h=e[s>>2]|0,i=t+8|0,a=(e[i>>2]|0)>>>16,e[i>>2]=a,i=(h>>>0)/(a>>>0)|0,e[s>>2]=h-(Mt(i,a)|0),Do(t),i&65535|0}function bc(t){t=t|0;var i=0,s=0,a=0,h=0,f=0;h=e[t>>2]|0,s=t+16|0,i=(e[s>>2]|0)+h|0,e[s>>2]=i,i>>>0>8192?(a=(i+1|0)>>>1,e[s>>2]=a,f=t+12|0,i=((e[f>>2]|0)+1|0)>>>1,e[f>>2]=i,(i|0)==(a|0)?(i=a+1|0,e[s>>2]=i,s=i,i=a):s=a):(s=i,i=e[t+12>>2]|0),e[t+8>>2]=(Mt(i,2147483648/(s>>>0)|0)|0)>>>18,f=h*5|0,f=f>>>0>259?64:f>>>2,e[t>>2]=f,e[t+4>>2]=f}function kp(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0;N=y,y=y+32|0,f=N+16|0,_=N+8|0,A=N,v=t+336|0,a=v,h=t+259|0,(e[a+4>>2]|0)==0&&(e[a>>2]|0)==(O[h>>0]|O[h+1>>0]<<8|O[h+2>>0]<<16|O[h+3>>0]<<24|0)?(a=t+320|0,s=e[t+320>>2]|0,C=5):(a=t+320|0,s=e[a>>2]|0,h=s,(s|0)!=0&&(e[t+312>>2]|0)!=0||(s=h,C=5)),(C|0)==5&&(C=t+320|0,e[f>>2]=s,e[C>>2]=0,s=t+324|0,e[f+4>>2]=e[s>>2],e[s>>2]=0,Lo(f),h=t+312|0,e[f>>2]=e[h>>2],e[h>>2]=0,B=t+316|0,e[f+4>>2]=e[B>>2],e[B>>2]=0,x0(f),L=St(12)|0,Ac(L,t+4|0),e[A>>2]=0,e[f>>2]=e[A>>2],Gp(_,L,f),L=e[_>>2]|0,e[_>>2]=e[h>>2],e[h>>2]=L,L=_+4|0,A=e[L>>2]|0,e[L>>2]=e[B>>2],e[B>>2]=A,x0(_),Np(_,e[h>>2]|0,t+300|0),h=e[_>>2]|0,B=_+4|0,A=e[B>>2]|0,e[_>>2]=0,e[B>>2]=0,e[f>>2]=e[C>>2],e[C>>2]=h,e[f+4>>2]=e[s>>2],e[s>>2]=A,Lo(f),Lo(_),s=t+328|0,A=s,A=fi(e[A>>2]|0,e[A+4>>2]|0,1,0)|0,C=Nt()|0,e[s>>2]=A,e[s+4>>2]=C,s=v,e[s>>2]=0,e[s+4>>2]=0,s=e[a>>2]|0),Ns[e[e[s>>2]>>2]&63](s,i)|0,C=v,C=fi(e[C>>2]|0,e[C+4>>2]|0,1,0)|0,B=Nt()|0,L=v,e[L>>2]=C,e[L+4>>2]=B,y=N}function Np(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0;_=y,y=y+64|0,a=_+56|0,h=_,f=Lp(s)|0,(f|0)==-1&&(_=Ot(8)|0,Vp(_),Xt(_|0,2784,8)),s=Rc(s)|0;t:do if(s)Wp(a,i),Zp(e[a>>2]|0),(f|2|0)==3&&zp(e[a>>2]|0),(f|1|0)==3&&Dp(e[a>>2]|0),f=e[a>>2]|0,jp(h,s),Xp(f,h),Pc(h),e[t>>2]=e[a>>2],f=a+4|0,e[t+4>>2]=e[f>>2],e[a>>2]=0,e[f>>2]=0,Hp(a);else switch(f|0){case 0:{f=St(4788)|0,Jp(f),Yp(t,i,f);break t}case 1:{f=St(5116)|0,qp(f),$p(t,i,f);break t}case 2:{f=St(5104)|0,Kp(f),Qp(t,i,f);break t}case 3:{f=St(5432)|0,e_(f),t_(t,i,f);break t}default:{e[t>>2]=0,e[t+4>>2]=0;break t}}while(!1);y=_}function Gp(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4576,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function Bp(t){t=t|0,yt(t)}function Op(t){t=t|0,t=e[t+12>>2]|0,t|0&&yt(t)}function Ip(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==7983?t+12|0:0)|0}function Up(t){t=t|0,Ht(t)}function Lp(t){t=t|0;var i=0,s=0;i=(e[t+4>>2]|0)-(e[t>>2]|0)|0;t:do if((i|0)!=0&&(s=((i|0)/12|0)+(((Rc(t)|0)!=0)<<31>>31)|0,(s|0)!=0)&&(i=e[t>>2]|0,!(i_(i,n_()|0)|0))){switch(s|0){case 1:{t=0;break t}case 2:{if(ws((e[t>>2]|0)+12|0,xc()|0)|0){t=1;break t}if(ws((e[t>>2]|0)+12|0,Tc()|0)|0){t=2;break t}break}case 3:{if(ws((e[t>>2]|0)+12|0,xc()|0)|0&&(s=(e[t>>2]|0)+24|0,ws(s,Tc()|0)|0)){t=3;break t}break}}t=-1}else t=-1;while(!1);return t|0}function Vp(t){t=t|0,Ei(t,8131),e[t>>2]=4604}function Rc(t){t=t|0;var i=0,s=0;return i=e[t+4>>2]|0,(i|0)!=(e[t>>2]|0)&&(s=i,(e[s+-12>>2]|0)==0)&&(e[s+-4>>2]|0)==2?t=e[s+-8>>2]|0:t=0,t|0}function Wp(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;s=y,y=y+16|0,a=s+4|0,f=s,h=St(24)|0,s_(h,i),e[f>>2]=0,e[a>>2]=e[f>>2],o_(t,h,a),y=s}function Zp(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(4792)|0,__(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],A_(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function zp(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(336)|0,U_(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],L_(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function Dp(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(324)|0,nA(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],rA(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function Xp(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,_=v+12|0,A=v,a=v+8|0,f=St(64)|0,pA(f,e[t+4>>2]|0,i),h=t+8|0,e[a>>2]=0,e[_>>2]=e[a>>2],_A(A,f,_),f=t+12|0,i=e[f>>2]|0,a=t+16|0;do if(i>>>0>=(e[a>>2]|0)>>>0)if(i=(i-(e[h>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(h);else{C=e[h>>2]|0,N=(e[a>>2]|0)-C|0,a=N>>2,Vi(_,N>>3>>>0<s>>>1>>>0?a>>>0<i>>>0?i:a:s,(e[f>>2]|0)-C>>3,t+16|0),t=_+8|0,f=e[t>>2]|0,e[f>>2]=e[A>>2],a=A+4|0,e[f+4>>2]=e[a>>2],e[A>>2]=0,e[a>>2]=0,e[t>>2]=f+8,Wi(h,_),Zi(_);break}else Ui(_,h,1),N=_+4|0,C=e[N>>2]|0,e[C>>2]=e[A>>2],t=A+4|0,e[C+4>>2]=e[t>>2],e[A>>2]=0,e[t>>2]=0,e[N>>2]=C+8,Li(_);while(!1);De(A),y=v}function jp(t,i){t=t|0,i=i|0;var s=0,a=0;s=y,y=y+48|0,a=s,e[t>>2]=i,m[t+4>>0]=0,uh(t+8|0,i),uh(t+20|0,i),Ee(a,256,0,0),VA(t+32|0,i,a),ce(a),y=s}function Pc(t){t=t|0,zA(t+32|0),Kc(t+20|0),Kc(t+8|0)}function Hp(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function Yp(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0;a=y,y=y+16|0,h=a+4|0,_=a,f=St(12)|0,DA(f,i,s),e[_>>2]=0,e[h>>2]=e[_>>2],XA(t,f,h),y=a}function Jp(t){t=t|0,Ms(t),D0(t+4784|0)}function $p(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0;a=y,y=y+16|0,h=a+4|0,_=a,f=St(12)|0,tm(f,i,s),e[_>>2]=0,e[h>>2]=e[_>>2],em(t,f,h),y=a}function qp(t){t=t|0,Ms(t),fm(t+4784|0)}function Qp(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0;a=y,y=y+16|0,h=a+4|0,_=a,f=St(12)|0,dm(f,i,s),e[_>>2]=0,e[h>>2]=e[_>>2],pm(t,f,h),y=a}function Kp(t){t=t|0,Ms(t),mh(t+4784|0)}function t_(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0;a=y,y=y+16|0,h=a+4|0,_=a,f=St(12)|0,Cm(f,i,s),e[_>>2]=0,e[h>>2]=e[_>>2],Sm(t,f,h),y=a}function e_(t){t=t|0,Ms(t),Bm(t+4784|0)}function i_(t,i){return t=t|0,i=i|0,(ws(t,i)|0)^1|0}function n_(){return(m[21456]|0)==0&&nr(21456)|0&&(vs(21536,6,20,2),rr(21456)),21536}function ws(t,i){return t=t|0,i=i|0,(e[t>>2]|0)==(e[i>>2]|0)&&(e[t+8>>2]|0)==(e[i+8>>2]|0)?t=(e[t+4>>2]|0)==(e[i+4>>2]|0):t=0,t|0}function xc(){return(m[21464]|0)==0&&nr(21464)|0&&(vs(21548,7,8,2),rr(21464)),21548}function Tc(){return(m[21472]|0)==0&&nr(21472)|0&&(vs(21560,8,6,2),rr(21472)),21560}function r_(t){t=t|0,ni(t),yt(t)}function s_(t,i){t=t|0,i=i|0,xr(t),e[t>>2]=4624,e[t+4>>2]=i,e[t+8>>2]=0,e[t+12>>2]=0,e[t+16>>2]=0,m[t+20>>0]=1}function o_(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4664,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function xr(t){t=t|0,e[t>>2]=4644}function a_(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0;if(v=y,y=y+16|0,f=v,s=e[t+8>>2]|0,_=e[t+12>>2]|0,(s|0)!=(_|0)){A=f+4|0;do a=e[s>>2]|0,e[f>>2]=a,h=e[s+4>>2]|0,e[A>>2]=h,h|0&&(h=h+4|0,e[h>>2]=(e[h>>2]|0)+1),i=Ns[e[(e[a>>2]|0)+12>>2]&63](a,i)|0,De(f),s=s+8|0;while((s|0)!=(_|0))}return s=t+20|0,m[s>>0]|0&&(m[s>>0]=0,N0(e[t+4>>2]|0)),y=v,i|0}function Fc(t){t=t|0,e[t>>2]=4624,kc(t+8|0)}function l_(t){t=t|0,Fc(t),yt(t)}function c_(t){}function h_(t){ft()}function De(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function kc(t){t=t|0;var i=0,s=0,a=0;if(s=e[t>>2]|0,s|0){if(a=t+4|0,i=e[a>>2]|0,(i|0)==(s|0))i=s;else{do i=i+-8|0,De(i);while((i|0)!=(s|0));i=e[t>>2]|0}e[a>>2]=s,Ht(i,(e[t+8>>2]|0)-i|0)}}function u_(t){t=t|0,yt(t)}function f_(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+8>>2]&255](t)}function d_(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==8546?t+12|0:0)|0}function p_(t){t=t|0,Ht(t)}function __(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=4692,e[t+4>>2]=i,Ms(t+8|0)}function A_(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4740,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function Ui(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,i=e[i+4>>2]|0,e[t+4>>2]=i,e[t+8>>2]=i+(s<<3)}function Li(t){t=t|0,e[(e[t>>2]|0)+4>>2]=e[t+4>>2]}function Vi(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0;h=t+12|0,e[h>>2]=0,e[t+16>>2]=a;do if(i)if(i>>>0>536870911)h=Ot(8)|0,sn(h,6723),e[h>>2]=5956,Xt(h|0,3928,123);else{a=St(i<<3)|0;break}else a=0;while(!1);e[t>>2]=a,s=a+(s<<3)|0,e[t+8>>2]=s,e[t+4>>2]=s,e[h>>2]=a+(i<<3)}function Wi(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0;if(A=e[t>>2]|0,v=t+4|0,s=e[v>>2]|0,_=i+4|0,(s|0)==(A|0))h=_,f=t,a=e[_>>2]|0,s=A;else{a=e[_>>2]|0;do f=s,s=s+-8|0,e[a+-8>>2]=e[s>>2],f=f+-4|0,e[a+-4>>2]=e[f>>2],e[s>>2]=0,e[f>>2]=0,a=(e[_>>2]|0)+-8|0,e[_>>2]=a;while((s|0)!=(A|0));h=_,f=t,s=e[t>>2]|0}e[f>>2]=a,e[h>>2]=s,A=i+8|0,_=e[v>>2]|0,e[v>>2]=e[A>>2],e[A>>2]=_,A=t+8|0,v=i+12|0,t=e[A>>2]|0,e[A>>2]=e[v>>2],e[v>>2]=t,e[i>>2]=e[h>>2]}function Zi(t){t=t|0;var i=0,s=0,a=0,h=0;if(s=e[t+4>>2]|0,a=t+8|0,i=e[a>>2]|0,(i|0)!=(s|0))do h=i+-8|0,e[a>>2]=h,De(h),i=e[a>>2]|0;while((i|0)!=(s|0));i=e[t>>2]|0,i|0&&Ht(i,(e[t+12>>2]|0)-i|0)}function zi(t){return 536870911}function Di(t){t=t|0,e[t>>2]=4716}function Ms(t){t=t|0,C_(t),S_(t+3980|0),E_(t+4380|0),m[t+4780>>0]=0,m[t+4781>>0]=0}function Nc(t){t=t|0,e[t>>2]=4692,Cs(t+8|0)}function m_(t){t=t|0,Nc(t),yt(t)}function g_(t,i){return i=i|0,i|0}function v_(t,i){return t=t|0,i=i|0,Ss(t+8|0,e[t+4>>2]|0,i)|0}function y_(t){}function w_(t){t=t|0,yt(t)}function M_(t,i){return i=i|0,i|0}function C_(t){t=t|0;var i=0,s=0;Gc(t),Bc(t+52|0),Bc(t+436|0),Ee(t+852|0,64,0,0),m[t+3976>>0]=0,i=t+20|0,s=i+32|0;do J[i>>1]=0,i=i+2|0;while((i|0)<(s|0));i=St(44)|0,Ee(i,256,0,0),e[t+896>>2]=i,i=St(44)|0,Ee(i,256,0,0),e[t+900>>2]=i,i=t+820|0,e[i>>2]=0,e[i+4>>2]=0,e[i+8>>2]=0,e[i+12>>2]=0,e[i+16>>2]=0,e[i+20>>2]=0,e[i+24>>2]=0,e[i+28>>2]=0,i=0;do s=St(44)|0,Ee(s,256,0,0),e[t+904+(i<<2)>>2]=s,s=St(44)|0,Ee(s,256,0,0),e[t+1928+(i<<2)>>2]=s,s=St(44)|0,Ee(s,256,0,0),e[t+2952+(i<<2)>>2]=s,i=i+1|0;while(i>>>0<256)}function S_(t){t=t|0,hi(t,16,4,8,0),hi(t+80|0,16,1,8,0),hi(t+160|0,32,2,8,0),hi(t+240|0,32,22,8,0),hi(t+320|0,32,20,8,0)}function E_(t){t=t|0,Ke(t,16,4,8,0),Ke(t+80|0,16,1,8,0),Ke(t+160|0,32,2,8,0),Ke(t+240|0,32,22,8,0),Ke(t+320|0,32,20,8,0)}function b_(t){t=t|0,ui(t+320|0),ui(t+240|0),ui(t+160|0),ui(t+80|0),ui(t)}function R_(t){t=t|0;var i=0,s=0;i=e[t+896>>2]|0,i|0&&(ce(i),yt(i)),i=e[t+900>>2]|0,i|0&&(ce(i),yt(i)),s=0;do i=e[t+904+(s<<2)>>2]|0,i|0&&(ce(i),yt(i)),i=e[t+1928+(s<<2)>>2]|0,i|0&&(ce(i),yt(i)),i=e[t+2952+(s<<2)>>2]|0,i|0&&(ce(i),yt(i)),s=s+1|0;while((s|0)!=256);ce(t+852|0)}function Gc(t){t=t|0;var i=0;m[t>>0]=0,m[t+1>>0]=0,m[t+2>>0]=0,m[t+3>>0]=0,i=t+4|0,m[i>>0]=0,m[i+1>>0]=0,m[i+2>>0]=0,m[i+3>>0]=0,t=t+12|0,i=t,m[i>>0]=0,m[i+1>>0]=0,m[i+2>>0]=0,m[i+3>>0]=0,t=t+4|0,m[t>>0]=0,m[t+1>>0]=0,m[t+2>>0]=0,m[t+3>>0]=0}function Bc(t){t=t|0;var i=0;i=t+384|0;do P_(t),t=t+24|0;while((t|0)!=(i|0))}function P_(t){t=t|0,x_(t)}function x_(t){t=t|0,e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0,e[t+12>>2]=0,e[t+16>>2]=0,m[t+20>>0]=1}function hi(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0;e[t+4>>2]=i,e[t+8>>2]=s,e[t+12>>2]=a,e[t+16>>2]=h,e[t+36>>2]=0,e[t+40>>2]=0,e[t+44>>2]=0,mc(t+48|0),e[t+68>>2]=0,e[t+72>>2]=0,e[t+76>>2]=0;do if(h){for(a=t+20|0,e[a>>2]=0,e[t+24>>2]=h,s=h,f=0;s=s>>>1,i=f+1|0,s;)f=i;e[a>>2]=(1<<f|0)==(h|0)?f:i,s=h>>>1,e[t+28>>2]=0-s,s=h+-1-s|0}else if(s=t+20|0,(i+-1|0)>>>0<31){e[s>>2]=i,h=1<<i,e[t+24>>2]=h,s=h>>>1,e[t+28>>2]=0-s,s=h+-1-s|0;break}else{e[s>>2]=32,e[t+24>>2]=0,e[t+28>>2]=-2147483648,s=2147483647;break}while(!1);e[t+32>>2]=s,e[t>>2]=0}function ui(t){t=t|0;var i=0,s=0,a=0,h=0,f=0;if(f=t+36|0,s=e[f>>2]|0,a=t+40|0,i=e[a>>2]|0,(i|0)!=(s|0))do i=i+-44|0,ce(i);while((i|0)!=(s|0));if(e[a>>2]=s,a=t+68|0,h=e[a>>2]|0,s=t+72|0,i=e[s>>2]|0,(i|0)!=(h|0))do i=i+-44|0,ce(i);while((i|0)!=(h|0));e[s>>2]=h,Zo(a),Zo(f)}function Cs(t){t=t|0,T_(t+4380|0),b_(t+3980|0),R_(t)}function T_(t){t=t|0,ei(t+320|0),ei(t+240|0),ei(t+160|0),ei(t+80|0),ei(t)}function Ss(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0;if(N=y,y=y+32|0,C=N,a=t+4781|0,m[a>>0]|0||(F_(t+4380|0),m[a>>0]=1),a=t+3976|0,m[a>>0]|0)A=be(i,t+852|0)|0,A?(A&32|0&&Ic((be(i,e[t+904+(((Oc(t)|0)&255)<<2)>>2]|0)|0)&255,t),v=t+14|0,f=m[v>>0]|0,a=f&7,f=(f&255)>>>3&7,h=O[16+(f<<3)+a>>0]|0,a=O[80+(f<<3)+a>>0]|0,A&16?(B=t+20+(h<<1)|0,_=(Ne(t+4380|0,i,ot[B>>1]|0,h>>>0<3?h:3)|0)&65535,J[B>>1]=_):_=J[t+20+(h<<1)>>1]|0,J[t+12>>1]=_,A&8|0&&(B=t+15|0,m[B>>0]=be(i,e[t+1928+(O[B>>0]<<2)>>2]|0)|0),A&4|0&&(v=be(i,e[t+896+(((O[v>>0]|0)>>>6&1)<<2)>>2]|0)|0,B=t+16|0,m[B>>0]=Qn(v+(m[B>>0]|0)|0)|0),A&2|0&&(B=t+17|0,m[B>>0]=be(i,e[t+2952+(O[B>>0]<<2)>>2]|0)|0),A&1&&(B=t+18|0,J[B>>1]=Ne(t+4460|0,i,ot[B>>1]|0,0)|0)):(B=m[t+14>>0]|0,a=B&7,B=(B&255)>>>3&7,f=B,h=O[16+(B<<3)+a>>0]|0,a=O[80+(B<<3)+a>>0]|0),_=t+52+(h*24|0)|0,A=t+4540|0,v=(f|0)==1&1,f=Ne(A,i,Uc(_)|0,v)|0,e[C>>2]=f,e[t>>2]=(e[t>>2]|0)+f,Lc(_,C),_=t+436+(h*24|0)|0,f=Uc(_)|0,h=I0(A)|0,B=t+4620|0,h=Ne(B,i,f,(h>>>0<20?h&-2:20)|v)|0,e[C>>2]=h,f=t+4|0,e[f>>2]=(e[f>>2]|0)+h,Lc(_,C),C=I0(A)|0,C=(I0(B)|0)+C|0,B=t+820+(a<<2)|0,C=Ne(t+4700|0,i,e[B>>2]|0,(C>>>0<36?C>>>1&2147483646:18)|v)|0,e[t+8>>2]=C,e[B>>2]=C,N_(t,s);else{m[a>>0]=1,jo(Xo(i)|0,s,20),k_(C,s),f=t,a=C,h=f+20|0;do m[f>>0]=m[a>>0]|0,f=f+1|0,a=a+1|0;while((f|0)<(h|0));J[t+12>>1]=0}return y=N,s+20|0}function F_(t){t=t|0,ti(t),ti(t+80|0),ti(t+160|0),ti(t+240|0),ti(t+320|0)}function Xo(t){return t=t|0,e[t>>2]|0}function jo(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0;if(v=t+4|0,a=e[v>>2]|0,A=(e[t+8>>2]|0)-a|0,A=A>>>0>s>>>0?s:A,_=t+12|0,h=(e[_>>2]|0)+a|0,f=h+A|0,A){for(a=h,h=i;m[h>>0]=m[a>>0]|0,a=a+1|0,(a|0)!=(f|0);)h=h+1|0;a=e[v>>2]|0}if(e[v>>2]=a+A,s=s-A|0,s|0){for(gc(t),h=(e[_>>2]|0)+(e[v>>2]|0)|0,f=h+s|0,a=i+A|0;m[a>>0]=m[h>>0]|0,h=h+1|0,(h|0)!=(f|0);)a=a+1|0;e[v>>2]=(e[v>>2]|0)+s}}function k_(t,i){t=t|0,i=i|0,Gc(t),e[t>>2]=Ho(i)|0,e[t+4>>2]=Ho(i+4|0)|0,e[t+8>>2]=Ho(i+8|0)|0,J[t+12>>1]=Kn(i+12|0)|0,Ic(U0(i+14|0)|0,t),m[t+15>>0]=U0(i+15|0)|0,m[t+16>>0]=Vc(i+16|0)|0,m[t+17>>0]=Vc(i+17|0)|0,J[t+18>>1]=Kn(i+18|0)|0}function Oc(t){return t=t|0,m[t+14>>0]|0}function Ic(t,i){t=t|0,i=i|0,m[i+14>>0]=t}function Qn(t){return t=t|0,t&255|0}function Uc(t){return t=t|0,e[t+8>>2]|0}function Lc(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0;v=t+20|0;do if(m[v>>0]|0){if(h=e[i>>2]|0,_=t+8|0,s=e[_>>2]|0,f=t+12|0,a=e[f>>2]|0,(h|0)>=(s|0)){s=t+16|0,(h|0)<(a|0)?(e[s>>2]=a,e[f>>2]=e[i>>2]):e[s>>2]=h,m[v>>0]=0;break}if(e[t+16>>2]=a,e[f>>2]=s,s=e[i>>2]|0,a=e[t>>2]|0,h=t+4|0,f=e[h>>2]|0,(s|0)<(a|0)){e[_>>2]=f,e[h>>2]=a,e[t>>2]=e[i>>2];break}if((s|0)<(f|0)){e[_>>2]=f,e[h>>2]=e[i>>2];break}else{e[_>>2]=s;break}}else{if(A=t+8|0,s=e[A>>2]|0,a=e[i>>2]|0,h=t+4|0,f=e[h>>2]|0,(s|0)>=(a|0)){(f|0)<(a|0)?(e[t>>2]=f,e[h>>2]=e[i>>2]):e[t>>2]=a,m[v>>0]=1;break}if(e[t>>2]=f,e[h>>2]=s,h=t+16|0,f=e[h>>2]|0,_=e[i>>2]|0,s=t+12|0,a=e[s>>2]|0,(f|0)<(_|0)){e[A>>2]=a,e[s>>2]=f,e[h>>2]=e[i>>2];break}if((a|0)<(_|0)){e[A>>2]=a,e[s>>2]=e[i>>2];break}else{e[A>>2]=_;break}}while(!1)}function I0(t){return t=t|0,e[t>>2]|0}function N_(t,i){t=t|0,i=i|0;var s=0;Jo(O[t>>0]|O[t+1>>0]<<8|O[t+2>>0]<<16|O[t+3>>0]<<24,i),s=t+4|0,Jo(O[s>>0]|O[s+1>>0]<<8|O[s+2>>0]<<16|O[s+3>>0]<<24,i+4|0),s=t+8|0,Jo(O[s>>0]|O[s+1>>0]<<8|O[s+2>>0]<<16|O[s+3>>0]<<24,i+8|0),s=t+12|0,tr(O[s>>0]|O[s+1>>0]<<8,i+12|0),L0(Oc(t)|0,i+14|0),L0(m[t+15>>0]|0,i+15|0),Wc(m[t+16>>0]|0,i+16|0),Wc(m[t+17>>0]|0,i+17|0),t=t+18|0,tr(O[t>>0]|O[t+1>>0]<<8,i+18|0)}function Ho(t){return t=t|0,Yo(t)|0}function Kn(t){return t=t|0,(m[t+1>>0]<<8|O[t>>0])&65535|0}function U0(t){return t=t|0,m[t>>0]|0}function Vc(t){return t=t|0,m[t>>0]|0}function Yo(t){return t=t|0,(O[t+1>>0]|0)<<8|(O[t>>0]|0)|(O[t+2>>0]|0)<<16|(O[t+3>>0]|0)<<24|0}function Jo(t,i){t=t|0,i=i|0,$o(t,i)}function tr(t,i){t=t|0,i=i|0,m[i+1>>0]=(t&65535)>>>8,m[i>>0]=t}function L0(t,i){t=t|0,i=i|0,m[i>>0]=t}function Wc(t,i){t=t|0,i=i|0,m[i>>0]=t}function $o(t,i){t=t|0,i=i|0,m[i+3>>0]=t>>>24,m[i+2>>0]=t>>>16,m[i+1>>0]=t>>>8,m[i>>0]=t}function G_(t){t=t|0,yt(t)}function B_(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function O_(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==9202?t+12|0:0)|0}function I_(t){t=t|0,Ht(t)}function U_(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=4768,e[t+4>>2]=i,V0(t+8|0)}function L_(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4792,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function V0(t){t=t|0,Z_(t),z_(t+164|0),D_(t+244|0),m[t+324>>0]=0,m[t+325>>0]=0}function Zc(t){t=t|0,e[t>>2]=4768,W0(t+8|0)}function V_(t){t=t|0,Zc(t),yt(t)}function W_(t,i){return t=t|0,i=i|0,Es(t+8|0,e[t+4>>2]|0,i)|0}function Z_(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0;for(f=y,y=y+16|0,a=f,m[t>>0]=0,Ee(t+4|0,516,0,0),Ee(t+48|0,6,0,0),e[t+92>>2]=0,e[t+96>>2]=0,s=t+100|0,H_(s),zc(a),h=e[a>>2]|0,a=e[a+4>>2]|0,i=4;_=s,A=_,m[A>>0]=h,m[A+1>>0]=h>>8,m[A+2>>0]=h>>16,m[A+3>>0]=h>>24,_=_+4|0,m[_>>0]=a,m[_+1>>0]=a>>8,m[_+2>>0]=a>>16,m[_+3>>0]=a>>24,i=i+-1|0,i;)s=s+8|0;A=t+132|0,e[A>>2]=0,e[A+4>>2]=0,e[A+8>>2]=0,e[A+12>>2]=0,e[A+16>>2]=0,e[A+20>>2]=0,e[A+24>>2]=0,e[A+28>>2]=0,y=f}function z_(t){t=t|0,hi(t,32,9,8,0)}function D_(t){t=t|0,Ke(t,32,9,8,0)}function X_(t){t=t|0,ui(t)}function j_(t){t=t|0,ce(t+48|0),ce(t+4|0)}function H_(t){t=t|0;var i=0;i=t+32|0;do zc(t),t=t+8|0;while((t|0)!=(i|0))}function zc(t){t=t|0;var i=0;i=t,m[i>>0]=0,m[i+1>>0]=0,m[i+2>>0]=0,m[i+3>>0]=0,t=t+4|0,m[t>>0]=0,m[t+1>>0]=0,m[t+2>>0]=0,m[t+3>>0]=0}function W0(t){t=t|0,Y_(t+244|0),X_(t+164|0),j_(t)}function Y_(t){t=t|0,ei(t)}function Es(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0;if(a=t+325|0,m[a>>0]|0||(J_(t+244|0),m[a>>0]=1),!(m[t>>0]|0))m[t>>0]=1,jo(Xo(i)|0,s,8),f=$_(s)|0,_=Nt()|0,t=t+100|0,i=t,m[i>>0]=f,m[i+1>>0]=f>>8,m[i+2>>0]=f>>16,m[i+3>>0]=f>>24,t=t+4|0,m[t>>0]=_,m[t+1>>0]=_>>8,m[t+2>>0]=_>>16,m[t+3>>0]=_>>24;else{_=t+92|0;t:do if(e[t+132+(e[_>>2]<<2)>>2]|0){if(f=be(i,t+4|0)|0,(f|0)==1){a=Ne(t+244|0,i,e[t+132+(e[_>>2]<<2)>>2]|0,1)|0,A=e[_>>2]|0,i=t+100+(A<<3)|0,f=i,h=f,f=f+4|0,a=fi(O[h>>0]|O[h+1>>0]<<8|O[h+2>>0]<<16|O[h+3>>0]<<24|0,O[f>>0]|O[f+1>>0]<<8|O[f+2>>0]<<16|O[f+3>>0]<<24|0,a|0,((a|0)<0)<<31>>31|0)|0,f=Nt()|0,h=i,m[h>>0]=a,m[h+1>>0]=a>>8,m[h+2>>0]=a>>16,m[h+3>>0]=a>>24,i=i+4|0,m[i>>0]=f,m[i+1>>0]=f>>8,m[i+2>>0]=f>>16,m[i+3>>0]=f>>24,e[t+148+(A<<2)>>2]=0;break}if((f|0)>=511){if((f|0)==512){A=t+96|0,e[A>>2]=(e[A>>2]|0)+1&3,f=t+100+(e[_>>2]<<3)+4|0,f=Ne(t+244|0,i,O[f>>0]|O[f+1>>0]<<8|O[f+2>>0]<<16|O[f+3>>0]<<24,8)|0,a=t+100+(e[A>>2]<<3)|0,h=a,m[h>>0]=0,m[h+1>>0]=0,m[h+2>>0]=0,m[h+3>>0]=0,a=a+4|0,m[a>>0]=f,m[a+1>>0]=f>>8,m[a+2>>0]=f>>16,m[a+3>>0]=f>>24,a=Dc(i)|0,A=e[A>>2]|0,i=t+100+(A<<3)|0,f=i,h=f,f=f+4|0,f=O[f>>0]|O[f+1>>0]<<8|O[f+2>>0]<<16|O[f+3>>0]<<24,a=O[h>>0]|O[h+1>>0]<<8|O[h+2>>0]<<16|O[h+3>>0]<<24|a,h=i,m[h>>0]=a,m[h+1>>0]=a>>8,m[h+2>>0]=a>>16,m[h+3>>0]=a>>24,i=i+4|0,m[i>>0]=f,m[i+1>>0]=f>>8,m[i+2>>0]=f>>16,m[i+3>>0]=f>>24,e[_>>2]=A,e[t+132+(A<<2)>>2]=0,e[t+148+(e[_>>2]<<2)>>2]=0;break}if((f|0)<=511)break;e[_>>2]=(e[_>>2]|0)+f&3,Es(t,i,s)|0;break}do if(!f)a=Ne(t+244|0,i,0,7)|0,h=t+148+(e[_>>2]<<2)|0,e[h>>2]=(e[h>>2]|0)+1,h=e[_>>2]|0,(e[t+148+(h<<2)>>2]|0)>3&&(e[t+132+(h<<2)>>2]=a,e[t+148+(e[_>>2]<<2)>>2]=0);else{if((f|0)<500)if(a=t+244|0,h=Mt(e[t+132+(e[_>>2]<<2)>>2]|0,f)|0,(f|0)<10){a=Ne(a,i,h,2)|0;break}else{a=Ne(a,i,h,3)|0;break}if((f|0)==500){if(a=Ne(t+244|0,i,(e[t+132+(e[_>>2]<<2)>>2]|0)*500|0,4)|0,h=t+148+(e[_>>2]<<2)|0,e[h>>2]=(e[h>>2]|0)+1,h=e[_>>2]|0,(e[t+148+(h<<2)>>2]|0)<=3)break;e[t+132+(h<<2)>>2]=a,e[t+148+(e[_>>2]<<2)>>2]=0;break}if(a=500-f|0,h=t+244|0,f=e[t+132+(e[_>>2]<<2)>>2]|0,(a|0)>-10){a=Ne(h,i,Mt(f,a)|0,5)|0;break}a=Ne(h,i,Mt(f,-10)|0,6)|0,h=t+148+(e[_>>2]<<2)|0,e[h>>2]=(e[h>>2]|0)+1,h=e[_>>2]|0,(e[t+148+(h<<2)>>2]|0)>3&&(e[t+132+(h<<2)>>2]=a,e[t+148+(e[_>>2]<<2)>>2]=0)}while(!1);A=t+100+(e[_>>2]<<3)|0,h=A,i=h,h=h+4|0,h=fi(O[i>>0]|O[i+1>>0]<<8|O[i+2>>0]<<16|O[i+3>>0]<<24|0,O[h>>0]|O[h+1>>0]<<8|O[h+2>>0]<<16|O[h+3>>0]<<24|0,a|0,((a|0)<0)<<31>>31|0)|0,i=Nt()|0,f=A,m[f>>0]=h,m[f+1>>0]=h>>8,m[f+2>>0]=h>>16,m[f+3>>0]=h>>24,A=A+4|0,m[A>>0]=i,m[A+1>>0]=i>>8,m[A+2>>0]=i>>16,m[A+3>>0]=i>>24}else switch(a=be(i,t+48|0)|0,a|0){case 1:{i=Ne(t+244|0,i,0,0)|0,e[t+132+(e[_>>2]<<2)>>2]=i,i=e[_>>2]|0,A=e[t+132+(i<<2)>>2]|0,f=t+100+(i<<3)|0,h=f,a=h,h=h+4|0,A=fi(O[a>>0]|O[a+1>>0]<<8|O[a+2>>0]<<16|O[a+3>>0]<<24|0,O[h>>0]|O[h+1>>0]<<8|O[h+2>>0]<<16|O[h+3>>0]<<24|0,A|0,((A|0)<0)<<31>>31|0)|0,h=Nt()|0,a=f,m[a>>0]=A,m[a+1>>0]=A>>8,m[a+2>>0]=A>>16,m[a+3>>0]=A>>24,f=f+4|0,m[f>>0]=h,m[f+1>>0]=h>>8,m[f+2>>0]=h>>16,m[f+3>>0]=h>>24,e[t+148+(i<<2)>>2]=0;break t}case 2:{A=t+96|0,e[A>>2]=(e[A>>2]|0)+1&3,f=t+100+(e[_>>2]<<3)+4|0,f=Ne(t+244|0,i,O[f>>0]|O[f+1>>0]<<8|O[f+2>>0]<<16|O[f+3>>0]<<24,8)|0,a=t+100+(e[A>>2]<<3)|0,h=a,m[h>>0]=0,m[h+1>>0]=0,m[h+2>>0]=0,m[h+3>>0]=0,a=a+4|0,m[a>>0]=f,m[a+1>>0]=f>>8,m[a+2>>0]=f>>16,m[a+3>>0]=f>>24,a=Dc(i)|0,A=e[A>>2]|0,i=t+100+(A<<3)|0,f=i,h=f,f=f+4|0,f=O[f>>0]|O[f+1>>0]<<8|O[f+2>>0]<<16|O[f+3>>0]<<24,a=O[h>>0]|O[h+1>>0]<<8|O[h+2>>0]<<16|O[h+3>>0]<<24|a,h=i,m[h>>0]=a,m[h+1>>0]=a>>8,m[h+2>>0]=a>>16,m[h+3>>0]=a>>24,i=i+4|0,m[i>>0]=f,m[i+1>>0]=f>>8,m[i+2>>0]=f>>16,m[i+3>>0]=f>>24,e[_>>2]=A,e[t+132+(A<<2)>>2]=0,e[t+148+(e[_>>2]<<2)>>2]=0;break t}default:{if((a|0)<=2)break t;e[_>>2]=a+2+(e[_>>2]|0)&3,Es(t,i,s)|0;break t}}while(!1);q_(t+100+(e[_>>2]<<3)|0,s)}return s+8|0}function J_(t){t=t|0,ti(t)}function $_(t){t=t|0;var i=0,s=0,a=0;return i=y,y=y+16|0,s=i,a=Yo(t)|0,Q_(s,a,Yo(t+4|0)|0),t=e[s>>2]|0,Bt(e[s+4>>2]|0),y=i,t|0}function Dc(t){t=t|0;var i=0;return i=(O0(t)|0)&65535,((O0(t)|0)&65535)<<16|i|0}function q_(t,i){t=t|0,i=i|0;var s=0;s=t,$o(O[s>>0]|O[s+1>>0]<<8|O[s+2>>0]<<16|O[s+3>>0]<<24,i),t=t+4|0,$o(O[t>>0]|O[t+1>>0]<<8|O[t+2>>0]<<16|O[t+3>>0]<<24,i+4|0)}function Q_(t,i,s){t=t|0,i=i|0,s=s|0;var a=0;a=t,m[a>>0]=i,m[a+1>>0]=i>>8,m[a+2>>0]=i>>16,m[a+3>>0]=i>>24,i=t+4|0,m[i>>0]=s,m[i+1>>0]=s>>8,m[i+2>>0]=s>>16,m[i+3>>0]=s>>24}function K_(t){t=t|0,yt(t)}function tA(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function eA(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==9890?t+12|0:0)|0}function iA(t){t=t|0,Ht(t)}function nA(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=4820,e[t+4>>2]=i,Xc(t+8|0)}function rA(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4844,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function Xc(t){t=t|0,m[t>>0]=0,Hc(t+1|0),Ee(t+8|0,128,0,0),Ee(t+52|0,256,0,0),Ee(t+96|0,256,0,0),Ee(t+140|0,256,0,0),Ee(t+184|0,256,0,0),Ee(t+228|0,256,0,0),Ee(t+272|0,256,0,0)}function jc(t){t=t|0,e[t>>2]=4820,Yc(t+8|0)}function sA(t){t=t|0,jc(t),yt(t)}function oA(t,i){return t=t|0,i=i|0,Jc(t+8|0,e[t+4>>2]|0,i)|0}function Hc(t){t=t|0;var i=0;m[t>>0]=0,m[t+1>>0]=0,i=t+2|0,m[i>>0]=0,m[i+1>>0]=0,t=t+4|0,m[t>>0]=0,m[t+1>>0]=0}function Yc(t){t=t|0,ce(t+272|0),ce(t+228|0),ce(t+184|0),ce(t+140|0),ce(t+96|0),ce(t+52|0),ce(t+8|0)}function Jc(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0;if(N=y,y=y+16|0,v=N,!(m[t>>0]|0))m[t>>0]=1,jo(Xo(i)|0,s,6),aA(v,s),C=t+1|0,m[C>>0]=m[v>>0]|0,m[C+1>>0]=m[v+1>>0]|0,m[C+2>>0]=m[v+2>>0]|0,m[C+3>>0]=m[v+3>>0]|0,m[C+4>>0]=m[v+4>>0]|0,m[C+5>>0]=m[v+5>>0]|0;else{C=be(i,t+8|0)|0,Hc(v),C&1?(A=(be(i,t+52|0)|0)&255,a=t+1|0,a=(Qn(A+((O[a>>0]|O[a+1>>0]<<8)&255)|0)|0)&255):(a=t+1|0,a=(O[a>>0]|O[a+1>>0]<<8)&255),J[v>>1]=a,C&2?(a=(be(i,t+96|0)|0)&255,A=t+1|0,a=((Qn((((O[A>>0]|O[A+1>>0]<<8)&65535)>>>8)+a|0)|0)&255)<<8,a=(a|ot[v>>1])&65535):(A=t+1|0,a=a|(O[A>>0]|O[A+1>>0]<<8)&-256),J[v>>1]=a;do if(C&64)if(_=t+1|0,h=(a&255)-((O[_>>0]|O[_+1>>0]<<8)&255)|0,C&4?(a=(be(i,t+140|0)|0)&255,A=t+3|0,A=h+((O[A>>0]|O[A+1>>0]<<8)&255)|0,a=(Qn(((A|0)<1?0:(A|0)>254?255:A&255)+a|0)|0)&255):(a=t+3|0,a=(O[a>>0]|O[a+1>>0]<<8)&255),A=v+2|0,J[A>>1]=a,C&16?(a=be(i,t+228|0)|0,B=t+3|0,f=t+5|0,f=((h+(J[A>>1]&255)-((O[B>>0]|O[B+1>>0]<<8)&255)|0)/2|0)+((O[f>>0]|O[f+1>>0]<<8)&255)|0,a=(Qn(((f|0)<1?0:(f|0)>254?255:f&255)+(a&255)|0)|0)&255):(a=t+5|0,a=(O[a>>0]|O[a+1>>0]<<8)&255),f=v+4|0,J[f>>1]=a,a=((ot[v>>1]|0)>>>8)-(((O[_>>0]|O[_+1>>0]<<8)&65535)>>>8)|0,C&8?(h=(be(i,t+184|0)|0)&255,B=t+3|0,B=(((O[B>>0]|O[B+1>>0]<<8)&65535)>>>8)+a|0,h=((Qn(((B|0)<1?0:(B|0)>254?255:B&255)+h|0)|0)&255)<<8,h=(h|ot[A>>1])&65535):(h=t+3|0,h=J[A>>1]|(O[h>>0]|O[h+1>>0]<<8)&-256),J[A>>1]=h,C&32){B=be(i,t+272|0)|0,i=t+3|0,C=t+5|0,C=((((ot[A>>1]|0)>>>8)+a-(((O[i>>0]|O[i+1>>0]<<8)&65535)>>>8)|0)/2|0)+(((O[C>>0]|O[C+1>>0]<<8)&65535)>>>8)|0,B=((Qn(((C|0)<1?0:(C|0)>254?255:C&255)+(B&255)|0)|0)&255)<<8,J[f>>1]=B|ot[f>>1];break}else{B=t+5|0,J[f>>1]=J[f>>1]|(O[B>>0]|O[B+1>>0]<<8)&-256;break}else J[v+2>>1]=a,J[v+4>>1]=a;while(!1);B=t+1|0,m[B>>0]=m[v>>0]|0,m[B+1>>0]=m[v+1>>0]|0,m[B+2>>0]=m[v+2>>0]|0,m[B+3>>0]=m[v+3>>0]|0,m[B+4>>0]=m[v+4>>0]|0,m[B+5>>0]=m[v+5>>0]|0,lA(B,s)}return y=N,s+6|0}function aA(t,i){t=t|0,i=i|0;var s=0,a=0;a=Kn(i)|0,s=Kn(i+2|0)|0,cA(t,a,s,Kn(i+4|0)|0)}function lA(t,i){t=t|0,i=i|0;var s=0;tr(O[t>>0]|O[t+1>>0]<<8,i),s=t+2|0,tr(O[s>>0]|O[s+1>>0]<<8,i+2|0),t=t+4|0,tr(O[t>>0]|O[t+1>>0]<<8,i+4|0)}function cA(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0,m[t>>0]=i,m[t+1>>0]=i>>8,i=t+2|0,m[i>>0]=s,m[i+1>>0]=s>>8,s=t+4|0,m[s>>0]=a,m[s+1>>0]=a>>8}function hA(t){t=t|0,yt(t)}function uA(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function fA(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==10570?t+12|0:0)|0}function dA(t){t=t|0,Ht(t)}function pA(t,i,s){t=t|0,i=i|0,s=s|0,Di(t),e[t>>2]=4872,e[t+4>>2]=i,AA(t+8|0,s)}function _A(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4896,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function AA(t,i){t=t|0,i=i|0,e[t>>2]=e[i>>2],m[t+4>>0]=m[i+4>>0]|0,qc(t+8|0,i+8|0),qc(t+20|0,i+20|0),vA(t+32|0,i+32|0)}function $c(t){t=t|0,e[t>>2]=4872,Pc(t+8|0)}function mA(t){t=t|0,$c(t),yt(t)}function gA(t,i){return t=t|0,i=i|0,GA(t+8|0,e[t+4>>2]|0,i)|0}function qc(t,i){t=t|0,i=i|0;var s=0,a=0;e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0,s=i+4|0,a=(e[s>>2]|0)-(e[i>>2]|0)|0,a|0&&(Qc(t,a),yA(t,e[i>>2]|0,e[s>>2]|0,a))}function vA(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;s=y,y=y+32|0,a=s+24|0,h=s+16|0,_=s+8|0,f=s,e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0,e[t+12>>2]=0,e[t+16>>2]=0,e[t+20>>2]=0,FA(_,i),kA(f,i),e[h>>2]=e[_>>2],e[h+4>>2]=e[_+4>>2],e[a>>2]=e[f>>2],e[a+4>>2]=e[f+4>>2],MA(t,h,a,0),y=s}function Qc(t,i){t=t|0,i=i|0;var s=0;if((wA()|0)>>>0<i>>>0)Ge(t);else{s=St(i)|0,e[t+4>>2]=s,e[t>>2]=s,e[t+8>>2]=s+i;return}}function yA(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;f=y,y=y+16|0,h=f,th(h,t,a),a=h+4|0,t=s-i|0,(t|0)>0&&(ri(e[a>>2]|0,i|0,t|0)|0,e[a>>2]=(e[a>>2]|0)+t),eh(h),y=f}function Kc(t){t=t|0;var i=0,s=0;i=e[t>>2]|0,s=i,i|0&&(e[t+4>>2]=s,Ht(i,(e[t+8>>2]|0)-s|0))}function wA(t){return 2147483647}function th(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,i=e[i+4>>2]|0,e[t+4>>2]=i,e[t+8>>2]=i+s}function eh(t){t=t|0,e[(e[t>>2]|0)+4>>2]=e[t+4>>2]}function MA(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0;if(j=y,y=y+96|0,$=j+80|0,B=j+64|0,v=j+48|0,C=j+40|0,N=j+8|0,A=j,L=j+32|0,H=j+16|0,_=i,f=e[_>>2]|0,_=e[_+4>>2]|0,h=s,s=e[h>>2]|0,h=e[h+4>>2]|0,a=f,(h|0)==(_|0)?_=0:_=((h-(e[s>>2]|0)|0)/44|0)+((s-f>>2)*93|0)+((_-(e[f>>2]|0)|0)/-44|0)|0,s=(e[t+8>>2]|0)-(e[t+4>>2]|0)|0,s=((s|0)==0?0:((s>>2)*93|0)+-1|0)-((e[t+20>>2]|0)+(e[t+16>>2]|0))|0,_>>>0>s>>>0&&ih(t,_-s|0),bs(C,t),bs(A,t),h=A,s=e[h>>2]|0,h=e[h+4>>2]|0,f=N,e[f>>2]=s,e[f+4>>2]=h,f=s,_|0&&(s=((h-(e[s>>2]|0)|0)/44|0)+_|0,(s|0)>0?(A=(s>>>0)/93|0,_=f+(A<<2)|0,e[N>>2]=_,s=(e[_>>2]|0)+((s-(A*93|0)|0)*44|0)|0):(s=92-s|0,A=f+(((s|0)/-93|0)<<2)|0,e[N>>2]=A,s=(e[A>>2]|0)+((92-((s|0)%93|0)|0)*44|0)|0),e[N+4>>2]=s),e[B>>2]=e[C>>2],e[B+4>>2]=e[C+4>>2],e[$>>2]=e[N>>2],e[$+4>>2]=e[N+4>>2],Z0(v,B,$),nh($,v),rh(B,v),qo($,B)|0){f=H+4|0,_=i+4|0;do{if(sh(L,$),oh(H,t,L),s=e[H>>2]|0,(s|0)!=(e[f>>2]|0)){h=e[_>>2]|0;do G0(s,h),s=(e[H>>2]|0)+44|0,e[H>>2]=s,h=h+44|0,e[_>>2]=h,(h-(e[a>>2]|0)|0)==4092&&(a=a+4|0,e[i>>2]=a,h=e[a>>2]|0,e[_>>2]=h);while((s|0)!=(e[f>>2]|0))}ah(H),lh($)|0}while(qo($,B)|0)}y=j}function CA(t){t=t|0;var i=0,s=0,a=0;i=e[t+4>>2]|0,s=t+8|0,a=e[s>>2]|0,(a|0)!=(i|0)&&(e[s>>2]=a+(~((a+-4-i|0)>>>2)<<2)),i=e[t>>2]|0,i|0&&Ht(i,(e[t+12>>2]|0)-i|0)}function ih(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0,xt=0,gt=0,lt=0,Et=0,Q=0,te=0,ae=0,ee=0,Zt=0,se=0,Ut=0;se=y,y=y+64|0,Et=se+52|0,lt=se+48|0,Q=se+28|0,te=se+24|0,ae=se+20|0,$=se,ee=t+8|0,s=e[ee>>2]|0,Zt=t+4|0,v=e[Zt>>2]|0,xt=((s|0)==(v|0)&1)+i|0,_=(xt>>>0)/93|0,_=_+((xt-(_*93|0)|0)!=0&1)|0,xt=t+16|0,a=e[xt>>2]|0,A=(a>>>0)/93|0,j=_>>>0<A>>>0?_:A,i=_-j|0,f=s;t:do if(i)if(gt=t+12|0,a=e[gt>>2]|0,h=a-(e[t>>2]|0)|0,s=f-v>>2,i>>>0>((h>>2)-s|0)>>>0){H=h>>1,L=s+i|0,Cn($,H>>>0<L>>>0?L:H,s-j|0,t+12|0);do e[Et>>2]=St(4092)|0,bA($,Et),i=i+-1|0;while((i|0)!=0);if(!j)s=e[Zt>>2]|0;else{A=$+8|0,v=$+12|0,C=$+4|0,N=$+16|0,B=Q+4|0,L=Q+8|0,H=Q+12|0,_=j,i=e[A>>2]|0,s=e[Zt>>2]|0;do{f=e[v>>2]|0,a=f;do if((i|0)==(f|0)){if(h=e[C>>2]|0,f=e[$>>2]|0,i=f,h>>>0<=f>>>0){i=a-i|0,i=(i|0)==0?1:i>>1,Cn(Q,i,i>>>2,e[N>>2]|0),e[te>>2]=e[C>>2],e[ae>>2]=e[A>>2],e[lt>>2]=e[te>>2],e[Et>>2]=e[ae>>2],er(Q,lt,Et),i=e[$>>2]|0,e[$>>2]=e[Q>>2],e[Q>>2]=i,i=e[C>>2]|0,e[C>>2]=e[B>>2],e[B>>2]=i,i=e[A>>2]|0,e[A>>2]=e[L>>2],e[L>>2]=i,i=e[v>>2]|0,e[v>>2]=e[H>>2],e[H>>2]=i,Sn(Q),i=e[A>>2]|0;break}Ut=h,i=((Ut-i>>2)+1|0)/-2|0,f=h+(i<<2)|0,a=a-Ut|0,a?(di(f|0,h|0,a|0)|0,i=(e[C>>2]|0)+(i<<2)|0):i=f,Ut=f+(a>>2<<2)|0,e[A>>2]=Ut,e[C>>2]=i,i=Ut}while(!1);e[i>>2]=e[s>>2],i=(e[A>>2]|0)+4|0,e[A>>2]=i,s=(e[Zt>>2]|0)+4|0,e[Zt>>2]=s,_=_+-1|0}while((_|0)!=0)}if(i=e[ee>>2]|0,(i|0)!=(s|0)){do i=i+-4|0,RA($,i),s=e[Zt>>2]|0;while((i|0)!=(s|0));i=e[ee>>2]|0}Ut=e[t>>2]|0,e[t>>2]=e[$>>2],e[$>>2]=Ut,Ut=$+4|0,e[Zt>>2]=e[Ut>>2],e[Ut>>2]=s,Ut=$+8|0,e[ee>>2]=e[Ut>>2],e[Ut>>2]=i,Ut=$+12|0,Zt=e[gt>>2]|0,e[gt>>2]=e[Ut>>2],e[Ut>>2]=Zt,e[xt>>2]=(e[xt>>2]|0)+(Mt(j,-93)|0),Sn($);break}else{e:do if((a|0)==(f|0))C=18;else{for(;e[Et>>2]=St(4092)|0,SA(t,Et),i=i+-1|0,!!i;)if((e[gt>>2]|0)==(e[ee>>2]|0)){C=18;break e}s=j,i=e[xt>>2]|0}while(!1);if((C|0)==18){a=~(_>>>0>A>>>0?A:_),s=i;do e[Et>>2]=St(4092)|0,EA(t,Et),s=s+-1|0,h=(((e[ee>>2]|0)-(e[Zt>>2]|0)|0)==4?92:93)+(e[xt>>2]|0)|0,e[xt>>2]=h;while((s|0)!=0);s=i+-1-a|0,i=h}if(e[xt>>2]=i+(Mt(s,-93)|0),!s)break;A=t+12|0,v=Q+4|0,C=Q+8|0,N=Q+12|0,i=e[ee>>2]|0;do{f=e[Zt>>2]|0,_=e[f>>2]|0,f=f+4|0,e[Zt>>2]=f,Ut=e[gt>>2]|0,a=Ut;do if((i|0)==(Ut|0)){if(Ut=e[t>>2]|0,i=Ut,f>>>0<=Ut>>>0){i=a-i|0,i=(i|0)==0?1:i>>1,Cn(Q,i,i>>>2,A),e[te>>2]=e[Zt>>2],e[ae>>2]=e[ee>>2],e[lt>>2]=e[te>>2],e[Et>>2]=e[ae>>2],er(Q,lt,Et),i=e[t>>2]|0,e[t>>2]=e[Q>>2],e[Q>>2]=i,i=e[Zt>>2]|0,e[Zt>>2]=e[v>>2],e[v>>2]=i,i=e[ee>>2]|0,e[ee>>2]=e[C>>2],e[C>>2]=i,i=e[gt>>2]|0,e[gt>>2]=e[N>>2],e[N>>2]=i,Sn(Q),i=e[ee>>2]|0;break}Ut=f,i=((Ut-i>>2)+1|0)/-2|0,h=f+(i<<2)|0,a=a-Ut|0,a?(di(h|0,f|0,a|0)|0,i=(e[Zt>>2]|0)+(i<<2)|0):i=h,Ut=h+(a>>2<<2)|0,e[ee>>2]=Ut,e[Zt>>2]=i,i=Ut}while(!1);e[i>>2]=_,i=(e[ee>>2]|0)+4|0,e[ee>>2]=i,s=s+-1|0}while((s|0)!=0)}else if(e[xt>>2]=(Mt(j,-93)|0)+a,j|0)for(A=t+12|0,C=t+12|0,N=Q+4|0,B=Q+8|0,L=Q+12|0,i=j,a=v;;){_=e[a>>2]|0,f=a+4|0,e[Zt>>2]=f,gt=e[A>>2]|0,a=gt;do if((s|0)==(gt|0)){if(gt=e[t>>2]|0,s=gt,f>>>0<=gt>>>0){s=a-s|0,s=(s|0)==0?1:s>>1,Cn(Q,s,s>>>2,C),e[te>>2]=e[Zt>>2],e[ae>>2]=e[ee>>2],e[lt>>2]=e[te>>2],e[Et>>2]=e[ae>>2],er(Q,lt,Et),s=e[t>>2]|0,e[t>>2]=e[Q>>2],e[Q>>2]=s,s=e[Zt>>2]|0,e[Zt>>2]=e[N>>2],e[N>>2]=s,s=e[ee>>2]|0,e[ee>>2]=e[B>>2],e[B>>2]=s,s=e[A>>2]|0,e[A>>2]=e[L>>2],e[L>>2]=s,Sn(Q),s=e[ee>>2]|0;break}gt=f,s=((gt-s>>2)+1|0)/-2|0,h=f+(s<<2)|0,a=a-gt|0,a?(di(h|0,f|0,a|0)|0,s=(e[Zt>>2]|0)+(s<<2)|0):s=h,gt=h+(a>>2<<2)|0,e[ee>>2]=gt,e[Zt>>2]=s,s=gt}while(!1);if(e[s>>2]=_,s=(e[ee>>2]|0)+4|0,e[ee>>2]=s,i=i+-1|0,!i)break t;a=e[Zt>>2]|0}while(!1);y=se}function bs(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;s=(e[i+16>>2]|0)+(e[i+20>>2]|0)|0,f=e[i+4>>2]|0,a=(s>>>0)/93|0,h=f+(a<<2)|0,(e[i+8>>2]|0)==(f|0)?i=0:i=(e[h>>2]|0)+((s-(a*93|0)|0)*44|0)|0,e[t>>2]=h,e[t+4>>2]=i}function Z0(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;h=i,i=e[h+4>>2]|0,a=t,e[a>>2]=e[h>>2],e[a+4>>2]=i,a=s,i=e[a+4>>2]|0,s=t+8|0,e[s>>2]=e[a>>2],e[s+4>>2]=i}function nh(t,i){t=t|0,i=i|0,e[t>>2]=e[i>>2],e[t+4>>2]=e[i+4>>2],e[t+8>>2]=e[i+8>>2],e[t+12>>2]=e[i+12>>2]}function rh(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0;s=y,y=y+32|0,a=s+24|0,h=s+16|0,_=s+8|0,f=s,A=i+8|0,v=e[A>>2]|0,A=e[A+4>>2]|0,i=_,e[i>>2]=v,e[i+4>>2]=A,i=f,e[i>>2]=v,e[i+4>>2]=A,e[h>>2]=e[_>>2],e[h+4>>2]=e[_+4>>2],e[a>>2]=e[f>>2],e[a+4>>2]=e[f+4>>2],Z0(t,h,a),y=s}function qo(t,i){return t=t|0,i=i|0,(TA(t,i)|0)^1|0}function sh(t,i){t=t|0,i=i|0;var s=0,a=0;s=e[i>>2]|0,a=e[i+4>>2]|0,(s|0)==(e[i+8>>2]|0)?ch(t,a,e[i+12>>2]|0):ch(t,a,(e[s>>2]|0)+4092|0)}function oh(t,i,s){t=t|0,i=i|0,s=s|0;var a=0;a=e[s>>2]|0,e[t>>2]=a,e[t+4>>2]=e[s+4>>2],e[t+8>>2]=a,e[t+12>>2]=i}function ah(t){t=t|0;var i=0;i=(e[t+12>>2]|0)+20|0,e[i>>2]=(e[i>>2]|0)+(((e[t>>2]|0)-(e[t+8>>2]|0)|0)/44|0)}function lh(t){t=t|0;var i=0,s=0,a=0;return i=e[t>>2]|0,s=t+8|0,(i|0)==(e[s>>2]|0)?(a=s,i=e[a+4>>2]|0,s=t,e[s>>2]=e[a>>2],e[s+4>>2]=i):(a=i+4|0,e[t>>2]=a,e[t+4>>2]=e[a>>2]),t|0}function SA(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0;$=y,y=y+48|0,h=$+32|0,a=$+28|0,A=$+8|0,v=$+4|0,C=$,H=t+8|0,s=e[H>>2]|0,N=t+12|0,L=e[N>>2]|0,f=L;do if((s|0)==(L|0)){if(L=t+4|0,B=e[L>>2]|0,j=e[t>>2]|0,_=j,B>>>0<=j>>>0){s=f-_|0,s=(s|0)==0?1:s>>1,Cn(A,s,s>>>2,t+12|0),e[v>>2]=e[L>>2],e[C>>2]=e[H>>2],e[a>>2]=e[v>>2],e[h>>2]=e[C>>2],er(A,a,h),s=e[t>>2]|0,e[t>>2]=e[A>>2],e[A>>2]=s,s=A+4|0,j=e[L>>2]|0,e[L>>2]=e[s>>2],e[s>>2]=j,s=A+8|0,j=e[H>>2]|0,e[H>>2]=e[s>>2],e[s>>2]=j,s=A+12|0,j=e[N>>2]|0,e[N>>2]=e[s>>2],e[s>>2]=j,Sn(A),s=e[H>>2]|0;break}h=B,a=((h-_>>2)+1|0)/-2|0,t=B+(a<<2)|0,h=s-h|0,h?(di(t|0,B|0,h|0)|0,s=(e[L>>2]|0)+(a<<2)|0):s=t,j=t+(h>>2<<2)|0,e[H>>2]=j,e[L>>2]=s,s=j}while(!1);e[s>>2]=e[i>>2],e[H>>2]=(e[H>>2]|0)+4,y=$}function EA(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0;$=y,y=y+48|0,a=$+32|0,s=$+28|0,_=$+8|0,A=$+4|0,v=$,H=t+4|0,B=e[H>>2]|0,L=e[t>>2]|0,C=L;do if((B|0)==(L|0)){if(L=t+8|0,N=e[L>>2]|0,f=t+12|0,j=e[f>>2]|0,h=j,N>>>0>=j>>>0){j=h-C|0,j=(j|0)==0?1:j>>1,Cn(_,j,(j+3|0)>>>2,t+12|0),e[A>>2]=e[H>>2],e[v>>2]=e[L>>2],e[s>>2]=e[A>>2],e[a>>2]=e[v>>2],er(_,s,a),s=e[t>>2]|0,e[t>>2]=e[_>>2],e[_>>2]=s,s=_+4|0,j=e[H>>2]|0,e[H>>2]=e[s>>2],e[s>>2]=j,s=_+8|0,j=e[L>>2]|0,e[L>>2]=e[s>>2],e[s>>2]=j,s=_+12|0,j=e[f>>2]|0,e[f>>2]=e[s>>2],e[s>>2]=j,Sn(_),s=e[H>>2]|0;break}a=N,t=((h-a>>2)+1|0)/2|0,h=N+(t<<2)|0,a=a-B|0,s=h+(0-(a>>2)<<2)|0,a?(di(s|0,B|0,a|0)|0,a=(e[L>>2]|0)+(t<<2)|0):(s=h,a=h),e[H>>2]=s,e[L>>2]=a}else s=B;while(!1);e[s+-4>>2]=e[i>>2],e[H>>2]=(e[H>>2]|0)+-4,y=$}function Cn(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0;h=t+12|0,e[h>>2]=0,e[t+16>>2]=a;do if(i)if(i>>>0>1073741823)h=Ot(8)|0,sn(h,6723),e[h>>2]=5956,Xt(h|0,3928,123);else{a=St(i<<2)|0;break}else a=0;while(!1);e[t>>2]=a,s=a+(s<<2)|0,e[t+8>>2]=s,e[t+4>>2]=s,e[h>>2]=a+(i<<2)}function bA(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0;$=y,y=y+48|0,h=$+32|0,a=$+28|0,A=$+8|0,v=$+4|0,C=$,H=t+8|0,s=e[H>>2]|0,N=t+12|0,L=e[N>>2]|0,f=L;do if((s|0)==(L|0)){if(L=t+4|0,B=e[L>>2]|0,j=e[t>>2]|0,_=j,B>>>0<=j>>>0){s=f-_|0,s=(s|0)==0?1:s>>1,Cn(A,s,s>>>2,e[t+16>>2]|0),e[v>>2]=e[L>>2],e[C>>2]=e[H>>2],e[a>>2]=e[v>>2],e[h>>2]=e[C>>2],er(A,a,h),s=e[t>>2]|0,e[t>>2]=e[A>>2],e[A>>2]=s,s=A+4|0,j=e[L>>2]|0,e[L>>2]=e[s>>2],e[s>>2]=j,s=A+8|0,j=e[H>>2]|0,e[H>>2]=e[s>>2],e[s>>2]=j,s=A+12|0,j=e[N>>2]|0,e[N>>2]=e[s>>2],e[s>>2]=j,Sn(A),s=e[H>>2]|0;break}h=B,a=((h-_>>2)+1|0)/-2|0,t=B+(a<<2)|0,h=s-h|0,h?(di(t|0,B|0,h|0)|0,s=(e[L>>2]|0)+(a<<2)|0):s=t,j=t+(h>>2<<2)|0,e[H>>2]=j,e[L>>2]=s,s=j}while(!1);e[s>>2]=e[i>>2],e[H>>2]=(e[H>>2]|0)+4,y=$}function RA(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0;$=y,y=y+48|0,a=$+32|0,s=$+28|0,_=$+8|0,A=$+4|0,v=$,H=t+4|0,B=e[H>>2]|0,L=e[t>>2]|0,C=L;do if((B|0)==(L|0)){if(L=t+8|0,N=e[L>>2]|0,f=t+12|0,j=e[f>>2]|0,h=j,N>>>0>=j>>>0){j=h-C|0,j=(j|0)==0?1:j>>1,Cn(_,j,(j+3|0)>>>2,e[t+16>>2]|0),e[A>>2]=e[H>>2],e[v>>2]=e[L>>2],e[s>>2]=e[A>>2],e[a>>2]=e[v>>2],er(_,s,a),s=e[t>>2]|0,e[t>>2]=e[_>>2],e[_>>2]=s,s=_+4|0,j=e[H>>2]|0,e[H>>2]=e[s>>2],e[s>>2]=j,s=_+8|0,j=e[L>>2]|0,e[L>>2]=e[s>>2],e[s>>2]=j,s=_+12|0,j=e[f>>2]|0,e[f>>2]=e[s>>2],e[s>>2]=j,Sn(_),s=e[H>>2]|0;break}a=N,t=((h-a>>2)+1|0)/2|0,h=N+(t<<2)|0,a=a-B|0,s=h+(0-(a>>2)<<2)|0,a?(di(s|0,B|0,a|0)|0,a=(e[L>>2]|0)+(t<<2)|0):(s=h,a=h),e[H>>2]=s,e[L>>2]=a}else s=B;while(!1);e[s+-4>>2]=e[i>>2],e[H>>2]=(e[H>>2]|0)+-4,y=$}function Sn(t){t=t|0;var i=0,s=0,a=0;i=e[t+4>>2]|0,s=t+8|0,a=e[s>>2]|0,(a|0)!=(i|0)&&(e[s>>2]=a+(~((a+-4-i|0)>>>2)<<2)),i=e[t>>2]|0,i|0&&Ht(i,(e[t+12>>2]|0)-i|0)}function er(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0;if(_=y,y=y+16|0,f=_,h=e[i>>2]|0,PA(f,t+8|0,(e[s>>2]|0)-h>>2),t=e[f>>2]|0,a=f+4|0,(t|0)!=(e[a>>2]|0)){s=h;do e[t>>2]=e[s>>2],t=(e[f>>2]|0)+4|0,e[f>>2]=t,s=s+4|0;while((t|0)!=(e[a>>2]|0));e[i>>2]=s}xA(f),y=_}function PA(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=e[i>>2],e[t+4>>2]=(e[i>>2]|0)+(s<<2),e[t+8>>2]=i}function xA(t){t=t|0,e[e[t+8>>2]>>2]=e[t>>2]}function TA(t,i){return t=t|0,i=i|0,(e[t+4>>2]|0)==(e[i+4>>2]|0)|0}function ch(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,e[t+4>>2]=s}function FA(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;f=e[i+4>>2]|0,s=e[i+16>>2]|0,a=(s>>>0)/93|0,h=f+(a<<2)|0,(e[i+8>>2]|0)==(f|0)?i=0:i=(e[h>>2]|0)+((s-(a*93|0)|0)*44|0)|0,e[t>>2]=h,e[t+4>>2]=i}function kA(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;s=(e[i+16>>2]|0)+(e[i+20>>2]|0)|0,f=e[i+4>>2]|0,a=(s>>>0)/93|0,h=f+(a<<2)|0,(e[i+8>>2]|0)==(f|0)?i=0:i=(e[h>>2]|0)+((s-(a*93|0)|0)*44|0)|0,e[t>>2]=h,e[t+4>>2]=i}function NA(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0;if(A=y,y=y+16|0,a=A+8|0,f=A,hh(a,t),bs(f,t),h=a+4|0,i=e[h>>2]|0,f=f+4|0,(i|0)!=(e[f>>2]|0))do ce(i),i=(e[h>>2]|0)+44|0,e[h>>2]=i,s=e[a>>2]|0,(i-(e[s>>2]|0)|0)==4092&&(i=s+4|0,e[a>>2]=i,i=e[i>>2]|0,e[h>>2]=i);while((i|0)!=(e[f>>2]|0));if(e[t+20>>2]=0,h=t+8|0,a=t+4|0,s=e[a>>2]|0,i=(e[h>>2]|0)-s>>2,i>>>0>2)do Ht(e[s>>2]|0),s=(e[a>>2]|0)+4|0,e[a>>2]=s,i=(e[h>>2]|0)-s>>2;while(i>>>0>2);switch(i|0){case 1:{i=46,_=11;break}case 2:{i=93,_=11;break}}(_|0)==11&&(e[t+16>>2]=i),y=A}function hh(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;f=e[i+4>>2]|0,s=e[i+16>>2]|0,a=(s>>>0)/93|0,h=f+(a<<2)|0,(e[i+8>>2]|0)==(f|0)?i=0:i=(e[h>>2]|0)+((s-(a*93|0)|0)*44|0)|0,e[t>>2]=h,e[t+4>>2]=i}function GA(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0,C=0;if(C=y,y=y+16|0,v=C,_=t+4|0,m[_>>0]|0){if(h=e[t+20>>2]|0,a=e[t+8>>2]|0,hh(v,t+32|0),t=t+12|0,(a|0)!=(e[t>>2]|0))for(A=v+4|0,_=a,f=h,a=e[A>>2]|0;h=O[_>>0]|0,h=BA((be(i,a)|0)+h|0)|0,m[f>>0]=h,m[s>>0]=h,m[_>>0]=h,_=_+1|0,s=s+1|0,h=e[v>>2]|0,a=(e[A>>2]|0)+44|0,e[A>>2]=a,(a-(e[h>>2]|0)|0)==4092&&(a=h+4|0,e[v>>2]=a,a=e[a>>2]|0,e[A>>2]=a),(_|0)!=(e[t>>2]|0);)f=f+1|0}else{if(v=Xo(i)|0,jo(v,s,e[t>>2]|0),v=e[t>>2]|0,f=s+v|0,!v)a=0;else{for(a=s,h=e[t+8>>2]|0;m[h>>0]=m[a>>0]|0,a=a+1|0,(a|0)!=(f|0);)h=h+1|0;a=e[t>>2]|0}m[_>>0]=1,s=s+a|0}return y=C,s|0}function BA(t){return t=t|0,t&255|0}function OA(t){t=t|0,yt(t)}function IA(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function UA(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==11262?t+12|0:0)|0}function LA(t){t=t|0,Ht(t)}function uh(t,i){t=t|0,i=i|0,e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0,i|0&&(Qc(t,i),WA(t,i))}function VA(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0,e[t+12>>2]=0,e[t+16>>2]=0,e[t+20>>2]=0,i|0&&ZA(t,i,s)}function WA(t,i){t=t|0,i=i|0;var s=0,a=0,h=0;if(h=y,y=y+16|0,a=h,th(a,t,i),i=a+4|0,t=e[i>>2]|0,s=a+8|0,(t|0)!=(e[s>>2]|0))do m[t>>0]=0,t=(e[i>>2]|0)+1|0,e[i>>2]=t;while((t|0)!=(e[s>>2]|0));eh(a),y=h}function ZA(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0;if(H=y,y=y+96|0,L=H+80|0,C=H+64|0,_=H+48|0,A=H+40|0,v=H+8|0,h=H,N=H+32|0,B=H+16|0,a=(e[t+8>>2]|0)-(e[t+4>>2]|0)|0,a=((a|0)==0?0:((a>>2)*93|0)+-1|0)-((e[t+20>>2]|0)+(e[t+16>>2]|0))|0,a>>>0<i>>>0&&ih(t,i-a|0),bs(A,t),bs(h,t),a=e[h>>2]|0,h=e[h+4>>2]|0,f=v,e[f>>2]=a,e[f+4>>2]=h,f=a,i|0&&(a=((h-(e[a>>2]|0)|0)/44|0)+i|0,(a|0)>0?(i=(a>>>0)/93|0,f=f+(i<<2)|0,e[v>>2]=f,a=(e[f>>2]|0)+((a-(i*93|0)|0)*44|0)|0):(a=92-a|0,i=f+(((a|0)/-93|0)<<2)|0,e[v>>2]=i,a=(e[i>>2]|0)+((92-((a|0)%93|0)|0)*44|0)|0),e[v+4>>2]=a),e[C>>2]=e[A>>2],e[C+4>>2]=e[A+4>>2],e[L>>2]=e[v>>2],e[L+4>>2]=e[v+4>>2],Z0(_,C,L),nh(L,_),rh(C,_),qo(L,C)|0){h=B+4|0;do{if(sh(N,L),oh(B,t,N),a=e[B>>2]|0,(a|0)!=(e[h>>2]|0))do G0(a,s),a=(e[B>>2]|0)+44|0,e[B>>2]=a;while((a|0)!=(e[h>>2]|0));ah(B),lh(L)|0}while(qo(L,C)|0)}y=H}function zA(t){t=t|0;var i=0,s=0;if(NA(t),i=e[t+4>>2]|0,s=e[t+8>>2]|0,(i|0)!=(s|0))do Ht(e[i>>2]|0),i=i+4|0;while((i|0)!=(s|0));CA(t)}function DA(t,i,s){t=t|0,i=i|0,s=s|0,xr(t),e[t>>2]=4924,e[t+4>>2]=i,e[t+8>>2]=s}function XA(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4944,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function jA(t,i){return t=t|0,i=i|0,YA(e[t+8>>2]|0,e[t+4>>2]|0,i)|0}function fh(t){t=t|0;var i=0,s=0;e[t>>2]=4924,s=t+8|0,i=e[s>>2]|0,e[s>>2]=0,i|0&&(JA(i),yt(i))}function HA(t){t=t|0,fh(t),yt(t)}function YA(t,i,s){return t=t|0,i=i|0,s=s|0,z0(t+4784|0,i,Ss(t,i,s)|0)|0}function z0(t,i,s){return t=t|0,i=i|0,s=s|0,m[t>>0]|0&&(N0(i),m[t>>0]=0),s|0}function JA(t){t=t|0,Cs(t)}function $A(t){t=t|0,yt(t)}function qA(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+8>>2]&255](t)}function QA(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==12004?t+12|0:0)|0}function KA(t){t=t|0,Ht(t)}function D0(t){t=t|0,m[t>>0]=1}function tm(t,i,s){t=t|0,i=i|0,s=s|0,xr(t),e[t>>2]=4972,e[t+4>>2]=i,e[t+8>>2]=s}function em(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=4992,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function im(t,i){return t=t|0,i=i|0,rm(e[t+8>>2]|0,e[t+4>>2]|0,i)|0}function dh(t){t=t|0;var i=0,s=0;e[t>>2]=4972,s=t+8|0,i=e[s>>2]|0,e[s>>2]=0,i|0&&(om(i),yt(i))}function nm(t){t=t|0,dh(t),yt(t)}function rm(t,i,s){return t=t|0,i=i|0,s=s|0,sm(t+4784|0,i,Ss(t,i,s)|0)|0}function sm(t,i,s){return t=t|0,i=i|0,s=s|0,z0(t+328|0,i,Es(t,i,s)|0)|0}function om(t){t=t|0,am(t+4784|0),Cs(t)}function am(t){t=t|0,W0(t)}function lm(t){t=t|0,yt(t)}function cm(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+8>>2]&255](t)}function hm(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==12827?t+12|0:0)|0}function um(t){t=t|0,Ht(t)}function fm(t){t=t|0,V0(t),D0(t+328|0)}function dm(t,i,s){t=t|0,i=i|0,s=s|0,xr(t),e[t>>2]=5020,e[t+4>>2]=i,e[t+8>>2]=s}function pm(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5040,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function _m(t,i){return t=t|0,i=i|0,mm(e[t+8>>2]|0,e[t+4>>2]|0,i)|0}function ph(t){t=t|0;var i=0,s=0;e[t>>2]=5020,s=t+8|0,i=e[s>>2]|0,e[s>>2]=0,i|0&&(gm(i),yt(i))}function Am(t){t=t|0,ph(t),yt(t)}function mm(t,i,s){return t=t|0,i=i|0,s=s|0,_h(t+4784|0,i,Ss(t,i,s)|0)|0}function _h(t,i,s){return t=t|0,i=i|0,s=s|0,z0(t+316|0,i,Jc(t,i,s)|0)|0}function gm(t){t=t|0,Ah(t+4784|0),Cs(t)}function Ah(t){t=t|0,Yc(t)}function vm(t){t=t|0,yt(t)}function ym(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+8>>2]&255](t)}function wm(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==13672?t+12|0:0)|0}function Mm(t){t=t|0,Ht(t)}function mh(t){t=t|0,Xc(t),D0(t+316|0)}function Cm(t,i,s){t=t|0,i=i|0,s=s|0,xr(t),e[t>>2]=5068,e[t+4>>2]=i,e[t+8>>2]=s}function Sm(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5088,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function Em(t,i){return t=t|0,i=i|0,Rm(e[t+8>>2]|0,e[t+4>>2]|0,i)|0}function gh(t){t=t|0;var i=0,s=0;e[t>>2]=5068,s=t+8|0,i=e[s>>2]|0,e[s>>2]=0,i|0&&(xm(i),yt(i))}function bm(t){t=t|0,gh(t),yt(t)}function Rm(t,i,s){return t=t|0,i=i|0,s=s|0,Pm(t+4784|0,i,Ss(t,i,s)|0)|0}function Pm(t,i,s){return t=t|0,i=i|0,s=s|0,_h(t+328|0,i,Es(t,i,s)|0)|0}function xm(t){t=t|0,Tm(t+4784|0),Cs(t)}function Tm(t){t=t|0,Ah(t+328|0),W0(t)}function Fm(t){t=t|0,yt(t)}function km(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+8>>2]&255](t)}function Nm(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==14573?t+12|0:0)|0}function Gm(t){t=t|0,Ht(t)}function Bm(t){t=t|0,V0(t),mh(t+328|0)}function Om(t){return t=t|0,t+20|0}function Im(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=i,e[t+4>>2]=s,e[t+8>>2]=0}function Um(t,i){t=t|0,i=i|0,e[t>>2]=i,e[t+4>>2]=0,e[t+8>>2]=-1}function Lm(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;s=y,y=y+16|0,a=s+4|0,f=s,h=St(24)|0,$m(h,i),e[f>>2]=0,e[a>>2]=e[f>>2],qm(t,h,a),y=s}function Rs(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function Vm(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5116,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function X0(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function Wm(t){t=t|0,yt(t)}function Zm(t){t=t|0,t=e[t+12>>2]|0,t|0&&yt(t)}function zm(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==14966?t+12|0:0)|0}function Dm(t){t=t|0,Ht(t)}function Xm(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5144,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function vh(t){t=t|0;var i=0,s=0;t=e[t+4>>2]|0,t|0&&(s=t+4|0,i=e[s>>2]|0,e[s>>2]=i+-1,(i|0)==0)&&(re[e[(e[t>>2]|0)+8>>2]&255](t),rn(t))}function jm(t){t=t|0,yt(t)}function Hm(t){t=t|0,t=e[t+12>>2]|0,t|0&&yt(t)}function Ym(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==15127?t+12|0:0)|0}function Jm(t){t=t|0,Ht(t)}function $m(t,i){t=t|0,i=i|0,xr(t),e[t>>2]=5172,e[t+4>>2]=i,e[t+8>>2]=0,e[t+12>>2]=0,e[t+16>>2]=0,m[t+20>>0]=1}function qm(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5192,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function Qm(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0;if(v=y,y=y+16|0,f=v,s=e[t+8>>2]|0,_=e[t+12>>2]|0,(s|0)!=(_|0)){A=f+4|0;do a=e[s>>2]|0,e[f>>2]=a,h=e[s+4>>2]|0,e[A>>2]=h,h|0&&(h=h+4|0,e[h>>2]=(e[h>>2]|0)+1),i=Ns[e[(e[a>>2]|0)+12>>2]&63](a,i)|0,De(f),s=s+8|0;while((s|0)!=(_|0))}return s=t+20|0,m[s>>0]|0&&(m[s>>0]=0,tg(e[t+4>>2]|0)),y=v,i|0}function yh(t){t=t|0,e[t>>2]=5172,kc(t+8|0)}function Km(t){t=t|0,yh(t),yt(t)}function tg(t){t=t|0;var i=0;i=((Tr(e[t>>2]|0)|0)&255)<<24,i=((Tr(e[t>>2]|0)|0)&255)<<16|i,i=i|((Tr(e[t>>2]|0)|0)&255)<<8,e[t+4>>2]=i|(Tr(e[t>>2]|0)|0)&255}function Tr(t){t=t|0;var i=0,s=0;return i=e[t>>2]|0,s=t+8|0,t=e[s>>2]|0,e[s>>2]=t+1,m[i+t>>0]|0}function eg(t){t=t|0,yt(t)}function ig(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+8>>2]&255](t)}function ng(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==15450?t+12|0:0)|0}function rg(t){t=t|0,Ht(t)}function j0(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(180)|0,sg(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],og(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function Qo(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(180)|0,Mg(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],Cg(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function sg(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=5220,e[t+4>>2]=i,ag(t+8|0)}function og(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5244,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function ag(t){t=t|0,hi(t,32,1,8,0),Ke(t+80|0,32,1,8,0),m[t+160>>0]=0,m[t+161>>0]=0,hg(t+164|0)}function wh(t){t=t|0,e[t>>2]=5220,ug(t+8|0)}function lg(t){t=t|0,wh(t),yt(t)}function cg(t,i){return t=t|0,i=i|0,fg(t+8|0,e[t+4>>2]|0,i)|0}function hg(t){t=t|0,m[t+4>>0]=0}function ug(t){t=t|0,ei(t+80|0),ui(t)}function fg(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;return f=y,y=y+16|0,a=f,m[t+161>>0]|0||ti(t+80|0),h=t+164|0,dg(h)|0?(i=Fr(t+80|0,i,e[h>>2]|0,0)|0,e[a>>2]=i,Jo(i,s)):(Nr(kr(i)|0,s,4),e[a>>2]=Ho(s)|0),pg(h,a),y=f,s+4|0}function dg(t){return t=t|0,(m[t+4>>0]|0)!=0|0}function Fr(t,i,s,a){return t=t|0,i=i|0,s=s|0,a=a|0,s=(_g(t,i,(e[t+36>>2]|0)+(a*44|0)|0)|0)+s|0,i=e[t+24>>2]|0,(s|0)<0?s+i|0:s-(s>>>0<i>>>0?0:i)|0}function kr(t){return t=t|0,e[t>>2]|0}function Nr(t,i,s){t=t|0,i=i|0,s=s|0;var a=0;if((s|0)>0){a=0;do m[i+a>>0]=Tr(t)|0,a=a+1|0;while((a|0)!=(s|0))}}function pg(t,i){t=t|0,i=i|0;var s=0;s=t+4|0,m[s>>0]|0||(m[s>>0]=1),e[t>>2]=e[i>>2]}function _g(t,i,s){t=t|0,i=i|0,s=s|0;var a=0;s=H0(i,s)|0,e[t>>2]=s;do if(s){if(s>>>0>=32){s=e[t+28>>2]|0;break}if(a=e[t+12>>2]|0,s>>>0>a>>>0?(a=s-a|0,s=H0(i,(e[t+68>>2]|0)+((s+-1|0)*44|0)|0)|0,a=s<<a|(Mh(i,a)|0)):a=H0(i,(e[t+68>>2]|0)+((s+-1|0)*44|0)|0)|0,s=e[t>>2]|0,(a|0)<(1<<s+-1|0)){s=a+1+(-1<<s)|0;break}else{s=a+1|0;break}}else s=Ag(i,t+48|0)|0;while(!1);return s|0}function H0(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0;if(L=t+8|0,B=e[L>>2]|0,h=e[i+16>>2]|0,h){if(a=t+4|0,s=e[a>>2]|0,N=B>>>15,e[L>>2]=N,v=(s>>>0)/(N>>>0)|0,A=v>>>(e[i+40>>2]|0),f=e[h+(A<<2)>>2]|0,A=(e[h+(A+1<<2)>>2]|0)+1|0,_=f+1|0,C=e[i+8>>2]|0,A>>>0>_>>>0){h=f,f=A;do _=(f+h|0)>>>1,A=(e[C+(_<<2)>>2]|0)>>>0>v>>>0,h=A?h:_,f=A?_:f,_=h+1|0;while(f>>>0>_>>>0);f=h}h=Mt(e[C+(f<<2)>>2]|0,N)|0,(f|0)==(e[i+32>>2]|0)?_=B:_=Mt(e[C+(_<<2)>>2]|0,N)|0}else{C=B>>>15,e[L>>2]=C,A=e[i>>2]|0,N=e[i+8>>2]|0,a=t+4|0,s=e[a>>2]|0,v=A>>>1,h=0,_=B,f=0;do H=Mt(e[N+(v<<2)>>2]|0,C)|0,B=H>>>0>s>>>0,_=B?H:_,h=B?h:H,f=B?f:v,A=B?v:A,v=(f+A|0)>>>1;while((v|0)!=(f|0))}return e[a>>2]=s-h,H=_-h|0,e[L>>2]=H,H>>>0<16777216&&Ko(t),L=(e[i+12>>2]|0)+(f<<2)|0,e[L>>2]=(e[L>>2]|0)+1,L=i+28|0,H=(e[L>>2]|0)+-1|0,e[L>>2]=H,H||B0(i),f|0}function Mh(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;return i>>>0>19?(s=(mg(t)|0)&65535,(Mh(t,i+-16|0)|0)<<16|s|0):(a=t+4|0,h=e[a>>2]|0,f=t+8|0,s=(e[f>>2]|0)>>>i,e[f>>2]=s,i=(h>>>0)/(s>>>0)|0,e[a>>2]=h-(Mt(i,s)|0),s>>>0<16777216&&Ko(t),i|0)}function Ag(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0,A=0;return a=t+8|0,h=e[a>>2]|0,s=Mt(h>>>13,e[i+8>>2]|0)|0,f=t+4|0,_=e[f>>2]|0,A=_>>>0>=s>>>0,A?(e[f>>2]=_-s,s=h-s|0,e[a>>2]=s):(e[a>>2]=s,_=i+12|0,e[_>>2]=(e[_>>2]|0)+1),s>>>0<16777216&&Ko(t),_=i+4|0,t=(e[_>>2]|0)+-1|0,e[_>>2]=t,t||bc(i),A&1|0}function Ko(t){t=t|0;var i=0,s=0,a=0,h=0;i=t+4|0,s=t+8|0,a=e[i>>2]|0;do a=a<<8|(Tr(e[t>>2]|0)|0)&255,e[i>>2]=a,h=e[s>>2]<<8,e[s>>2]=h;while(h>>>0<16777216)}function mg(t){t=t|0;var i=0,s=0,a=0,h=0;return s=t+4|0,h=e[s>>2]|0,i=t+8|0,a=(e[i>>2]|0)>>>16,e[i>>2]=a,i=(h>>>0)/(a>>>0)|0,e[s>>2]=h-(Mt(i,a)|0),Ko(t),i&65535|0}function gg(t){t=t|0,yt(t)}function vg(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function yg(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==15904?t+12|0:0)|0}function wg(t){t=t|0,Ht(t)}function Mg(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=5272,e[t+4>>2]=i,Sg(t+8|0)}function Cg(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5296,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function Sg(t){t=t|0,hi(t,32,1,8,0),Ke(t+80|0,32,1,8,0),m[t+160>>0]=0,m[t+161>>0]=0,Rg(t+164|0)}function Ch(t){t=t|0,e[t>>2]=5272,Pg(t+8|0)}function Eg(t){t=t|0,Ch(t),yt(t)}function bg(t,i){return t=t|0,i=i|0,xg(t+8|0,e[t+4>>2]|0,i)|0}function Rg(t){t=t|0,m[t+4>>0]=0}function Pg(t){t=t|0,ei(t+80|0),ui(t)}function xg(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;return f=y,y=y+16|0,a=f,m[t+161>>0]|0||ti(t+80|0),h=t+164|0,Tg(h)|0?(i=Fr(t+80|0,i,e[h>>2]|0,0)|0,e[a>>2]=i,$o(i,s)):(Nr(kr(i)|0,s,4),e[a>>2]=Yo(s)|0),Fg(h,a),y=f,s+4|0}function Tg(t){return t=t|0,(m[t+4>>0]|0)!=0|0}function Fg(t,i){t=t|0,i=i|0;var s=0;s=t+4|0,m[s>>0]|0||(m[s>>0]=1),e[t>>2]=e[i>>2]}function kg(t){t=t|0,yt(t)}function Ng(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function Gg(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==16402?t+12|0:0)|0}function Bg(t){t=t|0,Ht(t)}function Og(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(172)|0,Ug(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],Lg(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function Ig(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(176)|0,t4(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],e4(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function Ug(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=5324,e[t+4>>2]=i,Vg(t+8|0)}function Lg(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5348,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function Vg(t){t=t|0,hi(t,8,1,8,0),Ke(t+80|0,8,1,8,0),m[t+160>>0]=0,m[t+161>>0]=0,zg(t+162|0)}function Sh(t){t=t|0,e[t>>2]=5324,Dg(t+8|0)}function Wg(t){t=t|0,Sh(t),yt(t)}function Zg(t,i){return t=t|0,i=i|0,Xg(t+8|0,e[t+4>>2]|0,i)|0}function zg(t){t=t|0,m[t+1>>0]=0}function Dg(t){t=t|0,ei(t+80|0),ui(t)}function Xg(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;return f=y,y=y+16|0,a=f,m[t+161>>0]|0||ti(t+80|0),h=t+162|0,jg(h)|0?(i=(Fr(t+80|0,i,m[h>>0]|0,0)|0)&255,m[a>>0]=i,Hg(i,s)):(Nr(kr(i)|0,s,1),m[a>>0]=Yg(s)|0),Jg(h,a),y=f,s+1|0}function jg(t){return t=t|0,(m[t+1>>0]|0)!=0|0}function Hg(t,i){t=t|0,i=i|0,m[i>>0]=t}function Yg(t){return t=t|0,m[t>>0]|0}function Jg(t,i){t=t|0,i=i|0;var s=0;s=t+1|0,m[s>>0]|0||(m[s>>0]=1),m[t>>0]=m[i>>0]|0}function $g(t){t=t|0,yt(t)}function qg(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function Qg(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==16900?t+12|0:0)|0}function Kg(t){t=t|0,Ht(t)}function t4(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=5376,e[t+4>>2]=i,i4(t+8|0)}function e4(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5400,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function i4(t){t=t|0,hi(t,16,1,8,0),Ke(t+80|0,16,1,8,0),m[t+160>>0]=0,m[t+161>>0]=0,s4(t+162|0)}function Eh(t){t=t|0,e[t>>2]=5376,o4(t+8|0)}function n4(t){t=t|0,Eh(t),yt(t)}function r4(t,i){return t=t|0,i=i|0,a4(t+8|0,e[t+4>>2]|0,i)|0}function s4(t){t=t|0,m[t+2>>0]=0}function o4(t){t=t|0,ei(t+80|0),ui(t)}function a4(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;return f=y,y=y+16|0,a=f,m[t+161>>0]|0||ti(t+80|0),h=t+162|0,l4(h)|0?(i=(Fr(t+80|0,i,J[h>>1]|0,0)|0)&65535,J[a>>1]=i,c4(i,s)):(Nr(kr(i)|0,s,2),J[a>>1]=h4(s)|0),u4(h,a),y=f,s+2|0}function l4(t){return t=t|0,(m[t+2>>0]|0)!=0|0}function c4(t,i){t=t|0,i=i|0,tr(t,i)}function h4(t){return t=t|0,Kn(t)|0}function u4(t,i){t=t|0,i=i|0;var s=0;s=t+2|0,m[s>>0]|0||(m[s>>0]=1),J[t>>1]=J[i>>1]|0}function f4(t){t=t|0,yt(t)}function d4(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function p4(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==17398?t+12|0:0)|0}function _4(t){t=t|0,Ht(t)}function A4(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(172)|0,g4(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],v4(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function m4(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;v=y,y=y+32|0,a=v+12|0,h=v,i=v+8|0,_=St(176)|0,k4(_,e[t+4>>2]|0),f=t+8|0,e[i>>2]=0,e[a>>2]=e[i>>2],N4(h,_,a),_=t+12|0,i=e[_>>2]|0,A=t+16|0;do if(i>>>0>=(e[A>>2]|0)>>>0)if(i=(i-(e[f>>2]|0)>>3)+1|0,s=zi()|0,s>>>0<i>>>0)Ge(f);else{C=e[f>>2]|0,N=(e[A>>2]|0)-C|0,A=N>>2,Vi(a,N>>3>>>0<s>>>1>>>0?A>>>0<i>>>0?i:A:s,(e[_>>2]|0)-C>>3,t+16|0),A=a+8|0,_=e[A>>2]|0,e[_>>2]=e[h>>2],t=h+4|0,e[_+4>>2]=e[t>>2],e[h>>2]=0,e[t>>2]=0,e[A>>2]=_+8,Wi(f,a),Zi(a);break}else Ui(a,f,1),N=a+4|0,C=e[N>>2]|0,e[C>>2]=e[h>>2],A=h+4|0,e[C+4>>2]=e[A>>2],e[h>>2]=0,e[A>>2]=0,e[N>>2]=C+8,Li(a);while(!1);De(h),y=v}function g4(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=5428,e[t+4>>2]=i,y4(t+8|0)}function v4(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5452,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function y4(t){t=t|0,hi(t,8,1,8,0),Ke(t+80|0,8,1,8,0),m[t+160>>0]=0,m[t+161>>0]=0,C4(t+162|0)}function bh(t){t=t|0,e[t>>2]=5428,S4(t+8|0)}function w4(t){t=t|0,bh(t),yt(t)}function M4(t,i){return t=t|0,i=i|0,E4(t+8|0,e[t+4>>2]|0,i)|0}function C4(t){t=t|0,m[t+1>>0]=0}function S4(t){t=t|0,ei(t+80|0),ui(t)}function E4(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;return f=y,y=y+16|0,a=f,m[t+161>>0]|0||ti(t+80|0),h=t+162|0,b4(h)|0?(i=(Fr(t+80|0,i,O[h>>0]|0,0)|0)&255,m[a>>0]=i,L0(i,s)):(Nr(kr(i)|0,s,1),m[a>>0]=U0(s)|0),R4(h,a),y=f,s+1|0}function b4(t){return t=t|0,(m[t+1>>0]|0)!=0|0}function R4(t,i){t=t|0,i=i|0;var s=0;s=t+1|0,m[s>>0]|0||(m[s>>0]=1),m[t>>0]=m[i>>0]|0}function P4(t){t=t|0,yt(t)}function x4(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function T4(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==17896?t+12|0:0)|0}function F4(t){t=t|0,Ht(t)}function k4(t,i){t=t|0,i=i|0,Di(t),e[t>>2]=5480,e[t+4>>2]=i,G4(t+8|0)}function N4(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;s=y,y=y+16|0,a=s,e[t>>2]=i,h=St(16)|0,e[h+4>>2]=0,e[h+8>>2]=0,e[h>>2]=5504,e[h+12>>2]=i,e[t+4>>2]=h,e[a>>2]=i,e[a+4>>2]=i,y=s}function G4(t){t=t|0,hi(t,16,1,8,0),Ke(t+80|0,16,1,8,0),m[t+160>>0]=0,m[t+161>>0]=0,I4(t+162|0)}function Rh(t){t=t|0,e[t>>2]=5480,U4(t+8|0)}function B4(t){t=t|0,Rh(t),yt(t)}function O4(t,i){return t=t|0,i=i|0,L4(t+8|0,e[t+4>>2]|0,i)|0}function I4(t){t=t|0,m[t+2>>0]=0}function U4(t){t=t|0,ei(t+80|0),ui(t)}function L4(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;return f=y,y=y+16|0,a=f,m[t+161>>0]|0||ti(t+80|0),h=t+162|0,V4(h)|0?(i=(Fr(t+80|0,i,ot[h>>1]|0,0)|0)&65535,J[a>>1]=i,tr(i,s)):(Nr(kr(i)|0,s,2),J[a>>1]=Kn(s)|0),W4(h,a),y=f,s+2|0}function V4(t){return t=t|0,(m[t+2>>0]|0)!=0|0}function W4(t,i){t=t|0,i=i|0;var s=0;s=t+2|0,m[s>>0]|0||(m[s>>0]=1),J[t>>1]=J[i>>1]|0}function Z4(t){t=t|0,yt(t)}function z4(t){t=t|0,t=e[t+12>>2]|0,t|0&&re[e[(e[t>>2]|0)+4>>2]&255](t)}function D4(t,i){return t=t|0,i=i|0,((e[i+4>>2]|0)==18394?t+12|0:0)|0}function X4(t){t=t|0,Ht(t)}function j4(t){return Q4()|0}function H4(){return 0}function Y4(){return 0}function J4(t){t=t|0,t|0&&(K4(t),yt(t))}function Ps(){return tv()|0}function $4(){return ev()|0}function q4(){return iv()|0}function Ph(){return 0}function Q4(t){return 3360}function K4(t){t=t|0;var i=0,s=0,a=0,h=0;i=y,y=y+16|0,a=i,e[a>>2]=e[t>>2],e[t>>2]=0,s=t+4|0,e[a+4>>2]=e[s>>2],e[s>>2]=0,R0(a),s=t+8|0,e[a>>2]=e[s>>2],e[s>>2]=0,h=t+12|0,e[a+4>>2]=e[h>>2],e[h>>2]=0,P0(a),P0(s),R0(t),y=i}function tv(){return 3360}function ev(){return 3368}function iv(){return 3384}function ta(){return 18579}function ea(){return 18582}function xh(){return 18584}function nv(){var t=0;return t=St(16)|0,hv(t),t|0}function rv(t){t=t|0;var i=0,s=0,a=0,h=0;i=y,y=y+16|0,s=i,h=Ps()|0,a=ov()|0,s=av()|0,br(h|0,a|0,s|0,ta()|0,12,t|0),y=i}function sv(t){return t=t|0,lv(ul[t&3]()|0)|0}function ov(t){return 1}function av(t){return cv()|0}function lv(t){return t=t|0,t|0}function cv(){return 5524}function hv(t){t=t|0,e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0,e[t+12>>2]=0}function uv(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;s=y,y=y+16|0,a=s,h=s+8|0,_=e[i+4>>2]|0,e[a>>2]=e[i>>2],e[a+4>>2]=_,_=Ps()|0,f=dv()|0,h=pv()|0,i=Fh()|0,Si(_|0,t|0,f|0,h|0,i|0,4,_v(a)|0,0),y=s}function fv(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;f=Y0(i)|0,i=e[t>>2]|0,h=e[t+4>>2]|0,t=f+(h>>1)|0,h&1&&(i=e[(e[t>>2]|0)+i>>2]|0),h=Th(s)|0,f=J0(a)|0,Gs[i&15](t,h,f)}function dv(t){return 4}function pv(t){return Av()|0}function _v(t){t=t|0;var i=0,s=0;return i=St(8)|0,s=e[t+4>>2]|0,e[i>>2]=e[t>>2],e[i+4>>2]=s,i|0}function Y0(t){return t=t|0,t|0}function Th(t){return t=t|0,t|0}function J0(t){return t=t|0,t|0}function Av(){return 144}function Fh(){return 18587}function mv(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;s=y,y=y+16|0,a=s,h=s+8|0,_=e[i+4>>2]|0,e[a>>2]=e[i>>2],e[a+4>>2]=_,_=Ps()|0,f=vv()|0,h=yv()|0,i=$0()|0,Si(_|0,t|0,f|0,h|0,i|0,7,wv(a)|0,0),y=s}function gv(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;h=Y0(i)|0,i=e[t>>2]|0,a=e[t+4>>2]|0,t=h+(a>>1)|0,a&1&&(i=e[(e[t>>2]|0)+i>>2]|0),h=kh(s)|0,bn[i&15](t,h)}function vv(t){return 3}function yv(t){return Mv()|0}function wv(t){t=t|0;var i=0,s=0;return i=St(8)|0,s=e[t+4>>2]|0,e[i>>2]=e[t>>2],e[i+4>>2]=s,i|0}function kh(t){return t=t|0,t|0}function Mv(){return 5528}function $0(){return 18593}function Cv(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;s=y,y=y+16|0,a=s,h=s+8|0,_=e[i+4>>2]|0,e[a>>2]=e[i>>2],e[a+4>>2]=_,_=Ps()|0,f=Ev()|0,h=bv()|0,i=Tv()|0,Si(_|0,t|0,f|0,h|0,i|0,41,Rv(a)|0,0),y=s}function Sv(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;return a=y,y=y+16|0,s=a,f=Y0(i)|0,i=e[t>>2]|0,h=e[t+4>>2]|0,t=f+(h>>1)|0,h&1&&(i=e[(e[t>>2]|0)+i>>2]|0),e[s>>2]=la[i&15](t)|0,f=Pv(s)|0,y=a,f|0}function Ev(t){return 2}function bv(t){return xv()|0}function Rv(t){t=t|0;var i=0,s=0;return i=St(8)|0,s=e[t+4>>2]|0,e[i>>2]=e[t>>2],e[i+4>>2]=s,i|0}function Pv(t){return t=t|0,e[t>>2]|0}function xv(){return 5540}function Tv(){return 18598}function Fv(t){return Iv()|0}function kv(){return 0}function Nv(){return 0}function Gv(t){t=t|0,t|0&&(Uv(t),yt(t))}function xs(){return Lv()|0}function Bv(){return Vv()|0}function Ov(){return Wv()|0}function Iv(t){return 3400}function Uv(t){t=t|0;var i=0,s=0,a=0,h=0;i=y,y=y+16|0,a=i,e[a>>2]=e[t>>2],e[t>>2]=0,s=t+4|0,e[a+4>>2]=e[s>>2],e[s>>2]=0,X0(a),s=t+16|0,e[a>>2]=e[s>>2],e[s>>2]=0,h=t+20|0,e[a+4>>2]=e[h>>2],e[h>>2]=0,Rs(a),e[a>>2]=e[s>>2],e[s>>2]=0,e[a+4>>2]=e[h>>2],e[h>>2]=0,Rs(a),Rs(s),vh(t+8|0),X0(t),y=i}function Lv(){return 3400}function Vv(){return 3408}function Wv(){return 3424}function Zv(){var t=0;return t=St(24)|0,Jv(t),t|0}function zv(t){t=t|0;var i=0,s=0,a=0,h=0;i=y,y=y+16|0,s=i,h=xs()|0,a=Xv()|0,s=jv()|0,br(h|0,a|0,s|0,ta()|0,13,t|0),y=i}function Dv(t){return t=t|0,Hv(ul[t&3]()|0)|0}function Xv(t){return 1}function jv(t){return Yv()|0}function Hv(t){return t=t|0,t|0}function Yv(){return 5548}function Jv(t){t=t|0,e[t>>2]=0,e[t+4>>2]=0,e[t+8>>2]=0,e[t+12>>2]=0,e[t+16>>2]=0,e[t+20>>2]=0}function $v(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;s=y,y=y+16|0,a=s,h=s+8|0,_=e[i+4>>2]|0,e[a>>2]=e[i>>2],e[a+4>>2]=_,_=xs()|0,f=Qv()|0,h=Kv()|0,i=Fh()|0,Si(_|0,t|0,f|0,h|0,i|0,5,ty(a)|0,0),y=s}function qv(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;f=q0(i)|0,i=e[t>>2]|0,h=e[t+4>>2]|0,t=f+(h>>1)|0,h&1&&(i=e[(e[t>>2]|0)+i>>2]|0),h=Th(s)|0,f=J0(a)|0,Gs[i&15](t,h,f)}function Qv(t){return 4}function Kv(t){return ey()|0}function ty(t){t=t|0;var i=0,s=0;return i=St(8)|0,s=e[t+4>>2]|0,e[i>>2]=e[t>>2],e[i+4>>2]=s,i|0}function q0(t){return t=t|0,t|0}function ey(){return 160}function Q0(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;s=y,y=y+16|0,a=s,h=s+8|0,_=e[i+4>>2]|0,e[a>>2]=e[i>>2],e[a+4>>2]=_,_=xs()|0,f=ny()|0,h=ry()|0,i=$0()|0,Si(_|0,t|0,f|0,h|0,i|0,8,sy(a)|0,0),y=s}function iy(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;h=q0(i)|0,i=e[t>>2]|0,a=e[t+4>>2]|0,t=h+(a>>1)|0,a&1&&(i=e[(e[t>>2]|0)+i>>2]|0),h=J0(s)|0,bn[i&15](t,h)}function ny(t){return 3}function ry(t){return oy()|0}function sy(t){t=t|0;var i=0,s=0;return i=St(8)|0,s=e[t+4>>2]|0,e[i>>2]=e[t>>2],e[i+4>>2]=s,i|0}function oy(){return 5552}function ay(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;s=y,y=y+16|0,a=s,h=s+8|0,_=e[i+4>>2]|0,e[a>>2]=e[i>>2],e[a+4>>2]=_,_=xs()|0,f=cy()|0,h=hy()|0,i=$0()|0,Si(_|0,t|0,f|0,h|0,i|0,9,uy(a)|0,0),y=s}function ly(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;h=q0(i)|0,i=e[t>>2]|0,a=e[t+4>>2]|0,t=h+(a>>1)|0,a&1&&(i=e[(e[t>>2]|0)+i>>2]|0),h=kh(s)|0,bn[i&15](t,h)}function cy(t){return 3}function hy(t){return fy()|0}function uy(t){t=t|0;var i=0,s=0;return i=St(8)|0,s=e[t+4>>2]|0,e[i>>2]=e[t>>2],e[i+4>>2]=s,i|0}function fy(){return 5564}function dy(){Wt()}function py(){_y()}function _y(){Ay(22144)}function Ay(t){t=t|0;var i=0;i=y,y=y+16|0,e[i>>2]=t,Nh(),y=i}function Nh(){Y(my()|0,18653),tn(gy()|0,18658,1,1,0),vy(18663),yy(18668),wy(18680),My(18694),Cy(18700),Sy(18715),Ey(18719),by(18732),Ry(18737),Py(18751),xy(18757),R(Ty()|0,18764),R(Fy()|0,18776),U(ky()|0,4,18809),U(Ny()|0,2,18822),U(Gy()|0,4,18837),en(By()|0,18852),Oy(18868),Gh(18898),Bh(18935),Oh(18974),Ih(19005),Uh(19045),Lh(19074),Iy(19112),Uy(19142),Gh(19181),Bh(19213),Oh(19246),Ih(19279),Uh(19313),Lh(19346),Ly(19380),Vy(19411),Wy(19443)}function my(){return K3()|0}function gy(){return Q3()|0}function vy(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=$3()|0,li(t|0,e[s>>2]|0,1,-128<<24>>24|0,127<<24>>24|0),y=i}function yy(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=Y3()|0,li(t|0,e[s>>2]|0,1,-128<<24>>24|0,127<<24>>24|0),y=i}function wy(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=j3()|0,li(t|0,e[s>>2]|0,1,0,255),y=i}function My(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=D3()|0,li(t|0,e[s>>2]|0,2,-32768<<16>>16|0,32767<<16>>16|0),y=i}function Cy(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=Z3()|0,li(t|0,e[s>>2]|0,2,0,65535),y=i}function Sy(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=V3()|0,li(t|0,e[s>>2]|0,4,-2147483648,2147483647),y=i}function Ey(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=U3()|0,li(t|0,e[s>>2]|0,4,0,-1),y=i}function by(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=O3()|0,li(t|0,e[s>>2]|0,4,-2147483648,2147483647),y=i}function Ry(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=G3()|0,li(t|0,e[s>>2]|0,4,0,-1),y=i}function Py(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=k3()|0,Jn(t|0,e[s>>2]|0,4),y=i}function xy(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,e[s>>2]=t,t=T3()|0,Jn(t|0,e[s>>2]|0,8),y=i}function Ty(){return x3()|0}function Fy(){return P3()|0}function ky(){return R3()|0}function Ny(){return b3()|0}function Gy(){return E3()|0}function By(){return S3()|0}function Oy(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=w3()|0,t=M3()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Gh(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=g3()|0,t=v3()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Bh(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=_3()|0,t=A3()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Oh(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=f3()|0,t=d3()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Ih(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=c3()|0,t=h3()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Uh(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=o3()|0,t=a3()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Lh(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=n3()|0,t=r3()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Iy(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=t3()|0,t=e3()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Uy(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=qy()|0,t=Qy()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Ly(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=Yy()|0,t=Jy()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Vy(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=Xy()|0,t=jy()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Wy(t){t=t|0;var i=0,s=0,a=0;i=y,y=y+16|0,s=i,e[s>>2]=t,a=Zy()|0,t=zy()|0,b(a|0,t|0,e[s>>2]|0),y=i}function Zy(){return Dy()|0}function zy(){return 7}function Dy(){return 3440}function Xy(){return Hy()|0}function jy(){return 7}function Hy(){return 3448}function Yy(){return $y()|0}function Jy(){return 6}function $y(){return 3456}function qy(){return Ky()|0}function Qy(){return 5}function Ky(){return 3464}function t3(){return i3()|0}function e3(){return 4}function i3(){return 3472}function n3(){return s3()|0}function r3(){return 5}function s3(){return 3480}function o3(){return l3()|0}function a3(){return 4}function l3(){return 3488}function c3(){return u3()|0}function h3(){return 3}function u3(){return 3496}function f3(){return p3()|0}function d3(){return 2}function p3(){return 3504}function _3(){return m3()|0}function A3(){return 1}function m3(){return 3512}function g3(){return y3()|0}function v3(){return 0}function y3(){return 3520}function w3(){return C3()|0}function M3(){return 0}function C3(){return 3528}function S3(){return 3536}function E3(){return 3544}function b3(){return 3576}function R3(){return 3600}function P3(){return 3624}function x3(){return 3648}function T3(){return F3()|0}function F3(){return 4144}function k3(){return N3()|0}function N3(){return 4136}function G3(){return B3()|0}function B3(){return 4128}function O3(){return I3()|0}function I3(){return 4120}function U3(){return L3()|0}function L3(){return 4112}function V3(){return W3()|0}function W3(){return 4104}function Z3(){return z3()|0}function z3(){return 4096}function D3(){return X3()|0}function X3(){return 4088}function j3(){return H3()|0}function H3(){return 4072}function Y3(){return J3()|0}function J3(){return 4080}function $3(){return q3()|0}function q3(){return 4064}function Q3(){return 4056}function K3(){return 4040}function t8(t){t=t|0;var i=0,s=0,a=0,h=0;return i=y,y=y+16|0,s=i+8|0,a=i+4|0,h=i,e[h>>2]=t,e[a>>2]=e[h>>2],e[s>>2]=e[(e[a>>2]|0)+4>>2],t=g8(e[s>>2]|0)|0,y=i,t|0}function Xi(){return 21636}function Ts(t){return t=t|0,(t+-48|0)>>>0<10|0}function Vh(){return 5576}function Wh(t,i){t=t|0,i=i|0;var s=0,a=0;if(s=m[t>>0]|0,a=m[i>>0]|0,s<<24>>24==0||s<<24>>24!=a<<24>>24)t=a;else{do t=t+1|0,i=i+1|0,s=m[t>>0]|0,a=m[i>>0]|0;while(!(s<<24>>24==0||s<<24>>24!=a<<24>>24));t=a}return(s&255)-(t&255)|0}function ia(t){t=t|0;var i=0,s=0,a=0;a=t;t:do if(!(a&3))s=5;else for(i=a;;){if(!(m[t>>0]|0)){t=i;break t}if(t=t+1|0,i=t,!(i&3)){s=5;break}}while(!1);if((s|0)==5){for(;i=e[t>>2]|0,!((i&-2139062144^-2139062144)&i+-16843009);)t=t+4|0;if((i&255)<<24>>24)do t=t+1|0;while((m[t>>0]|0)!=0)}return t-a|0}function e8(t){t=t|0;var i=0,s=0;return i=t+74|0,s=m[i>>0]|0,m[i>>0]=s+255|s,i=e[t>>2]|0,i&8?(e[t>>2]=i|32,t=-1):(e[t+8>>2]=0,e[t+4>>2]=0,s=e[t+44>>2]|0,e[t+28>>2]=s,e[t+20>>2]=s,e[t+16>>2]=s+(e[t+48>>2]|0),t=0),t|0}function i8(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0;a=s+16|0,h=e[a>>2]|0,h?f=5:e8(s)|0?a=0:(h=e[a>>2]|0,f=5);t:do if((f|0)==5){if(A=s+20|0,_=e[A>>2]|0,a=_,(h-_|0)>>>0<i>>>0){a=Ir[e[s+36>>2]&7](s,t,i)|0;break}e:do if((m[s+75>>0]|0)<0|(i|0)==0)f=0,h=t;else{for(_=i;h=_+-1|0,(m[t+h>>0]|0)!=10;)if(h)_=h;else{f=0,h=t;break e}if(a=Ir[e[s+36>>2]&7](s,t,_)|0,a>>>0<_>>>0)break t;f=_,h=t+_|0,i=i-_|0,a=e[A>>2]|0}while(!1);ri(a|0,h|0,i|0)|0,e[A>>2]=(e[A>>2]|0)+i,a=f+i|0}while(!1);return a|0}function n8(t,i){return t=t|0,i=i|0,i?i=r8(e[i>>2]|0,e[i+4>>2]|0,t)|0:i=0,((i|0)==0?t:i)|0}function r8(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0;L=(e[t>>2]|0)+1794895138|0,f=ir(e[t+8>>2]|0,L)|0,a=ir(e[t+12>>2]|0,L)|0,h=ir(e[t+16>>2]|0,L)|0;t:do if(f>>>0<i>>>2>>>0&&(B=i-(f<<2)|0,a>>>0<B>>>0&h>>>0<B>>>0)&&((h|a)&3|0)==0){for(B=a>>>2,N=h>>>2,C=0;;){if(A=f>>>1,v=C+A|0,_=v<<1,h=_+B|0,a=ir(e[t+(h<<2)>>2]|0,L)|0,h=ir(e[t+(h+1<<2)>>2]|0,L)|0,!(h>>>0<i>>>0&a>>>0<(i-h|0)>>>0)){a=0;break t}if(m[t+(h+a)>>0]|0){a=0;break t}if(a=Wh(s,t+h|0)|0,!a)break;if(a=(a|0)<0,(f|0)==1){a=0;break t}C=a?C:v,f=a?A:f-A|0}a=_+N|0,h=ir(e[t+(a<<2)>>2]|0,L)|0,a=ir(e[t+(a+1<<2)>>2]|0,L)|0,a>>>0<i>>>0&h>>>0<(i-a|0)>>>0?a=(m[t+(a+h)>>0]|0)==0?t+a|0:0:a=0}else a=0;while(!1);return a|0}function ir(t,i){t=t|0,i=i|0;var s=0;return s=hu(t|0)|0,((i|0)==0?t:s)|0}function s8(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;f=i&255,a=(s|0)!=0;t:do if(a&(t&3|0)!=0)for(h=i&255;;){if((m[t>>0]|0)==h<<24>>24){h=6;break t}if(t=t+1|0,s=s+-1|0,a=(s|0)!=0,!(a&(t&3|0)!=0)){h=5;break}}else h=5;while(!1);(h|0)==5&&(a?h=6:t=0);t:do if((h|0)==6){if((m[t>>0]|0)!=(i&255)<<24>>24){a=Mt(f,16843009)|0;e:do if(s>>>0>3)do{if(f=e[t>>2]^a,(f&-2139062144^-2139062144)&f+-16843009|0)break e;t=t+4|0,s=s+-4|0}while(s>>>0>3);while(!1)}if(!s)t=0;else for(a=i&255;;){if((m[t>>0]|0)==a<<24>>24)break t;if(s=s+-1|0,s)t=t+1|0;else{t=0;break}}}while(!1);return t|0}function o8(t,i,s){return t=t|0,i=i|0,s=s|0,c8(t,i,s,1,8)|0}function a8(t,i,s,a,h,f){t=t|0,i=+i,s=s|0,a=a|0,h=h|0,f=f|0;var _=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0,xt=0,gt=0,lt=0,Et=0,Q=0,te=0,ae=0,ee=0,Zt=0,se=0,Ut=0,Lt=0,bi=0;bi=y,y=y+560|0,v=bi+32|0,gt=bi+536|0,Lt=bi,Ut=Lt,C=bi+540|0,e[gt>>2]=0,se=C+12|0,Xh(i)|0,_=Nt()|0,(_|0)<0?(i=-i,Xh(i)|0,Zt=1,ee=20247,_=Nt()|0):(Zt=(h&2049|0)!=0&1,ee=(h&2048|0)==0?(h&1|0)==0?20248:20253:20250);do if(!0&(_&2146435072|0)==2146435072)Lt=(f&32|0)!=0,_=Zt+3|0,Re(t,32,s,_,h&-65537),Me(t,ee,Zt),Me(t,i!=i|!1?Lt?20274:20278:Lt?20266:20270,3),Re(t,32,s,_,h^8192);else{if(H=+jh(i,gt)*2,_=H!=0,_&&(e[gt>>2]=(e[gt>>2]|0)+-1),xt=f|32,(xt|0)==97){B=f&32,$=(B|0)==0?ee:ee+9|0,L=Zt|2,_=12-a|0;do if(a>>>0>11|(_|0)==0)i=H;else{i=8;do _=_+-1|0,i=i*16;while((_|0)!=0);if((m[$>>0]|0)==45){i=-(i+(-H-i));break}else{i=H+i-i;break}}while(!1);A=e[gt>>2]|0,_=(A|0)<0?0-A|0:A,_=Gr(_,((_|0)<0)<<31>>31,se)|0,(_|0)==(se|0)&&(_=C+11|0,m[_>>0]=48),m[_+-1>>0]=(A>>31&2)+43,N=_+-2|0,m[N>>0]=f+15,A=(a|0)<1,v=(h&8|0)==0,C=Lt;do Zt=~~i,_=C+1|0,m[C>>0]=B|O[640+Zt>>0],i=(i-+(Zt|0))*16,(_-Ut|0)==1&&!(v&(A&i==0))?(m[_>>0]=46,C=C+2|0):C=_;while(i!=0);(a|0)!=0&&(-2-Ut+C|0)<(a|0)?(A=se,v=N,_=a+2+A-v|0):(A=se,v=N,_=A-Ut-v+C|0),se=_+L|0,Re(t,32,s,se,h),Me(t,$,L),Re(t,48,s,se,h^65536),Ut=C-Ut|0,Me(t,Lt,Ut),Lt=A-v|0,Re(t,48,_-(Ut+Lt)|0,0,0),Me(t,N,Lt),Re(t,32,s,se,h^8192),_=se;break}A=(a|0)<0?6:a,_?(_=(e[gt>>2]|0)+-28|0,e[gt>>2]=_,i=H*268435456):(i=H,_=e[gt>>2]|0),ae=(_|0)<0?v:v+288|0,v=ae;do Q=~~i>>>0,e[v>>2]=Q,v=v+4|0,i=(i-+(Q>>>0))*1e9;while(i!=0);if(Q=ae,(_|0)>0)for(B=ae;;){if(N=(_|0)<29?_:29,_=v+-4|0,_>>>0>=B>>>0){C=0;do j=lu(e[_>>2]|0,0,N|0)|0,j=fi(j|0,Nt()|0,C|0,0)|0,lt=Nt()|0,C=ll(j|0,lt|0,1e9,0)|0,Et=al(C|0,Nt()|0,1e9,0)|0,Et=Or(j|0,lt|0,Et|0,Nt()|0)|0,Nt()|0,e[_>>2]=Et,_=_+-4|0;while(_>>>0>=B>>>0);C?(Et=B+-4|0,e[Et>>2]=C,C=Et):C=B}else C=B;t:do if(v>>>0>C>>>0)for(_=v;;){if(v=_+-4|0,e[v>>2]|0){v=_;break t}if(v>>>0>C>>>0)_=v;else break}while(!1);if(_=(e[gt>>2]|0)-N|0,e[gt>>2]=_,(_|0)>0)B=C;else break}else C=ae;if((_|0)<0){a=((A+25|0)/9|0)+1|0,j=(xt|0)==102;do{if($=0-_|0,$=($|0)<9?$:9,C>>>0<v>>>0){N=(1<<$)+-1|0,B=1e9>>>$,L=0,_=C;do Et=e[_>>2]|0,e[_>>2]=(Et>>>$)+L,L=Mt(Et&N,B)|0,_=_+4|0;while(_>>>0<v>>>0);C=(e[C>>2]|0)==0?C+4|0:C,L&&(e[v>>2]=L,v=v+4|0)}else C=(e[C>>2]|0)==0?C+4|0:C;_=j?ae:C,v=(v-_>>2|0)>(a|0)?_+(a<<2)|0:v,_=(e[gt>>2]|0)+$|0,e[gt>>2]=_}while((_|0)<0);j=C}else j=C;if(j>>>0<v>>>0){if(_=(Q-j>>2)*9|0,N=e[j>>2]|0,N>>>0>=10){C=10;do C=C*10|0,_=_+1|0;while(N>>>0>=C>>>0)}}else _=0;if(lt=(xt|0)==103,Et=(A|0)!=0,C=A-((xt|0)==102?0:_)+((Et&lt)<<31>>31)|0,(C|0)<(((v-Q>>2)*9|0)+-9|0)){if(gt=C+9216|0,C=(gt|0)/9|0,a=ae+4+(C+-1024<<2)|0,C=gt-(C*9|0)|0,(C|0)<8)for(N=10;N=N*10|0,(C|0)<7;)C=C+1|0;else N=10;if(L=e[a>>2]|0,C=(L>>>0)/(N>>>0)|0,$=L-(Mt(C,N)|0)|0,B=(a+4|0)==(v|0),B&($|0)==0)C=a,N=j;else if(H=(C&1|0)==0?9007199254740992:9007199254740994,gt=N>>>1,i=$>>>0<gt>>>0?.5:B&($|0)==(gt|0)?1:1.5,Zt&&(gt=(m[ee>>0]|0)==45,i=gt?-i:i,H=gt?-H:H),C=L-$|0,e[a>>2]=C,H+i!=H){if(gt=C+N|0,e[a>>2]=gt,gt>>>0>999999999)for(N=a,_=j;;)if(C=N+-4|0,e[N>>2]=0,C>>>0<_>>>0&&(_=_+-4|0,e[_>>2]=0),gt=(e[C>>2]|0)+1|0,e[C>>2]=gt,gt>>>0>999999999)N=C;else{N=_;break}else C=a,N=j;if(_=(Q-N>>2)*9|0,L=e[N>>2]|0,L>>>0>=10){B=10;do B=B*10|0,_=_+1|0;while(L>>>0>=B>>>0)}}else C=a,N=j;gt=C+4|0,v=v>>>0>gt>>>0?gt:v}else N=j;a=0-_|0;t:do if(v>>>0>N>>>0)for(;;){if(C=v+-4|0,e[C>>2]|0){gt=v,xt=1;break t}if(C>>>0>N>>>0)v=C;else{gt=C,xt=0;break}}else gt=v,xt=0;while(!1);do if(lt){if(A=A+((Et^1)&1)|0,(A|0)>(_|0)&(_|0)>-5?(B=f+-1|0,A=A+-1-_|0):(B=f+-2|0,A=A+-1|0),!(h&8)){if(xt&&(te=e[gt+-4>>2]|0,(te|0)!=0))if((te>>>0)%10|0)C=0;else{C=0,v=10;do v=v*10|0,C=C+1|0;while(!((te>>>0)%(v>>>0)|0|0))}else C=9;if(v=((gt-Q>>2)*9|0)+-9|0,(B|32|0)==102){f=v-C|0,f=(f|0)>0?f:0,A=(A|0)<(f|0)?A:f;break}else{f=v+_-C|0,f=(f|0)>0?f:0,A=(A|0)<(f|0)?A:f;break}}}else B=f;while(!1);if(j=(A|0)!=0,L=j?1:h>>>3&1,$=(B|32|0)==102,$)lt=0,_=(_|0)>0?_:0;else{if(v=(_|0)<0?a:_,v=Gr(v,((v|0)<0)<<31>>31,se)|0,C=se,(C-v|0)<2)do v=v+-1|0,m[v>>0]=48;while((C-v|0)<2);m[v+-1>>0]=(_>>31&2)+43,_=v+-2|0,m[_>>0]=B,lt=_,_=C-_|0}if(_=Zt+1+A+L+_|0,Re(t,32,s,_,h),Me(t,ee,Zt),Re(t,48,s,_,h^65536),$){L=N>>>0>ae>>>0?ae:N,$=Lt+9|0,N=$,B=Lt+8|0,C=L;do{if(v=Gr(e[C>>2]|0,0,$)|0,(C|0)==(L|0))(v|0)==($|0)&&(m[B>>0]=48,v=B);else if(v>>>0>Lt>>>0){or(Lt|0,48,v-Ut|0)|0;do v=v+-1|0;while(v>>>0>Lt>>>0)}Me(t,v,N-v|0),C=C+4|0}while(C>>>0<=ae>>>0);if((h&8|0)==0&(j^1)||Me(t,20282,1),C>>>0<gt>>>0&(A|0)>0)for(;;){if(v=Gr(e[C>>2]|0,0,$)|0,v>>>0>Lt>>>0){or(Lt|0,48,v-Ut|0)|0;do v=v+-1|0;while(v>>>0>Lt>>>0)}if(Me(t,v,(A|0)<9?A:9),C=C+4|0,v=A+-9|0,C>>>0<gt>>>0&(A|0)>9)A=v;else{A=v;break}}Re(t,48,A+9|0,9,0)}else{if(gt=xt?gt:N+4|0,N>>>0<gt>>>0&(A|0)>-1){a=Lt+9|0,j=(h&8|0)==0,xt=a,L=0-Ut|0,$=Lt+8|0,B=N;do{v=Gr(e[B>>2]|0,0,a)|0,(v|0)==(a|0)&&(m[$>>0]=48,v=$);do if((B|0)==(N|0)){if(C=v+1|0,Me(t,v,1),j&(A|0)<1){v=C;break}Me(t,20282,1),v=C}else{if(v>>>0<=Lt>>>0)break;or(Lt|0,48,v+L|0)|0;do v=v+-1|0;while(v>>>0>Lt>>>0)}while(!1);Ut=xt-v|0,Me(t,v,(A|0)>(Ut|0)?Ut:A),A=A-Ut|0,B=B+4|0}while(B>>>0<gt>>>0&(A|0)>-1)}Re(t,48,A+18|0,18,0),Me(t,lt,se-lt|0)}Re(t,32,s,_,h^8192)}while(!1);return y=bi,((_|0)<(s|0)?s:_)|0}function l8(t,i){t=t|0,i=i|0;var s=0,a=0;a=(e[i>>2]|0)+7&-8,s=+ct[a>>3],e[i>>2]=a+8,ct[t>>3]=s}function c8(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0,xt=0;xt=y,y=y+224|0,L=xt+208|0,H=xt+160|0,$=xt+80|0,j=xt,f=H,_=f+40|0;do e[f>>2]=0,f=f+4|0;while((f|0)<(_|0));return e[L>>2]=e[s>>2],(K0(0,i,L,$,H,a,h)|0)<0?s=-1:((e[t+76>>2]|0)>-1,s=e[t>>2]|0,B=s&32,(m[t+74>>0]|0)<1&&(e[t>>2]=s&-33),f=t+48|0,e[f>>2]|0?s=K0(t,i,L,$,H,a,h)|0:(_=t+44|0,A=e[_>>2]|0,e[_>>2]=j,v=t+28|0,e[v>>2]=j,C=t+20|0,e[C>>2]=j,e[f>>2]=80,N=t+16|0,e[N>>2]=j+80,s=K0(t,i,L,$,H,a,h)|0,A&&(Ir[e[t+36>>2]&7](t,0,0)|0,s=(e[C>>2]|0)==0?-1:s,e[_>>2]=A,e[f>>2]=0,e[N>>2]=0,e[v>>2]=0,e[C>>2]=0)),f=e[t>>2]|0,e[t>>2]=f|B,s=(f&32|0)==0?s:-1),y=xt,s|0}function K0(t,i,s,a,h,f,_){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,f=f|0,_=_|0;var A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0,xt=0,gt=0,lt=0,Et=0,Q=0,te=0,ae=0,ee=0,Zt=0,se=0,Ut=0,Lt=0,bi=0,le=0,lr=0,pi=0;lr=y,y=y+64|0,Lt=lr+56|0,le=lr+40|0,ae=lr,Zt=lr+48|0,se=lr+60|0,e[Lt>>2]=i,Et=(t|0)!=0,Q=ae+40|0,te=Q,ae=ae+39|0,ee=Zt+4|0,A=0,i=0,C=0;t:for(;;){do{do if((i|0)>-1)if((A|0)>(2147483647-i|0)){e[(Xi()|0)>>2]=61,i=-1;break}else{i=A+i|0;break}while(!1);if(H=e[Lt>>2]|0,A=m[H>>0]|0,!(A<<24>>24)){lt=92;break t}v=H;e:for(;;){switch(A<<24>>24){case 37:{lt=10;break e}case 0:{A=v;break e}}gt=v+1|0,e[Lt>>2]=gt,A=m[gt>>0]|0,v=gt}e:do if((lt|0)==10){lt=0,A=v;do{if((m[v+1>>0]|0)!=37)break e;A=A+1|0,v=v+2|0,e[Lt>>2]=v}while((m[v>>0]|0)==37)}while(!1);A=A-H|0,Et&&Me(t,H,A)}while((A|0)!=0);if(gt=(Ts(m[(e[Lt>>2]|0)+1>>0]|0)|0)==0,v=e[Lt>>2]|0,!gt&&(m[v+2>>0]|0)==36?(j=(m[v+1>>0]|0)+-48|0,B=1,A=3):(j=-1,B=C,A=1),A=v+A|0,e[Lt>>2]=A,v=m[A>>0]|0,C=(v<<24>>24)+-32|0,C>>>0>31|(1<<C&75913|0)==0)N=0;else{N=0;do N=1<<C|N,A=A+1|0,e[Lt>>2]=A,v=m[A>>0]|0,C=(v<<24>>24)+-32|0;while(!(C>>>0>31|(1<<C&75913|0)==0))}if(v<<24>>24==42){if((Ts(m[A+1>>0]|0)|0)!=0&&(bi=e[Lt>>2]|0,(m[bi+2>>0]|0)==36))A=bi+1|0,e[h+((m[A>>0]|0)+-48<<2)>>2]=10,A=e[a+((m[A>>0]|0)+-48<<3)>>2]|0,C=1,v=bi+3|0;else{if(B|0){i=-1;break}Et?(gt=(e[s>>2]|0)+3&-4,A=e[gt>>2]|0,e[s>>2]=gt+4):A=0,C=0,v=(e[Lt>>2]|0)+1|0}e[Lt>>2]=v,gt=(A|0)<0,xt=gt?0-A|0:A,N=gt?N|8192:N,gt=C}else{if(A=Zh(Lt)|0,(A|0)<0){i=-1;break}xt=A,gt=B,v=e[Lt>>2]|0}do if((m[v>>0]|0)==46){if(A=v+1|0,(m[A>>0]|0)!=42){e[Lt>>2]=A,A=Zh(Lt)|0,v=e[Lt>>2]|0;break}if(Ts(m[v+2>>0]|0)|0&&(Ut=e[Lt>>2]|0,(m[Ut+3>>0]|0)==36)){A=Ut+2|0,e[h+((m[A>>0]|0)+-48<<2)>>2]=10,A=e[a+((m[A>>0]|0)+-48<<3)>>2]|0,v=Ut+4|0,e[Lt>>2]=v;break}if(gt|0){i=-1;break t}Et?($=(e[s>>2]|0)+3&-4,A=e[$>>2]|0,e[s>>2]=$+4):A=0,v=(e[Lt>>2]|0)+2|0,e[Lt>>2]=v}else A=-1;while(!1);for($=0;;){if(((m[v>>0]|0)+-65|0)>>>0>57){i=-1;break t}if(C=v,v=v+1|0,e[Lt>>2]=v,C=m[(m[C>>0]|0)+-65+(176+($*58|0))>>0]|0,B=C&255,(B+-1|0)>>>0>=8)break;$=B}if(!(C<<24>>24)){i=-1;break}L=(j|0)>-1;do if(C<<24>>24==19)if(L){i=-1;break t}else lt=54;else{if(L){e[h+(j<<2)>>2]=B,L=a+(j<<3)|0,j=e[L+4>>2]|0,lt=le,e[lt>>2]=e[L>>2],e[lt+4>>2]=j,lt=54;break}if(!Et){i=0;break t}zh(le,B,s,_),v=e[Lt>>2]|0,lt=55}while(!1);(lt|0)==54&&(lt=0,Et?lt=55:A=0);e:do if((lt|0)==55){lt=0,v=m[v+-1>>0]|0,v=($|0)!=0&(v&15|0)==3?v&-33:v,C=N&-65537,j=(N&8192|0)==0?N:C;i:do switch(v|0){case 110:switch(($&255)<<24>>24){case 0:{e[e[le>>2]>>2]=i,A=0;break e}case 1:{e[e[le>>2]>>2]=i,A=0;break e}case 2:{A=e[le>>2]|0,e[A>>2]=i,e[A+4>>2]=((i|0)<0)<<31>>31,A=0;break e}case 3:{J[e[le>>2]>>1]=i,A=0;break e}case 4:{m[e[le>>2]>>0]=i,A=0;break e}case 6:{e[e[le>>2]>>2]=i,A=0;break e}case 7:{A=e[le>>2]|0,e[A>>2]=i,e[A+4>>2]=((i|0)<0)<<31>>31,A=0;break e}default:{A=0;break e}}case 112:{v=120,A=A>>>0>8?A:8,C=j|8,lt=67;break}case 88:case 120:{C=j,lt=67;break}case 111:{L=le,L=u8(e[L>>2]|0,e[L+4>>2]|0,Q)|0,C=te-L|0,N=0,B=20230,A=(j&8|0)==0|(A|0)>(C|0)?A:C+1|0,C=j,lt=73;break}case 105:case 100:if(C=le,v=e[C>>2]|0,C=e[C+4>>2]|0,(C|0)<0){v=Or(0,0,v|0,C|0)|0,C=Nt()|0,N=le,e[N>>2]=v,e[N+4>>2]=C,N=1,B=20230,lt=72;break i}else{N=(j&2049|0)!=0&1,B=(j&2048|0)==0?(j&1|0)==0?20230:20232:20231,lt=72;break i}case 117:{C=le,N=0,B=20230,v=e[C>>2]|0,C=e[C+4>>2]|0,lt=72;break}case 99:{m[ae>>0]=e[le>>2],H=ae,N=0,B=20230,L=1,v=C,A=te;break}case 115:{$=e[le>>2]|0,$=($|0)==0?20240:$,j=s8($,0,A)|0,pi=(j|0)==0,H=$,N=0,B=20230,L=pi?A:j-$|0,v=C,A=pi?$+A|0:j;break}case 67:{e[Zt>>2]=e[le>>2],e[ee>>2]=0,e[le>>2]=Zt,B=-1,lt=79;break}case 83:{A?(B=A,lt=79):(Re(t,32,xt,0,j),A=0,lt=89);break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{A=pu[f&1](t,+ct[le>>3],xt,A,j,v)|0;break e}default:N=0,B=20230,L=A,v=j,A=te}while(!1);i:do if((lt|0)==67)L=le,L=h8(e[L>>2]|0,e[L+4>>2]|0,Q,v&32)|0,B=le,B=(C&8|0)==0|(e[B>>2]|0)==0&(e[B+4>>2]|0)==0,N=B?0:2,B=B?20230:20230+(v>>>4)|0,lt=73;else if((lt|0)==72)L=Gr(v,C,Q)|0,C=j,lt=73;else if((lt|0)==79){for(lt=0,N=e[le>>2]|0,A=0;v=e[N>>2]|0,!!v;){if(v=Dh(se,v)|0,C=(v|0)<0,C|v>>>0>(B-A|0)>>>0){lt=83;break}if(A=v+A|0,B>>>0>A>>>0)N=N+4|0;else break}if((lt|0)==83&&(lt=0,C)){i=-1;break t}if(Re(t,32,xt,A,j),!A)A=0,lt=89;else for(C=e[le>>2]|0,N=0;;){if(v=e[C>>2]|0,!v){lt=89;break i}if(v=Dh(se,v)|0,N=v+N|0,(N|0)>(A|0)){lt=89;break i}if(Me(t,se,v),N>>>0>=A>>>0){lt=89;break}else C=C+4|0}}while(!1);if((lt|0)==73)lt=0,v=le,v=(e[v>>2]|0)!=0|(e[v+4>>2]|0)!=0,pi=(A|0)!=0|v,v=te-L+((v^1)&1)|0,H=pi?L:Q,L=pi?(A|0)>(v|0)?A:v:0,v=(A|0)>-1?C&-65537:C,A=te;else if((lt|0)==89){lt=0,Re(t,32,xt,A,j^8192),A=(xt|0)>(A|0)?xt:A;break}j=A-H|0,$=(L|0)<(j|0)?j:L,pi=$+N|0,A=(xt|0)<(pi|0)?pi:xt,Re(t,32,A,pi,v),Me(t,B,N),Re(t,48,A,pi,v^65536),Re(t,48,$,j,0),Me(t,H,j),Re(t,32,A,pi,v^8192)}while(!1);C=gt}t:do if((lt|0)==92&&!t)if(!C)i=0;else{for(i=1;A=e[h+(i<<2)>>2]|0,!!A;)if(zh(a+(i<<3)|0,A,s,_),i=i+1|0,i>>>0>=10){i=1;break t}for(;;){if(e[h+(i<<2)>>2]|0){i=-1;break t}if(i=i+1|0,i>>>0>=10){i=1;break}}}while(!1);return y=lr,i|0}function Me(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]&32||i8(i,s,t)|0}function Zh(t){t=t|0;var i=0,s=0;if(!(Ts(m[e[t>>2]>>0]|0)|0))i=0;else{i=0;do s=e[t>>2]|0,i=(i*10|0)+-48+(m[s>>0]|0)|0,s=s+1|0,e[t>>2]=s;while((Ts(m[s>>0]|0)|0)!=0)}return i|0}function zh(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;t:do if(i>>>0<=20)do switch(i|0){case 9:{i=(e[s>>2]|0)+3&-4,a=e[i>>2]|0,e[s>>2]=i+4,e[t>>2]=a;break t}case 10:{a=(e[s>>2]|0)+3&-4,i=e[a>>2]|0,e[s>>2]=a+4,a=t,e[a>>2]=i,e[a+4>>2]=((i|0)<0)<<31>>31;break t}case 11:{a=(e[s>>2]|0)+3&-4,i=e[a>>2]|0,e[s>>2]=a+4,a=t,e[a>>2]=i,e[a+4>>2]=0;break t}case 12:{a=(e[s>>2]|0)+7&-8,i=a,h=e[i>>2]|0,i=e[i+4>>2]|0,e[s>>2]=a+8,a=t,e[a>>2]=h,e[a+4>>2]=i;break t}case 13:{h=(e[s>>2]|0)+3&-4,a=e[h>>2]|0,e[s>>2]=h+4,a=(a&65535)<<16>>16,h=t,e[h>>2]=a,e[h+4>>2]=((a|0)<0)<<31>>31;break t}case 14:{h=(e[s>>2]|0)+3&-4,a=e[h>>2]|0,e[s>>2]=h+4,h=t,e[h>>2]=a&65535,e[h+4>>2]=0;break t}case 15:{h=(e[s>>2]|0)+3&-4,a=e[h>>2]|0,e[s>>2]=h+4,a=(a&255)<<24>>24,h=t,e[h>>2]=a,e[h+4>>2]=((a|0)<0)<<31>>31;break t}case 16:{h=(e[s>>2]|0)+3&-4,a=e[h>>2]|0,e[s>>2]=h+4,h=t,e[h>>2]=a&255,e[h+4>>2]=0;break t}case 17:{h=(e[s>>2]|0)+7&-8,f=+ct[h>>3],e[s>>2]=h+8,ct[t>>3]=f;break t}case 18:{bn[a&15](t,s);break t}default:break t}while(!1);while(!1)}function h8(t,i,s,a){if(t=t|0,i=i|0,s=s|0,a=a|0,!((t|0)==0&(i|0)==0))do s=s+-1|0,m[s>>0]=O[640+(t&15)>>0]|0|a,t=aa(t|0,i|0,4)|0,i=Nt()|0;while(!((t|0)==0&(i|0)==0));return s|0}function u8(t,i,s){if(t=t|0,i=i|0,s=s|0,!((t|0)==0&(i|0)==0))do s=s+-1|0,m[s>>0]=t&7|48,t=aa(t|0,i|0,3)|0,i=Nt()|0;while(!((t|0)==0&(i|0)==0));return s|0}function Gr(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;if(i>>>0>0|(i|0)==0&t>>>0>4294967295){do a=t,t=ll(t|0,i|0,10,0)|0,h=i,i=Nt()|0,f=al(t|0,i|0,10,0)|0,f=Or(a|0,h|0,f|0,Nt()|0)|0,Nt()|0,s=s+-1|0,m[s>>0]=f&255|48;while(h>>>0>9|(h|0)==9&a>>>0>4294967295);i=t}else i=t;if(i)do f=i,i=(i>>>0)/10|0,s=s+-1|0,m[s>>0]=f-(i*10|0)|48;while(f>>>0>=10);return s|0}function Re(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0,_=0;if(_=y,y=y+256|0,f=_,(s|0)>(a|0)&(h&73728|0)==0){if(h=s-a|0,or(f|0,i<<24>>24|0,(h>>>0<256?h:256)|0)|0,h>>>0>255){i=s-a|0;do Me(t,f,256),h=h+-256|0;while(h>>>0>255);h=i&255}Me(t,f,h)}y=_}function Dh(t,i){return t=t|0,i=i|0,t?t=f8(t,i)|0:t=0,t|0}function f8(t,i,s){t=t|0,i=i|0;do if(t){if(i>>>0<128){m[t>>0]=i,t=1;break}if(!(e[e[(d8()|0)+176>>2]>>2]|0))if((i&-128|0)==57216){m[t>>0]=i,t=1;break}else{e[(Xi()|0)>>2]=25,t=-1;break}if(i>>>0<2048){m[t>>0]=i>>>6|192,m[t+1>>0]=i&63|128,t=2;break}if(i>>>0<55296|(i&-8192|0)==57344){m[t>>0]=i>>>12|224,m[t+1>>0]=i>>>6&63|128,m[t+2>>0]=i&63|128,t=3;break}if((i+-65536|0)>>>0<1048576){m[t>>0]=i>>>18|240,m[t+1>>0]=i>>>12&63|128,m[t+2>>0]=i>>>6&63|128,m[t+3>>0]=i&63|128,t=4;break}else{e[(Xi()|0)>>2]=25,t=-1;break}}else t=1;while(!1);return t|0}function d8(){return Vh()|0}function Xh(t){t=+t;var i=0;return ct[X>>3]=t,i=e[X>>2]|0,Bt(e[X+4>>2]|0),i|0}function jh(t,i){t=+t,i=i|0;var s=0,a=0,h=0;switch(ct[X>>3]=t,s=e[X>>2]|0,a=e[X+4>>2]|0,h=aa(s|0,a|0,52)|0,Nt()|0,h&2047){case 0:{t!=0?(t=+jh(t*18446744073709552e3,i),s=(e[i>>2]|0)+-64|0):s=0,e[i>>2]=s;break}case 2047:break;default:e[i>>2]=(h&2047)+-1022,e[X>>2]=s,e[X+4>>2]=a&-2146435073|1071644672,t=+ct[X>>3]}return+t}function p8(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;t:do if(!s)t=0;else{for(;a=m[t>>0]|0,h=m[i>>0]|0,a<<24>>24==h<<24>>24;)if(s=s+-1|0,s)t=t+1|0,i=i+1|0;else{t=0;break t}t=(a&255)-(h&255)|0}while(!1);return t|0}function _8(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;return h=y,y=y+16|0,f=h,e[f>>2]=a,a=A8(t,i,s,f)|0,y=h,a|0}function A8(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0,_=0,A=0;return A=y,y=y+160|0,h=A+144|0,_=A,ri(_|0,3672,144)|0,(i+-1|0)>>>0>2147483646?i?(e[(Xi()|0)>>2]=61,i=-1):(t=h,i=1,f=4):f=4,(f|0)==4&&(f=-2-t|0,f=i>>>0>f>>>0?f:i,e[_+48>>2]=f,h=_+20|0,e[h>>2]=t,e[_+44>>2]=t,i=t+f|0,t=_+16|0,e[t>>2]=i,e[_+28>>2]=i,i=o8(_,s,a)|0,f&&(_=e[h>>2]|0,m[_+(((_|0)==(e[t>>2]|0))<<31>>31)>>0]=0)),y=A,i|0}function m8(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;return a=t+20|0,h=e[a>>2]|0,t=(e[t+16>>2]|0)-h|0,t=t>>>0>s>>>0?s:t,ri(h|0,i|0,t|0)|0,e[a>>2]=(e[a>>2]|0)+t,s|0}function g8(t){t=t|0;var i=0,s=0;return i=(ia(t)|0)+1|0,s=oa(i)|0,s?t=ri(s|0,t|0,i|0)|0:t=0,t|0}function v8(t,i){t=t|0,i=i|0;var s=0,a=0;for(s=0;;){if((O[656+s>>0]|0)==(t|0)){a=4;break}if(s=s+1|0,(s|0)==87){t=87,a=5;break}}if((a|0)==4&&(s?(t=s,a=5):s=752),(a|0)==5){s=752;do{do a=s,s=s+1|0;while((m[a>>0]|0)!=0);t=t+-1|0}while((t|0)!=0)}return y8(s,e[i+20>>2]|0)|0}function y8(t,i){return t=t|0,i=i|0,n8(t,i)|0}function w8(t){return t=t|0,v8(t,e[(M8()|0)+176>>2]|0)|0}function M8(){return Vh()|0}function C8(t,i,s){t=t|0,i=i|0,s=s|0;var a=0;return a=w8(t)|0,t=ia(a)|0,t>>>0>=s>>>0?(t=s+-1|0,s&&(ri(i|0,a|0,t|0)|0,m[i+t>>0]=0),t=68):(ri(i|0,a|0,t+1|0)|0,t=0),t|0}function S8(){var t=0,i=0,s=0,a=0,h=0,f=0;a=y,y=y+48|0,i=a+24|0,f=a+16|0,h=a,a=a+36|0,t=E8()|0,t|0&&(s=e[t>>2]|0,s|0)&&(t=s+48|0,b8(t)|0||(e[i>>2]=20420,Br()),i=Hh(t)|0,(i|0)==1126902529&(Nt()|0)==1129074247?t=e[s+44>>2]|0:t=s+80|0,e[a>>2]=t,s=e[s>>2]|0,t=e[s+4>>2]|0,Ir[e[(e[954]|0)+16>>2]&7](3816,s,a)|0?(f=e[a>>2]|0,f=la[e[(e[f>>2]|0)+8>>2]&15](f)|0,e[h>>2]=20420,e[h+4>>2]=t,e[h+8>>2]=f,Br()):(e[f>>2]=20420,e[f+4>>2]=t,Br())),Br()}function E8(){return 21640}function b8(t){return t=t|0,t=Hh(t)|0,(t&-256|0)==1126902528&(Nt()|0)==1129074247|0}function Hh(t){t=t|0;var i=0;return i=t,t=e[i>>2]|0,Bt(e[i+4>>2]|0),t|0}function Br(t,i){ft()}function R8(t){}function P8(t){t=t|0,yt(t)}function x8(t){}function T8(t){}function F8(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0;if(v=y,y=y+64|0,_=v,fe(t,i,0)|0)t=1;else if((i|0)!=0&&(A=ii(i,3840,3824,0)|0,(A|0)!=0)){e[_>>2]=A,e[_+4>>2]=0,e[_+8>>2]=t,e[_+12>>2]=-1,t=_+16|0,i=_+24|0,a=_+48|0,h=t,f=h+36|0;do e[h>>2]=0,h=h+4|0;while((h|0)<(f|0));J[t+36>>1]=0,m[t+38>>0]=0,e[a>>2]=1,Bs[e[(e[A>>2]|0)+28>>2]&7](A,_,e[s>>2]|0,1),(e[i>>2]|0)==1?(e[s>>2]=e[t>>2],t=1):t=0}else t=0;return y=v,t|0}function k8(t,i,s,a,h,f){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,f=f|0,fe(t,e[i+8>>2]|0,f)|0&&il(0,i,s,a,h)}function N8(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0;do if(fe(t,e[i+8>>2]|0,h)|0)el(0,i,s,a);else if(fe(t,e[i>>2]|0,h)|0){if((e[i+16>>2]|0)!=(s|0)&&(f=i+20|0,(e[f>>2]|0)!=(s|0))){e[i+32>>2]=a,e[f>>2]=s,h=i+40|0,e[h>>2]=(e[h>>2]|0)+1,(e[i+36>>2]|0)==1&&(e[i+24>>2]|0)==2&&(m[i+54>>0]=1),e[i+44>>2]=4;break}(a|0)==1&&(e[i+32>>2]=1)}while(!1)}function G8(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0,fe(t,e[i+8>>2]|0,0)|0&&tl(0,i,s,a)}function fe(t,i,s){return t=t|0,i=i|0,s=s|0,s?(t|0)==(i|0)?t=1:t=(Wh(e[t+4>>2]|0,e[i+4>>2]|0)|0)==0:t=(e[t+4>>2]|0)==(e[i+4>>2]|0),t|0}function tl(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0;t=i+16|0,h=e[t>>2]|0;do if(h){if((h|0)!=(s|0)){a=i+36|0,e[a>>2]=(e[a>>2]|0)+1,e[i+24>>2]=2,m[i+54>>0]=1;break}t=i+24|0,(e[t>>2]|0)==2&&(e[t>>2]=a)}else e[t>>2]=s,e[i+24>>2]=a,e[i+36>>2]=1;while(!1)}function el(t,i,s,a){i=i|0,s=s|0,a=a|0;var h=0;(e[i+4>>2]|0)==(s|0)&&(h=i+28|0,(e[h>>2]|0)!=1)&&(e[h>>2]=a)}function il(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,m[i+53>>0]=1;do if((e[i+4>>2]|0)==(a|0)){if(m[i+52>>0]=1,t=i+16|0,a=e[t>>2]|0,!a){if(e[t>>2]=s,e[i+24>>2]=h,e[i+36>>2]=1,!((h|0)==1&&(e[i+48>>2]|0)==1))break;m[i+54>>0]=1;break}if((a|0)!=(s|0)){h=i+36|0,e[h>>2]=(e[h>>2]|0)+1,m[i+54>>0]=1;break}a=i+24|0,t=e[a>>2]|0,(t|0)==2&&(e[a>>2]=h,t=h),(t|0)==1&&(e[i+48>>2]|0)==1&&(m[i+54>>0]=1)}while(!1)}function ii(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0;L=y,y=y+64|0,N=L,C=e[t>>2]|0,B=t+(e[C+-8>>2]|0)|0,C=e[C+-4>>2]|0,e[N>>2]=s,e[N+4>>2]=t,e[N+8>>2]=i,e[N+12>>2]=a,t=N+16|0,i=N+20|0,a=N+24|0,h=N+28|0,f=N+32|0,_=N+40|0,A=t,v=A+36|0;do e[A>>2]=0,A=A+4|0;while((A|0)<(v|0));J[t+36>>1]=0,m[t+38>>0]=0;t:do if(fe(C,s,0)|0)e[N+48>>2]=1,Os[e[(e[C>>2]|0)+20>>2]&3](C,N,B,B,1,0),t=(e[a>>2]|0)==1?B:0;else{switch(ca[e[(e[C>>2]|0)+24>>2]&3](C,N,B,1,0),e[N+36>>2]|0){case 0:{t=(e[_>>2]|0)==1&(e[h>>2]|0)==1&(e[f>>2]|0)==1?e[i>>2]|0:0;break t}case 1:break;default:{t=0;break t}}if((e[a>>2]|0)!=1&&!((e[_>>2]|0)==0&(e[h>>2]|0)==1&(e[f>>2]|0)==1)){t=0;break}t=e[t>>2]|0}while(!1);return y=L,t|0}function B8(t){t=t|0,yt(t)}function O8(t,i,s,a,h,f){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,f=f|0,fe(t,e[i+8>>2]|0,f)|0?il(0,i,s,a,h):(t=e[t+8>>2]|0,Os[e[(e[t>>2]|0)+20>>2]&3](t,i,s,a,h,f))}function I8(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0,_=0,A=0;t:do if(fe(t,e[i+8>>2]|0,h)|0)el(0,i,s,a);else{if(!(fe(t,e[i>>2]|0,h)|0)){_=e[t+8>>2]|0,ca[e[(e[_>>2]|0)+24>>2]&3](_,i,s,a,h);break}if((e[i+16>>2]|0)!=(s|0)&&(_=i+20|0,(e[_>>2]|0)!=(s|0))){e[i+32>>2]=a,a=i+44|0;do if((e[a>>2]|0)!=4)if(f=i+52|0,m[f>>0]=0,A=i+53|0,m[A>>0]=0,t=e[t+8>>2]|0,Os[e[(e[t>>2]|0)+20>>2]&3](t,i,s,s,1,h),m[A>>0]|0){if(A=(m[f>>0]|0)==0,e[a>>2]=3,A)break;break t}else{e[a>>2]=4;break}while(!1);if(e[_>>2]=s,A=i+40|0,e[A>>2]=(e[A>>2]|0)+1,(e[i+36>>2]|0)!=1||(e[i+24>>2]|0)!=2)break;m[i+54>>0]=1;break}(a|0)==1&&(e[i+32>>2]=1)}while(!1)}function U8(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0,fe(t,e[i+8>>2]|0,0)|0?tl(0,i,s,a):(t=e[t+8>>2]|0,Bs[e[(e[t>>2]|0)+28>>2]&7](t,i,s,a))}function yt(t){t=t|0,ol(t)}function L8(t){}function V8(t){t=t|0,yt(t)}function W8(t){return 20599}function na(t){t=t|0,e[t>>2]=5916,Jh(t+4|0)}function Z8(t){t=t|0,na(t),yt(t)}function z8(t){return t=t|0,Yh(t+4|0)|0}function Yh(t){return t=t|0,e[t>>2]|0}function Jh(t){t=t|0;var i=0,s=0;i=D8(e[t>>2]|0)|0,s=i+8|0,t=e[s>>2]|0,e[s>>2]=t+-1,(t|0)<1&&yt(i)}function D8(t){return t=t|0,t+-12|0}function ni(t){t=t|0,e[t>>2]=5936,Jh(t+4|0)}function X8(t){t=t|0,ni(t),yt(t)}function j8(t){return t=t|0,Yh(t+4|0)|0}function H8(t){t=t|0,na(t),yt(t)}function Y8(t){t=t|0,na(t),yt(t)}function J8(){y=y+16|0,Br()}function $8(t){t=t|0,yt(t)}function q8(t,i,s){return t=t|0,i=i|0,fe(t,i,0)|0}function Q8(t){t=t|0,yt(t)}function K8(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0;N=y,y=y+64|0,v=N;do if(fe(i,4048,0)|0)e[s>>2]=0,i=1;else{if(tw(t,i,0)|0){if(i=e[s>>2]|0,!i){i=1;break}e[s>>2]=e[i>>2],i=1;break}if((i|0)!=0&&(a=ii(i,3840,3976,0)|0,(a|0)!=0))if(i=e[s>>2]|0,i|0&&(e[s>>2]=e[i>>2]),i=e[a+8>>2]|0,f=t+8|0,h=e[f>>2]|0,(i&7&(h^7)|0)==0&&((i&96^96)&h|0)==0)if(h=t+12|0,t=e[h>>2]|0,a=a+12|0,i=e[a>>2]|0,fe(t,i,0)|0)i=1;else{if(fe(t,4040,0)|0){if(!i){i=1;break}i=(ii(i,3840,3992,0)|0)==0;break}if(t){if(i=ii(t,3840,3976,0)|0,i|0){if(!(e[f>>2]&1)){i=0;break}i=ew(i,e[a>>2]|0)|0;break}if(i=e[h>>2]|0,i){if(i=ii(i,3840,4008,0)|0,i|0){if(!(e[f>>2]&1)){i=0;break}i=$h(i,e[a>>2]|0)|0;break}if(i=e[h>>2]|0,(i|0)!=0&&(_=ii(i,3840,3824,0)|0,(_|0)!=0)&&(A=e[a>>2]|0,(A|0)!=0)&&(C=ii(A,3840,3824,0)|0,(C|0)!=0)){e[v>>2]=C,e[v+4>>2]=0,e[v+8>>2]=_,e[v+12>>2]=-1,i=v+16|0,t=v+24|0,a=v+48|0,h=i,f=h+36|0;do e[h>>2]=0,h=h+4|0;while((h|0)<(f|0));J[i+36>>1]=0,m[i+38>>0]=0,e[a>>2]=1,Bs[e[(e[C>>2]|0)+28>>2]&7](C,v,e[s>>2]|0,1);do if((e[t>>2]|0)==1){if(!(e[s>>2]|0)){i=1;break}e[s>>2]=e[i>>2],i=1}else i=0;while(!1)}else i=0}else i=0}else i=0}else i=0;else i=0}while(!1);return y=N,i|0}function tw(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;return e[t+8>>2]&24?(s=1,h=5):(i|0)!=0&&(a=ii(i,3840,3960,0)|0,(a|0)!=0)?(s=(e[a+8>>2]&24|0)!=0,h=5):s=0,(h|0)==5&&(s=fe(t,i,s)|0),s|0}function ew(t,i){t=t|0,i=i|0;for(var s=0,a=0,h=0,f=0,_=0;;){if(!i){i=0;break}if(s=ii(i,3840,3976,0)|0,!s){i=0;break}if(h=e[t+8>>2]|0,e[s+8>>2]&~h|0){i=0;break}if(a=t+12|0,i=e[a>>2]|0,s=s+12|0,fe(i,e[s>>2]|0,0)|0){i=1;break}if((h&1|0)==0|(i|0)==0){i=0;break}if(t=ii(i,3840,3976,0)|0,!t){_=9;break}i=e[s>>2]|0}return(_|0)==9&&(i=e[a>>2]|0,(i|0)!=0&&(f=ii(i,3840,4008,0)|0,(f|0)!=0)?i=$h(f,e[s>>2]|0)|0:i=0),i|0}function $h(t,i){t=t|0,i=i|0;var s=0;return(i|0)!=0&&(s=ii(i,3840,4008,0)|0,(s|0)!=0)&&(e[s+8>>2]&~e[t+8>>2]|0)==0&&fe(e[t+12>>2]|0,e[s+12>>2]|0,0)|0?t=fe(e[t+16>>2]|0,e[s+16>>2]|0,0)|0:t=0,t|0}function iw(t){t=t|0,yt(t)}function nw(t,i,s,a,h,f){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,f=f|0;var _=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0;if(fe(t,e[i+8>>2]|0,f)|0)il(0,i,s,a,h);else{j=i+52|0,A=m[j>>0]|0,$=i+53|0,_=m[$>>0]|0,H=e[t+12>>2]|0,N=t+16+(H<<3)|0,m[j>>0]=0,m[$>>0]=0,nl(t+16|0,i,s,a,h,f),v=m[j>>0]|0,A=v|A,C=m[$>>0]|0,_=C|_;t:do if((H|0)>1){B=i+24|0,L=t+8|0,H=i+54|0,t=t+24|0;do{if(_=_&1,A=A&1,m[H>>0]|0)break t;if(v<<24>>24){if((e[B>>2]|0)==1||!(e[L>>2]&2))break t}else if(C<<24>>24&&(e[L>>2]&1|0)==0)break t;m[j>>0]=0,m[$>>0]=0,nl(t,i,s,a,h,f),v=m[j>>0]|0,A=v|A,C=m[$>>0]|0,_=C|_,t=t+8|0}while(t>>>0<N>>>0)}while(!1);m[j>>0]=A<<24>>24!=0&1,m[$>>0]=_<<24>>24!=0&1}}function rw(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0;t:do if(fe(t,e[i+8>>2]|0,h)|0)el(0,i,s,a);else{if(!(fe(t,e[i>>2]|0,h)|0)){if(H=e[t+12>>2]|0,v=t+16+(H<<3)|0,ra(t+16|0,i,s,a,h),f=t+24|0,(H|0)<=1)break;if(t=e[t+8>>2]|0,(t&2|0)==0&&(A=i+36|0,(e[A>>2]|0)!=1)){if(!(t&1)){for(t=i+54|0;;)if(m[t>>0]|0||(e[A>>2]|0)==1||(ra(f,i,s,a,h),f=f+8|0,f>>>0>=v>>>0))break t}for(t=i+24|0,_=i+54|0;;)if(m[_>>0]|0||(e[A>>2]|0)==1&&(e[t>>2]|0)==1||(ra(f,i,s,a,h),f=f+8|0,f>>>0>=v>>>0))break t}for(t=i+54|0;;)if(m[t>>0]|0||(ra(f,i,s,a,h),f=f+8|0,f>>>0>=v>>>0))break t}if((e[i+16>>2]|0)!=(s|0)&&(H=i+20|0,(e[H>>2]|0)!=(s|0))){if(e[i+32>>2]=a,L=i+44|0,(e[L>>2]|0)!=4){A=t+16+(e[t+12>>2]<<3)|0,v=i+52|0,a=i+53|0,C=i+54|0,N=t+8|0,B=i+24|0,f=0,_=t+16|0,t=0;e:for(;;){if(_>>>0>=A>>>0){_=18;break}if(m[v>>0]=0,m[a>>0]=0,nl(_,i,s,s,1,h),m[C>>0]|0){_=18;break}do if(m[a>>0]|0){if(!(m[v>>0]|0))if(e[N>>2]&1){t=1;break}else{_=19;break e}if((e[B>>2]|0)==1){f=1,_=19;break e}if(e[N>>2]&2)f=1,t=1;else{f=1,_=19;break e}}while(!1);_=_+8|0}if((_|0)==18&&(t?_=19:t=4),(_|0)==19&&(t=3),e[L>>2]=t,f&1)break}if(e[H>>2]=s,s=i+40|0,e[s>>2]=(e[s>>2]|0)+1,(e[i+36>>2]|0)!=1||(e[i+24>>2]|0)!=2)break;m[i+54>>0]=1;break}(a|0)==1&&(e[i+32>>2]=1)}while(!1)}function sw(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;t:do if(fe(t,e[i+8>>2]|0,0)|0)tl(0,i,s,a);else if(f=e[t+12>>2]|0,h=t+16+(f<<3)|0,qh(t+16|0,i,s,a),(f|0)>1){f=i+54|0,t=t+24|0;do{if(qh(t,i,s,a),m[f>>0]|0)break t;t=t+8|0}while(t>>>0<h>>>0)}while(!1)}function qh(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;f=e[t+4>>2]|0,s?(h=f>>8,f&1&&(h=e[(e[s>>2]|0)+h>>2]|0)):h=0,t=e[t>>2]|0,Bs[e[(e[t>>2]|0)+28>>2]&7](t,i,s+h|0,(f&2|0)==0?2:a)}function nl(t,i,s,a,h,f){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,f=f|0;var _=0,A=0;A=e[t+4>>2]|0,_=A>>8,A&1&&(_=e[(e[a>>2]|0)+_>>2]|0),t=e[t>>2]|0,Os[e[(e[t>>2]|0)+20>>2]&3](t,i,s,a+_|0,(A&2|0)==0?2:h,f)}function ra(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0,_=0;_=e[t+4>>2]|0,f=_>>8,_&1&&(f=e[(e[s>>2]|0)+f>>2]|0),t=e[t>>2]|0,ca[e[(e[t>>2]|0)+24>>2]&3](t,i,s+f|0,(_&2|0)==0?2:a,h)}function ow(t){t=t|0,e[t>>2]=5896}function nr(t){t=t|0;var i=0,s=0;return i=y,y=y+16|0,s=i,Qh(s,t),t=aw(s)|0,y=i,t|0}function Qh(t,i){t=t|0,i=i|0,hw(t,i)}function aw(t){t=t|0;var i=0,s=0;return i=y,y=y+16|0,s=i,Kh(s,e[t+4>>2]|0),(lw(s)|0)<<24>>24?t=0:t=cw(tu(t)|0)|0,y=i,t|0}function Kh(t,i){t=t|0,i=i|0,e[t>>2]=i}function lw(t){return t=t|0,m[e[t>>2]>>0]|0}function tu(t){return t=t|0,t|0}function cw(t){t=t|0;var i=0,s=0,a=0;a=y,y=y+16|0,t=e[t+8>>2]|0,i=m[t>>0]|0;do if(i<<24>>24!=1)if(i&2)Br();else{m[t>>0]=2,s=1;break}else s=0;while(!1);return y=a,s|0}function hw(t,i){t=t|0,i=i|0,e[t>>2]=i,e[t+4>>2]=i,e[t+8>>2]=i+1,e[t+12>>2]=0}function rr(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,Qh(s,t),uw(s),y=i}function uw(t){t=t|0;var i=0,s=0;i=y,y=y+16|0,s=i,Kh(s,e[t+4>>2]|0),fw(s),dw(tu(t)|0),y=i}function fw(t){t=t|0,m[e[t>>2]>>0]=1}function dw(t){t=t|0,m[e[t+8>>2]>>0]=1}function pw(){return 0}function St(t){t=t|0;var i=0,s=0;for(s=(t|0)==0?1:t;;){if(i=oa(s)|0,i|0){t=6;break}if(t=pw()|0,!t){t=5;break}_u[t&3]()}if((t|0)==5)s=Ot(4)|0,ow(s),Xt(s|0,3880,121);else if((t|0)==6)return i|0;return 0}function eu(t){return t=t|0,St(t)|0}function iu(t){t=t|0,yt(t)}function _w(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;return h=y,y=y+16|0,a=h,e[a>>2]=e[s>>2],t=Ir[e[(e[t>>2]|0)+16>>2]&7](t,i,a)|0,t&&(e[s>>2]=e[a>>2]),y=h,t&1|0}function Aw(t){return t=t|0,t?t=(ii(t,3840,3976,0)|0)!=0&1:t=0,t|0}function mw(t){return 0}function gw(){return(vw()|0)>0|0}function vw(){return Mi()|0}function yw(t){}function ww(t){t=t|0,yt(t)}function Mw(t){return 21039}function Cw(t){}function rn(t){t=t|0;var i=0,s=0;i=t+8|0,(e[i>>2]|0)!=0&&(s=e[i>>2]|0,e[i>>2]=s+-1,(s|0)!=0)||re[e[(e[t>>2]|0)+16>>2]&255](t)}function Sw(t){if(t=t|0,t=mw()|0,t)$w(t,21145);else return}function rl(t,i){t=t|0,i=i|0;var s=0,a=0;a=ia(i)|0,s=St(a+13|0)|0,e[s>>2]=a,e[s+4>>2]=a,e[s+8>>2]=0,s=Ew(s)|0,ri(s|0,i|0,a+1|0)|0,e[t>>2]=s}function Ew(t){return t=t|0,t+12|0}function sn(t,i){t=t|0,i=i|0,e[t>>2]=5916,rl(t+4|0,i)}function bw(t,i){t=t|0,i=i|0,e[t>>2]=5936,rl(t+4|0,(m[i+11>>0]|0)<0?e[i>>2]|0:i)}function Ei(t,i){t=t|0,i=i|0,e[t>>2]=5936,rl(t+4|0,i)}function sl(t){t=t|0,t=Ot(8)|0,sn(t,21163),e[t>>2]=5956,Xt(t|0,3928,123)}function Rw(t){t=t|0,t=Ot(8)|0,sn(t,21163),e[t>>2]=5976,Xt(t|0,3944,123)}function sa(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0;h=y,y=y+16|0,a=h,s>>>0>4294967279&&sl(t),s>>>0<11?m[t+11>>0]=s:(_=s+16&-16,f=St(_)|0,e[t>>2]=f,e[t+8>>2]=_|-2147483648,e[t+4>>2]=s,t=f),Fs(t,i,s)|0,m[a>>0]=0,gs(t+s|0,a),y=h}function Fs(t,i,s){return t=t|0,i=i|0,s=s|0,s|0&&ri(t|0,i|0,s|0)|0,t|0}function ks(t){t=t|0,(m[t+11>>0]|0)<0&&Ht(e[t>>2]|0,e[t+8>>2]&2147483647)}function Pw(t,i,s,a,h,f,_,A){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,f=f|0,_=_|0,A=A|0;var v=0,C=0,N=0,B=0,L=0;L=y,y=y+16|0,B=L,(-18-i|0)>>>0<s>>>0&&sl(t),(m[t+11>>0]|0)<0?N=e[t>>2]|0:N=t,i>>>0<2147483623?(v=s+i|0,C=i<<1,v=v>>>0<C>>>0?C:v,v=v>>>0<11?11:v+16&-16):v=-17,C=St(v)|0,h|0&&Fs(C,N,h)|0,_|0&&Fs(C+h|0,A,_)|0,a=a-f|0,s=a-h|0,s|0&&Fs(C+h+_|0,N+h+f|0,s)|0,s=i+1|0,(s|0)!=11&&Ht(N),e[t>>2]=C,e[t+8>>2]=v|-2147483648,_=a+_|0,e[t+4>>2]=_,m[B>>0]=0,gs(C+_|0,B),y=L}function nu(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0,A=0,v=0;return v=y,y=y+16|0,_=v,A=t+11|0,a=m[A>>0]|0,f=a<<24>>24<0,f?(h=(e[t+8>>2]&2147483647)+-1|0,a=e[t+4>>2]|0):(h=10,a=a&255),(h-a|0)>>>0>=s>>>0?s|0&&(f?h=e[t>>2]|0:h=t,Fs(h+a|0,i,s)|0,a=a+s|0,(m[A>>0]|0)<0?e[t+4>>2]=a:m[A>>0]=a,m[_>>0]=0,gs(h+a|0,_)):Pw(t,h,a+s-h|0,a,a,0,s,i),y=v,t|0}function xw(t,i){return t=t|0,i=i|0,nu(t,i,Pr(i)|0)|0}function Tw(t,i,s){return t=t|0,i=i|0,s=s|0,s?t=p8(t,i,s)|0:t=0,t|0}function Fw(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0,_=0;return f=m[t+11>>0]|0,_=f<<24>>24<0,_?f=e[t+4>>2]|0:f=f&255,(h|0)==-1|f>>>0<i>>>0&&Rw(t),f=f-i|0,s=f>>>0<s>>>0?f:s,_&&(t=e[t>>2]|0),f=s>>>0>h>>>0,t=Tw(t+i|0,a,f?h:s)|0,t?t|0:(s>>>0<h>>>0?-1:f&1)|0}function kw(t){}function Nw(t){t=t|0,yt(t)}function Gw(t){return 21228}function Bw(t,i,s){t=t|0,i=i|0,s=s|0,e[t>>2]=s,e[t+4>>2]=i}function Ow(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0;return h=y,y=y+16|0,a=h,Gs[e[(e[t>>2]|0)+12>>2]&15](a,t,i),(e[a+4>>2]|0)==(e[s+4>>2]|0)?t=(e[a>>2]|0)==(e[s>>2]|0):t=0,y=h,t|0}function Iw(t,i,s){return t=t|0,i=i|0,s=s|0,((e[i>>2]|0)==(s|0)?(e[i+4>>2]|0)==(t|0):0)|0}function Uw(t,i,s){t=t|0,s=s|0,(s|0)>256?sa(t,21176,Pr(21176)|0):ru(t,0,s)}function ru(t,i,s){t=t|0,s=s|0,Lw(t,s)}function Lw(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0,_=0;_=y,y=y+1040|0,h=_+1024|0,s=_,f=e[(Xi()|0)>>2]|0,a=Vw(C8(i,s,1024)|0,s)|0,m[a>>0]|0?s=a:(e[h>>2]=i,_8(s,1024,21211,h)|0),e[(Xi()|0)>>2]=f,sa(t,s,Pr(s)|0),y=_}function Vw(t,i){t=t|0,i=i|0;var s=0,a=0;switch(t|0){case 0:{s=i;break}case-1:{t=e[(Xi()|0)>>2]|0,a=3;break}default:a=3}return(a|0)==3&&((t|0)==28?s=22145:et()),s|0}function Ww(t){t=t|0,yt(t)}function Zw(t){return 21353}function zw(t,i,s){t=t|0,i=i|0,s=s|0,(s|0)>256?(su()|0,i=6180):(Xw()|0,i=6176),e[t>>2]=s,e[t+4>>2]=i}function Dw(t,i,s){t=t|0,s=s|0,(s|0)>256?sa(t,21319,Pr(21319)|0):ru(t,0,s)}function su(){return(m[21488]|0)==0&&nr(21488)|0&&rr(21488),6180}function Xw(){return(m[21480]|0)==0&&nr(21480)|0&&rr(21480),6176}function ou(t){t=t|0,ni(t)}function jw(t){t=t|0,ou(t),yt(t)}function Hw(t,i){t=t|0,i=i|0;var s=0;s=e[i+4>>2]|0,Gs[e[(e[s>>2]|0)+24>>2]&15](t,s,e[i>>2]|0)}function Yw(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;for(f=y,y=y+16|0,h=f,e[i>>2]|0&&(a=m[s+11>>0]|0,a<<24>>24<0?a=e[s+4>>2]|0:a=a&255,a|0&&xw(s,21417)|0,Hw(h,i),i=m[h+11>>0]|0,a=i<<24>>24<0,nu(s,a?e[h>>2]|0:h,a?e[h+4>>2]|0:i&255)|0,ks(h)),e[t>>2]=e[s>>2],e[t+4>>2]=e[s+4>>2],e[t+8>>2]=e[s+8>>2],a=0;(a|0)!=3;)e[s+(a<<2)>>2]=0,a=a+1|0;y=f}function Jw(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;a=y,y=y+32|0,f=a+12|0,h=a,sa(h,s,Pr(s)|0),Yw(f,i,h),bw(t,f),ks(f),ks(h),e[t>>2]=6192,h=i,i=e[h+4>>2]|0,s=t+8|0,e[s>>2]=e[h>>2],e[s+4>>2]=i,y=a}function $w(t,i){t=t|0,i=i|0;var s=0,a=0,h=0;h=y,y=y+16|0,a=h+8|0,s=Ot(16)|0,su()|0,e[h>>2]=t,e[h+4>>2]=6180,e[a>>2]=e[h>>2],e[a+4>>2]=e[h+4>>2],Jw(s,a,i),Xt(s|0,4272,136)}function Ge(t){t=t|0,t=Ot(8)|0,sn(t,21420),e[t>>2]=5956,Xt(t|0,3928,123)}function oa(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0,j=0,xt=0,gt=0,lt=0,Et=0,Q=0,te=0;te=y,y=y+16|0,L=te;do if(t>>>0<245){if(C=t>>>0<11?16:t+11&-8,t=C>>>3,B=e[5412]|0,s=B>>>t,s&3|0)return i=(s&1^1)+t|0,t=21688+(i<<1<<2)|0,s=t+8|0,a=e[s>>2]|0,h=a+8|0,f=e[h>>2]|0,(f|0)==(t|0)?e[5412]=B&~(1<<i):(e[f+12>>2]=t,e[s>>2]=f),Q=i<<3,e[a+4>>2]=Q|3,Q=a+Q+4|0,e[Q>>2]=e[Q>>2]|1,Q=h,y=te,Q|0;if(N=e[5414]|0,C>>>0>N>>>0){if(s|0)return i=2<<t,i=s<<t&(i|0-i),i=(i&0-i)+-1|0,A=i>>>12&16,i=i>>>A,s=i>>>5&8,i=i>>>s,f=i>>>2&4,i=i>>>f,t=i>>>1&2,i=i>>>t,a=i>>>1&1,a=(s|A|f|t|a)+(i>>>a)|0,i=21688+(a<<1<<2)|0,t=i+8|0,f=e[t>>2]|0,A=f+8|0,s=e[A>>2]|0,(s|0)==(i|0)?(t=B&~(1<<a),e[5412]=t):(e[s+12>>2]=i,e[t>>2]=s,t=B),Q=a<<3,_=Q-C|0,e[f+4>>2]=C|3,h=f+C|0,e[h+4>>2]=_|1,e[f+Q>>2]=_,N|0&&(a=e[5417]|0,i=N>>>3,s=21688+(i<<1<<2)|0,i=1<<i,t&i?(t=s+8|0,i=e[t>>2]|0):(e[5412]=t|i,i=s,t=s+8|0),e[t>>2]=a,e[i+12>>2]=a,e[a+8>>2]=i,e[a+12>>2]=s),e[5414]=_,e[5417]=h,Q=A,y=te,Q|0;if(f=e[5413]|0,f){for(s=(f&0-f)+-1|0,h=s>>>12&16,s=s>>>h,a=s>>>5&8,s=s>>>a,_=s>>>2&4,s=s>>>_,A=s>>>1&2,s=s>>>A,v=s>>>1&1,v=e[21952+((a|h|_|A|v)+(s>>>v)<<2)>>2]|0,s=v,A=v,v=(e[v+4>>2]&-8)-C|0;t=e[s+16>>2]|0,!(!t&&(t=e[s+20>>2]|0,!t));)_=(e[t+4>>2]&-8)-C|0,h=_>>>0<v>>>0,s=t,A=h?t:A,v=h?_:v;if(_=A+C|0,_>>>0>A>>>0){h=e[A+24>>2]|0,i=e[A+12>>2]|0;do if((i|0)==(A|0)){if(t=A+20|0,i=e[t>>2]|0,!i&&(t=A+16|0,i=e[t>>2]|0,!i)){s=0;break}for(;;)if(a=i+20|0,s=e[a>>2]|0,s)i=s,t=a;else if(a=i+16|0,s=e[a>>2]|0,s)i=s,t=a;else break;e[t>>2]=0,s=i}else s=e[A+8>>2]|0,e[s+12>>2]=i,e[i+8>>2]=s,s=i;while(!1);do if(h|0){if(i=e[A+28>>2]|0,t=21952+(i<<2)|0,(A|0)==(e[t>>2]|0)){if(e[t>>2]=s,!s){e[5413]=f&~(1<<i);break}}else if(Q=h+16|0,e[((e[Q>>2]|0)==(A|0)?Q:h+20|0)>>2]=s,!s)break;e[s+24>>2]=h,i=e[A+16>>2]|0,i|0&&(e[s+16>>2]=i,e[i+24>>2]=s),i=e[A+20>>2]|0,i|0&&(e[s+20>>2]=i,e[i+24>>2]=s)}while(!1);return v>>>0<16?(Q=v+C|0,e[A+4>>2]=Q|3,Q=A+Q+4|0,e[Q>>2]=e[Q>>2]|1):(e[A+4>>2]=C|3,e[_+4>>2]=v|1,e[_+v>>2]=v,N|0&&(a=e[5417]|0,i=N>>>3,s=21688+(i<<1<<2)|0,i=1<<i,i&B?(t=s+8|0,i=e[t>>2]|0):(e[5412]=i|B,i=s,t=s+8|0),e[t>>2]=a,e[i+12>>2]=a,e[a+8>>2]=i,e[a+12>>2]=s),e[5414]=v,e[5417]=_),Q=A+8|0,y=te,Q|0}else B=C}else B=C}else B=C}else if(t>>>0<=4294967231)if(t=t+11|0,C=t&-8,a=e[5413]|0,a){h=0-C|0,t=t>>>8,t?C>>>0>16777215?v=31:(B=(t+1048320|0)>>>16&8,j=t<<B,A=(j+520192|0)>>>16&4,j=j<<A,v=(j+245760|0)>>>16&2,v=14-(A|B|v)+(j<<v>>>15)|0,v=C>>>(v+7|0)&1|v<<1):v=0,s=e[21952+(v<<2)>>2]|0;t:do if(!s)s=0,t=0,j=61;else for(t=0,A=C<<((v|0)==31?0:25-(v>>>1)|0),f=0;;){if(_=(e[s+4>>2]&-8)-C|0,_>>>0<h>>>0)if(_)t=s,h=_;else{t=s,h=0,j=65;break t}if(j=e[s+20>>2]|0,s=e[s+16+(A>>>31<<2)>>2]|0,f=(j|0)==0|(j|0)==(s|0)?f:j,s)A=A<<1;else{s=f,j=61;break}}while(!1);if((j|0)==61){if((s|0)==0&(t|0)==0){if(t=2<<v,t=(t|0-t)&a,!t){B=C;break}B=(t&0-t)+-1|0,_=B>>>12&16,B=B>>>_,f=B>>>5&8,B=B>>>f,A=B>>>2&4,B=B>>>A,v=B>>>1&2,B=B>>>v,s=B>>>1&1,t=0,s=e[21952+((f|_|A|v|s)+(B>>>s)<<2)>>2]|0}s?j=65:(A=t,_=h)}if((j|0)==65)for(f=s;;)if(B=(e[f+4>>2]&-8)-C|0,s=B>>>0<h>>>0,h=s?B:h,t=s?f:t,s=e[f+16>>2]|0,s||(s=e[f+20>>2]|0),s)f=s;else{A=t,_=h;break}if((A|0)!=0&&_>>>0<((e[5414]|0)-C|0)>>>0&&(N=A+C|0,N>>>0>A>>>0)){f=e[A+24>>2]|0,i=e[A+12>>2]|0;do if((i|0)==(A|0)){if(t=A+20|0,i=e[t>>2]|0,!i&&(t=A+16|0,i=e[t>>2]|0,!i)){i=0;break}for(;;)if(h=i+20|0,s=e[h>>2]|0,s)i=s,t=h;else if(h=i+16|0,s=e[h>>2]|0,s)i=s,t=h;else break;e[t>>2]=0}else Q=e[A+8>>2]|0,e[Q+12>>2]=i,e[i+8>>2]=Q;while(!1);do if(f){if(t=e[A+28>>2]|0,s=21952+(t<<2)|0,(A|0)==(e[s>>2]|0)){if(e[s>>2]=i,!i){a=a&~(1<<t),e[5413]=a;break}}else if(Q=f+16|0,e[((e[Q>>2]|0)==(A|0)?Q:f+20|0)>>2]=i,!i)break;e[i+24>>2]=f,t=e[A+16>>2]|0,t|0&&(e[i+16>>2]=t,e[t+24>>2]=i),t=e[A+20>>2]|0,t&&(e[i+20>>2]=t,e[t+24>>2]=i)}while(!1);t:do if(_>>>0<16)Q=_+C|0,e[A+4>>2]=Q|3,Q=A+Q+4|0,e[Q>>2]=e[Q>>2]|1;else{if(e[A+4>>2]=C|3,e[N+4>>2]=_|1,e[N+_>>2]=_,i=_>>>3,_>>>0<256){s=21688+(i<<1<<2)|0,t=e[5412]|0,i=1<<i,t&i?(t=s+8|0,i=e[t>>2]|0):(e[5412]=t|i,i=s,t=s+8|0),e[t>>2]=N,e[i+12>>2]=N,e[N+8>>2]=i,e[N+12>>2]=s;break}if(i=_>>>8,i?_>>>0>16777215?s=31:(Et=(i+1048320|0)>>>16&8,Q=i<<Et,lt=(Q+520192|0)>>>16&4,Q=Q<<lt,s=(Q+245760|0)>>>16&2,s=14-(lt|Et|s)+(Q<<s>>>15)|0,s=_>>>(s+7|0)&1|s<<1):s=0,i=21952+(s<<2)|0,e[N+28>>2]=s,t=N+16|0,e[t+4>>2]=0,e[t>>2]=0,t=1<<s,!(a&t)){e[5413]=a|t,e[i>>2]=N,e[N+24>>2]=i,e[N+12>>2]=N,e[N+8>>2]=N;break}i=e[i>>2]|0;e:do if((e[i+4>>2]&-8|0)!=(_|0)){for(a=_<<((s|0)==31?0:25-(s>>>1)|0);s=i+16+(a>>>31<<2)|0,t=e[s>>2]|0,!!t;)if((e[t+4>>2]&-8|0)==(_|0)){i=t;break e}else a=a<<1,i=t;e[s>>2]=N,e[N+24>>2]=i,e[N+12>>2]=N,e[N+8>>2]=N;break t}while(!1);Et=i+8|0,Q=e[Et>>2]|0,e[Q+12>>2]=N,e[Et>>2]=N,e[N+8>>2]=Q,e[N+12>>2]=i,e[N+24>>2]=0}while(!1);return Q=A+8|0,y=te,Q|0}else B=C}else B=C;else B=-1;while(!1);if(s=e[5414]|0,s>>>0>=B>>>0)return i=s-B|0,t=e[5417]|0,i>>>0>15?(Q=t+B|0,e[5417]=Q,e[5414]=i,e[Q+4>>2]=i|1,e[t+s>>2]=i,e[t+4>>2]=B|3):(e[5414]=0,e[5417]=0,e[t+4>>2]=s|3,Q=t+s+4|0,e[Q>>2]=e[Q>>2]|1),Q=t+8|0,y=te,Q|0;if(_=e[5415]|0,_>>>0>B>>>0)return lt=_-B|0,e[5415]=lt,Q=e[5418]|0,Et=Q+B|0,e[5418]=Et,e[Et+4>>2]=lt|1,e[Q+4>>2]=B|3,Q=Q+8|0,y=te,Q|0;if(e[5530]|0?t=e[5532]|0:(e[5532]=4096,e[5531]=4096,e[5533]=-1,e[5534]=-1,e[5535]=0,e[5523]=0,e[5530]=L&-16^1431655768,t=4096),A=B+48|0,v=B+47|0,f=t+v|0,h=0-t|0,C=f&h,C>>>0<=B>>>0||(t=e[5522]|0,t|0&&(N=e[5520]|0,L=N+C|0,L>>>0<=N>>>0|L>>>0>t>>>0)))return Q=0,y=te,Q|0;t:do if(e[5523]&4)i=0,j=143;else{s=e[5418]|0;e:do if(s){for(a=22096;L=e[a>>2]|0,!(L>>>0<=s>>>0&&(L+(e[a+4>>2]|0)|0)>>>0>s>>>0);)if(t=e[a+8>>2]|0,t)a=t;else{j=128;break e}if(i=f-_&h,i>>>0<2147483647)if(t=sr(i)|0,(t|0)==((e[a>>2]|0)+(e[a+4>>2]|0)|0)){if((t|0)!=-1){_=i,f=t,j=145;break t}}else a=t,j=136;else i=0}else j=128;while(!1);do if((j|0)==128)if(s=sr(0)|0,(s|0)!=-1&&(i=s,H=e[5531]|0,$=H+-1|0,i=(($&i|0)==0?0:($+i&0-H)-i|0)+C|0,H=e[5520]|0,$=i+H|0,i>>>0>B>>>0&i>>>0<2147483647)){if(L=e[5522]|0,L|0&&$>>>0<=H>>>0|$>>>0>L>>>0){i=0;break}if(t=sr(i)|0,(t|0)==(s|0)){_=i,f=s,j=145;break t}else a=t,j=136}else i=0;while(!1);do if((j|0)==136){if(s=0-i|0,!(A>>>0>i>>>0&(i>>>0<2147483647&(a|0)!=-1)))if((a|0)==-1){i=0;break}else{_=i,f=a,j=145;break t}if(t=e[5532]|0,t=v-i+t&0-t,t>>>0>=2147483647){_=i,f=a,j=145;break t}if((sr(t)|0)==-1){sr(s)|0,i=0;break}else{_=t+i|0,f=a,j=145;break t}}while(!1);e[5523]=e[5523]|4,j=143}while(!1);if((j|0)==143&&C>>>0<2147483647&&(lt=sr(C)|0,$=sr(0)|0,xt=$-lt|0,gt=xt>>>0>(B+40|0)>>>0,!((lt|0)==-1|gt^1|lt>>>0<$>>>0&((lt|0)!=-1&($|0)!=-1)^1))&&(_=gt?xt:i,f=lt,j=145),(j|0)==145){i=(e[5520]|0)+_|0,e[5520]=i,i>>>0>(e[5521]|0)>>>0&&(e[5521]=i),v=e[5418]|0;t:do if(v){for(i=22096;;){if(t=e[i>>2]|0,s=e[i+4>>2]|0,(f|0)==(t+s|0)){j=154;break}if(a=e[i+8>>2]|0,a)i=a;else break}if((j|0)==154&&(Et=i+4|0,(e[i+12>>2]&8|0)==0)&&f>>>0>v>>>0&t>>>0<=v>>>0){e[Et>>2]=s+_,Q=(e[5415]|0)+_|0,lt=v+8|0,lt=(lt&7|0)==0?0:0-lt&7,Et=v+lt|0,lt=Q-lt|0,e[5418]=Et,e[5415]=lt,e[Et+4>>2]=lt|1,e[v+Q+4>>2]=40,e[5419]=e[5534];break}for(f>>>0<(e[5416]|0)>>>0&&(e[5416]=f),s=f+_|0,i=22096;;){if((e[i>>2]|0)==(s|0)){j=162;break}if(t=e[i+8>>2]|0,t)i=t;else break}if((j|0)==162&&(e[i+12>>2]&8|0)==0){e[i>>2]=f,N=i+4|0,e[N>>2]=(e[N>>2]|0)+_,N=f+8|0,N=f+((N&7|0)==0?0:0-N&7)|0,i=s+8|0,i=s+((i&7|0)==0?0:0-i&7)|0,C=N+B|0,A=i-N-B|0,e[N+4>>2]=B|3;e:do if((v|0)==(i|0))Q=(e[5415]|0)+A|0,e[5415]=Q,e[5418]=C,e[C+4>>2]=Q|1;else{if((e[5417]|0)==(i|0)){Q=(e[5414]|0)+A|0,e[5414]=Q,e[5417]=C,e[C+4>>2]=Q|1,e[C+Q>>2]=Q;break}if(t=e[i+4>>2]|0,(t&3|0)==1){_=t&-8,a=t>>>3;i:do if(t>>>0<256)if(t=e[i+8>>2]|0,s=e[i+12>>2]|0,(s|0)==(t|0)){e[5412]=e[5412]&~(1<<a);break}else{e[t+12>>2]=s,e[s+8>>2]=t;break}else{f=e[i+24>>2]|0,t=e[i+12>>2]|0;do if((t|0)==(i|0)){if(s=i+16|0,a=s+4|0,t=e[a>>2]|0,t)s=a;else if(t=e[s>>2]|0,!t){t=0;break}for(;;)if(h=t+20|0,a=e[h>>2]|0,a)t=a,s=h;else if(h=t+16|0,a=e[h>>2]|0,a)t=a,s=h;else break;e[s>>2]=0}else Q=e[i+8>>2]|0,e[Q+12>>2]=t,e[t+8>>2]=Q;while(!1);if(!f)break;s=e[i+28>>2]|0,a=21952+(s<<2)|0;do if((e[a>>2]|0)!=(i|0)){if(Q=f+16|0,e[((e[Q>>2]|0)==(i|0)?Q:f+20|0)>>2]=t,!t)break i}else{if(e[a>>2]=t,t|0)break;e[5413]=e[5413]&~(1<<s);break i}while(!1);if(e[t+24>>2]=f,s=i+16|0,a=e[s>>2]|0,a|0&&(e[t+16>>2]=a,e[a+24>>2]=t),s=e[s+4>>2]|0,!s)break;e[t+20>>2]=s,e[s+24>>2]=t}while(!1);i=i+_|0,h=_+A|0}else h=A;if(i=i+4|0,e[i>>2]=e[i>>2]&-2,e[C+4>>2]=h|1,e[C+h>>2]=h,i=h>>>3,h>>>0<256){s=21688+(i<<1<<2)|0,t=e[5412]|0,i=1<<i,t&i?(t=s+8|0,i=e[t>>2]|0):(e[5412]=t|i,i=s,t=s+8|0),e[t>>2]=C,e[i+12>>2]=C,e[C+8>>2]=i,e[C+12>>2]=s;break}i=h>>>8;do if(!i)a=0;else{if(h>>>0>16777215){a=31;break}Et=(i+1048320|0)>>>16&8,Q=i<<Et,lt=(Q+520192|0)>>>16&4,Q=Q<<lt,a=(Q+245760|0)>>>16&2,a=14-(lt|Et|a)+(Q<<a>>>15)|0,a=h>>>(a+7|0)&1|a<<1}while(!1);if(i=21952+(a<<2)|0,e[C+28>>2]=a,t=C+16|0,e[t+4>>2]=0,e[t>>2]=0,t=e[5413]|0,s=1<<a,!(t&s)){e[5413]=t|s,e[i>>2]=C,e[C+24>>2]=i,e[C+12>>2]=C,e[C+8>>2]=C;break}i=e[i>>2]|0;i:do if((e[i+4>>2]&-8|0)!=(h|0)){for(a=h<<((a|0)==31?0:25-(a>>>1)|0);s=i+16+(a>>>31<<2)|0,t=e[s>>2]|0,!!t;)if((e[t+4>>2]&-8|0)==(h|0)){i=t;break i}else a=a<<1,i=t;e[s>>2]=C,e[C+24>>2]=i,e[C+12>>2]=C,e[C+8>>2]=C;break e}while(!1);Et=i+8|0,Q=e[Et>>2]|0,e[Q+12>>2]=C,e[Et>>2]=C,e[C+8>>2]=Q,e[C+12>>2]=i,e[C+24>>2]=0}while(!1);return Q=N+8|0,y=te,Q|0}for(i=22096;t=e[i>>2]|0,!(t>>>0<=v>>>0&&(Q=t+(e[i+4>>2]|0)|0,Q>>>0>v>>>0));)i=e[i+8>>2]|0;h=Q+-47|0,t=h+8|0,t=h+((t&7|0)==0?0:0-t&7)|0,h=v+16|0,t=t>>>0<h>>>0?v:t,i=t+8|0,s=_+-40|0,lt=f+8|0,lt=(lt&7|0)==0?0:0-lt&7,Et=f+lt|0,lt=s-lt|0,e[5418]=Et,e[5415]=lt,e[Et+4>>2]=lt|1,e[f+s+4>>2]=40,e[5419]=e[5534],s=t+4|0,e[s>>2]=27,e[i>>2]=e[5524],e[i+4>>2]=e[5525],e[i+8>>2]=e[5526],e[i+12>>2]=e[5527],e[5524]=f,e[5525]=_,e[5527]=0,e[5526]=i,i=t+24|0;do Et=i,i=i+4|0,e[i>>2]=7;while((Et+8|0)>>>0<Q>>>0);if((t|0)!=(v|0)){if(f=t-v|0,e[s>>2]=e[s>>2]&-2,e[v+4>>2]=f|1,e[t>>2]=f,i=f>>>3,f>>>0<256){s=21688+(i<<1<<2)|0,t=e[5412]|0,i=1<<i,t&i?(t=s+8|0,i=e[t>>2]|0):(e[5412]=t|i,i=s,t=s+8|0),e[t>>2]=v,e[i+12>>2]=v,e[v+8>>2]=i,e[v+12>>2]=s;break}if(i=f>>>8,i?f>>>0>16777215?a=31:(Et=(i+1048320|0)>>>16&8,Q=i<<Et,lt=(Q+520192|0)>>>16&4,Q=Q<<lt,a=(Q+245760|0)>>>16&2,a=14-(lt|Et|a)+(Q<<a>>>15)|0,a=f>>>(a+7|0)&1|a<<1):a=0,s=21952+(a<<2)|0,e[v+28>>2]=a,e[v+20>>2]=0,e[h>>2]=0,i=e[5413]|0,t=1<<a,!(i&t)){e[5413]=i|t,e[s>>2]=v,e[v+24>>2]=s,e[v+12>>2]=v,e[v+8>>2]=v;break}i=e[s>>2]|0;e:do if((e[i+4>>2]&-8|0)!=(f|0)){for(a=f<<((a|0)==31?0:25-(a>>>1)|0);s=i+16+(a>>>31<<2)|0,t=e[s>>2]|0,!!t;)if((e[t+4>>2]&-8|0)==(f|0)){i=t;break e}else a=a<<1,i=t;e[s>>2]=v,e[v+24>>2]=i,e[v+12>>2]=v,e[v+8>>2]=v;break t}while(!1);Et=i+8|0,Q=e[Et>>2]|0,e[Q+12>>2]=v,e[Et>>2]=v,e[v+8>>2]=Q,e[v+12>>2]=i,e[v+24>>2]=0}}else Q=e[5416]|0,(Q|0)==0|f>>>0<Q>>>0&&(e[5416]=f),e[5524]=f,e[5525]=_,e[5527]=0,e[5421]=e[5530],e[5420]=-1,e[5425]=21688,e[5424]=21688,e[5427]=21696,e[5426]=21696,e[5429]=21704,e[5428]=21704,e[5431]=21712,e[5430]=21712,e[5433]=21720,e[5432]=21720,e[5435]=21728,e[5434]=21728,e[5437]=21736,e[5436]=21736,e[5439]=21744,e[5438]=21744,e[5441]=21752,e[5440]=21752,e[5443]=21760,e[5442]=21760,e[5445]=21768,e[5444]=21768,e[5447]=21776,e[5446]=21776,e[5449]=21784,e[5448]=21784,e[5451]=21792,e[5450]=21792,e[5453]=21800,e[5452]=21800,e[5455]=21808,e[5454]=21808,e[5457]=21816,e[5456]=21816,e[5459]=21824,e[5458]=21824,e[5461]=21832,e[5460]=21832,e[5463]=21840,e[5462]=21840,e[5465]=21848,e[5464]=21848,e[5467]=21856,e[5466]=21856,e[5469]=21864,e[5468]=21864,e[5471]=21872,e[5470]=21872,e[5473]=21880,e[5472]=21880,e[5475]=21888,e[5474]=21888,e[5477]=21896,e[5476]=21896,e[5479]=21904,e[5478]=21904,e[5481]=21912,e[5480]=21912,e[5483]=21920,e[5482]=21920,e[5485]=21928,e[5484]=21928,e[5487]=21936,e[5486]=21936,Q=_+-40|0,lt=f+8|0,lt=(lt&7|0)==0?0:0-lt&7,Et=f+lt|0,lt=Q-lt|0,e[5418]=Et,e[5415]=lt,e[Et+4>>2]=lt|1,e[f+Q+4>>2]=40,e[5419]=e[5534];while(!1);if(i=e[5415]|0,i>>>0>B>>>0)return lt=i-B|0,e[5415]=lt,Q=e[5418]|0,Et=Q+B|0,e[5418]=Et,e[Et+4>>2]=lt|1,e[Q+4>>2]=B|3,Q=Q+8|0,y=te,Q|0}return e[(Xi()|0)>>2]=48,Q=0,y=te,Q|0}function ol(t){t=t|0;var i=0,s=0,a=0,h=0,f=0,_=0,A=0,v=0;if(t){s=t+-8|0,h=e[5416]|0,t=e[t+-4>>2]|0,i=t&-8,v=s+i|0;do if(t&1)A=s,_=s;else{if(a=e[s>>2]|0,!(t&3)||(_=s+(0-a)|0,f=a+i|0,_>>>0<h>>>0))return;if((e[5417]|0)==(_|0)){if(t=v+4|0,i=e[t>>2]|0,(i&3|0)!=3){A=_,i=f;break}e[5414]=f,e[t>>2]=i&-2,e[_+4>>2]=f|1,e[_+f>>2]=f;return}if(s=a>>>3,a>>>0<256)if(t=e[_+8>>2]|0,i=e[_+12>>2]|0,(i|0)==(t|0)){e[5412]=e[5412]&~(1<<s),A=_,i=f;break}else{e[t+12>>2]=i,e[i+8>>2]=t,A=_,i=f;break}h=e[_+24>>2]|0,t=e[_+12>>2]|0;do if((t|0)==(_|0)){if(i=_+16|0,s=i+4|0,t=e[s>>2]|0,t)i=s;else if(t=e[i>>2]|0,!t){t=0;break}for(;;)if(a=t+20|0,s=e[a>>2]|0,s)t=s,i=a;else if(a=t+16|0,s=e[a>>2]|0,s)t=s,i=a;else break;e[i>>2]=0}else A=e[_+8>>2]|0,e[A+12>>2]=t,e[t+8>>2]=A;while(!1);if(h){if(i=e[_+28>>2]|0,s=21952+(i<<2)|0,(e[s>>2]|0)==(_|0)){if(e[s>>2]=t,!t){e[5413]=e[5413]&~(1<<i),A=_,i=f;break}}else if(A=h+16|0,e[((e[A>>2]|0)==(_|0)?A:h+20|0)>>2]=t,!t){A=_,i=f;break}e[t+24>>2]=h,i=_+16|0,s=e[i>>2]|0,s|0&&(e[t+16>>2]=s,e[s+24>>2]=t),i=e[i+4>>2]|0,i?(e[t+20>>2]=i,e[i+24>>2]=t,A=_,i=f):(A=_,i=f)}else A=_,i=f}while(!1);if(!(_>>>0>=v>>>0)&&(t=v+4|0,a=e[t>>2]|0,!!(a&1))){if(a&2)e[t>>2]=a&-2,e[A+4>>2]=i|1,e[_+i>>2]=i,h=i;else{if((e[5418]|0)==(v|0)){if(v=(e[5415]|0)+i|0,e[5415]=v,e[5418]=A,e[A+4>>2]=v|1,(A|0)!=(e[5417]|0))return;e[5417]=0,e[5414]=0;return}if((e[5417]|0)==(v|0)){v=(e[5414]|0)+i|0,e[5414]=v,e[5417]=_,e[A+4>>2]=v|1,e[_+v>>2]=v;return}h=(a&-8)+i|0,s=a>>>3;do if(a>>>0<256)if(i=e[v+8>>2]|0,t=e[v+12>>2]|0,(t|0)==(i|0)){e[5412]=e[5412]&~(1<<s);break}else{e[i+12>>2]=t,e[t+8>>2]=i;break}else{f=e[v+24>>2]|0,t=e[v+12>>2]|0;do if((t|0)==(v|0)){if(i=v+16|0,s=i+4|0,t=e[s>>2]|0,t)i=s;else if(t=e[i>>2]|0,!t){s=0;break}for(;;)if(a=t+20|0,s=e[a>>2]|0,s)t=s,i=a;else if(a=t+16|0,s=e[a>>2]|0,s)t=s,i=a;else break;e[i>>2]=0,s=t}else s=e[v+8>>2]|0,e[s+12>>2]=t,e[t+8>>2]=s,s=t;while(!1);if(f|0){if(t=e[v+28>>2]|0,i=21952+(t<<2)|0,(e[i>>2]|0)==(v|0)){if(e[i>>2]=s,!s){e[5413]=e[5413]&~(1<<t);break}}else if(a=f+16|0,e[((e[a>>2]|0)==(v|0)?a:f+20|0)>>2]=s,!s)break;e[s+24>>2]=f,t=v+16|0,i=e[t>>2]|0,i|0&&(e[s+16>>2]=i,e[i+24>>2]=s),t=e[t+4>>2]|0,t|0&&(e[s+20>>2]=t,e[t+24>>2]=s)}}while(!1);if(e[A+4>>2]=h|1,e[_+h>>2]=h,(A|0)==(e[5417]|0)){e[5414]=h;return}}if(t=h>>>3,h>>>0<256){s=21688+(t<<1<<2)|0,i=e[5412]|0,t=1<<t,i&t?(i=s+8|0,t=e[i>>2]|0):(e[5412]=i|t,t=s,i=s+8|0),e[i>>2]=A,e[t+12>>2]=A,e[A+8>>2]=t,e[A+12>>2]=s;return}t=h>>>8,t?h>>>0>16777215?a=31:(_=(t+1048320|0)>>>16&8,v=t<<_,f=(v+520192|0)>>>16&4,v=v<<f,a=(v+245760|0)>>>16&2,a=14-(f|_|a)+(v<<a>>>15)|0,a=h>>>(a+7|0)&1|a<<1):a=0,t=21952+(a<<2)|0,e[A+28>>2]=a,e[A+20>>2]=0,e[A+16>>2]=0,i=e[5413]|0,s=1<<a;t:do if(!(i&s))e[5413]=i|s,e[t>>2]=A,e[A+24>>2]=t,e[A+12>>2]=A,e[A+8>>2]=A;else{t=e[t>>2]|0;e:do if((e[t+4>>2]&-8|0)!=(h|0)){for(a=h<<((a|0)==31?0:25-(a>>>1)|0);s=t+16+(a>>>31<<2)|0,i=e[s>>2]|0,!!i;)if((e[i+4>>2]&-8|0)==(h|0)){t=i;break e}else a=a<<1,t=i;e[s>>2]=A,e[A+24>>2]=t,e[A+12>>2]=A,e[A+8>>2]=A;break t}while(!1);_=t+8|0,v=e[_>>2]|0,e[v+12>>2]=A,e[_>>2]=A,e[A+8>>2]=v,e[A+12>>2]=t,e[A+24>>2]=0}while(!1);if(v=(e[5420]|0)+-1|0,e[5420]=v,!(v|0)){for(t=22104;t=e[t>>2]|0,t;)t=t+8|0;e[5420]=-1}}}}function sr(t){t=t|0;var i=0,s=0,a=0;a=t+3&-4,t=cu()|0,i=e[t>>2]|0,s=i+a|0;do if((a|0)<1|s>>>0>i>>>0){if(s>>>0>(ht()|0)>>>0&&(rt(s|0)|0)==0)break;return e[t>>2]=s,a=i,a|0}while(!1);return e[(Xi()|0)>>2]=48,a=-1,a|0}function qw(t){t=t|0;var i=0;return i=y,y=y+t|0,y=y+15&-16,i|0}function Qw(t){t=t|0,y=t}function Kw(){return y|0}function t2(t,i){t=t|0,i=i|0;var s=0,a=0,h=0,f=0;return f=t&65535,h=i&65535,s=Mt(h,f)|0,a=t>>>16,t=(s>>>16)+(Mt(h,a)|0)|0,h=i>>>16,i=Mt(h,f)|0,Bt((t>>>16)+(Mt(h,a)|0)+(((t&65535)+i|0)>>>16)|0),t+i<<16|s&65535|0|0}function al(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0;var h=0,f=0;return h=t,f=s,s=t2(h,f)|0,t=Nt()|0,Bt((Mt(i,f)|0)+(Mt(a,h)|0)+t|t&0|0),s|0|0|0}function fi(t,i,s,a){return t=t|0,i=i|0,s=s|0,a=a|0,s=t+s>>>0,Bt(i+a+(s>>>0<t>>>0|0)>>>0|0),s|0|0}function Or(t,i,s,a){return t=t|0,i=i|0,s=s|0,a=a|0,a=i-a-(s>>>0>t>>>0|0)>>>0,Bt(a|0),t-s>>>0|0|0}function au(t){return t=t|0,(t?31-(zt(t^t-1)|0)|0:32)|0}function e2(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0;var f=0,_=0,A=0,v=0,C=0,N=0,B=0,L=0,H=0,$=0;if(N=t,v=i,C=v,_=s,L=a,A=L,!C)return f=(h|0)!=0,A?f?(e[h>>2]=t|0,e[h+4>>2]=i&0,L=0,h=0,Bt(L|0),h|0):(L=0,h=0,Bt(L|0),h|0):(f&&(e[h>>2]=(N>>>0)%(_>>>0),e[h+4>>2]=0),L=0,h=(N>>>0)/(_>>>0)>>>0,Bt(L|0),h|0);f=(A|0)==0;do if(_){if(!f){if(f=(zt(A|0)|0)-(zt(C|0)|0)|0,f>>>0<=31){B=f+1|0,A=31-f|0,i=f-31>>31,_=B,t=N>>>(B>>>0)&i|C<<A,i=C>>>(B>>>0)&i,f=0,A=N<<A;break}return h?(e[h>>2]=t|0,e[h+4>>2]=v|i&0,L=0,h=0,Bt(L|0),h|0):(L=0,h=0,Bt(L|0),h|0)}if(f=_-1|0,f&_|0){A=(zt(_|0)|0)+33-(zt(C|0)|0)|0,$=64-A|0,B=32-A|0,v=B>>31,H=A-32|0,i=H>>31,_=A,t=B-1>>31&C>>>(H>>>0)|(C<<B|N>>>(A>>>0))&i,i=i&C>>>(A>>>0),f=N<<$&v,A=(C<<$|N>>>(H>>>0))&v|N<<B&A-33>>31;break}return h|0&&(e[h>>2]=f&N,e[h+4>>2]=0),(_|0)==1?(H=v|i&0,$=t|0|0,Bt(H|0),$|0):($=au(_|0)|0,H=C>>>($>>>0)|0,$=C<<32-$|N>>>($>>>0)|0,Bt(H|0),$|0)}else{if(f)return h|0&&(e[h>>2]=(C>>>0)%(_>>>0),e[h+4>>2]=0),H=0,$=(C>>>0)/(_>>>0)>>>0,Bt(H|0),$|0;if(!N)return h|0&&(e[h>>2]=0,e[h+4>>2]=(C>>>0)%(A>>>0)),H=0,$=(C>>>0)/(A>>>0)>>>0,Bt(H|0),$|0;if(f=A-1|0,!(f&A))return h|0&&(e[h>>2]=t|0,e[h+4>>2]=f&C|i&0),H=0,$=C>>>((au(A|0)|0)>>>0),Bt(H|0),$|0;if(f=(zt(A|0)|0)-(zt(C|0)|0)|0,f>>>0<=30){i=f+1|0,A=31-f|0,_=i,t=C<<A|N>>>(i>>>0),i=C>>>(i>>>0),f=0,A=N<<A;break}return h?(e[h>>2]=t|0,e[h+4>>2]=v|i&0,H=0,$=0,Bt(H|0),$|0):(H=0,$=0,Bt(H|0),$|0)}while(!1);if(!_)C=A,v=0,A=0;else{B=s|0|0,N=L|a&0,C=fi(B|0,N|0,-1,-1)|0,s=Nt()|0,v=A,A=0;do a=v,v=f>>>31|v<<1,f=A|f<<1,a=t<<1|a>>>31|0,L=t>>>31|i<<1|0,Or(C|0,s|0,a|0,L|0)|0,$=Nt()|0,H=$>>31|(($|0)<0?-1:0)<<1,A=H&1,t=Or(a|0,L|0,H&B|0,((($|0)<0?-1:0)>>31|(($|0)<0?-1:0)<<1)&N|0)|0,i=Nt()|0,_=_-1|0;while((_|0)!=0);C=v,v=0}return _=0,h|0&&(e[h>>2]=t,e[h+4>>2]=i),H=(f|0)>>>31|(C|_)<<1|(_<<1|f>>>31)&0|v,$=(f<<1|0)&-2|A,Bt(H|0),$|0}function ll(t,i,s,a){return t=t|0,i=i|0,s=s|0,a=a|0,e2(t,i,s,a,0)|0}function aa(t,i,s){return t=t|0,i=i|0,s=s|0,(s|0)<32?(Bt(i>>>s|0),t>>>s|(i&(1<<s)-1)<<32-s):(Bt(0),i>>>s-32|0)}function lu(t,i,s){return t=t|0,i=i|0,s=s|0,(s|0)<32?(Bt(i<<s|(t&(1<<s)-1<<32-s)>>>32-s|0),t<<s):(Bt(t<<s-32|0),0)}function cu(){return 22176}function hu(t){return t=t|0,(t&255)<<24|(t>>8&255)<<16|(t>>16&255)<<8|t>>>24|0}function ri(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0;if((s|0)>=512)return dt(t|0,i|0,s|0)|0,t|0;if(f=t|0,h=t+s|0,(t&3)==(i&3)){for(;t&3;){if(!s)return f|0;m[t>>0]=m[i>>0]|0,t=t+1|0,i=i+1|0,s=s-1|0}for(s=h&-4|0,a=s-64|0;(t|0)<=(a|0);)e[t>>2]=e[i>>2],e[t+4>>2]=e[i+4>>2],e[t+8>>2]=e[i+8>>2],e[t+12>>2]=e[i+12>>2],e[t+16>>2]=e[i+16>>2],e[t+20>>2]=e[i+20>>2],e[t+24>>2]=e[i+24>>2],e[t+28>>2]=e[i+28>>2],e[t+32>>2]=e[i+32>>2],e[t+36>>2]=e[i+36>>2],e[t+40>>2]=e[i+40>>2],e[t+44>>2]=e[i+44>>2],e[t+48>>2]=e[i+48>>2],e[t+52>>2]=e[i+52>>2],e[t+56>>2]=e[i+56>>2],e[t+60>>2]=e[i+60>>2],t=t+64|0,i=i+64|0;for(;(t|0)<(s|0);)e[t>>2]=e[i>>2],t=t+4|0,i=i+4|0}else for(s=h-4|0;(t|0)<(s|0);)m[t>>0]=m[i>>0]|0,m[t+1>>0]=m[i+1>>0]|0,m[t+2>>0]=m[i+2>>0]|0,m[t+3>>0]=m[i+3>>0]|0,t=t+4|0,i=i+4|0;for(;(t|0)<(h|0);)m[t>>0]=m[i>>0]|0,t=t+1|0,i=i+1|0;return f|0}function di(t,i,s){t=t|0,i=i|0,s=s|0;var a=0;if((i|0)<(t|0)&(t|0)<(i+s|0)){for(a=t,i=i+s|0,t=t+s|0;(s|0)>0;)t=t-1|0,i=i-1|0,s=s-1|0,m[t>>0]=m[i>>0]|0;t=a}else ri(t,i,s)|0;return t|0}function or(t,i,s){t=t|0,i=i|0,s=s|0;var a=0,h=0,f=0,_=0;if(f=t+s|0,i=i&255,(s|0)>=67){for(;t&3;)m[t>>0]=i,t=t+1|0;for(a=f&-4|0,_=i|i<<8|i<<16|i<<24,h=a-64|0;(t|0)<=(h|0);)e[t>>2]=_,e[t+4>>2]=_,e[t+8>>2]=_,e[t+12>>2]=_,e[t+16>>2]=_,e[t+20>>2]=_,e[t+24>>2]=_,e[t+28>>2]=_,e[t+32>>2]=_,e[t+36>>2]=_,e[t+40>>2]=_,e[t+44>>2]=_,e[t+48>>2]=_,e[t+52>>2]=_,e[t+56>>2]=_,e[t+60>>2]=_,t=t+64|0;for(;(t|0)<(a|0);)e[t>>2]=_,t=t+4|0}for(;(t|0)<(f|0);)m[t>>0]=i,t=t+1|0;return f-s|0}function i2(t){return t=t|0,ul[t&3]()|0}function n2(t,i){return t=t|0,i=i|0,la[t&15](i|0)|0}function r2(t,i,s,a,h,f,_){return t=t|0,i=i|0,s=+s,a=a|0,h=h|0,f=f|0,_=_|0,pu[t&1](i|0,+s,a|0,h|0,f|0,_|0)|0}function s2(t,i,s){return t=t|0,i=i|0,s=s|0,Ns[t&63](i|0,s|0)|0}function o2(t,i,s,a){return t=t|0,i=i|0,s=s|0,a=a|0,Ir[t&7](i|0,s|0,a|0)|0}function a2(t){t=t|0,_u[t&3]()}function l2(t,i){t=t|0,i=i|0,re[t&255](i|0)}function c2(t,i,s){t=t|0,i=i|0,s=s|0,bn[t&15](i|0,s|0)}function h2(t,i,s,a){t=t|0,i=i|0,s=s|0,a=a|0,Gs[t&15](i|0,s|0,a|0)}function u2(t,i,s,a,h){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,Bs[t&7](i|0,s|0,a|0,h|0)}function f2(t,i,s,a,h,f){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,f=f|0,ca[t&3](i|0,s|0,a|0,h|0,f|0)}function d2(t,i,s,a,h,f,_){t=t|0,i=i|0,s=s|0,a=a|0,h=h|0,f=f|0,_=_|0,Os[t&3](i|0,s|0,a|0,h|0,f|0,_|0)}function uu(){return Dt(0),0}function cl(t){return Dt(1),0}function p2(t,i,s,a,h,f){return Dt(2),0}function he(t,i){return Dt(3),0}function fu(t,i,s){return Dt(4),0}function du(){Dt(5)}function at(t){Dt(6)}function En(t,i){Dt(7)}function ar(t,i,s){Dt(8)}function hl(t,i,s,a){Dt(9)}function _2(t,i,s,a,h){Dt(10)}function A2(t,i,s,a,h,f){Dt(11)}var ul=[uu,nv,Zv,uu],la=[cl,j8,N1,L1,W8,z8,Mw,Gw,Zw,j4,Se,Fv,sv,Dv,cl,cl],pu=[p2,a8],Ns=[he,Kd,s1,U1,Ip,a_,d_,g_,v_,M_,O_,W_,eA,oA,fA,gA,UA,jA,QA,im,hm,_m,wm,Em,Nm,zm,Ym,Qm,ng,cg,yg,bg,Gg,Zg,Qg,r4,p4,M4,T4,O4,D4,Sv,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he],Ir=[fu,m8,F8,q8,K8,Ow,Iw,fu],_u=[du,J8,S8,du],re=[at,Cw,qd,Qd,t1,n1,r1,o1,ni,S1,V1,k1,B1,O1,X1,j1,ep,ip,dp,pp,_p,xp,Bp,Op,Up,r_,Fc,l_,c_,h_,u_,f_,p_,Nc,m_,y_,w_,G_,B_,I_,Zc,V_,K_,tA,iA,jc,sA,hA,uA,dA,$c,mA,OA,IA,LA,fh,HA,$A,qA,KA,dh,nm,lm,cm,um,ph,Am,vm,ym,Mm,gh,bm,Fm,km,Gm,Wm,Zm,Dm,jm,Hm,Jm,yh,Km,eg,ig,rg,wh,lg,gg,vg,wg,Ch,Eg,kg,Ng,Bg,Sh,Wg,$g,qg,Kg,Eh,n4,f4,d4,_4,bh,w4,P4,x4,F4,Rh,B4,Z4,z4,X4,R8,P8,x8,T8,B8,L8,V8,na,Z8,X8,H8,Y8,$8,Q8,iw,yw,ww,kw,Nw,Ww,ou,jw,J4,Gv,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at],bn=[En,G1,I1,ye,ci,mt,Ft,ke,l8,En,En,En,En,En,En,En],Gs=[ar,Bw,Uw,zw,Dw,pe,Ie,gv,iy,ly,ar,ar,ar,ar,ar,ar],Bs=[hl,G8,U8,sw,fv,qv,hl,hl],ca=[_2,N8,I8,rw],Os=[A2,k8,O8,nw];return{__ZSt18uncaught_exceptionv:gw,___cxa_can_catch:_w,___cxa_is_pointer_type:Aw,___embind_register_native_and_builtin_types:Nh,___errno_location:Xi,___getTypeName:t8,___muldi3:al,___udivdi3:ll,_bitshift64Lshr:aa,_bitshift64Shl:lu,_emscripten_get_sbrk_ptr:cu,_free:ol,_i64Add:fi,_i64Subtract:Or,_llvm_bswap_i32:hu,_malloc:oa,_memcpy:ri,_memmove:di,_memset:or,dynCall_i:i2,dynCall_ii:n2,dynCall_iidiiii:r2,dynCall_iii:s2,dynCall_iiii:o2,dynCall_v:a2,dynCall_vi:l2,dynCall_vii:c2,dynCall_viii:h2,dynCall_viiii:u2,dynCall_viiiii:f2,dynCall_viiiiii:d2,globalCtors:jt,stackAlloc:qw,stackRestore:Qw,stackSave:Kw}})(w0,M0,Vt),Hn=r.__ZSt18uncaught_exceptionv=Jt.__ZSt18uncaught_exceptionv;r.___cxa_can_catch=Jt.___cxa_can_catch,r.___cxa_is_pointer_type=Jt.___cxa_is_pointer_type,r.___embind_register_native_and_builtin_types=Jt.___embind_register_native_and_builtin_types,r.___errno_location=Jt.___errno_location;var C0=r.___getTypeName=Jt.___getTypeName;r.___muldi3=Jt.___muldi3,r.___udivdi3=Jt.___udivdi3,r._bitshift64Lshr=Jt._bitshift64Lshr,r._bitshift64Shl=Jt._bitshift64Shl,r._emscripten_get_sbrk_ptr=Jt._emscripten_get_sbrk_ptr;var Ii=r._free=Jt._free;r._i64Add=Jt._i64Add,r._i64Subtract=Jt._i64Subtract,r._llvm_bswap_i32=Jt._llvm_bswap_i32;var _s=r._malloc=Jt._malloc;r._memcpy=Jt._memcpy,r._memmove=Jt._memmove,r._memset=Jt._memset;var S0=r.globalCtors=Jt.globalCtors;if(r.stackAlloc=Jt.stackAlloc,r.stackRestore=Jt.stackRestore,r.stackSave=Jt.stackSave,r.dynCall_i=Jt.dynCall_i,r.dynCall_ii=Jt.dynCall_ii,r.dynCall_iidiiii=Jt.dynCall_iidiiii,r.dynCall_iii=Jt.dynCall_iii,r.dynCall_iiii=Jt.dynCall_iiii,r.dynCall_v=Jt.dynCall_v,r.dynCall_vi=Jt.dynCall_vi,r.dynCall_vii=Jt.dynCall_vii,r.dynCall_viii=Jt.dynCall_viii,r.dynCall_viiii=Jt.dynCall_viiii,r.dynCall_viiiii=Jt.dynCall_viiiii,r.dynCall_viiiiii=Jt.dynCall_viiiiii,r.asm=Jt,ai)if(me(ai)||(ai=g(ai)),u||p){var E0=E(ai);Rt.set(E0,D)}else{La();var Yn=function(k){k.byteLength&&(k=new Uint8Array(k)),Rt.set(k,D),r.memoryInitializerRequest&&delete r.memoryInitializerRequest.response,Te()},Io=function(){M(ai,Yn,function(){var k=new Error("could not load memory initializer "+ai);throw k})},Mn=Oi(ai);if(Mn)Yn(Mn.buffer);else if(r.memoryInitializerRequest){var Uo=function(){var k=r.memoryInitializerRequest,T=k.response;if(k.status!==200&&k.status!==0){var V=Oi(r.memoryInitializerRequestURL);if(V)T=V.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+k.status+", retrying "+ai),Io();return}}Yn(T)};r.memoryInitializerRequest.response?setTimeout(Uo,0):r.memoryInitializerRequest.addEventListener("load",Uo)}else Io()}var Er;function b0(k){this.name="ExitStatus",this.message="Program terminated with exit("+k+")",this.status=k}Un=function k(){Er||As(),Er||(Un=k)};function As(k){if(qe>0||(Oa(),qe>0))return;function T(){Er||(Er=!0,r.calledRun=!0,!tt&&(Ia(),Ua(),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Hi()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),T()},1)):T()}if(r.run=As,r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return As(),r}let un=null;const Md={0:r=>({position:[r.getInt32(0,!0),r.getInt32(4,!0),r.getInt32(8,!0)],intensity:r.getUint16(12,!0),classification:r.getUint8(15)}),1:r=>({position:[r.getInt32(0,!0),r.getInt32(4,!0),r.getInt32(8,!0)],intensity:r.getUint16(12,!0),classification:r.getUint8(15)}),2:r=>({position:[r.getInt32(0,!0),r.getInt32(4,!0),r.getInt32(8,!0)],intensity:r.getUint16(12,!0),classification:r.getUint8(15),color:[r.getUint16(20,!0),r.getUint16(22,!0),r.getUint16(24,!0)]}),3:r=>({position:[r.getInt32(0,!0),r.getInt32(4,!0),r.getInt32(8,!0)],intensity:r.getUint16(12,!0),classification:r.getUint8(15),color:[r.getUint16(28,!0),r.getUint16(30,!0),r.getUint16(32,!0)]})};function Rn(r,n={},o,l){l=l===void 0||l===0?1:l;const c=r.slice(o,o+n.BYTES_PER_ELEMENT*l),u=new n(c);if(l===1)return u[0];const p=[];for(let d=0;d<l;d++)p.push(u[d]);return p}function Cd(r){let n=131;const o={pointsOffset:Rn(r,Uint32Array,96),pointsFormatId:Rn(r,Uint8Array,104),pointsStructSize:Rn(r,Uint16Array,105),pointsCount:Rn(r,Uint32Array,107),scale:Rn(r,Float64Array,n,3)};n+=24,o.offset=Rn(r,Float64Array,n,3),n+=24;const l=Rn(r,Float64Array,n,6);return n+=48,o.maxs=[l[0],l[2],l[4]],o.mins=[l[1],l[3],l[5]],o}let Z6=class{constructor(n){I(this,"arraybuffer"),I(this,"readOffset",0),I(this,"header",{pointsOffset:0,pointsFormatId:0,pointsStructSize:0,pointsCount:0,scale:[0,0,0],offset:[0,0,0],maxs:[0],mins:[0],totalToRead:0,totalRead:0,versionAsString:"",isCompressed:!0}),this.arraybuffer=n}open(){return!0}getHeader(){return this.header=Cd(this.arraybuffer),this.header}readData(n,o){const{header:l,arraybuffer:c}=this;if(!l)throw new Error("Cannot start reading data till a header request is issued");let{readOffset:u}=this,p;if(o<=1){n=Math.min(n,l.pointsCount-u),p=l.pointsOffset+u*l.pointsStructSize;const E=p+n*l.pointsStructSize;return u+=n,this.readOffset=u,{buffer:c.slice(p,E),count:n,hasMoreData:u<l.pointsCount}}const d=Math.min(n*o,l.pointsCount-u),g=Math.ceil(d/o);let w=0;const M=new Uint8Array(g*l.pointsStructSize);for(let E=0;E<d;E++){if(E%o===0){p=l.pointsOffset+u*l.pointsStructSize;const S=new Uint8Array(c,p,l.pointsStructSize);M.set(S,w*l.pointsStructSize),w++}u++}return this.readOffset=u,{buffer:M.buffer,count:w,hasMoreData:u<l.pointsCount}}close(){return this.arraybuffer=null,!0}};class z6{constructor(n){I(this,"arraybuffer"),I(this,"instance",null),I(this,"header",null),this.arraybuffer=n,un||(un=W6())}open(){try{const{arraybuffer:n}=this;this.instance=new un.LASZip;const o=new Uint8Array(n),l=un._malloc(n.byteLength);return this.instance.arraybuffer=n,this.instance.buf=l,un.HEAPU8.set(o,l),this.instance.open(l,n.byteLength),this.instance.readOffset=0,!0}catch(n){throw new Error(`Failed to open file: ${n.message}`)}}getHeader(){if(!this.instance)throw new Error("You need to open the file before trying to read header");try{const n=Cd(this.instance.arraybuffer);return n.pointsFormatId&=63,this.header=n,n}catch(n){throw new Error(`Failed to get header: ${n.message}`)}}readData(n,o,l){if(!this.instance)throw new Error("You need to open the file before trying to read stuff");const{header:c,instance:u}=this;if(!c)throw new Error("You need to query header before reading, I maintain state that way, sorry :(");try{const p=Math.min(n*l,c.pointsCount-u.readOffset),d=Math.ceil(p/l);let g=0;const w=new Uint8Array(d*c.pointsStructSize),M=un._malloc(c.pointsStructSize);for(let E=0;E<p;E++){if(u.getPoint(M),E%l===0){const S=new Uint8Array(un.HEAPU8.buffer,M,c.pointsStructSize);w.set(S,g*c.pointsStructSize),g++}u.readOffset++}return un._free(M),{buffer:w.buffer,count:g,hasMoreData:u.readOffset<c.pointsCount}}catch(p){throw new Error(`Failed to read data: ${p.message}`)}}close(){try{return this.instance!==null&&(un._free(this.instance.buf),this.instance.delete(),this.instance=null),!0}catch(n){throw new Error(`Failed to close file: ${n.message}`)}}}class D6{constructor(n,o,l){I(this,"arrayb"),I(this,"decoder"),I(this,"pointsCount"),I(this,"pointSize"),I(this,"scale"),I(this,"offset"),I(this,"mins"),I(this,"maxs"),this.arrayb=n,this.decoder=Md[l.pointsFormatId],this.pointsCount=o,this.pointSize=l.pointsStructSize,this.scale=l.scale,this.offset=l.offset,this.mins=l.mins,this.maxs=l.maxs}getPoint(n){if(n<0||n>=this.pointsCount)throw new Error("Point index out of range");const o=new DataView(this.arrayb,n*this.pointSize,this.pointSize);return this.decoder(o)}}class X6{constructor(n){if(I(this,"arraybuffer"),I(this,"formatId",0),I(this,"loader"),I(this,"isCompressed",!0),I(this,"isOpen",!1),I(this,"version",0),I(this,"versionAsString",""),this.arraybuffer=n,this.determineVersion()>13)throw new Error("Only file versions <= 1.3 are supported at this time");if(this.determineFormat(),Md[this.formatId]===void 0)throw new Error("The point format ID is not supported");this.loader=this.isCompressed?new z6(this.arraybuffer):new Z6(this.arraybuffer)}determineFormat(){const n=Rn(this.arraybuffer,Uint8Array,104),o=(n&128)>>7,l=(n&64)>>6;if(o===1&&l===1)throw new Error("Old style compression not supported");this.formatId=n&63,this.isCompressed=o===1||l===1}determineVersion(){const n=new Int8Array(this.arraybuffer,24,2);return this.version=n[0]*10+n[1],this.versionAsString=`${n[0]}.${n[1]}`,this.version}open(){this.loader.open()&&(this.isOpen=!0)}getHeader(){return this.loader.getHeader()}readData(n,o,l){return this.loader.readData(n,o,l)}close(){this.loader.close()&&(this.isOpen=!1)}getUnpacker(){return D6}}function j6(r,n){const o=H6(r);return B6(n,o)}function H6(r){const n={};return n.las_pointsOffset=r.pointsOffset.toString(10),n.las_pointsFormatId=r.pointsFormatId.toString(10),n.las_pointsStructSize=r.pointsStructSize.toString(10),n.las_pointsCount=r.pointsCount.toString(10),n.las_scale=JSON.stringify(r.scale),n.las_offset=JSON.stringify(r.offset),r.maxs!==void 0&&(n.las_maxs=JSON.stringify(r.maxs)),r.mins!==void 0&&(n.las_mins=JSON.stringify(r.mins)),n.las_totalToRead=r.totalToRead.toString(10),n.las_pointsFortotalReadmatId=r.totalRead.toString(10),r.versionAsString!==void 0&&(n.las_versionAsString=r.versionAsString),r.isCompressed!==void 0&&(n.las_isCompressed=r.isCompressed.toString()),n}function df(r,n){return Y6(r,n)}function Y6(r,n={}){var o;let l=0,c,u,p,d,g;const w={loader:"las",loaderData:{},schema:{fields:[],metadata:{}},header:{vertexCount:0,boundingBox:[[0,0,0],[0,0,0]]},attributes:{},topology:"point-list",mode:0};return J6(r,(o=n.las)==null?void 0:o.skip,(M={},E)=>{var S,P,x;if(!g){g=E;const nt=E.totalToRead,ut=(S=n.las)!=null&&S.fp64?Float64Array:Float32Array;c=new ut(nt*3),u=E.pointsFormatId>=2?new Uint8Array(nt*4):null,p=new Uint16Array(nt),d=new Uint8Array(nt),w.loaderData=E,w.attributes={POSITION:{value:c,size:3},intensity:{value:p,size:1},classification:{value:d,size:1}},u&&(w.attributes.COLOR_0={value:u,size:4})}const F=M.pointsCount,{scale:[G,Z,W],offset:[D,tt,q]}=E,K=$6(M,F,(P=n.las)==null?void 0:P.colorDepth);for(let nt=0;nt<F;nt++){const{position:ut,color:st,intensity:vt,classification:Pt}=M.getPoint(nt);c[l*3]=ut[0]*G+D,c[l*3+1]=ut[1]*Z+tt,c[l*3+2]=ut[2]*W+q,st&&u&&(K?(u[l*4]=st[0]/256,u[l*4+1]=st[1]/256,u[l*4+2]=st[2]/256):(u[l*4]=st[0],u[l*4+1]=st[1],u[l*4+2]=st[2]),u[l*4+3]=255),p[l]=vt,d[l]=Pt,l++}const _t={...w,header:{vertexCount:E.totalRead},progress:E.totalRead/E.totalToRead};(x=n?.onProgress)==null||x.call(n,_t)}),w.header={vertexCount:g.totalToRead,boundingBox:G6(w?.attributes||{})},w&&(w.schema=j6(w.loaderData,w.attributes)),w}function J6(r,n,o={}){const l=new X6(r);try{l.open();const c=l.getHeader(),u=l.getUnpacker(),p=Math.ceil(c.pointsCount/Math.max(1,n));c.totalToRead=p;let d=0;for(;;){const g=l.readData(1e5,0,n);d+=g.count,c.totalRead=d,c.versionAsString=g.versionAsString,c.isCompressed=g.isCompressed;const w=new u(g.buffer,g.count,c);if(o(w,c),!g.hasMoreData||d>=p)break}}catch(c){throw c}finally{l.close()}}function $6(r={},n,o){let l=!1;switch(o){case 8:l=!1;break;case 16:l=!0;break;case"auto":if(r.getPoint(0).color)for(let c=0;c<n;c++){const{color:u}=r.getPoint(c);(u[0]>255||u[1]>255||u[2]>255)&&(l=!0)}break;default:console.warn("las: illegal value for options.las.colorDepth");break}return l}const Sd={...V6,parse:async(r,n)=>df(r,n),parseSync:(r,n)=>df(r,n)};function q6(r){r("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),r("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),r("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var n=1;n<=60;++n)r("EPSG:"+(32600+n),"+proj=utm +zone="+n+" +datum=WGS84 +units=m"),r("EPSG:"+(32700+n),"+proj=utm +zone="+n+" +south +datum=WGS84 +units=m");r("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),r("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),r.WGS84=r["EPSG:4326"],r["EPSG:3785"]=r["EPSG:3857"],r.GOOGLE=r["EPSG:3857"],r["EPSG:900913"]=r["EPSG:3857"],r["EPSG:102113"]=r["EPSG:3857"]}var Ar=1,mr=2,$r=3,Q6=4,kl=5,pf=6378137,K6=6356752314e-3,_f=.0066943799901413165,io=484813681109536e-20,pt=Math.PI/2,tM=.16666666666666666,eM=.04722222222222222,iM=.022156084656084655,wt=1e-10,de=.017453292519943295,Ye=57.29577951308232,ie=Math.PI/4,lo=Math.PI*2,_e=3.14159265359,Je={};Je.greenwich=0;Je.lisbon=-9.131906111111;Je.paris=2.337229166667;Je.bogota=-74.080916666667;Je.madrid=-3.687938888889;Je.rome=12.452333333333;Je.bern=7.439583333333;Je.jakarta=106.807719444444;Je.ferro=-17.666666666667;Je.brussels=4.367975;Je.stockholm=18.058277777778;Je.athens=23.7163375;Je.oslo=10.722916666667;const nM={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var Af=/[\s_\-\/\(\)]/g;function Nn(r,n){if(r[n])return r[n];for(var o=Object.keys(r),l=n.toLowerCase().replace(Af,""),c=-1,u,p;++c<o.length;)if(u=o[c],p=u.toLowerCase().replace(Af,""),p===l)return r[u]}function Nl(r){var n={},o=r.split("+").map(function(d){return d.trim()}).filter(function(d){return d}).reduce(function(d,g){var w=g.split("=");return w.push(!0),d[w[0].toLowerCase()]=w[1],d},{}),l,c,u,p={proj:"projName",datum:"datumCode",rf:function(d){n.rf=parseFloat(d)},lat_0:function(d){n.lat0=d*de},lat_1:function(d){n.lat1=d*de},lat_2:function(d){n.lat2=d*de},lat_ts:function(d){n.lat_ts=d*de},lon_0:function(d){n.long0=d*de},lon_1:function(d){n.long1=d*de},lon_2:function(d){n.long2=d*de},alpha:function(d){n.alpha=parseFloat(d)*de},gamma:function(d){n.rectified_grid_angle=parseFloat(d)*de},lonc:function(d){n.longc=d*de},x_0:function(d){n.x0=parseFloat(d)},y_0:function(d){n.y0=parseFloat(d)},k_0:function(d){n.k0=parseFloat(d)},k:function(d){n.k0=parseFloat(d)},a:function(d){n.a=parseFloat(d)},b:function(d){n.b=parseFloat(d)},r:function(d){n.a=n.b=parseFloat(d)},r_a:function(){n.R_A=!0},zone:function(d){n.zone=parseInt(d,10)},south:function(){n.utmSouth=!0},towgs84:function(d){n.datum_params=d.split(",").map(function(g){return parseFloat(g)})},to_meter:function(d){n.to_meter=parseFloat(d)},units:function(d){n.units=d;var g=Nn(nM,d);g&&(n.to_meter=g.to_meter)},from_greenwich:function(d){n.from_greenwich=d*de},pm:function(d){var g=Nn(Je,d);n.from_greenwich=(g||parseFloat(d))*de},nadgrids:function(d){d==="@null"?n.datumCode="none":n.nadgrids=d},axis:function(d){var g="ewnsud";d.length===3&&g.indexOf(d.substr(0,1))!==-1&&g.indexOf(d.substr(1,1))!==-1&&g.indexOf(d.substr(2,1))!==-1&&(n.axis=d)},approx:function(){n.approx=!0},over:function(){n.over=!0}};for(l in o)c=o[l],l in p?(u=p[l],typeof u=="function"?u(c):n[u]=c):n[l]=c;return typeof n.datumCode=="string"&&n.datumCode!=="WGS84"&&(n.datumCode=n.datumCode.toLowerCase()),n.projStr=r,n}class Ed{static getId(n){const o=n.find(l=>Array.isArray(l)&&l[0]==="ID");return o&&o.length>=3?{authority:o[1],code:parseInt(o[2],10)}:null}static convertUnit(n,o="unit"){if(!n||n.length<3)return{type:o,name:"unknown",conversion_factor:null};const l=n[1],c=parseFloat(n[2])||null,u=n.find(d=>Array.isArray(d)&&d[0]==="ID"),p=u?{authority:u[1],code:parseInt(u[2],10)}:null;return{type:o,name:l,conversion_factor:c,id:p}}static convertAxis(n){const o=n[1]||"Unknown";let l;const c=o.match(/^\((.)\)$/);if(c){const w=c[1].toUpperCase();if(w==="E")l="east";else if(w==="N")l="north";else if(w==="U")l="up";else throw new Error(`Unknown axis abbreviation: ${w}`)}else l=n[2]?n[2].toLowerCase():"unknown";const u=n.find(w=>Array.isArray(w)&&w[0]==="ORDER"),p=u?parseInt(u[1],10):null,d=n.find(w=>Array.isArray(w)&&(w[0]==="LENGTHUNIT"||w[0]==="ANGLEUNIT"||w[0]==="SCALEUNIT")),g=this.convertUnit(d);return{name:o,direction:l,unit:g,order:p}}static extractAxes(n){return n.filter(o=>Array.isArray(o)&&o[0]==="AXIS").map(o=>this.convertAxis(o)).sort((o,l)=>(o.order||0)-(l.order||0))}static convert(n,o={}){switch(n[0]){case"PROJCRS":o.type="ProjectedCRS",o.name=n[1],o.base_crs=n.find(S=>Array.isArray(S)&&S[0]==="BASEGEOGCRS")?this.convert(n.find(S=>Array.isArray(S)&&S[0]==="BASEGEOGCRS")):null,o.conversion=n.find(S=>Array.isArray(S)&&S[0]==="CONVERSION")?this.convert(n.find(S=>Array.isArray(S)&&S[0]==="CONVERSION")):null;const l=n.find(S=>Array.isArray(S)&&S[0]==="CS");l&&(o.coordinate_system={type:l[1],axis:this.extractAxes(n)});const c=n.find(S=>Array.isArray(S)&&S[0]==="LENGTHUNIT");if(c){const S=this.convertUnit(c);o.coordinate_system.unit=S}o.id=this.getId(n);break;case"BASEGEOGCRS":case"GEOGCRS":o.type="GeographicCRS",o.name=n[1];const u=n.find(S=>Array.isArray(S)&&(S[0]==="DATUM"||S[0]==="ENSEMBLE"));if(u){const S=this.convert(u);u[0]==="ENSEMBLE"?o.datum_ensemble=S:o.datum=S;const P=n.find(x=>Array.isArray(x)&&x[0]==="PRIMEM");P&&P[1]!=="Greenwich"&&(S.prime_meridian={name:P[1],longitude:parseFloat(P[2])})}o.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(n)},o.id=this.getId(n);break;case"DATUM":o.type="GeodeticReferenceFrame",o.name=n[1],o.ellipsoid=n.find(S=>Array.isArray(S)&&S[0]==="ELLIPSOID")?this.convert(n.find(S=>Array.isArray(S)&&S[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":o.type="DatumEnsemble",o.name=n[1],o.members=n.filter(S=>Array.isArray(S)&&S[0]==="MEMBER").map(S=>({type:"DatumEnsembleMember",name:S[1],id:this.getId(S)}));const p=n.find(S=>Array.isArray(S)&&S[0]==="ENSEMBLEACCURACY");p&&(o.accuracy=parseFloat(p[1]));const d=n.find(S=>Array.isArray(S)&&S[0]==="ELLIPSOID");d&&(o.ellipsoid=this.convert(d)),o.id=this.getId(n);break;case"ELLIPSOID":o.type="Ellipsoid",o.name=n[1],o.semi_major_axis=parseFloat(n[2]),o.inverse_flattening=parseFloat(n[3]),n.find(S=>Array.isArray(S)&&S[0]==="LENGTHUNIT")&&this.convert(n.find(S=>Array.isArray(S)&&S[0]==="LENGTHUNIT"),o);break;case"CONVERSION":o.type="Conversion",o.name=n[1],o.method=n.find(S=>Array.isArray(S)&&S[0]==="METHOD")?this.convert(n.find(S=>Array.isArray(S)&&S[0]==="METHOD")):null,o.parameters=n.filter(S=>Array.isArray(S)&&S[0]==="PARAMETER").map(S=>this.convert(S));break;case"METHOD":o.type="Method",o.name=n[1],o.id=this.getId(n);break;case"PARAMETER":o.type="Parameter",o.name=n[1],o.value=parseFloat(n[2]),o.unit=this.convertUnit(n.find(S=>Array.isArray(S)&&(S[0]==="LENGTHUNIT"||S[0]==="ANGLEUNIT"||S[0]==="SCALEUNIT"))),o.id=this.getId(n);break;case"BOUNDCRS":o.type="BoundCRS";const g=n.find(S=>Array.isArray(S)&&S[0]==="SOURCECRS");if(g){const S=g.find(P=>Array.isArray(P));o.source_crs=S?this.convert(S):null}const w=n.find(S=>Array.isArray(S)&&S[0]==="TARGETCRS");if(w){const S=w.find(P=>Array.isArray(P));o.target_crs=S?this.convert(S):null}const M=n.find(S=>Array.isArray(S)&&S[0]==="ABRIDGEDTRANSFORMATION");M?o.transformation=this.convert(M):o.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(o.type="Transformation",o.name=n[1],o.method=n.find(S=>Array.isArray(S)&&S[0]==="METHOD")?this.convert(n.find(S=>Array.isArray(S)&&S[0]==="METHOD")):null,o.parameters=n.filter(S=>Array.isArray(S)&&(S[0]==="PARAMETER"||S[0]==="PARAMETERFILE")).map(S=>{if(S[0]==="PARAMETER")return this.convert(S);if(S[0]==="PARAMETERFILE")return{name:S[1],value:S[2],id:{authority:"EPSG",code:8656}}}),o.parameters.length===7){const S=o.parameters[6];S.name==="Scale difference"&&(S.value=Math.round((S.value-1)*1e12)/1e6)}o.id=this.getId(n);break;case"AXIS":o.coordinate_system||(o.coordinate_system={type:"unspecified",axis:[]}),o.coordinate_system.axis.push(this.convertAxis(n));break;case"LENGTHUNIT":const E=this.convertUnit(n,"LinearUnit");o.coordinate_system&&o.coordinate_system.axis&&o.coordinate_system.axis.forEach(S=>{S.unit||(S.unit=E)}),E.conversion_factor&&E.conversion_factor!==1&&o.semi_major_axis&&(o.semi_major_axis={value:o.semi_major_axis,unit:E});break;default:o.keyword=n[0];break}return o}}class rM extends Ed{static convert(n,o={}){return super.convert(n,o),o.coordinate_system&&o.coordinate_system.subtype==="Cartesian"&&delete o.coordinate_system,o.usage&&delete o.usage,o}}class sM extends Ed{static convert(n,o={}){super.convert(n,o);const l=n.find(u=>Array.isArray(u)&&u[0]==="CS");l&&(o.coordinate_system={subtype:l[1],axis:this.extractAxes(n)});const c=n.find(u=>Array.isArray(u)&&u[0]==="USAGE");if(c){const u=c.find(g=>Array.isArray(g)&&g[0]==="SCOPE"),p=c.find(g=>Array.isArray(g)&&g[0]==="AREA"),d=c.find(g=>Array.isArray(g)&&g[0]==="BBOX");o.usage={},u&&(o.usage.scope=u[1]),p&&(o.usage.area=p[1]),d&&(o.usage.bbox=d.slice(1))}return o}}function oM(r){return r.find(n=>Array.isArray(n)&&n[0]==="USAGE")?"2019":(r.find(n=>Array.isArray(n)&&n[0]==="CS")||r[0]==="BOUNDCRS"||r[0]==="PROJCRS"||r[0]==="GEOGCRS","2015")}function aM(r){return(oM(r)==="2019"?sM:rM).convert(r)}function lM(r){const n=r.toUpperCase();return n.includes("PROJCRS")||n.includes("GEOGCRS")||n.includes("BOUNDCRS")||n.includes("VERTCRS")||n.includes("LENGTHUNIT")||n.includes("ANGLEUNIT")||n.includes("SCALEUNIT")?"WKT2":(n.includes("PROJCS")||n.includes("GEOGCS")||n.includes("LOCAL_CS")||n.includes("VERT_CS")||n.includes("UNIT"),"WKT1")}var co=1,bd=2,Rd=3,Ea=4,Pd=5,ql=-1,cM=/\s/,hM=/[A-Za-z]/,uM=/[A-Za-z84_]/,Ba=/[,\]]/,xd=/[\d\.E\-\+]/;function fn(r){if(typeof r!="string")throw new Error("not a string");this.text=r.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=co}fn.prototype.readCharicter=function(){var r=this.text[this.place++];if(this.state!==Ea)for(;cM.test(r);){if(this.place>=this.text.length)return;r=this.text[this.place++]}switch(this.state){case co:return this.neutral(r);case bd:return this.keyword(r);case Ea:return this.quoted(r);case Pd:return this.afterquote(r);case Rd:return this.number(r);case ql:return}};fn.prototype.afterquote=function(r){if(r==='"'){this.word+='"',this.state=Ea;return}if(Ba.test(r)){this.word=this.word.trim(),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in afterquote yet, index '+this.place)};fn.prototype.afterItem=function(r){if(r===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=co;return}if(r==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=co,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ql);return}};fn.prototype.number=function(r){if(xd.test(r)){this.word+=r;return}if(Ba.test(r)){this.word=parseFloat(this.word),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in number yet, index '+this.place)};fn.prototype.quoted=function(r){if(r==='"'){this.state=Pd;return}this.word+=r};fn.prototype.keyword=function(r){if(uM.test(r)){this.word+=r;return}if(r==="["){var n=[];n.push(this.word),this.level++,this.root===null?this.root=n:this.currentObject.push(n),this.stack.push(this.currentObject),this.currentObject=n,this.state=co;return}if(Ba.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in keyword yet, index '+this.place)};fn.prototype.neutral=function(r){if(hM.test(r)){this.word=r,this.state=bd;return}if(r==='"'){this.word="",this.state=Ea;return}if(xd.test(r)){this.word=r,this.state=Rd;return}if(Ba.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in neutral yet, index '+this.place)};fn.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ql)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function fM(r){var n=new fn(r);return n.output()}function wl(r,n,o){Array.isArray(n)&&(o.unshift(n),n=null);var l=n?{}:r,c=o.reduce(function(u,p){return jr(p,u),u},l);n&&(r[n]=c)}function jr(r,n){if(!Array.isArray(r)){n[r]=!0;return}var o=r.shift();if(o==="PARAMETER"&&(o=r.shift()),r.length===1){if(Array.isArray(r[0])){n[o]={},jr(r[0],n[o]);return}n[o]=r[0];return}if(!r.length){n[o]=!0;return}if(o==="TOWGS84"){n[o]=r;return}if(o==="AXIS"){o in n||(n[o]=[]),n[o].push(r);return}Array.isArray(o)||(n[o]={});var l;switch(o){case"UNIT":case"PRIMEM":case"VERT_DATUM":n[o]={name:r[0].toLowerCase(),convert:r[1]},r.length===3&&jr(r[2],n[o]);return;case"SPHEROID":case"ELLIPSOID":n[o]={name:r[0],a:r[1],rf:r[2]},r.length===4&&jr(r[3],n[o]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":r[0]=["name",r[0]],wl(n,o,r);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":r[0]=["name",r[0]],wl(n,o,r),n[o].type=o;return;default:for(l=-1;++l<r.length;)if(!Array.isArray(r[l]))return jr(r,n[o]);return wl(n,o,r)}}var dM=.017453292519943295;function Ti(r){return r*dM}function Td(r){const n=(r.projName||"").toLowerCase().replace(/_/g," ");!r.long0&&r.longc&&(n==="albers conic equal area"||n==="lambert azimuthal equal area")&&(r.long0=r.longc),!r.lat_ts&&r.lat1&&(n==="stereographic south pole"||n==="polar stereographic (variant b)")?(r.lat0=Ti(r.lat1>0?90:-90),r.lat_ts=r.lat1,delete r.lat1):!r.lat_ts&&r.lat0&&(n==="polar stereographic"||n==="polar stereographic (variant a)")&&(r.lat_ts=r.lat0,r.lat0=Ti(r.lat0>0?90:-90),delete r.lat1)}function mf(r){let n={units:null,to_meter:void 0};return typeof r=="string"?(n.units=r.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.units==="meter"&&(n.to_meter=1)):r&&r.name&&(n.units=r.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.to_meter=r.conversion_factor),n}function gf(r){return typeof r=="object"?r.value*r.unit.conversion_factor:r}function vf(r,n){r.ellipsoid.radius?(n.a=r.ellipsoid.radius,n.rf=0):(n.a=gf(r.ellipsoid.semi_major_axis),r.ellipsoid.inverse_flattening!==void 0?n.rf=r.ellipsoid.inverse_flattening:r.ellipsoid.semi_major_axis!==void 0&&r.ellipsoid.semi_minor_axis!==void 0&&(n.rf=n.a/(n.a-gf(r.ellipsoid.semi_minor_axis))))}function ba(r,n={}){return!r||typeof r!="object"?r:r.type==="BoundCRS"?(ba(r.source_crs,n),r.transformation&&(r.transformation.method&&r.transformation.method.name==="NTv2"?n.nadgrids=r.transformation.parameters[0].value:n.datum_params=r.transformation.parameters.map(o=>o.value)),n):(Object.keys(r).forEach(o=>{const l=r[o];if(l!==null)switch(o){case"name":if(n.srsCode)break;n.name=l,n.srsCode=l;break;case"type":l==="GeographicCRS"?n.projName="longlat":l==="ProjectedCRS"&&r.conversion&&r.conversion.method&&(n.projName=r.conversion.method.name);break;case"datum":case"datum_ensemble":l.ellipsoid&&(n.ellps=l.ellipsoid.name,vf(l,n)),l.prime_meridian&&(n.from_greenwich=l.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":n.ellps=l.name,vf(l,n);break;case"prime_meridian":n.long0=(l.longitude||0)*Math.PI/180;break;case"coordinate_system":if(l.axis){if(n.axis=l.axis.map(c=>{const u=c.direction;if(u==="east")return"e";if(u==="north")return"n";if(u==="west")return"w";if(u==="south")return"s";throw new Error(`Unknown axis direction: ${u}`)}).join("")+"u",l.unit){const{units:c,to_meter:u}=mf(l.unit);n.units=c,n.to_meter=u}else if(l.axis[0]&&l.axis[0].unit){const{units:c,to_meter:u}=mf(l.axis[0].unit);n.units=c,n.to_meter=u}}break;case"id":l.authority&&l.code&&(n.title=l.authority+":"+l.code);break;case"conversion":l.method&&l.method.name&&(n.projName=l.method.name),l.parameters&&l.parameters.forEach(c=>{const u=c.name.toLowerCase().replace(/\s+/g,"_"),p=c.value;c.unit&&c.unit.conversion_factor?n[u]=p*c.unit.conversion_factor:c.unit==="degree"?n[u]=p*Math.PI/180:n[u]=p});break;case"unit":l.name&&(n.units=l.name.toLowerCase(),n.units==="metre"&&(n.units="meter")),l.conversion_factor&&(n.to_meter=l.conversion_factor);break;case"base_crs":ba(l,n),n.datumCode=l.id?l.id.authority+"_"+l.id.code:l.name;break}}),n.latitude_of_false_origin!==void 0&&(n.lat0=n.latitude_of_false_origin),n.longitude_of_false_origin!==void 0&&(n.long0=n.longitude_of_false_origin),n.latitude_of_standard_parallel!==void 0&&(n.lat0=n.latitude_of_standard_parallel,n.lat1=n.latitude_of_standard_parallel),n.latitude_of_1st_standard_parallel!==void 0&&(n.lat1=n.latitude_of_1st_standard_parallel),n.latitude_of_2nd_standard_parallel!==void 0&&(n.lat2=n.latitude_of_2nd_standard_parallel),n.latitude_of_projection_centre!==void 0&&(n.lat0=n.latitude_of_projection_centre),n.longitude_of_projection_centre!==void 0&&(n.longc=n.longitude_of_projection_centre),n.easting_at_false_origin!==void 0&&(n.x0=n.easting_at_false_origin),n.northing_at_false_origin!==void 0&&(n.y0=n.northing_at_false_origin),n.latitude_of_natural_origin!==void 0&&(n.lat0=n.latitude_of_natural_origin),n.longitude_of_natural_origin!==void 0&&(n.long0=n.longitude_of_natural_origin),n.longitude_of_origin!==void 0&&(n.long0=n.longitude_of_origin),n.false_easting!==void 0&&(n.x0=n.false_easting),n.easting_at_projection_centre&&(n.x0=n.easting_at_projection_centre),n.false_northing!==void 0&&(n.y0=n.false_northing),n.northing_at_projection_centre&&(n.y0=n.northing_at_projection_centre),n.standard_parallel_1!==void 0&&(n.lat1=n.standard_parallel_1),n.standard_parallel_2!==void 0&&(n.lat2=n.standard_parallel_2),n.scale_factor_at_natural_origin!==void 0&&(n.k0=n.scale_factor_at_natural_origin),n.scale_factor_at_projection_centre!==void 0&&(n.k0=n.scale_factor_at_projection_centre),n.scale_factor_on_pseudo_standard_parallel!==void 0&&(n.k0=n.scale_factor_on_pseudo_standard_parallel),n.azimuth!==void 0&&(n.alpha=n.azimuth),n.azimuth_at_projection_centre!==void 0&&(n.alpha=n.azimuth_at_projection_centre),n.angle_from_rectified_to_skew_grid&&(n.rectified_grid_angle=n.angle_from_rectified_to_skew_grid),Td(n),n)}var pM=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function _M(r,n){var o=n[0],l=n[1];!(o in r)&&l in r&&(r[o]=r[l],n.length===3&&(r[o]=n[2](r[o])))}function Fd(r){for(var n=Object.keys(r),o=0,l=n.length;o<l;++o){var c=n[o];pM.indexOf(c)!==-1&&AM(r[c]),typeof r[c]=="object"&&Fd(r[c])}}function AM(r){if(r.AUTHORITY){var n=Object.keys(r.AUTHORITY)[0];n&&n in r.AUTHORITY&&(r.title=n+":"+r.AUTHORITY[n])}if(r.type==="GEOGCS"?r.projName="longlat":r.type==="LOCAL_CS"?(r.projName="identity",r.local=!0):typeof r.PROJECTION=="object"?r.projName=Object.keys(r.PROJECTION)[0]:r.projName=r.PROJECTION,r.AXIS){for(var o="",l=0,c=r.AXIS.length;l<c;++l){var u=[r.AXIS[l][0].toLowerCase(),r.AXIS[l][1].toLowerCase()];u[0].indexOf("north")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="north"?o+="n":u[0].indexOf("south")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="south"?o+="s":u[0].indexOf("east")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="east"?o+="e":(u[0].indexOf("west")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="west")&&(o+="w")}o.length===2&&(o+="u"),o.length===3&&(r.axis=o)}r.UNIT&&(r.units=r.UNIT.name.toLowerCase(),r.units==="metre"&&(r.units="meter"),r.UNIT.convert&&(r.type==="GEOGCS"?r.DATUM&&r.DATUM.SPHEROID&&(r.to_meter=r.UNIT.convert*r.DATUM.SPHEROID.a):r.to_meter=r.UNIT.convert));var p=r.GEOGCS;r.type==="GEOGCS"&&(p=r),p&&(p.DATUM?r.datumCode=p.DATUM.name.toLowerCase():r.datumCode=p.name.toLowerCase(),r.datumCode.slice(0,2)==="d_"&&(r.datumCode=r.datumCode.slice(2)),r.datumCode==="new_zealand_1949"&&(r.datumCode="nzgd49"),(r.datumCode==="wgs_1984"||r.datumCode==="world_geodetic_system_1984")&&(r.PROJECTION==="Mercator_Auxiliary_Sphere"&&(r.sphere=!0),r.datumCode="wgs84"),r.datumCode==="belge_1972"&&(r.datumCode="rnb72"),p.DATUM&&p.DATUM.SPHEROID&&(r.ellps=p.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),r.ellps.toLowerCase().slice(0,13)==="international"&&(r.ellps="intl"),r.a=p.DATUM.SPHEROID.a,r.rf=parseFloat(p.DATUM.SPHEROID.rf,10)),p.DATUM&&p.DATUM.TOWGS84&&(r.datum_params=p.DATUM.TOWGS84),~r.datumCode.indexOf("osgb_1936")&&(r.datumCode="osgb36"),~r.datumCode.indexOf("osni_1952")&&(r.datumCode="osni52"),(~r.datumCode.indexOf("tm65")||~r.datumCode.indexOf("geodetic_datum_of_1965"))&&(r.datumCode="ire65"),r.datumCode==="ch1903+"&&(r.datumCode="ch1903"),~r.datumCode.indexOf("israel")&&(r.datumCode="isr93")),r.b&&!isFinite(r.b)&&(r.b=r.a),r.rectified_grid_angle&&(r.rectified_grid_angle=Ti(r.rectified_grid_angle));function d(M){var E=r.to_meter||1;return M*E}var g=function(M){return _M(r,M)},w=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ti],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ti],["x0","false_easting",d],["y0","false_northing",d],["long0","central_meridian",Ti],["lat0","latitude_of_origin",Ti],["lat0","standard_parallel_1",Ti],["lat1","standard_parallel_1",Ti],["lat2","standard_parallel_2",Ti],["azimuth","Azimuth"],["alpha","azimuth",Ti],["srsCode","name"]];w.forEach(g),Td(r)}function Ra(r){if(typeof r=="object")return ba(r);const n=lM(r);var o=fM(r);if(n==="WKT2"){const u=aM(o);return ba(u)}var l=o[0],c={};return jr(o,c),Fd(c),c[l]}function Pe(r){var n=this;if(arguments.length===2){var o=arguments[1];typeof o=="string"?o.charAt(0)==="+"?Pe[r]=Nl(arguments[1]):Pe[r]=Ra(arguments[1]):o&&typeof o=="object"&&!("projName"in o)?Pe[r]=Ra(arguments[1]):(Pe[r]=o,o||delete Pe[r])}else if(arguments.length===1){if(Array.isArray(r))return r.map(function(l){return Array.isArray(l)?Pe.apply(n,l):Pe(l)});if(typeof r=="string"){if(r in Pe)return Pe[r]}else"EPSG"in r?Pe["EPSG:"+r.EPSG]=r:"ESRI"in r?Pe["ESRI:"+r.ESRI]=r:"IAU2000"in r?Pe["IAU2000:"+r.IAU2000]=r:console.log(r);return}}q6(Pe);function mM(r){return typeof r=="string"}function gM(r){return r in Pe}function vM(r){return r.indexOf("+")!==0&&r.indexOf("[")!==-1||typeof r=="object"&&!("srsCode"in r)}var yM=["3857","900913","3785","102113"];function wM(r){var n=Nn(r,"authority");if(n){var o=Nn(n,"epsg");return o&&yM.indexOf(o)>-1}}function MM(r){var n=Nn(r,"extension");if(n)return Nn(n,"proj4")}function CM(r){return r[0]==="+"}function SM(r){if(mM(r)){if(gM(r))return Pe[r];if(vM(r)){var n=Ra(r);if(wM(n))return Pe["EPSG:3857"];var o=MM(n);return o?Nl(o):n}if(CM(r))return Nl(r)}else return"projName"in r?r:Ra(r)}function yf(r,n){r=r||{};var o,l;if(!n)return r;for(l in n)o=n[l],o!==void 0&&(r[l]=o);return r}function ji(r,n,o){var l=r*n;return o/Math.sqrt(1-l*l)}function po(r){return r<0?-1:1}function Ct(r,n){return n||Math.abs(r)<=_e?r:r-po(r)*lo}function Fi(r,n,o){var l=r*o,c=.5*r;return l=Math.pow((1-l)/(1+l),c),Math.tan(.5*(pt-n))/l}function ho(r,n){for(var o=.5*r,l,c,u=pt-2*Math.atan(n),p=0;p<=15;p++)if(l=r*Math.sin(u),c=pt-2*Math.atan(n*Math.pow((1-l)/(1+l),o))-u,u+=c,Math.abs(c)<=1e-10)return u;return-9999}function EM(){var r=this.b/this.a;this.es=1-r*r,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function bM(r){var n=r.x,o=r.y;if(o*Ye>90&&o*Ye<-90&&n*Ye>180&&n*Ye<-180)return null;var l,c;if(Math.abs(Math.abs(o)-pt)<=wt)return null;if(this.sphere)l=this.x0+this.a*this.k0*Ct(n-this.long0,this.over),c=this.y0+this.a*this.k0*Math.log(Math.tan(ie+.5*o));else{var u=Math.sin(o),p=Fi(this.e,o,u);l=this.x0+this.a*this.k0*Ct(n-this.long0,this.over),c=this.y0-this.a*this.k0*Math.log(p)}return r.x=l,r.y=c,r}function RM(r){var n=r.x-this.x0,o=r.y-this.y0,l,c;if(this.sphere)c=pt-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var u=Math.exp(-o/(this.a*this.k0));if(c=ho(this.e,u),c===-9999)return null}return l=Ct(this.long0+n/(this.a*this.k0),this.over),r.x=l,r.y=c,r}var PM=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const xM={init:EM,forward:bM,inverse:RM,names:PM};function TM(){}function wf(r){return r}var kd=["longlat","identity"];const FM={init:TM,forward:wf,inverse:wf,names:kd};var kM=[xM,FM],pr={},Hr=[];function Nd(r,n){var o=Hr.length;return r.names?(Hr[o]=r,r.names.forEach(function(l){pr[l.toLowerCase()]=o}),this):(console.log(n),!0)}function Gd(r){return r.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function NM(r){if(!r)return!1;var n=r.toLowerCase();if(typeof pr[n]<"u"&&Hr[pr[n]]||(n=Gd(n),n in pr&&Hr[pr[n]]))return Hr[pr[n]]}function GM(){kM.forEach(Nd)}const BM={start:GM,add:Nd,get:NM};var Bd={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const OM=Bd.WGS84;function IM(r,n,o,l){var c=r*r,u=n*n,p=(c-u)/c,d=0;l?(r*=1-p*(tM+p*(eM+p*iM)),c=r*r,p=0):d=Math.sqrt(p);var g=(c-u)/u;return{es:p,e:d,ep2:g}}function UM(r,n,o,l,c){if(!r){var u=Nn(Bd,l);u||(u=OM),r=u.a,n=u.b,o=u.rf}return o&&!n&&(n=(1-1/o)*r),(o===0||Math.abs(r-n)<wt)&&(c=!0,n=r),{a:r,b:n,rf:o,sphere:c}}var va={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var LM in va){var Ml=va[LM];Ml.datumName&&(va[Ml.datumName]=Ml)}function VM(r,n,o,l,c,u,p){var d={};return r===void 0||r==="none"?d.datum_type=kl:d.datum_type=Q6,n&&(d.datum_params=n.map(parseFloat),(d.datum_params[0]!==0||d.datum_params[1]!==0||d.datum_params[2]!==0)&&(d.datum_type=Ar),d.datum_params.length>3&&(d.datum_params[3]!==0||d.datum_params[4]!==0||d.datum_params[5]!==0||d.datum_params[6]!==0)&&(d.datum_type=mr,d.datum_params[3]*=io,d.datum_params[4]*=io,d.datum_params[5]*=io,d.datum_params[6]=d.datum_params[6]/1e6+1)),p&&(d.datum_type=$r,d.grids=p),d.a=o,d.b=l,d.es=c,d.ep2=u,d}var Ql={};function WM(r,n,o){return n instanceof ArrayBuffer?ZM(r,n,o):{ready:zM(r,n)}}function ZM(r,n,o){var l=!0;o!==void 0&&o.includeErrorFields===!1&&(l=!1);var c=new DataView(n),u=jM(c),p=HM(c,u),d=YM(c,p,u,l),g={header:p,subgrids:d};return Ql[r]=g,g}async function zM(r,n){for(var o=[],l=await n.getImageCount(),c=l-1;c>=0;c--){var u=await n.getImage(c),p=await u.readRasters(),d=p,g=[u.getWidth(),u.getHeight()],w=u.getBoundingBox().map(Mf),M=[u.fileDirectory.ModelPixelScale[0],u.fileDirectory.ModelPixelScale[1]].map(Mf),E=w[0]+(g[0]-1)*M[0],S=w[3]-(g[1]-1)*M[1],P=d[0],x=d[1],F=[];for(let W=g[1]-1;W>=0;W--)for(let D=g[0]-1;D>=0;D--){var G=W*g[0]+D;F.push([-Pn(x[G]),Pn(P[G])])}o.push({del:M,lim:g,ll:[-E,S],cvs:F})}var Z={header:{nSubgrids:l},subgrids:o};return Ql[r]=Z,Z}function DM(r){if(r===void 0)return null;var n=r.split(",");return n.map(XM)}function XM(r){if(r.length===0)return null;var n=r[0]==="@";return n&&(r=r.slice(1)),r==="null"?{name:"null",mandatory:!n,grid:null,isNull:!0}:{name:r,mandatory:!n,grid:Ql[r]||null,isNull:!1}}function Mf(r){return r*Math.PI/180}function Pn(r){return r/3600*Math.PI/180}function jM(r){var n=r.getInt32(8,!1);return n===11?!1:(n=r.getInt32(8,!0),n!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function HM(r,n){return{nFields:r.getInt32(8,n),nSubgridFields:r.getInt32(24,n),nSubgrids:r.getInt32(40,n),shiftType:Gl(r,56,64).trim(),fromSemiMajorAxis:r.getFloat64(120,n),fromSemiMinorAxis:r.getFloat64(136,n),toSemiMajorAxis:r.getFloat64(152,n),toSemiMinorAxis:r.getFloat64(168,n)}}function Gl(r,n,o){return String.fromCharCode.apply(null,new Uint8Array(r.buffer.slice(n,o)))}function YM(r,n,o,l){for(var c=176,u=[],p=0;p<n.nSubgrids;p++){var d=$M(r,c,o),g=qM(r,c,d,o,l),w=Math.round(1+(d.upperLongitude-d.lowerLongitude)/d.longitudeInterval),M=Math.round(1+(d.upperLatitude-d.lowerLatitude)/d.latitudeInterval);u.push({ll:[Pn(d.lowerLongitude),Pn(d.lowerLatitude)],del:[Pn(d.longitudeInterval),Pn(d.latitudeInterval)],lim:[w,M],count:d.gridNodeCount,cvs:JM(g)});var E=16;l===!1&&(E=8),c+=176+d.gridNodeCount*E}return u}function JM(r){return r.map(function(n){return[Pn(n.longitudeShift),Pn(n.latitudeShift)]})}function $M(r,n,o){return{name:Gl(r,n+8,n+16).trim(),parent:Gl(r,n+24,n+24+8).trim(),lowerLatitude:r.getFloat64(n+72,o),upperLatitude:r.getFloat64(n+88,o),lowerLongitude:r.getFloat64(n+104,o),upperLongitude:r.getFloat64(n+120,o),latitudeInterval:r.getFloat64(n+136,o),longitudeInterval:r.getFloat64(n+152,o),gridNodeCount:r.getInt32(n+168,o)}}function qM(r,n,o,l,c){var u=n+176,p=16;c===!1&&(p=8);for(var d=[],g=0;g<o.gridNodeCount;g++){var w={latitudeShift:r.getFloat32(u+g*p,l),longitudeShift:r.getFloat32(u+g*p+4,l)};c!==!1&&(w.latitudeAccuracy=r.getFloat32(u+g*p+8,l),w.longitudeAccuracy=r.getFloat32(u+g*p+12,l)),d.push(w)}return d}function Ai(r,n){if(!(this instanceof Ai))return new Ai(r);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,n=n||function(w){if(w)throw w};var o=SM(r);if(typeof o!="object"){n("Could not parse to valid json: "+r);return}var l=Ai.projections.get(o.projName);if(!l){n("Could not get projection name from: "+r);return}if(o.datumCode&&o.datumCode!=="none"){var c=Nn(va,o.datumCode);c&&(o.datum_params=o.datum_params||(c.towgs84?c.towgs84.split(","):null),o.ellps=c.ellipse,o.datumName=c.datumName?c.datumName:o.datumCode)}o.k0=o.k0||1,o.axis=o.axis||"enu",o.ellps=o.ellps||"wgs84",o.lat1=o.lat1||o.lat0;var u=UM(o.a,o.b,o.rf,o.ellps,o.sphere),p=IM(u.a,u.b,u.rf,o.R_A),d=DM(o.nadgrids),g=o.datum||VM(o.datumCode,o.datum_params,u.a,u.b,p.es,p.ep2,d);yf(this,o),yf(this,l),this.a=u.a,this.b=u.b,this.rf=u.rf,this.sphere=u.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=g,"init"in this&&typeof this.init=="function"&&this.init(),n(null,this)}Ai.projections=BM;Ai.projections.start();function QM(r,n){return r.datum_type!==n.datum_type||r.a!==n.a||Math.abs(r.es-n.es)>5e-11?!1:r.datum_type===Ar?r.datum_params[0]===n.datum_params[0]&&r.datum_params[1]===n.datum_params[1]&&r.datum_params[2]===n.datum_params[2]:r.datum_type===mr?r.datum_params[0]===n.datum_params[0]&&r.datum_params[1]===n.datum_params[1]&&r.datum_params[2]===n.datum_params[2]&&r.datum_params[3]===n.datum_params[3]&&r.datum_params[4]===n.datum_params[4]&&r.datum_params[5]===n.datum_params[5]&&r.datum_params[6]===n.datum_params[6]:!0}function Od(r,n,o){var l=r.x,c=r.y,u=r.z?r.z:0,p,d,g,w;if(c<-pt&&c>-1.001*pt)c=-pt;else if(c>pt&&c<1.001*pt)c=pt;else{if(c<-pt)return{x:-1/0,y:-1/0,z:r.z};if(c>pt)return{x:1/0,y:1/0,z:r.z}}return l>Math.PI&&(l-=2*Math.PI),d=Math.sin(c),w=Math.cos(c),g=d*d,p=o/Math.sqrt(1-n*g),{x:(p+u)*w*Math.cos(l),y:(p+u)*w*Math.sin(l),z:(p*(1-n)+u)*d}}function Id(r,n,o,l){var c=1e-12,u=c*c,p=30,d,g,w,M,E,S,P,x,F,G,Z,W,D,tt=r.x,q=r.y,K=r.z?r.z:0,_t,nt,ut;if(d=Math.sqrt(tt*tt+q*q),g=Math.sqrt(tt*tt+q*q+K*K),d/o<c){if(_t=0,g/o<c)return nt=pt,ut=-l,{x:r.x,y:r.y,z:r.z}}else _t=Math.atan2(q,tt);w=K/g,M=d/g,E=1/Math.sqrt(1-n*(2-n)*M*M),x=M*(1-n)*E,F=w*E,D=0;do D++,P=o/Math.sqrt(1-n*F*F),ut=d*x+K*F-P*(1-n*F*F),S=n*P/(P+ut),E=1/Math.sqrt(1-S*(2-S)*M*M),G=M*(1-S)*E,Z=w*E,W=Z*x-G*F,x=G,F=Z;while(W*W>u&&D<p);return nt=Math.atan(Z/Math.abs(G)),{x:_t,y:nt,z:ut}}function KM(r,n,o){if(n===Ar)return{x:r.x+o[0],y:r.y+o[1],z:r.z+o[2]};if(n===mr){var l=o[0],c=o[1],u=o[2],p=o[3],d=o[4],g=o[5],w=o[6];return{x:w*(r.x-g*r.y+d*r.z)+l,y:w*(g*r.x+r.y-p*r.z)+c,z:w*(-d*r.x+p*r.y+r.z)+u}}}function tC(r,n,o){if(n===Ar)return{x:r.x-o[0],y:r.y-o[1],z:r.z-o[2]};if(n===mr){var l=o[0],c=o[1],u=o[2],p=o[3],d=o[4],g=o[5],w=o[6],M=(r.x-l)/w,E=(r.y-c)/w,S=(r.z-u)/w;return{x:M+g*E-d*S,y:-g*M+E+p*S,z:d*M-p*E+S}}}function da(r){return r===Ar||r===mr}function eC(r,n,o){if(QM(r,n)||r.datum_type===kl||n.datum_type===kl)return o;var l=r.a,c=r.es;if(r.datum_type===$r){var u=Cf(r,!1,o);if(u!==0)return;l=pf,c=_f}var p=n.a,d=n.b,g=n.es;if(n.datum_type===$r&&(p=pf,d=K6,g=_f),c===g&&l===p&&!da(r.datum_type)&&!da(n.datum_type))return o;if(o=Od(o,c,l),da(r.datum_type)&&(o=KM(o,r.datum_type,r.datum_params)),da(n.datum_type)&&(o=tC(o,n.datum_type,n.datum_params)),o=Id(o,g,p,d),n.datum_type===$r){var w=Cf(n,!0,o);if(w!==0)return}return o}function Cf(r,n,o){if(r.grids===null||r.grids.length===0)return console.log("Grid shift grids not found"),-1;var l={x:-o.x,y:o.y},c={x:Number.NaN,y:Number.NaN},u=[];t:for(var p=0;p<r.grids.length;p++){var d=r.grids[p];if(u.push(d.name),d.isNull){c=l;break}if(d.grid===null){if(d.mandatory)return console.log("Unable to find mandatory grid '"+d.name+"'"),-1;continue}for(var g=d.grid.subgrids,w=0,M=g.length;w<M;w++){var E=g[w],S=(Math.abs(E.del[1])+Math.abs(E.del[0]))/1e4,P=E.ll[0]-S,x=E.ll[1]-S,F=E.ll[0]+(E.lim[0]-1)*E.del[0]+S,G=E.ll[1]+(E.lim[1]-1)*E.del[1]+S;if(!(x>l.y||P>l.x||G<l.y||F<l.x)&&(c=iC(l,n,E),!isNaN(c.x)))break t}}return isNaN(c.x)?(console.log("Failed to find a grid shift table for location '"+-l.x*Ye+" "+l.y*Ye+" tried: '"+u+"'"),-1):(o.x=-c.x,o.y=c.y,0)}function iC(r,n,o){var l={x:Number.NaN,y:Number.NaN};if(isNaN(r.x))return l;var c={x:r.x,y:r.y};c.x-=o.ll[0],c.y-=o.ll[1],c.x=Ct(c.x-Math.PI)+Math.PI;var u=Sf(c,o);if(n){if(isNaN(u.x))return l;u.x=c.x-u.x,u.y=c.y-u.y;var p=9,d=1e-12,g,w;do{if(w=Sf(u,o),isNaN(w.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}g={x:c.x-(w.x+u.x),y:c.y-(w.y+u.y)},u.x+=g.x,u.y+=g.y}while(p--&&Math.abs(g.x)>d&&Math.abs(g.y)>d);if(p<0)return console.log("Inverse grid shift iterator failed to converge."),l;l.x=Ct(u.x+o.ll[0]),l.y=u.y+o.ll[1]}else isNaN(u.x)||(l.x=r.x+u.x,l.y=r.y+u.y);return l}function Sf(r,n){var o={x:r.x/n.del[0],y:r.y/n.del[1]},l={x:Math.floor(o.x),y:Math.floor(o.y)},c={x:o.x-1*l.x,y:o.y-1*l.y},u={x:Number.NaN,y:Number.NaN},p;if(l.x<0||l.x>=n.lim[0]||l.y<0||l.y>=n.lim[1])return u;p=l.y*n.lim[0]+l.x;var d={x:n.cvs[p][0],y:n.cvs[p][1]};p++;var g={x:n.cvs[p][0],y:n.cvs[p][1]};p+=n.lim[0];var w={x:n.cvs[p][0],y:n.cvs[p][1]};p--;var M={x:n.cvs[p][0],y:n.cvs[p][1]},E=c.x*c.y,S=c.x*(1-c.y),P=(1-c.x)*(1-c.y),x=(1-c.x)*c.y;return u.x=P*d.x+S*g.x+x*M.x+E*w.x,u.y=P*d.y+S*g.y+x*M.y+E*w.y,u}function Ef(r,n,o){var l=o.x,c=o.y,u=o.z||0,p,d,g,w={};for(g=0;g<3;g++)if(!(n&&g===2&&o.z===void 0))switch(g===0?(p=l,"ew".indexOf(r.axis[g])!==-1?d="x":d="y"):g===1?(p=c,"ns".indexOf(r.axis[g])!==-1?d="y":d="x"):(p=u,d="z"),r.axis[g]){case"e":w[d]=p;break;case"w":w[d]=-p;break;case"n":w[d]=p;break;case"s":w[d]=-p;break;case"u":o[d]!==void 0&&(w.z=p);break;case"d":o[d]!==void 0&&(w.z=-p);break;default:return null}return w}function Ud(r){var n={x:r[0],y:r[1]};return r.length>2&&(n.z=r[2]),r.length>3&&(n.m=r[3]),n}function nC(r){bf(r.x),bf(r.y)}function bf(r){if(typeof Number.isFinite=="function"){if(Number.isFinite(r))return;throw new TypeError("coordinates must be finite numbers")}if(typeof r!="number"||r!==r||!isFinite(r))throw new TypeError("coordinates must be finite numbers")}function rC(r,n){return(r.datum.datum_type===Ar||r.datum.datum_type===mr||r.datum.datum_type===$r)&&n.datumCode!=="WGS84"||(n.datum.datum_type===Ar||n.datum.datum_type===mr||n.datum.datum_type===$r)&&r.datumCode!=="WGS84"}function Pa(r,n,o,l){var c;Array.isArray(o)?o=Ud(o):o={x:o.x,y:o.y,z:o.z,m:o.m};var u=o.z!==void 0;if(nC(o),r.datum&&n.datum&&rC(r,n)&&(c=new Ai("WGS84"),o=Pa(r,c,o,l),r=c),l&&r.axis!=="enu"&&(o=Ef(r,!1,o)),r.projName==="longlat")o={x:o.x*de,y:o.y*de,z:o.z||0};else if(r.to_meter&&(o={x:o.x*r.to_meter,y:o.y*r.to_meter,z:o.z||0}),o=r.inverse(o),!o)return;if(r.from_greenwich&&(o.x+=r.from_greenwich),o=eC(r.datum,n.datum,o),!!o)return o=o,n.from_greenwich&&(o={x:o.x-n.from_greenwich,y:o.y,z:o.z||0}),n.projName==="longlat"?o={x:o.x*Ye,y:o.y*Ye,z:o.z||0}:(o=n.forward(o),n.to_meter&&(o={x:o.x/n.to_meter,y:o.y/n.to_meter,z:o.z||0})),l&&n.axis!=="enu"?Ef(n,!0,o):(o&&!u&&delete o.z,o)}var Rf=Ai("WGS84");function Cl(r,n,o,l){var c,u,p;return Array.isArray(o)?(c=Pa(r,n,o,l)||{x:NaN,y:NaN},o.length>2?typeof r.name<"u"&&r.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"?typeof c.z=="number"?[c.x,c.y,c.z].concat(o.slice(3)):[c.x,c.y,o[2]].concat(o.slice(3)):[c.x,c.y].concat(o.slice(2)):[c.x,c.y]):(u=Pa(r,n,o,l),p=Object.keys(o),p.length===2||p.forEach(function(d){if(typeof r.name<"u"&&r.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"){if(d==="x"||d==="y"||d==="z")return}else if(d==="x"||d==="y")return;u[d]=o[d]}),u)}function pa(r){return r instanceof Ai?r:typeof r=="object"&&"oProj"in r?r.oProj:Ai(r)}function sC(r,n,o){var l,c,u=!1,p;return typeof n>"u"?(c=pa(r),l=Rf,u=!0):(typeof n.x<"u"||Array.isArray(n))&&(o=n,c=pa(r),l=Rf,u=!0),l||(l=pa(r)),c||(c=pa(n)),o?Cl(l,c,o):(p={forward:function(d,g){return Cl(l,c,d,g)},inverse:function(d,g){return Cl(c,l,d,g)}},u&&(p.oProj=c),p)}var Pf=6,Ld="AJSAJS",Vd="AFAFAF",Yr=65,Xe=73,_i=79,Qs=86,Ks=90;const oC={forward:Wd,inverse:aC,toPoint:Zd};function Wd(r,n){return n=n||5,hC(lC({lat:r[1],lon:r[0]}),n)}function aC(r){var n=Kl(Dd(r.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat,n.lon,n.lat]:[n.left,n.bottom,n.right,n.top]}function Zd(r){var n=Kl(Dd(r.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat]:[(n.left+n.right)/2,(n.top+n.bottom)/2]}function Sl(r){return r*(Math.PI/180)}function xf(r){return 180*(r/Math.PI)}function lC(r){var n=r.lat,o=r.lon,l=6378137,c=.00669438,u=.9996,p,d,g,w,M,E,S,P=Sl(n),x=Sl(o),F,G;G=Math.floor((o+180)/6)+1,o===180&&(G=60),n>=56&&n<64&&o>=3&&o<12&&(G=32),n>=72&&n<84&&(o>=0&&o<9?G=31:o>=9&&o<21?G=33:o>=21&&o<33?G=35:o>=33&&o<42&&(G=37)),p=(G-1)*6-180+3,F=Sl(p),d=c/(1-c),g=l/Math.sqrt(1-c*Math.sin(P)*Math.sin(P)),w=Math.tan(P)*Math.tan(P),M=d*Math.cos(P)*Math.cos(P),E=Math.cos(P)*(x-F),S=l*((1-c/4-3*c*c/64-5*c*c*c/256)*P-(3*c/8+3*c*c/32+45*c*c*c/1024)*Math.sin(2*P)+(15*c*c/256+45*c*c*c/1024)*Math.sin(4*P)-35*c*c*c/3072*Math.sin(6*P));var Z=u*g*(E+(1-w+M)*E*E*E/6+(5-18*w+w*w+72*M-58*d)*E*E*E*E*E/120)+5e5,W=u*(S+g*Math.tan(P)*(E*E/2+(5-w+9*M+4*M*M)*E*E*E*E/24+(61-58*w+w*w+600*M-330*d)*E*E*E*E*E*E/720));return n<0&&(W+=1e7),{northing:Math.round(W),easting:Math.round(Z),zoneNumber:G,zoneLetter:cC(n)}}function Kl(r){var n=r.northing,o=r.easting,l=r.zoneLetter,c=r.zoneNumber;if(c<0||c>60)return null;var u=.9996,p=6378137,d=.00669438,g,w=(1-Math.sqrt(1-d))/(1+Math.sqrt(1-d)),M,E,S,P,x,F,G,Z,W,D=o-5e5,tt=n;l<"N"&&(tt-=1e7),G=(c-1)*6-180+3,g=d/(1-d),F=tt/u,Z=F/(p*(1-d/4-3*d*d/64-5*d*d*d/256)),W=Z+(3*w/2-27*w*w*w/32)*Math.sin(2*Z)+(21*w*w/16-55*w*w*w*w/32)*Math.sin(4*Z)+151*w*w*w/96*Math.sin(6*Z),M=p/Math.sqrt(1-d*Math.sin(W)*Math.sin(W)),E=Math.tan(W)*Math.tan(W),S=g*Math.cos(W)*Math.cos(W),P=p*(1-d)/Math.pow(1-d*Math.sin(W)*Math.sin(W),1.5),x=D/(M*u);var q=W-M*Math.tan(W)/P*(x*x/2-(5+3*E+10*S-4*S*S-9*g)*x*x*x*x/24+(61+90*E+298*S+45*E*E-252*g-3*S*S)*x*x*x*x*x*x/720);q=xf(q);var K=(x-(1+2*E+S)*x*x*x/6+(5-2*S+28*E-3*S*S+8*g+24*E*E)*x*x*x*x*x/120)/Math.cos(W);K=G+xf(K);var _t;if(r.accuracy){var nt=Kl({northing:r.northing+r.accuracy,easting:r.easting+r.accuracy,zoneLetter:r.zoneLetter,zoneNumber:r.zoneNumber});_t={top:nt.lat,right:nt.lon,bottom:q,left:K}}else _t={lat:q,lon:K};return _t}function cC(r){var n="Z";return 84>=r&&r>=72?n="X":72>r&&r>=64?n="W":64>r&&r>=56?n="V":56>r&&r>=48?n="U":48>r&&r>=40?n="T":40>r&&r>=32?n="S":32>r&&r>=24?n="R":24>r&&r>=16?n="Q":16>r&&r>=8?n="P":8>r&&r>=0?n="N":0>r&&r>=-8?n="M":-8>r&&r>=-16?n="L":-16>r&&r>=-24?n="K":-24>r&&r>=-32?n="J":-32>r&&r>=-40?n="H":-40>r&&r>=-48?n="G":-48>r&&r>=-56?n="F":-56>r&&r>=-64?n="E":-64>r&&r>=-72?n="D":-72>r&&r>=-80&&(n="C"),n}function hC(r,n){var o="00000"+r.easting,l="00000"+r.northing;return r.zoneNumber+r.zoneLetter+uC(r.easting,r.northing,r.zoneNumber)+o.substr(o.length-5,n)+l.substr(l.length-5,n)}function uC(r,n,o){var l=zd(o),c=Math.floor(r/1e5),u=Math.floor(n/1e5)%20;return fC(c,u,l)}function zd(r){var n=r%Pf;return n===0&&(n=Pf),n}function fC(r,n,o){var l=o-1,c=Ld.charCodeAt(l),u=Vd.charCodeAt(l),p=c+r-1,d=u+n,g=!1;p>Ks&&(p=p-Ks+Yr-1,g=!0),(p===Xe||c<Xe&&p>Xe||(p>Xe||c<Xe)&&g)&&p++,(p===_i||c<_i&&p>_i||(p>_i||c<_i)&&g)&&(p++,p===Xe&&p++),p>Ks&&(p=p-Ks+Yr-1),d>Qs?(d=d-Qs+Yr-1,g=!0):g=!1,(d===Xe||u<Xe&&d>Xe||(d>Xe||u<Xe)&&g)&&d++,(d===_i||u<_i&&d>_i||(d>_i||u<_i)&&g)&&(d++,d===Xe&&d++),d>Qs&&(d=d-Qs+Yr-1);var w=String.fromCharCode(p)+String.fromCharCode(d);return w}function Dd(r){if(r&&r.length===0)throw"MGRSPoint coverting from nothing";for(var n=r.length,o=null,l="",c,u=0;!/[A-Z]/.test(c=r.charAt(u));){if(u>=2)throw"MGRSPoint bad conversion from: "+r;l+=c,u++}var p=parseInt(l,10);if(u===0||u+3>n)throw"MGRSPoint bad conversion from: "+r;var d=r.charAt(u++);if(d<="A"||d==="B"||d==="Y"||d>="Z"||d==="I"||d==="O")throw"MGRSPoint zone letter "+d+" not handled: "+r;o=r.substring(u,u+=2);for(var g=zd(p),w=dC(o.charAt(0),g),M=pC(o.charAt(1),g);M<_C(d);)M+=2e6;var E=n-u;if(E%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+r;var S=E/2,P=0,x=0,F,G,Z,W,D;return S>0&&(F=1e5/Math.pow(10,S),G=r.substring(u,u+S),P=parseFloat(G)*F,Z=r.substring(u+S),x=parseFloat(Z)*F),W=P+w,D=x+M,{easting:W,northing:D,zoneLetter:d,zoneNumber:p,accuracy:F}}function dC(r,n){for(var o=Ld.charCodeAt(n-1),l=1e5,c=!1;o!==r.charCodeAt(0);){if(o++,o===Xe&&o++,o===_i&&o++,o>Ks){if(c)throw"Bad character: "+r;o=Yr,c=!0}l+=1e5}return l}function pC(r,n){if(r>"V")throw"MGRSPoint given invalid Northing "+r;for(var o=Vd.charCodeAt(n-1),l=0,c=!1;o!==r.charCodeAt(0);){if(o++,o===Xe&&o++,o===_i&&o++,o>Qs){if(c)throw"Bad character: "+r;o=Yr,c=!0}l+=1e5}return l}function _C(r){var n;switch(r){case"C":n=11e5;break;case"D":n=2e6;break;case"E":n=28e5;break;case"F":n=37e5;break;case"G":n=46e5;break;case"H":n=55e5;break;case"J":n=64e5;break;case"K":n=73e5;break;case"L":n=82e5;break;case"M":n=91e5;break;case"N":n=0;break;case"P":n=8e5;break;case"Q":n=17e5;break;case"R":n=26e5;break;case"S":n=35e5;break;case"T":n=44e5;break;case"U":n=53e5;break;case"V":n=62e5;break;case"W":n=7e6;break;case"X":n=79e5;break;default:n=-1}if(n>=0)return n;throw"Invalid zone letter: "+r}function Qr(r,n,o){if(!(this instanceof Qr))return new Qr(r,n,o);if(Array.isArray(r))this.x=r[0],this.y=r[1],this.z=r[2]||0;else if(typeof r=="object")this.x=r.x,this.y=r.y,this.z=r.z||0;else if(typeof r=="string"&&typeof n>"u"){var l=r.split(",");this.x=parseFloat(l[0]),this.y=parseFloat(l[1]),this.z=parseFloat(l[2])||0}else this.x=r,this.y=n,this.z=o||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Qr.fromMGRS=function(r){return new Qr(Zd(r))};Qr.prototype.toMGRS=function(r){return Wd([this.x,this.y],r)};var AC=1,mC=.25,Tf=.046875,Ff=.01953125,kf=.01068115234375,gC=.75,vC=.46875,yC=.013020833333333334,wC=.007120768229166667,MC=.3645833333333333,CC=.005696614583333333,SC=.3076171875;function tc(r){var n=[];n[0]=AC-r*(mC+r*(Tf+r*(Ff+r*kf))),n[1]=r*(gC-r*(Tf+r*(Ff+r*kf)));var o=r*r;return n[2]=o*(vC-r*(yC+r*wC)),o*=r,n[3]=o*(MC-r*CC),n[4]=o*r*SC,n}function Kr(r,n,o,l){return o*=n,n*=n,l[0]*r-o*(l[1]+n*(l[2]+n*(l[3]+n*l[4])))}var EC=20;function ec(r,n,o){for(var l=1/(1-n),c=r,u=EC;u;--u){var p=Math.sin(c),d=1-n*p*p;if(d=(Kr(c,p,Math.cos(c),o)-r)*(d*Math.sqrt(d))*l,c-=d,Math.abs(d)<wt)return c}return c}function bC(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=tc(this.es),this.ml0=Kr(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function RC(r){var n=r.x,o=r.y,l=Ct(n-this.long0,this.over),c,u,p,d=Math.sin(o),g=Math.cos(o);if(this.es){var M=g*l,E=Math.pow(M,2),S=this.ep2*Math.pow(g,2),P=Math.pow(S,2),x=Math.abs(g)>wt?Math.tan(o):0,F=Math.pow(x,2),G=Math.pow(F,2);c=1-this.es*Math.pow(d,2),M=M/Math.sqrt(c);var Z=Kr(o,d,g,this.en);u=this.a*(this.k0*M*(1+E/6*(1-F+S+E/20*(5-18*F+G+14*S-58*F*S+E/42*(61+179*G-G*F-479*F)))))+this.x0,p=this.a*(this.k0*(Z-this.ml0+d*l*M/2*(1+E/12*(5-F+9*S+4*P+E/30*(61+G-58*F+270*S-330*F*S+E/56*(1385+543*G-G*F-3111*F))))))+this.y0}else{var w=g*Math.sin(l);if(Math.abs(Math.abs(w)-1)<wt)return 93;if(u=.5*this.a*this.k0*Math.log((1+w)/(1-w))+this.x0,p=g*Math.cos(l)/Math.sqrt(1-Math.pow(w,2)),w=Math.abs(p),w>=1){if(w-1>wt)return 93;p=0}else p=Math.acos(p);o<0&&(p=-p),p=this.a*this.k0*(p-this.lat0)+this.y0}return r.x=u,r.y=p,r}function PC(r){var n,o,l,c,u=(r.x-this.x0)*(1/this.a),p=(r.y-this.y0)*(1/this.a);if(this.es)if(n=this.ml0+p/this.k0,o=ec(n,this.es,this.en),Math.abs(o)<pt){var E=Math.sin(o),S=Math.cos(o),P=Math.abs(S)>wt?Math.tan(o):0,x=this.ep2*Math.pow(S,2),F=Math.pow(x,2),G=Math.pow(P,2),Z=Math.pow(G,2);n=1-this.es*Math.pow(E,2);var W=u*Math.sqrt(n)/this.k0,D=Math.pow(W,2);n=n*P,l=o-n*D/(1-this.es)*.5*(1-D/12*(5+3*G-9*x*G+x-4*F-D/30*(61+90*G-252*x*G+45*Z+46*x-D/56*(1385+3633*G+4095*Z+1574*Z*G)))),c=Ct(this.long0+W*(1-D/6*(1+2*G+x-D/20*(5+28*G+24*Z+8*x*G+6*x-D/42*(61+662*G+1320*Z+720*Z*G))))/S,this.over)}else l=pt*po(p),c=0;else{var d=Math.exp(u/this.k0),g=.5*(d-1/d),w=this.lat0+p/this.k0,M=Math.cos(w);n=Math.sqrt((1-Math.pow(M,2))/(1+Math.pow(g,2))),l=Math.asin(n),p<0&&(l=-l),g===0&&M===0?c=0:c=Ct(Math.atan2(g,M)+this.long0,this.over)}return r.x=c,r.y=l,r}var xC=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const ya={init:bC,forward:RC,inverse:PC,names:xC};function Xd(r){var n=Math.exp(r);return n=(n-1/n)/2,n}function He(r,n){r=Math.abs(r),n=Math.abs(n);var o=Math.max(r,n),l=Math.min(r,n)/(o||1);return o*Math.sqrt(1+Math.pow(l,2))}function TC(r){var n=1+r,o=n-1;return o===0?r:r*Math.log(n)/o}function FC(r){var n=Math.abs(r);return n=TC(n*(1+n/(He(1,n)+1))),r<0?-n:n}function ic(r,n){for(var o=2*Math.cos(2*n),l=r.length-1,c=r[l],u=0,p;--l>=0;)p=-u+o*c+r[l],u=c,c=p;return n+p*Math.sin(2*n)}function kC(r,n){for(var o=2*Math.cos(n),l=r.length-1,c=r[l],u=0,p;--l>=0;)p=-u+o*c+r[l],u=c,c=p;return Math.sin(n)*p}function NC(r){var n=Math.exp(r);return n=(n+1/n)/2,n}function jd(r,n,o){for(var l=Math.sin(n),c=Math.cos(n),u=Xd(o),p=NC(o),d=2*c*p,g=-2*l*u,w=r.length-1,M=r[w],E=0,S=0,P=0,x,F;--w>=0;)x=S,F=E,S=M,E=P,M=-x+d*S-g*E+r[w],P=-F+g*S+d*E;return d=l*p,g=c*u,[d*M-g*P,d*P+g*M]}function GC(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ya.init.apply(this),this.forward=ya.forward,this.inverse=ya.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var r=this.es/(1+Math.sqrt(1-this.es)),n=r/(2-r),o=n;this.cgb[0]=n*(2+n*(-2/3+n*(-2+n*(116/45+n*(26/45+n*(-2854/675)))))),this.cbg[0]=n*(-2+n*(2/3+n*(4/3+n*(-82/45+n*(32/45+n*(4642/4725)))))),o=o*n,this.cgb[1]=o*(7/3+n*(-8/5+n*(-227/45+n*(2704/315+n*(2323/945))))),this.cbg[1]=o*(5/3+n*(-16/15+n*(-13/9+n*(904/315+n*(-1522/945))))),o=o*n,this.cgb[2]=o*(56/15+n*(-136/35+n*(-1262/105+n*(73814/2835)))),this.cbg[2]=o*(-26/15+n*(34/21+n*(8/5+n*(-12686/2835)))),o=o*n,this.cgb[3]=o*(4279/630+n*(-332/35+n*(-399572/14175))),this.cbg[3]=o*(1237/630+n*(-12/5+n*(-24832/14175))),o=o*n,this.cgb[4]=o*(4174/315+n*(-144838/6237)),this.cbg[4]=o*(-734/315+n*(109598/31185)),o=o*n,this.cgb[5]=o*(601676/22275),this.cbg[5]=o*(444337/155925),o=Math.pow(n,2),this.Qn=this.k0/(1+n)*(1+o*(1/4+o*(1/64+o/256))),this.utg[0]=n*(-.5+n*(2/3+n*(-37/96+n*(1/360+n*(81/512+n*(-96199/604800)))))),this.gtu[0]=n*(.5+n*(-2/3+n*(5/16+n*(41/180+n*(-127/288+n*(7891/37800)))))),this.utg[1]=o*(-1/48+n*(-1/15+n*(437/1440+n*(-46/105+n*(1118711/3870720))))),this.gtu[1]=o*(13/48+n*(-3/5+n*(557/1440+n*(281/630+n*(-1983433/1935360))))),o=o*n,this.utg[2]=o*(-17/480+n*(37/840+n*(209/4480+n*(-5569/90720)))),this.gtu[2]=o*(61/240+n*(-103/140+n*(15061/26880+n*(167603/181440)))),o=o*n,this.utg[3]=o*(-4397/161280+n*(11/504+n*(830251/7257600))),this.gtu[3]=o*(49561/161280+n*(-179/168+n*(6601661/7257600))),o=o*n,this.utg[4]=o*(-4583/161280+n*(108847/3991680)),this.gtu[4]=o*(34729/80640+n*(-3418889/1995840)),o=o*n,this.utg[5]=o*(-20648693/638668800),this.gtu[5]=o*(212378941/319334400);var l=ic(this.cbg,this.lat0);this.Zb=-this.Qn*(l+kC(this.gtu,2*l))}function BC(r){var n=Ct(r.x-this.long0,this.over),o=r.y;o=ic(this.cbg,o);var l=Math.sin(o),c=Math.cos(o),u=Math.sin(n),p=Math.cos(n);o=Math.atan2(l,p*c),n=Math.atan2(u*c,He(l,c*p)),n=FC(Math.tan(n));var d=jd(this.gtu,2*o,2*n);o=o+d[0],n=n+d[1];var g,w;return Math.abs(n)<=2.623395162778?(g=this.a*(this.Qn*n)+this.x0,w=this.a*(this.Qn*o+this.Zb)+this.y0):(g=1/0,w=1/0),r.x=g,r.y=w,r}function OC(r){var n=(r.x-this.x0)*(1/this.a),o=(r.y-this.y0)*(1/this.a);o=(o-this.Zb)/this.Qn,n=n/this.Qn;var l,c;if(Math.abs(n)<=2.623395162778){var u=jd(this.utg,2*o,2*n);o=o+u[0],n=n+u[1],n=Math.atan(Xd(n));var p=Math.sin(o),d=Math.cos(o),g=Math.sin(n),w=Math.cos(n);o=Math.atan2(p*w,He(g,w*d)),n=Math.atan2(g,w*d),l=Ct(n+this.long0,this.over),c=ic(this.cgb,o)}else l=1/0,c=1/0;return r.x=l,r.y=c,r}var IC=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const wa={init:GC,forward:BC,inverse:OC,names:IC};function UC(r,n){if(r===void 0){if(r=Math.floor((Ct(n)+Math.PI)*30/Math.PI)+1,r<0)return 0;if(r>60)return 60}return r}var LC="etmerc";function VC(){var r=UC(this.zone,this.long0);if(r===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(r)-183)*de,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,wa.init.apply(this),this.forward=wa.forward,this.inverse=wa.inverse}var WC=["Universal Transverse Mercator System","utm"];const ZC={init:VC,names:WC,dependsOn:LC};function nc(r,n){return Math.pow((1-r)/(1+r),n)}var zC=20;function DC(){var r=Math.sin(this.lat0),n=Math.cos(this.lat0);n*=n,this.rc=Math.sqrt(1-this.es)/(1-this.es*r*r),this.C=Math.sqrt(1+this.es*n*n/(1-this.es)),this.phic0=Math.asin(r/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ie)/(Math.pow(Math.tan(.5*this.lat0+ie),this.C)*nc(this.e*r,this.ratexp))}function XC(r){var n=r.x,o=r.y;return r.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*o+ie),this.C)*nc(this.e*Math.sin(o),this.ratexp))-pt,r.x=this.C*n,r}function jC(r){for(var n=1e-14,o=r.x/this.C,l=r.y,c=Math.pow(Math.tan(.5*l+ie)/this.K,1/this.C),u=zC;u>0&&(l=2*Math.atan(c*nc(this.e*Math.sin(r.y),-.5*this.e))-pt,!(Math.abs(l-r.y)<n));--u)r.y=l;return u?(r.x=o,r.y=l,r):null}const rc={init:DC,forward:XC,inverse:jC};function HC(){rc.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function YC(r){var n,o,l,c;return r.x=Ct(r.x-this.long0,this.over),rc.forward.apply(this,[r]),n=Math.sin(r.y),o=Math.cos(r.y),l=Math.cos(r.x),c=this.k0*this.R2/(1+this.sinc0*n+this.cosc0*o*l),r.x=c*o*Math.sin(r.x),r.y=c*(this.cosc0*n-this.sinc0*o*l),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function JC(r){var n,o,l,c,u;if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,u=He(r.x,r.y)){var p=2*Math.atan2(u,this.R2);n=Math.sin(p),o=Math.cos(p),c=Math.asin(o*this.sinc0+r.y*n*this.cosc0/u),l=Math.atan2(r.x*n,u*this.cosc0*o-r.y*this.sinc0*n)}else c=this.phic0,l=0;return r.x=l,r.y=c,rc.inverse.apply(this,[r]),r.x=Ct(r.x+this.long0,this.over),r}var $C=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const qC={init:HC,forward:YC,inverse:JC,names:$C};function sc(r,n,o){return n*=o,Math.tan(.5*(pt+r))*Math.pow((1-n)/(1+n),.5*o)}function QC(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=wt&&(this.k0=.5*(1+po(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=wt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=wt&&Math.abs(Math.cos(this.lat_ts))>wt&&(this.k0=.5*this.cons*ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Fi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ji(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(sc(this.lat0,this.sinlat0,this.e))-pt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function KC(r){var n=r.x,o=r.y,l=Math.sin(o),c=Math.cos(o),u,p,d,g,w,M,E=Ct(n-this.long0,this.over);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=wt&&Math.abs(o+this.lat0)<=wt?(r.x=NaN,r.y=NaN,r):this.sphere?(u=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(E)),r.x=this.a*u*c*Math.sin(E)+this.x0,r.y=this.a*u*(this.coslat0*l-this.sinlat0*c*Math.cos(E))+this.y0,r):(p=2*Math.atan(sc(o,l,this.e))-pt,g=Math.cos(p),d=Math.sin(p),Math.abs(this.coslat0)<=wt?(w=Fi(this.e,o*this.con,this.con*l),M=2*this.a*this.k0*w/this.cons,r.x=this.x0+M*Math.sin(n-this.long0),r.y=this.y0-this.con*M*Math.cos(n-this.long0),r):(Math.abs(this.sinlat0)<wt?(u=2*this.a*this.k0/(1+g*Math.cos(E)),r.y=u*d):(u=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*d+this.cosX0*g*Math.cos(E))),r.y=u*(this.cosX0*d-this.sinX0*g*Math.cos(E))+this.y0),r.x=u*g*Math.sin(E)+this.x0,r))}function tS(r){r.x-=this.x0,r.y-=this.y0;var n,o,l,c,u,p=Math.sqrt(r.x*r.x+r.y*r.y);if(this.sphere){var d=2*Math.atan(p/(2*this.a*this.k0));return n=this.long0,o=this.lat0,p<=wt?(r.x=n,r.y=o,r):(o=Math.asin(Math.cos(d)*this.sinlat0+r.y*Math.sin(d)*this.coslat0/p),Math.abs(this.coslat0)<wt?this.lat0>0?n=Ct(this.long0+Math.atan2(r.x,-1*r.y),this.over):n=Ct(this.long0+Math.atan2(r.x,r.y),this.over):n=Ct(this.long0+Math.atan2(r.x*Math.sin(d),p*this.coslat0*Math.cos(d)-r.y*this.sinlat0*Math.sin(d)),this.over),r.x=n,r.y=o,r)}else if(Math.abs(this.coslat0)<=wt){if(p<=wt)return o=this.lat0,n=this.long0,r.x=n,r.y=o,r;r.x*=this.con,r.y*=this.con,l=p*this.cons/(2*this.a*this.k0),o=this.con*ho(this.e,l),n=this.con*Ct(this.con*this.long0+Math.atan2(r.x,-1*r.y),this.over)}else c=2*Math.atan(p*this.cosX0/(2*this.a*this.k0*this.ms1)),n=this.long0,p<=wt?u=this.X0:(u=Math.asin(Math.cos(c)*this.sinX0+r.y*Math.sin(c)*this.cosX0/p),n=Ct(this.long0+Math.atan2(r.x*Math.sin(c),p*this.cosX0*Math.cos(c)-r.y*this.sinX0*Math.sin(c)),this.over)),o=-1*ho(this.e,Math.tan(.5*(pt+u)));return r.x=n,r.y=o,r}var eS=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const iS={init:QC,forward:KC,inverse:tS,names:eS,ssfn_:sc};function nS(){var r=this.lat0;this.lambda0=this.long0;var n=Math.sin(r),o=this.a,l=this.rf,c=1/l,u=2*c-Math.pow(c,2),p=this.e=Math.sqrt(u);this.R=this.k0*o*Math.sqrt(1-u)/(1-u*Math.pow(n,2)),this.alpha=Math.sqrt(1+u/(1-u)*Math.pow(Math.cos(r),4)),this.b0=Math.asin(n/this.alpha);var d=Math.log(Math.tan(Math.PI/4+this.b0/2)),g=Math.log(Math.tan(Math.PI/4+r/2)),w=Math.log((1+p*n)/(1-p*n));this.K=d-this.alpha*g+this.alpha*p/2*w}function rS(r){var n=Math.log(Math.tan(Math.PI/4-r.y/2)),o=this.e/2*Math.log((1+this.e*Math.sin(r.y))/(1-this.e*Math.sin(r.y))),l=-this.alpha*(n+o)+this.K,c=2*(Math.atan(Math.exp(l))-Math.PI/4),u=this.alpha*(r.x-this.lambda0),p=Math.atan(Math.sin(u)/(Math.sin(this.b0)*Math.tan(c)+Math.cos(this.b0)*Math.cos(u))),d=Math.asin(Math.cos(this.b0)*Math.sin(c)-Math.sin(this.b0)*Math.cos(c)*Math.cos(u));return r.y=this.R/2*Math.log((1+Math.sin(d))/(1-Math.sin(d)))+this.y0,r.x=this.R*p+this.x0,r}function sS(r){for(var n=r.x-this.x0,o=r.y-this.y0,l=n/this.R,c=2*(Math.atan(Math.exp(o/this.R))-Math.PI/4),u=Math.asin(Math.cos(this.b0)*Math.sin(c)+Math.sin(this.b0)*Math.cos(c)*Math.cos(l)),p=Math.atan(Math.sin(l)/(Math.cos(this.b0)*Math.cos(l)-Math.sin(this.b0)*Math.tan(c))),d=this.lambda0+p/this.alpha,g=0,w=u,M=-1e3,E=0;Math.abs(w-M)>1e-7;){if(++E>20)return;g=1/this.alpha*(Math.log(Math.tan(Math.PI/4+u/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(w))/2)),M=w,w=2*Math.atan(Math.exp(g))-Math.PI/2}return r.x=d,r.y=w,r}var oS=["somerc"];const aS={init:nS,forward:rS,inverse:sS,names:oS};var Xr=1e-7;function lS(r){var n=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],o=typeof r.projName=="object"?Object.keys(r.projName)[0]:r.projName;return"no_uoff"in r||"no_off"in r||n.indexOf(o)!==-1||n.indexOf(Gd(o))!==-1}function cS(){var r,n,o,l,c,u,p,d,g,w,M=0,E,S=0,P=0,x=0,F=0,G=0,Z=0;this.no_off=lS(this),this.no_rot="no_rot"in this;var W=!1;"alpha"in this&&(W=!0);var D=!1;if("rectified_grid_angle"in this&&(D=!0),W&&(Z=this.alpha),D&&(M=this.rectified_grid_angle),W||D)S=this.longc;else if(P=this.long1,F=this.lat1,x=this.long2,G=this.lat2,Math.abs(F-G)<=Xr||(r=Math.abs(F))<=Xr||Math.abs(r-pt)<=Xr||Math.abs(Math.abs(this.lat0)-pt)<=Xr||Math.abs(Math.abs(G)-pt)<=Xr)throw new Error;var tt=1-this.es;n=Math.sqrt(tt),Math.abs(this.lat0)>wt?(d=Math.sin(this.lat0),o=Math.cos(this.lat0),r=1-this.es*d*d,this.B=o*o,this.B=Math.sqrt(1+this.es*this.B*this.B/tt),this.A=this.B*this.k0*n/r,l=this.B*n/(o*Math.sqrt(r)),c=l*l-1,c<=0?c=0:(c=Math.sqrt(c),this.lat0<0&&(c=-c)),this.E=c+=l,this.E*=Math.pow(Fi(this.e,this.lat0,d),this.B)):(this.B=1/n,this.A=this.k0,this.E=l=c=1),W||D?(W?(E=Math.asin(Math.sin(Z)/l),D||(M=Z)):(E=M,Z=Math.asin(l*Math.sin(E))),this.lam0=S-Math.asin(.5*(c-1/c)*Math.tan(E))/this.B):(u=Math.pow(Fi(this.e,F,Math.sin(F)),this.B),p=Math.pow(Fi(this.e,G,Math.sin(G)),this.B),c=this.E/u,g=(p-u)/(p+u),w=this.E*this.E,w=(w-p*u)/(w+p*u),r=P-x,r<-Math.PI?x-=lo:r>Math.PI&&(x+=lo),this.lam0=Ct(.5*(P+x)-Math.atan(w*Math.tan(.5*this.B*(P-x))/g)/this.B,this.over),E=Math.atan(2*Math.sin(this.B*Ct(P-this.lam0,this.over))/(c-1/c)),M=Z=Math.asin(l*Math.sin(E))),this.singam=Math.sin(E),this.cosgam=Math.cos(E),this.sinrot=Math.sin(M),this.cosrot=Math.cos(M),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(l*l-1)/Math.cos(Z))),this.lat0<0&&(this.u_0=-this.u_0)),c=.5*E,this.v_pole_n=this.ArB*Math.log(Math.tan(ie-c)),this.v_pole_s=this.ArB*Math.log(Math.tan(ie+c))}function hS(r){var n={},o,l,c,u,p,d,g,w;if(r.x=r.x-this.lam0,Math.abs(Math.abs(r.y)-pt)>wt){if(p=this.E/Math.pow(Fi(this.e,r.y,Math.sin(r.y)),this.B),d=1/p,o=.5*(p-d),l=.5*(p+d),u=Math.sin(this.B*r.x),c=(o*this.singam-u*this.cosgam)/l,Math.abs(Math.abs(c)-1)<wt)throw new Error;w=.5*this.ArB*Math.log((1-c)/(1+c)),d=Math.cos(this.B*r.x),Math.abs(d)<Xr?g=this.A*r.x:g=this.ArB*Math.atan2(o*this.cosgam+u*this.singam,d)}else w=r.y>0?this.v_pole_n:this.v_pole_s,g=this.ArB*r.y;return this.no_rot?(n.x=g,n.y=w):(g-=this.u_0,n.x=w*this.cosrot+g*this.sinrot,n.y=g*this.cosrot-w*this.sinrot),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function uS(r){var n,o,l,c,u,p,d,g={};if(r.x=(r.x-this.x0)*(1/this.a),r.y=(r.y-this.y0)*(1/this.a),this.no_rot?(o=r.y,n=r.x):(o=r.x*this.cosrot-r.y*this.sinrot,n=r.y*this.cosrot+r.x*this.sinrot+this.u_0),l=Math.exp(-this.BrA*o),c=.5*(l-1/l),u=.5*(l+1/l),p=Math.sin(this.BrA*n),d=(p*this.cosgam+c*this.singam)/u,Math.abs(Math.abs(d)-1)<wt)g.x=0,g.y=d<0?-pt:pt;else{if(g.y=this.E/Math.sqrt((1+d)/(1-d)),g.y=ho(this.e,Math.pow(g.y,1/this.B)),g.y===1/0)throw new Error;g.x=-this.rB*Math.atan2(c*this.cosgam-p*this.singam,Math.cos(this.BrA*n))}return g.x+=this.lam0,g}var fS=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const dS={init:cS,forward:hS,inverse:uS,names:fS};function pS(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<wt)){var r=this.b/this.a;this.e=Math.sqrt(1-r*r);var n=Math.sin(this.lat1),o=Math.cos(this.lat1),l=ji(this.e,n,o),c=Fi(this.e,this.lat1,n),u=Math.sin(this.lat2),p=Math.cos(this.lat2),d=ji(this.e,u,p),g=Fi(this.e,this.lat2,u),w=Math.abs(Math.abs(this.lat0)-pt)<wt?0:Fi(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>wt?this.ns=Math.log(l/d)/Math.log(c/g):this.ns=n,isNaN(this.ns)&&(this.ns=n),this.f0=l/(this.ns*Math.pow(c,this.ns)),this.rh=this.a*this.f0*Math.pow(w,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function _S(r){var n=r.x,o=r.y;Math.abs(2*Math.abs(o)-Math.PI)<=wt&&(o=po(o)*(pt-2*wt));var l=Math.abs(Math.abs(o)-pt),c,u;if(l>wt)c=Fi(this.e,o,Math.sin(o)),u=this.a*this.f0*Math.pow(c,this.ns);else{if(l=o*this.ns,l<=0)return null;u=0}var p=this.ns*Ct(n-this.long0,this.over);return r.x=this.k0*(u*Math.sin(p))+this.x0,r.y=this.k0*(this.rh-u*Math.cos(p))+this.y0,r}function AS(r){var n,o,l,c,u,p=(r.x-this.x0)/this.k0,d=this.rh-(r.y-this.y0)/this.k0;this.ns>0?(n=Math.sqrt(p*p+d*d),o=1):(n=-Math.sqrt(p*p+d*d),o=-1);var g=0;if(n!==0&&(g=Math.atan2(o*p,o*d)),n!==0||this.ns>0){if(o=1/this.ns,l=Math.pow(n/(this.a*this.f0),o),c=ho(this.e,l),c===-9999)return null}else c=-pt;return u=Ct(g/this.ns+this.long0,this.over),r.x=u,r.y=c,r}var mS=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const gS={init:pS,forward:_S,inverse:AS,names:mS};function vS(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function yS(r){var n,o,l,c,u,p,d,g=r.x,w=r.y,M=Ct(g-this.long0,this.over);return n=Math.pow((1+this.e*Math.sin(w))/(1-this.e*Math.sin(w)),this.alfa*this.e/2),o=2*(Math.atan(this.k*Math.pow(Math.tan(w/2+this.s45),this.alfa)/n)-this.s45),l=-M*this.alfa,c=Math.asin(Math.cos(this.ad)*Math.sin(o)+Math.sin(this.ad)*Math.cos(o)*Math.cos(l)),u=Math.asin(Math.cos(o)*Math.sin(l)/Math.cos(c)),p=this.n*u,d=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(c/2+this.s45),this.n),r.y=d*Math.cos(p)/1,r.x=d*Math.sin(p)/1,this.czech||(r.y*=-1,r.x*=-1),r}function wS(r){var n,o,l,c,u,p,d,g,w=r.x;r.x=r.y,r.y=w,this.czech||(r.y*=-1,r.x*=-1),p=Math.sqrt(r.x*r.x+r.y*r.y),u=Math.atan2(r.y,r.x),c=u/Math.sin(this.s0),l=2*(Math.atan(Math.pow(this.ro0/p,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),n=Math.asin(Math.cos(this.ad)*Math.sin(l)-Math.sin(this.ad)*Math.cos(l)*Math.cos(c)),o=Math.asin(Math.cos(l)*Math.sin(c)/Math.cos(n)),r.x=this.long0-o/this.alfa,d=n,g=0;var M=0;do r.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(n/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.e/2))-this.s45),Math.abs(d-r.y)<1e-10&&(g=1),d=r.y,M+=1;while(g===0&&M<15);return M>=15?null:r}var MS=["Krovak","krovak"];const CS={init:vS,forward:yS,inverse:wS,names:MS};function Ue(r,n,o,l,c){return r*c-n*Math.sin(2*c)+o*Math.sin(4*c)-l*Math.sin(6*c)}function _o(r){return 1-.25*r*(1+r/16*(3+1.25*r))}function Ao(r){return .375*r*(1+.25*r*(1+.46875*r))}function mo(r){return .05859375*r*r*(1+.75*r)}function go(r){return r*r*r*(35/3072)}function oc(r,n,o){var l=n*o;return r/Math.sqrt(1-l*l)}function Bn(r){return Math.abs(r)<pt?r:r-po(r)*Math.PI}function xa(r,n,o,l,c){var u,p;u=r/n;for(var d=0;d<15;d++)if(p=(r-(n*u-o*Math.sin(2*u)+l*Math.sin(4*u)-c*Math.sin(6*u)))/(n-2*o*Math.cos(2*u)+4*l*Math.cos(4*u)-6*c*Math.cos(6*u)),u+=p,Math.abs(p)<=1e-10)return u;return NaN}function SS(){this.sphere||(this.e0=_o(this.es),this.e1=Ao(this.es),this.e2=mo(this.es),this.e3=go(this.es),this.ml0=this.a*Ue(this.e0,this.e1,this.e2,this.e3,this.lat0))}function ES(r){var n,o,l=r.x,c=r.y;if(l=Ct(l-this.long0,this.over),this.sphere)n=this.a*Math.asin(Math.cos(c)*Math.sin(l)),o=this.a*(Math.atan2(Math.tan(c),Math.cos(l))-this.lat0);else{var u=Math.sin(c),p=Math.cos(c),d=oc(this.a,this.e,u),g=Math.tan(c)*Math.tan(c),w=l*Math.cos(c),M=w*w,E=this.es*p*p/(1-this.es),S=this.a*Ue(this.e0,this.e1,this.e2,this.e3,c);n=d*w*(1-M*g*(1/6-(8-g+8*E)*M/120)),o=S-this.ml0+d*u/p*M*(.5+(5-g+6*E)*M/24)}return r.x=n+this.x0,r.y=o+this.y0,r}function bS(r){r.x-=this.x0,r.y-=this.y0;var n=r.x/this.a,o=r.y/this.a,l,c;if(this.sphere){var u=o+this.lat0;l=Math.asin(Math.sin(u)*Math.cos(n)),c=Math.atan2(Math.tan(n),Math.cos(u))}else{var p=this.ml0/this.a+o,d=xa(p,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(d)-pt)<=wt)return r.x=this.long0,r.y=pt,o<0&&(r.y*=-1),r;var g=oc(this.a,this.e,Math.sin(d)),w=g*g*g/this.a/this.a*(1-this.es),M=Math.pow(Math.tan(d),2),E=n*this.a/g,S=E*E;l=d-g*Math.tan(d)/w*E*E*(.5-(1+3*M)*E*E/24),c=E*(1-S*(M/3+(1+3*M)*M*S/15))/Math.cos(d)}return r.x=Ct(c+this.long0,this.over),r.y=Bn(l),r}var RS=["Cassini","Cassini_Soldner","cass"];const PS={init:SS,forward:ES,inverse:bS,names:RS};function Tn(r,n){var o;return r>1e-7?(o=r*n,(1-r*r)*(n/(1-o*o)-.5/r*Math.log((1-o)/(1+o)))):2*n}var Bl=1,Ol=2,Il=3,Ma=4;function xS(){var r=Math.abs(this.lat0);if(Math.abs(r-pt)<wt?this.mode=this.lat0<0?Bl:Ol:Math.abs(r)<wt?this.mode=Il:this.mode=Ma,this.es>0){var n;switch(this.qp=Tn(this.e,1),this.mmf=.5/(1-this.es),this.apa=US(this.es),this.mode){case Ol:this.dd=1;break;case Bl:this.dd=1;break;case Il:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Ma:this.rq=Math.sqrt(.5*this.qp),n=Math.sin(this.lat0),this.sinb1=Tn(this.e,n)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*n*n)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Ma&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function TS(r){var n,o,l,c,u,p,d,g,w,M,E=r.x,S=r.y;if(E=Ct(E-this.long0,this.over),this.sphere){if(u=Math.sin(S),M=Math.cos(S),l=Math.cos(E),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(o=this.mode===this.EQUIT?1+M*l:1+this.sinph0*u+this.cosph0*M*l,o<=wt)return null;o=Math.sqrt(2/o),n=o*M*Math.sin(E),o*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*M*l}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),Math.abs(S+this.lat0)<wt)return null;o=ie-S*.5,o=2*(this.mode===this.S_POLE?Math.cos(o):Math.sin(o)),n=o*Math.sin(E),o*=l}}else{switch(d=0,g=0,w=0,l=Math.cos(E),c=Math.sin(E),u=Math.sin(S),p=Tn(this.e,u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=p/this.qp,g=Math.sqrt(1-d*d)),this.mode){case this.OBLIQ:w=1+this.sinb1*d+this.cosb1*g*l;break;case this.EQUIT:w=1+g*l;break;case this.N_POLE:w=pt+S,p=this.qp-p;break;case this.S_POLE:w=S-pt,p=this.qp+p;break}if(Math.abs(w)<wt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:w=Math.sqrt(2/w),this.mode===this.OBLIQ?o=this.ymf*w*(this.cosb1*d-this.sinb1*g*l):o=(w=Math.sqrt(2/(1+g*l)))*d*this.ymf,n=this.xmf*w*g*c;break;case this.N_POLE:case this.S_POLE:p>=0?(n=(w=Math.sqrt(p))*c,o=l*(this.mode===this.S_POLE?w:-w)):n=o=0;break}}return r.x=this.a*n+this.x0,r.y=this.a*o+this.y0,r}function FS(r){r.x-=this.x0,r.y-=this.y0;var n=r.x/this.a,o=r.y/this.a,l,c,u,p,d,g,w;if(this.sphere){var M=0,E,S=0;if(E=Math.sqrt(n*n+o*o),c=E*.5,c>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(S=Math.sin(c),M=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(E)<=wt?0:Math.asin(o*S/E),n*=S,o=M*E;break;case this.OBLIQ:c=Math.abs(E)<=wt?this.lat0:Math.asin(M*this.sinph0+o*S*this.cosph0/E),n*=S*this.cosph0,o=(M-Math.sin(c)*this.sinph0)*E;break;case this.N_POLE:o=-o,c=pt-c;break;case this.S_POLE:c-=pt;break}l=o===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(n,o)}else{if(w=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n/=this.dd,o*=this.dd,g=Math.sqrt(n*n+o*o),g<wt)return r.x=this.long0,r.y=this.lat0,r;p=2*Math.asin(.5*g/this.rq),u=Math.cos(p),n*=p=Math.sin(p),this.mode===this.OBLIQ?(w=u*this.sinb1+o*p*this.cosb1/g,d=this.qp*w,o=g*this.cosb1*u-o*this.sinb1*p):(w=o*p/g,d=this.qp*w,o=g*u)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),d=n*n+o*o,!d)return r.x=this.long0,r.y=this.lat0,r;w=1-d/this.qp,this.mode===this.S_POLE&&(w=-w)}l=Math.atan2(n,o),c=LS(Math.asin(w),this.apa)}return r.x=Ct(this.long0+l,this.over),r.y=c,r}var kS=.3333333333333333,NS=.17222222222222222,GS=.10257936507936508,BS=.06388888888888888,OS=.0664021164021164,IS=.016415012942191543;function US(r){var n,o=[];return o[0]=r*kS,n=r*r,o[0]+=n*NS,o[1]=n*BS,n*=r,o[0]+=n*GS,o[1]+=n*OS,o[2]=n*IS,o}function LS(r,n){var o=r+r;return r+n[0]*Math.sin(o)+n[1]*Math.sin(o+o)+n[2]*Math.sin(o+o+o)}var VS=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const WS={init:xS,forward:TS,inverse:FS,names:VS,S_POLE:Bl,N_POLE:Ol,EQUIT:Il,OBLIQ:Ma};function Gn(r){return Math.abs(r)>1&&(r=r>1?1:-1),Math.asin(r)}function ZS(){Math.abs(this.lat1+this.lat2)<wt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ji(this.e3,this.sin_po,this.cos_po),this.qs1=Tn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ji(this.e3,this.sin_po,this.cos_po),this.qs2=Tn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Tn(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>wt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function zS(r){var n=r.x,o=r.y;this.sin_phi=Math.sin(o),this.cos_phi=Math.cos(o);var l=Tn(this.e3,this.sin_phi),c=this.a*Math.sqrt(this.c-this.ns0*l)/this.ns0,u=this.ns0*Ct(n-this.long0,this.over),p=c*Math.sin(u)+this.x0,d=this.rh-c*Math.cos(u)+this.y0;return r.x=p,r.y=d,r}function DS(r){var n,o,l,c,u,p;return r.x-=this.x0,r.y=this.rh-r.y+this.y0,this.ns0>=0?(n=Math.sqrt(r.x*r.x+r.y*r.y),l=1):(n=-Math.sqrt(r.x*r.x+r.y*r.y),l=-1),c=0,n!==0&&(c=Math.atan2(l*r.x,l*r.y)),l=n*this.ns0/this.a,this.sphere?p=Math.asin((this.c-l*l)/(2*this.ns0)):(o=(this.c-l*l)/this.ns0,p=this.phi1z(this.e3,o)),u=Ct(c/this.ns0+this.long0,this.over),r.x=u,r.y=p,r}function XS(r,n){var o,l,c,u,p,d=Gn(.5*n);if(r<wt)return d;for(var g=r*r,w=1;w<=25;w++)if(o=Math.sin(d),l=Math.cos(d),c=r*o,u=1-c*c,p=.5*u*u/l*(n/(1-g)-o/u+.5/r*Math.log((1-c)/(1+c))),d=d+p,Math.abs(p)<=1e-7)return d;return null}var jS=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const HS={init:ZS,forward:zS,inverse:DS,names:jS,phi1z:XS};function YS(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function JS(r){var n,o,l,c,u,p,d,g,w=r.x,M=r.y;return l=Ct(w-this.long0,this.over),n=Math.sin(M),o=Math.cos(M),c=Math.cos(l),p=this.sin_p14*n+this.cos_p14*o*c,u=1,p>0||Math.abs(p)<=wt?(d=this.x0+this.a*u*o*Math.sin(l)/p,g=this.y0+this.a*u*(this.cos_p14*n-this.sin_p14*o*c)/p):(d=this.x0+this.infinity_dist*o*Math.sin(l),g=this.y0+this.infinity_dist*(this.cos_p14*n-this.sin_p14*o*c)),r.x=d,r.y=g,r}function $S(r){var n,o,l,c,u,p;return r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,(n=Math.sqrt(r.x*r.x+r.y*r.y))?(c=Math.atan2(n,this.rc),o=Math.sin(c),l=Math.cos(c),p=Gn(l*this.sin_p14+r.y*o*this.cos_p14/n),u=Math.atan2(r.x*o,n*this.cos_p14*l-r.y*this.sin_p14*o),u=Ct(this.long0+u,this.over)):(p=this.phic0,u=0),r.x=u,r.y=p,r}var qS=["gnom"];const QS={init:YS,forward:JS,inverse:$S,names:qS};function KS(r,n){var o=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math.abs(n)-o)<1e-6)return n<0?-1*pt:pt;for(var l=Math.asin(.5*n),c,u,p,d,g=0;g<30;g++)if(u=Math.sin(l),p=Math.cos(l),d=r*u,c=Math.pow(1-d*d,2)/(2*p)*(n/(1-r*r)-u/(1-d*d)+.5/r*Math.log((1-d)/(1+d))),l+=c,Math.abs(c)<=1e-10)return l;return NaN}function tE(){this.sphere||(this.k0=ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function eE(r){var n=r.x,o=r.y,l,c,u=Ct(n-this.long0,this.over);if(this.sphere)l=this.x0+this.a*u*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var p=Tn(this.e,Math.sin(o));l=this.x0+this.a*this.k0*u,c=this.y0+this.a*p*.5/this.k0}return r.x=l,r.y=c,r}function iE(r){r.x-=this.x0,r.y-=this.y0;var n,o;return this.sphere?(n=Ct(this.long0+r.x/this.a/Math.cos(this.lat_ts),this.over),o=Math.asin(r.y/this.a*Math.cos(this.lat_ts))):(o=KS(this.e,2*r.y*this.k0/this.a),n=Ct(this.long0+r.x/(this.a*this.k0),this.over)),r.x=n,r.y=o,r}var nE=["cea"];const rE={init:tE,forward:eE,inverse:iE,names:nE};function sE(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function oE(r){var n=r.x,o=r.y,l=Ct(n-this.long0,this.over),c=Bn(o-this.lat0);return r.x=this.x0+this.a*l*this.rc,r.y=this.y0+this.a*c,r}function aE(r){var n=r.x,o=r.y;return r.x=Ct(this.long0+(n-this.x0)/(this.a*this.rc),this.over),r.y=Bn(this.lat0+(o-this.y0)/this.a),r}var lE=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const cE={init:sE,forward:oE,inverse:aE,names:lE};var Nf=20;function hE(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_o(this.es),this.e1=Ao(this.es),this.e2=mo(this.es),this.e3=go(this.es),this.ml0=this.a*Ue(this.e0,this.e1,this.e2,this.e3,this.lat0)}function uE(r){var n=r.x,o=r.y,l,c,u,p=Ct(n-this.long0,this.over);if(u=p*Math.sin(o),this.sphere)Math.abs(o)<=wt?(l=this.a*p,c=-1*this.a*this.lat0):(l=this.a*Math.sin(u)/Math.tan(o),c=this.a*(Bn(o-this.lat0)+(1-Math.cos(u))/Math.tan(o)));else if(Math.abs(o)<=wt)l=this.a*p,c=-1*this.ml0;else{var d=oc(this.a,this.e,Math.sin(o))/Math.tan(o);l=d*Math.sin(u),c=this.a*Ue(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+d*(1-Math.cos(u))}return r.x=l+this.x0,r.y=c+this.y0,r}function fE(r){var n,o,l,c,u,p,d,g,w;if(l=r.x-this.x0,c=r.y-this.y0,this.sphere)if(Math.abs(c+this.a*this.lat0)<=wt)n=Ct(l/this.a+this.long0,this.over),o=0;else{p=this.lat0+c/this.a,d=l*l/this.a/this.a+p*p,g=p;var M;for(u=Nf;u;--u)if(M=Math.tan(g),w=-1*(p*(g*M+1)-g-.5*(g*g+d)*M)/((g-p)/M-1),g+=w,Math.abs(w)<=wt){o=g;break}n=Ct(this.long0+Math.asin(l*Math.tan(g)/this.a)/Math.sin(o),this.over)}else if(Math.abs(c+this.ml0)<=wt)o=0,n=Ct(this.long0+l/this.a,this.over);else{p=(this.ml0+c)/this.a,d=l*l/this.a/this.a+p*p,g=p;var E,S,P,x,F;for(u=Nf;u;--u)if(F=this.e*Math.sin(g),E=Math.sqrt(1-F*F)*Math.tan(g),S=this.a*Ue(this.e0,this.e1,this.e2,this.e3,g),P=this.e0-2*this.e1*Math.cos(2*g)+4*this.e2*Math.cos(4*g)-6*this.e3*Math.cos(6*g),x=S/this.a,w=(p*(E*x+1)-x-.5*E*(x*x+d))/(this.es*Math.sin(2*g)*(x*x+d-2*p*x)/(4*E)+(p-x)*(E*P-2/Math.sin(2*g))-P),g-=w,Math.abs(w)<=wt){o=g;break}E=Math.sqrt(1-this.es*Math.pow(Math.sin(o),2))*Math.tan(o),n=Ct(this.long0+Math.asin(l*E/this.a)/Math.sin(o),this.over)}return r.x=n,r.y=o,r}var dE=["Polyconic","American_Polyconic","poly"];const pE={init:hE,forward:uE,inverse:fE,names:dE};function _E(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function AE(r){var n,o=r.x,l=r.y,c=l-this.lat0,u=o-this.long0,p=c/io*1e-5,d=u,g=1,w=0;for(n=1;n<=10;n++)g=g*p,w=w+this.A[n]*g;var M=w,E=d,S=1,P=0,x,F,G=0,Z=0;for(n=1;n<=6;n++)x=S*M-P*E,F=P*M+S*E,S=x,P=F,G=G+this.B_re[n]*S-this.B_im[n]*P,Z=Z+this.B_im[n]*S+this.B_re[n]*P;return r.x=Z*this.a+this.x0,r.y=G*this.a+this.y0,r}function mE(r){var n,o=r.x,l=r.y,c=o-this.x0,u=l-this.y0,p=u/this.a,d=c/this.a,g=1,w=0,M,E,S=0,P=0;for(n=1;n<=6;n++)M=g*p-w*d,E=w*p+g*d,g=M,w=E,S=S+this.C_re[n]*g-this.C_im[n]*w,P=P+this.C_im[n]*g+this.C_re[n]*w;for(var x=0;x<this.iterations;x++){var F=S,G=P,Z,W,D=p,tt=d;for(n=2;n<=6;n++)Z=F*S-G*P,W=G*S+F*P,F=Z,G=W,D=D+(n-1)*(this.B_re[n]*F-this.B_im[n]*G),tt=tt+(n-1)*(this.B_im[n]*F+this.B_re[n]*G);F=1,G=0;var q=this.B_re[1],K=this.B_im[1];for(n=2;n<=6;n++)Z=F*S-G*P,W=G*S+F*P,F=Z,G=W,q=q+n*(this.B_re[n]*F-this.B_im[n]*G),K=K+n*(this.B_im[n]*F+this.B_re[n]*G);var _t=q*q+K*K;S=(D*q+tt*K)/_t,P=(tt*q-D*K)/_t}var nt=S,ut=P,st=1,vt=0;for(n=1;n<=9;n++)st=st*nt,vt=vt+this.D[n]*st;var Pt=this.lat0+vt*io*1e5,Yt=this.long0+ut;return r.x=Yt,r.y=Pt,r}var gE=["New_Zealand_Map_Grid","nzmg"];const vE={init:_E,forward:AE,inverse:mE,names:gE};function yE(){}function wE(r){var n=r.x,o=r.y,l=Ct(n-this.long0,this.over),c=this.x0+this.a*l,u=this.y0+this.a*Math.log(Math.tan(Math.PI/4+o/2.5))*1.25;return r.x=c,r.y=u,r}function ME(r){r.x-=this.x0,r.y-=this.y0;var n=Ct(this.long0+r.x/this.a,this.over),o=2.5*(Math.atan(Math.exp(.8*r.y/this.a))-Math.PI/4);return r.x=n,r.y=o,r}var CE=["Miller_Cylindrical","mill"];const SE={init:yE,forward:wE,inverse:ME,names:CE};var EE=20;function bE(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=tc(this.es)}function RE(r){var n,o,l=r.x,c=r.y;if(l=Ct(l-this.long0,this.over),this.sphere){if(!this.m)c=this.n!==1?Math.asin(this.n*Math.sin(c)):c;else for(var u=this.n*Math.sin(c),p=EE;p;--p){var d=(this.m*c+Math.sin(c)-u)/(this.m+Math.cos(c));if(c-=d,Math.abs(d)<wt)break}n=this.a*this.C_x*l*(this.m+Math.cos(c)),o=this.a*this.C_y*c}else{var g=Math.sin(c),w=Math.cos(c);o=this.a*Kr(c,g,w,this.en),n=this.a*l*w/Math.sqrt(1-this.es*g*g)}return r.x=n,r.y=o,r}function PE(r){var n,o,l,c;return r.x-=this.x0,l=r.x/this.a,r.y-=this.y0,n=r.y/this.a,this.sphere?(n/=this.C_y,l=l/(this.C_x*(this.m+Math.cos(n))),this.m?n=Gn((this.m*n+Math.sin(n))/this.n):this.n!==1&&(n=Gn(Math.sin(n)/this.n)),l=Ct(l+this.long0,this.over),n=Bn(n)):(n=ec(r.y/this.a,this.es,this.en),c=Math.abs(n),c<pt?(c=Math.sin(n),o=this.long0+r.x*Math.sqrt(1-this.es*c*c)/(this.a*Math.cos(n)),l=Ct(o,this.over)):c-wt<pt&&(l=this.long0)),r.x=l,r.y=n,r}var xE=["Sinusoidal","sinu"];const TE={init:bE,forward:RE,inverse:PE,names:xE};function FE(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function kE(r){for(var n=r.x,o=r.y,l=Ct(n-this.long0,this.over),c=o,u=Math.PI*Math.sin(o);;){var p=-(c+Math.sin(c)-u)/(1+Math.cos(c));if(c+=p,Math.abs(p)<wt)break}c/=2,Math.PI/2-Math.abs(o)<wt&&(l=0);var d=.900316316158*this.a*l*Math.cos(c)+this.x0,g=1.4142135623731*this.a*Math.sin(c)+this.y0;return r.x=d,r.y=g,r}function NE(r){var n,o;r.x-=this.x0,r.y-=this.y0,o=r.y/(1.4142135623731*this.a),Math.abs(o)>.999999999999&&(o=.999999999999),n=Math.asin(o);var l=Ct(this.long0+r.x/(.900316316158*this.a*Math.cos(n)),this.over);l<-Math.PI&&(l=-Math.PI),l>Math.PI&&(l=Math.PI),o=(2*n+Math.sin(2*n))/Math.PI,Math.abs(o)>1&&(o=1);var c=Math.asin(o);return r.x=l,r.y=c,r}var GE=["Mollweide","moll"];const BE={init:FE,forward:kE,inverse:NE,names:GE};function OE(){Math.abs(this.lat1+this.lat2)<wt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_o(this.es),this.e1=Ao(this.es),this.e2=mo(this.es),this.e3=go(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=ji(this.e,this.sin_phi,this.cos_phi),this.ml1=Ue(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<wt?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=ji(this.e,this.sin_phi,this.cos_phi),this.ml2=Ue(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ue(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function IE(r){var n=r.x,o=r.y,l;if(this.sphere)l=this.a*(this.g-o);else{var c=Ue(this.e0,this.e1,this.e2,this.e3,o);l=this.a*(this.g-c)}var u=this.ns*Ct(n-this.long0,this.over),p=this.x0+l*Math.sin(u),d=this.y0+this.rh-l*Math.cos(u);return r.x=p,r.y=d,r}function UE(r){r.x-=this.x0,r.y=this.rh-r.y+this.y0;var n,o,l,c;this.ns>=0?(o=Math.sqrt(r.x*r.x+r.y*r.y),n=1):(o=-Math.sqrt(r.x*r.x+r.y*r.y),n=-1);var u=0;if(o!==0&&(u=Math.atan2(n*r.x,n*r.y)),this.sphere)return c=Ct(this.long0+u/this.ns,this.over),l=Bn(this.g-o/this.a),r.x=c,r.y=l,r;var p=this.g-o/this.a;return l=xa(p,this.e0,this.e1,this.e2,this.e3),c=Ct(this.long0+u/this.ns,this.over),r.x=c,r.y=l,r}var LE=["Equidistant_Conic","eqdc"];const VE={init:OE,forward:IE,inverse:UE,names:LE};function WE(){this.R=this.a}function ZE(r){var n=r.x,o=r.y,l=Ct(n-this.long0,this.over),c,u;Math.abs(o)<=wt&&(c=this.x0+this.R*l,u=this.y0);var p=Gn(2*Math.abs(o/Math.PI));(Math.abs(l)<=wt||Math.abs(Math.abs(o)-pt)<=wt)&&(c=this.x0,o>=0?u=this.y0+Math.PI*this.R*Math.tan(.5*p):u=this.y0+Math.PI*this.R*-Math.tan(.5*p));var d=.5*Math.abs(Math.PI/l-l/Math.PI),g=d*d,w=Math.sin(p),M=Math.cos(p),E=M/(w+M-1),S=E*E,P=E*(2/w-1),x=P*P,F=Math.PI*this.R*(d*(E-x)+Math.sqrt(g*(E-x)*(E-x)-(x+g)*(S-x)))/(x+g);l<0&&(F=-F),c=this.x0+F;var G=g+E;return F=Math.PI*this.R*(P*G-d*Math.sqrt((x+g)*(g+1)-G*G))/(x+g),o>=0?u=this.y0+F:u=this.y0-F,r.x=c,r.y=u,r}function zE(r){var n,o,l,c,u,p,d,g,w,M,E,S,P;return r.x-=this.x0,r.y-=this.y0,E=Math.PI*this.R,l=r.x/E,c=r.y/E,u=l*l+c*c,p=-Math.abs(c)*(1+u),d=p-2*c*c+l*l,g=-2*p+1+2*c*c+u*u,P=c*c/g+(2*d*d*d/g/g/g-9*p*d/g/g)/27,w=(p-d*d/3/g)/g,M=2*Math.sqrt(-w/3),E=3*P/w/M,Math.abs(E)>1&&(E>=0?E=1:E=-1),S=Math.acos(E)/3,r.y>=0?o=(-M*Math.cos(S+Math.PI/3)-d/3/g)*Math.PI:o=-(-M*Math.cos(S+Math.PI/3)-d/3/g)*Math.PI,Math.abs(l)<wt?n=this.long0:n=Ct(this.long0+Math.PI*(u-1+Math.sqrt(1+2*(l*l-c*c)+u*u))/2/l,this.over),r.x=n,r.y=o,r}var DE=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const XE={init:WE,forward:ZE,inverse:zE,names:DE};function jE(r,n,o,l,c,u){const p=l-n,d=Math.atan((1-u)*Math.tan(r)),g=Math.atan((1-u)*Math.tan(o)),w=Math.sin(d),M=Math.cos(d),E=Math.sin(g),S=Math.cos(g);let P=p,x,F=100,G,Z,W,D,tt,q,K,_t,nt,ut,st,vt,Pt,Yt;do{if(G=Math.sin(P),Z=Math.cos(P),W=Math.sqrt(S*G*(S*G)+(M*E-w*S*Z)*(M*E-w*S*Z)),W===0)return{azi1:0,s12:0};D=w*E+M*S*Z,tt=Math.atan2(W,D),q=M*S*G/W,K=1-q*q,_t=K!==0?D-2*w*E/K:0,nt=u/16*K*(4+u*(4-3*K)),x=P,P=p+(1-nt)*u*q*(tt+nt*W*(_t+nt*D*(-1+2*_t*_t)))}while(Math.abs(P-x)>1e-12&&--F>0);return F===0?{azi1:NaN,s12:NaN}:(ut=K*(c*c-c*(1-u)*(c*(1-u)))/(c*(1-u)*(c*(1-u))),st=1+ut/16384*(4096+ut*(-768+ut*(320-175*ut))),vt=ut/1024*(256+ut*(-128+ut*(74-47*ut))),Pt=vt*W*(_t+vt/4*(D*(-1+2*_t*_t)-vt/6*_t*(-3+4*W*W)*(-3+4*_t*_t))),Yt=c*(1-u)*st*(tt-Pt),{azi1:Math.atan2(S*G,M*E-w*S*Z),s12:Yt})}function HE(r,n,o,l,c,u){const p=Math.atan((1-u)*Math.tan(r)),d=Math.sin(p),g=Math.cos(p),w=Math.sin(o),M=Math.cos(o),E=Math.atan2(d,g*M),S=g*w,P=1-S*S,x=P*(c*c-c*(1-u)*(c*(1-u)))/(c*(1-u)*(c*(1-u))),F=1+x/16384*(4096+x*(-768+x*(320-175*x))),G=x/1024*(256+x*(-128+x*(74-47*x)));let Z=l/(c*(1-u)*F),W,D=100,tt,q,K,_t;do tt=Math.cos(2*E+Z),q=Math.sin(Z),K=Math.cos(Z),_t=G*q*(tt+G/4*(K*(-1+2*tt*tt)-G/6*tt*(-3+4*q*q)*(-3+4*tt*tt))),W=Z,Z=l/(c*(1-u)*F)+_t;while(Math.abs(Z-W)>1e-12&&--D>0);if(D===0)return{lat2:NaN,lon2:NaN};const nt=d*q-g*K*M,ut=Math.atan2(d*K+g*q*M,(1-u)*Math.sqrt(S*S+nt*nt)),st=Math.atan2(q*w,g*K-d*q*M),vt=u/16*P*(4+u*(4-3*P)),Pt=st-(1-vt)*u*S*(Z+vt*q*(tt+vt*K*(-1+2*tt*tt))),Yt=n+Pt;return{lat2:ut,lon2:Yt}}function YE(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function JE(r){var n=r.x,o=r.y,l=Math.sin(r.y),c=Math.cos(r.y),u=Ct(n-this.long0,this.over),p,d,g,w,M,E,S,P,x,F,G;return this.sphere?Math.abs(this.sin_p12-1)<=wt?(r.x=this.x0+this.a*(pt-o)*Math.sin(u),r.y=this.y0-this.a*(pt-o)*Math.cos(u),r):Math.abs(this.sin_p12+1)<=wt?(r.x=this.x0+this.a*(pt+o)*Math.sin(u),r.y=this.y0+this.a*(pt+o)*Math.cos(u),r):(x=this.sin_p12*l+this.cos_p12*c*Math.cos(u),S=Math.acos(x),P=S?S/Math.sin(S):1,r.x=this.x0+this.a*P*c*Math.sin(u),r.y=this.y0+this.a*P*(this.cos_p12*l-this.sin_p12*c*Math.cos(u)),r):(p=_o(this.es),d=Ao(this.es),g=mo(this.es),w=go(this.es),Math.abs(this.sin_p12-1)<=wt?(M=this.a*Ue(p,d,g,w,pt),E=this.a*Ue(p,d,g,w,o),r.x=this.x0+(M-E)*Math.sin(u),r.y=this.y0-(M-E)*Math.cos(u),r):Math.abs(this.sin_p12+1)<=wt?(M=this.a*Ue(p,d,g,w,pt),E=this.a*Ue(p,d,g,w,o),r.x=this.x0+(M+E)*Math.sin(u),r.y=this.y0+(M+E)*Math.cos(u),r):Math.abs(n)<wt&&Math.abs(o-this.lat0)<wt?(r.x=r.y=0,r):(F=jE(this.lat0,this.long0,o,n,this.a,this.f),G=F.azi1,r.x=F.s12*Math.sin(G),r.y=F.s12*Math.cos(G),r))}function $E(r){r.x-=this.x0,r.y-=this.y0;var n,o,l,c,u,p,d,g,w,M,E,S,P,x,F,G;return this.sphere?(n=Math.sqrt(r.x*r.x+r.y*r.y),n>2*pt*this.a?void 0:(o=n/this.a,l=Math.sin(o),c=Math.cos(o),u=this.long0,Math.abs(n)<=wt?p=this.lat0:(p=Gn(c*this.sin_p12+r.y*l*this.cos_p12/n),d=Math.abs(this.lat0)-pt,Math.abs(d)<=wt?this.lat0>=0?u=Ct(this.long0+Math.atan2(r.x,-r.y),this.over):u=Ct(this.long0-Math.atan2(-r.x,r.y),this.over):u=Ct(this.long0+Math.atan2(r.x*l,n*this.cos_p12*c-r.y*this.sin_p12*l),this.over)),r.x=u,r.y=p,r)):(g=_o(this.es),w=Ao(this.es),M=mo(this.es),E=go(this.es),Math.abs(this.sin_p12-1)<=wt?(S=this.a*Ue(g,w,M,E,pt),n=Math.sqrt(r.x*r.x+r.y*r.y),P=S-n,p=xa(P/this.a,g,w,M,E),u=Ct(this.long0+Math.atan2(r.x,-1*r.y),this.over),r.x=u,r.y=p,r):Math.abs(this.sin_p12+1)<=wt?(S=this.a*Ue(g,w,M,E,pt),n=Math.sqrt(r.x*r.x+r.y*r.y),P=n-S,p=xa(P/this.a,g,w,M,E),u=Ct(this.long0+Math.atan2(r.x,r.y),this.over),r.x=u,r.y=p,r):(x=Math.atan2(r.x,r.y),F=Math.sqrt(r.x*r.x+r.y*r.y),G=HE(this.lat0,this.long0,x,F,this.a,this.f),r.x=G.lon2,r.y=G.lat2,r))}var qE=["Azimuthal_Equidistant","aeqd"];const QE={init:YE,forward:JE,inverse:$E,names:qE};function KE(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function tb(r){var n,o,l,c,u,p,d,g,w=r.x,M=r.y;return l=Ct(w-this.long0,this.over),n=Math.sin(M),o=Math.cos(M),c=Math.cos(l),p=this.sin_p14*n+this.cos_p14*o*c,u=1,(p>0||Math.abs(p)<=wt)&&(d=this.a*u*o*Math.sin(l),g=this.y0+this.a*u*(this.cos_p14*n-this.sin_p14*o*c)),r.x=d,r.y=g,r}function eb(r){var n,o,l,c,u,p,d;return r.x-=this.x0,r.y-=this.y0,n=Math.sqrt(r.x*r.x+r.y*r.y),o=Gn(n/this.a),l=Math.sin(o),c=Math.cos(o),p=this.long0,Math.abs(n)<=wt?(d=this.lat0,r.x=p,r.y=d,r):(d=Gn(c*this.sin_p14+r.y*l*this.cos_p14/n),u=Math.abs(this.lat0)-pt,Math.abs(u)<=wt?(this.lat0>=0?p=Ct(this.long0+Math.atan2(r.x,-r.y),this.over):p=Ct(this.long0-Math.atan2(-r.x,r.y),this.over),r.x=p,r.y=d,r):(p=Ct(this.long0+Math.atan2(r.x*l,n*this.cos_p14*c-r.y*this.sin_p14*l),this.over),r.x=p,r.y=d,r))}var ib=["ortho"];const nb={init:KE,forward:tb,inverse:eb,names:ib};var ue={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ne={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function rb(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=pt-ie/2?this.face=ue.TOP:this.lat0<=-(pt-ie/2)?this.face=ue.BOTTOM:Math.abs(this.long0)<=ie?this.face=ue.FRONT:Math.abs(this.long0)<=pt+ie?this.face=this.long0>0?ue.RIGHT:ue.LEFT:this.face=ue.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function sb(r){var n={x:0,y:0},o,l,c,u,p,d,g={value:0};if(r.x-=this.long0,this.es!==0?o=Math.atan(this.one_minus_f_squared*Math.tan(r.y)):o=r.y,l=r.x,this.face===ue.TOP)u=pt-o,l>=ie&&l<=pt+ie?(g.value=ne.AREA_0,c=l-pt):l>pt+ie||l<=-(pt+ie)?(g.value=ne.AREA_1,c=l>0?l-_e:l+_e):l>-(pt+ie)&&l<=-ie?(g.value=ne.AREA_2,c=l+pt):(g.value=ne.AREA_3,c=l);else if(this.face===ue.BOTTOM)u=pt+o,l>=ie&&l<=pt+ie?(g.value=ne.AREA_0,c=-l+pt):l<ie&&l>=-ie?(g.value=ne.AREA_1,c=-l):l<-ie&&l>=-(pt+ie)?(g.value=ne.AREA_2,c=-l-pt):(g.value=ne.AREA_3,c=l>0?-l+_e:-l-_e);else{var w,M,E,S,P,x,F;this.face===ue.RIGHT?l=qr(l,+pt):this.face===ue.BACK?l=qr(l,+_e):this.face===ue.LEFT&&(l=qr(l,-pt)),S=Math.sin(o),P=Math.cos(o),x=Math.sin(l),F=Math.cos(l),w=P*F,M=P*x,E=S,this.face===ue.FRONT?(u=Math.acos(w),c=_a(u,E,M,g)):this.face===ue.RIGHT?(u=Math.acos(M),c=_a(u,E,-w,g)):this.face===ue.BACK?(u=Math.acos(-w),c=_a(u,E,-M,g)):this.face===ue.LEFT?(u=Math.acos(-M),c=_a(u,E,w,g)):(u=c=0,g.value=ne.AREA_0)}return d=Math.atan(12/_e*(c+Math.acos(Math.sin(c)*Math.cos(ie))-pt)),p=Math.sqrt((1-Math.cos(u))/(Math.cos(d)*Math.cos(d))/(1-Math.cos(Math.atan(1/Math.cos(c))))),g.value===ne.AREA_1?d+=pt:g.value===ne.AREA_2?d+=_e:g.value===ne.AREA_3&&(d+=1.5*_e),n.x=p*Math.cos(d),n.y=p*Math.sin(d),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,r.x=n.x,r.y=n.y,r}function ob(r){var n={lam:0,phi:0},o,l,c,u,p,d,g,w,M,E={value:0};if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,l=Math.atan(Math.sqrt(r.x*r.x+r.y*r.y)),o=Math.atan2(r.y,r.x),r.x>=0&&r.x>=Math.abs(r.y)?E.value=ne.AREA_0:r.y>=0&&r.y>=Math.abs(r.x)?(E.value=ne.AREA_1,o-=pt):r.x<0&&-r.x>=Math.abs(r.y)?(E.value=ne.AREA_2,o=o<0?o+_e:o-_e):(E.value=ne.AREA_3,o+=pt),M=_e/12*Math.tan(o),p=Math.sin(M)/(Math.cos(M)-1/Math.sqrt(2)),d=Math.atan(p),c=Math.cos(o),u=Math.tan(l),g=1-c*c*u*u*(1-Math.cos(Math.atan(1/Math.cos(d)))),g<-1?g=-1:g>1&&(g=1),this.face===ue.TOP)w=Math.acos(g),n.phi=pt-w,E.value===ne.AREA_0?n.lam=d+pt:E.value===ne.AREA_1?n.lam=d<0?d+_e:d-_e:E.value===ne.AREA_2?n.lam=d-pt:n.lam=d;else if(this.face===ue.BOTTOM)w=Math.acos(g),n.phi=w-pt,E.value===ne.AREA_0?n.lam=-d+pt:E.value===ne.AREA_1?n.lam=-d:E.value===ne.AREA_2?n.lam=-d-pt:n.lam=d<0?-d-_e:-d+_e;else{var S,P,x;S=g,M=S*S,M>=1?x=0:x=Math.sqrt(1-M)*Math.sin(d),M+=x*x,M>=1?P=0:P=Math.sqrt(1-M),E.value===ne.AREA_1?(M=P,P=-x,x=M):E.value===ne.AREA_2?(P=-P,x=-x):E.value===ne.AREA_3&&(M=P,P=x,x=-M),this.face===ue.RIGHT?(M=S,S=-P,P=M):this.face===ue.BACK?(S=-S,P=-P):this.face===ue.LEFT&&(M=S,S=P,P=-M),n.phi=Math.acos(-x)-pt,n.lam=Math.atan2(P,S),this.face===ue.RIGHT?n.lam=qr(n.lam,-pt):this.face===ue.BACK?n.lam=qr(n.lam,-_e):this.face===ue.LEFT&&(n.lam=qr(n.lam,+pt))}if(this.es!==0){var F,G,Z;F=n.phi<0?1:0,G=Math.tan(n.phi),Z=this.b/Math.sqrt(G*G+this.one_minus_f_squared),n.phi=Math.atan(Math.sqrt(this.a*this.a-Z*Z)/(this.one_minus_f*Z)),F&&(n.phi=-n.phi)}return n.lam+=this.long0,r.x=n.lam,r.y=n.phi,r}function _a(r,n,o,l){var c;return r<wt?(l.value=ne.AREA_0,c=0):(c=Math.atan2(n,o),Math.abs(c)<=ie?l.value=ne.AREA_0:c>ie&&c<=pt+ie?(l.value=ne.AREA_1,c-=pt):c>pt+ie||c<=-(pt+ie)?(l.value=ne.AREA_2,c=c>=0?c-_e:c+_e):(l.value=ne.AREA_3,c+=pt)),c}function qr(r,n){var o=r+n;return o<-_e?o+=lo:o>+_e&&(o-=lo),o}var ab=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const lb={init:rb,forward:sb,inverse:ob,names:ab};var Ul=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],to=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Hd=.8487,Yd=1.3523,Jd=Ye/5,cb=1/Jd,Jr=18,Ta=function(r,n){return r[0]+n*(r[1]+n*(r[2]+n*r[3]))},hb=function(r,n){return r[1]+n*(2*r[2]+n*3*r[3])};function ub(r,n,o,l){for(var c=n;l;--l){var u=r(c);if(c-=u,Math.abs(u)<o)break}return c}function fb(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function db(r){var n=Ct(r.x-this.long0,this.over),o=Math.abs(r.y),l=Math.floor(o*Jd);l<0?l=0:l>=Jr&&(l=Jr-1),o=Ye*(o-cb*l);var c={x:Ta(Ul[l],o)*n,y:Ta(to[l],o)};return r.y<0&&(c.y=-c.y),c.x=c.x*this.a*Hd+this.x0,c.y=c.y*this.a*Yd+this.y0,c}function pb(r){var n={x:(r.x-this.x0)/(this.a*Hd),y:Math.abs(r.y-this.y0)/(this.a*Yd)};if(n.y>=1)n.x/=Ul[Jr][0],n.y=r.y<0?-pt:pt;else{var o=Math.floor(n.y*Jr);for(o<0?o=0:o>=Jr&&(o=Jr-1);;)if(to[o][0]>n.y)--o;else if(to[o+1][0]<=n.y)++o;else break;var l=to[o],c=5*(n.y-l[0])/(to[o+1][0]-l[0]);c=ub(function(u){return(Ta(l,u)-n.y)/hb(l,u)},c,wt,100),n.x/=Ta(Ul[o],c),n.y=(5*o+c)*de,r.y<0&&(n.y=-n.y)}return n.x=Ct(n.x+this.long0,this.over),n}var _b=["Robinson","robin"];const Ab={init:fb,forward:db,inverse:pb,names:_b};function mb(){this.name="geocent"}function gb(r){var n=Od(r,this.es,this.a);return n}function vb(r){var n=Id(r,this.es,this.a,this.b);return n}var yb=["Geocentric","geocentric","geocent","Geocent"];const wb={init:mb,forward:gb,inverse:vb,names:yb};var Be={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},$s={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Mb(){if(Object.keys($s).forEach((function(o){if(typeof this[o]>"u")this[o]=$s[o].def;else{if($s[o].num&&isNaN(this[o]))throw new Error("Invalid parameter value, must be numeric "+o+" = "+this[o]);$s[o].num&&(this[o]=parseFloat(this[o]))}$s[o].degrees&&(this[o]=this[o]*de)}).bind(this)),Math.abs(Math.abs(this.lat0)-pt)<wt?this.mode=this.lat0<0?Be.S_POLE:Be.N_POLE:Math.abs(this.lat0)<wt?this.mode=Be.EQUIT:(this.mode=Be.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var r=this.tilt,n=this.azi;this.cg=Math.cos(n),this.sg=Math.sin(n),this.cw=Math.cos(r),this.sw=Math.sin(r)}function Cb(r){r.x-=this.long0;var n=Math.sin(r.y),o=Math.cos(r.y),l=Math.cos(r.x),c,u;switch(this.mode){case Be.OBLIQ:u=this.sinph0*n+this.cosph0*o*l;break;case Be.EQUIT:u=o*l;break;case Be.S_POLE:u=-n;break;case Be.N_POLE:u=n;break}switch(u=this.pn1/(this.p-u),c=u*o*Math.sin(r.x),this.mode){case Be.OBLIQ:u*=this.cosph0*n-this.sinph0*o*l;break;case Be.EQUIT:u*=n;break;case Be.N_POLE:u*=-(o*l);break;case Be.S_POLE:u*=o*l;break}var p,d;return p=u*this.cg+c*this.sg,d=1/(p*this.sw*this.h1+this.cw),c=(c*this.cg-u*this.sg)*this.cw*d,u=p*d,r.x=c*this.a,r.y=u*this.a,r}function Sb(r){r.x/=this.a,r.y/=this.a;var n={x:r.x,y:r.y},o,l,c;c=1/(this.pn1-r.y*this.sw),o=this.pn1*r.x*c,l=this.pn1*r.y*this.cw*c,r.x=o*this.cg+l*this.sg,r.y=l*this.cg-o*this.sg;var u=He(r.x,r.y);if(Math.abs(u)<wt)n.x=0,n.y=r.y;else{var p,d;switch(d=1-u*u*this.pfact,d=(this.p-Math.sqrt(d))/(this.pn1/u+u/this.pn1),p=Math.sqrt(1-d*d),this.mode){case Be.OBLIQ:n.y=Math.asin(p*this.sinph0+r.y*d*this.cosph0/u),r.y=(p-this.sinph0*Math.sin(n.y))*u,r.x*=d*this.cosph0;break;case Be.EQUIT:n.y=Math.asin(r.y*d/u),r.y=p*u,r.x*=d;break;case Be.N_POLE:n.y=Math.asin(p),r.y=-r.y;break;case Be.S_POLE:n.y=-Math.asin(p);break}n.x=Math.atan2(r.x,r.y)}return r.x=n.x+this.long0,r.y=n.y,r}var Eb=["Tilted_Perspective","tpers"];const bb={init:Mb,forward:Cb,inverse:Sb,names:Eb};function Rb(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var r=1-this.es,n=1/r;this.radius_p=Math.sqrt(r),this.radius_p2=r,this.radius_p_inv2=n,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Pb(r){var n=r.x,o=r.y,l,c,u,p;if(n=n-this.long0,this.shape==="ellipse"){o=Math.atan(this.radius_p2*Math.tan(o));var d=this.radius_p/He(this.radius_p*Math.cos(o),Math.sin(o));if(c=d*Math.cos(n)*Math.cos(o),u=d*Math.sin(n)*Math.cos(o),p=d*Math.sin(o),(this.radius_g-c)*c-u*u-p*p*this.radius_p_inv2<0)return r.x=Number.NaN,r.y=Number.NaN,r;l=this.radius_g-c,this.flip_axis?(r.x=this.radius_g_1*Math.atan(u/He(p,l)),r.y=this.radius_g_1*Math.atan(p/l)):(r.x=this.radius_g_1*Math.atan(u/l),r.y=this.radius_g_1*Math.atan(p/He(u,l)))}else this.shape==="sphere"&&(l=Math.cos(o),c=Math.cos(n)*l,u=Math.sin(n)*l,p=Math.sin(o),l=this.radius_g-c,this.flip_axis?(r.x=this.radius_g_1*Math.atan(u/He(p,l)),r.y=this.radius_g_1*Math.atan(p/l)):(r.x=this.radius_g_1*Math.atan(u/l),r.y=this.radius_g_1*Math.atan(p/He(u,l))));return r.x=r.x*this.a,r.y=r.y*this.a,r}function xb(r){var n=-1,o=0,l=0,c,u,p,d;if(r.x=r.x/this.a,r.y=r.y/this.a,this.shape==="ellipse"){this.flip_axis?(l=Math.tan(r.y/this.radius_g_1),o=Math.tan(r.x/this.radius_g_1)*He(1,l)):(o=Math.tan(r.x/this.radius_g_1),l=Math.tan(r.y/this.radius_g_1)*He(1,o));var g=l/this.radius_p;if(c=o*o+g*g+n*n,u=2*this.radius_g*n,p=u*u-4*c*this.C,p<0)return r.x=Number.NaN,r.y=Number.NaN,r;d=(-u-Math.sqrt(p))/(2*c),n=this.radius_g+d*n,o*=d,l*=d,r.x=Math.atan2(o,n),r.y=Math.atan(l*Math.cos(r.x)/n),r.y=Math.atan(this.radius_p_inv2*Math.tan(r.y))}else if(this.shape==="sphere"){if(this.flip_axis?(l=Math.tan(r.y/this.radius_g_1),o=Math.tan(r.x/this.radius_g_1)*Math.sqrt(1+l*l)):(o=Math.tan(r.x/this.radius_g_1),l=Math.tan(r.y/this.radius_g_1)*Math.sqrt(1+o*o)),c=o*o+l*l+n*n,u=2*this.radius_g*n,p=u*u-4*c*this.C,p<0)return r.x=Number.NaN,r.y=Number.NaN,r;d=(-u-Math.sqrt(p))/(2*c),n=this.radius_g+d*n,o*=d,l*=d,r.x=Math.atan2(o,n),r.y=Math.atan(l*Math.cos(r.x)/n)}return r.x=r.x+this.long0,r}var Tb=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Fb={init:Rb,forward:Pb,inverse:xb,names:Tb};var no=1.340264,ro=-.081106,so=893e-6,oo=.003796,Fa=Math.sqrt(3)/2;function kb(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function Nb(r){var n=Ct(r.x-this.long0,this.over),o=r.y,l=Math.asin(Fa*Math.sin(o)),c=l*l,u=c*c*c;return r.x=n*Math.cos(l)/(Fa*(no+3*ro*c+u*(7*so+9*oo*c))),r.y=l*(no+ro*c+u*(so+oo*c)),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function Gb(r){r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a;var n=1e-9,o=12,l=r.y,c,u,p,d,g,w;for(w=0;w<o&&(c=l*l,u=c*c*c,p=l*(no+ro*c+u*(so+oo*c))-r.y,d=no+3*ro*c+u*(7*so+9*oo*c),l-=g=p/d,!(Math.abs(g)<n));++w);return c=l*l,u=c*c*c,r.x=Fa*r.x*(no+3*ro*c+u*(7*so+9*oo*c))/Math.cos(l),r.y=Math.asin(Math.sin(l)/Fa),r.x=Ct(r.x+this.long0,this.over),r}var Bb=["eqearth","Equal Earth","Equal_Earth"];const Ob={init:kb,forward:Nb,inverse:Gb,names:Bb};var uo=1e-10;function Ib(){var r;if(this.phi1=this.lat1,Math.abs(this.phi1)<uo)throw new Error;this.es?(this.en=tc(this.es),this.m1=Kr(this.phi1,this.am1=Math.sin(this.phi1),r=Math.cos(this.phi1),this.en),this.am1=r/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Lb,this.forward=Ub):(Math.abs(this.phi1)+uo>=pt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Wb,this.forward=Vb)}function Ub(r){var n=Ct(r.x-(this.long0||0),this.over),o=r.y,l,c,u;return l=this.am1+this.m1-Kr(o,c=Math.sin(o),u=Math.cos(o),this.en),c=u*n/(l*Math.sqrt(1-this.es*c*c)),r.x=l*Math.sin(c),r.y=this.am1-l*Math.cos(c),r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function Lb(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var n,o,l,c;if(o=He(r.x,r.y=this.am1-r.y),c=ec(this.am1+this.m1-o,this.es,this.en),(n=Math.abs(c))<pt)n=Math.sin(c),l=o*Math.atan2(r.x,r.y)*Math.sqrt(1-this.es*n*n)/Math.cos(c);else if(Math.abs(n-pt)<=uo)l=0;else throw new Error;return r.x=Ct(l+(this.long0||0),this.over),r.y=Bn(c),r}function Vb(r){var n=Ct(r.x-(this.long0||0),this.over),o=r.y,l,c;return c=this.cphi1+this.phi1-o,Math.abs(c)>uo?(r.x=c*Math.sin(l=n*Math.cos(o)/c),r.y=this.cphi1-c*Math.cos(l)):r.x=r.y=0,r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function Wb(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var n,o,l=He(r.x,r.y=this.cphi1-r.y);if(o=this.cphi1+this.phi1-l,Math.abs(o)>pt)throw new Error;return Math.abs(Math.abs(o)-pt)<=uo?n=0:n=l*Math.atan2(r.x,r.y)/Math.cos(o),r.x=Ct(n+(this.long0||0),this.over),r.y=Bn(o),r}var Zb=["bonne","Bonne (Werner lat_1=90)"];const zb={init:Ib,names:Zb},Gf={OBLIQUE:{forward:Yb,inverse:$b},TRANSVERSE:{forward:Jb,inverse:qb}},ka={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Db(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=kd.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const r=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),n=Ai(r);if(!n)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);n.long0=0,this.obliqueProjection=n;let o;const l=Object.keys(ka),c=d=>{if(typeof this[d]>"u")return;const g=parseFloat(this[d])*de;if(isNaN(g))throw new Error("Invalid value for "+d+": "+this[d]);return g};for(let d=0;d<l.length;d++){const g=l[d],w=ka[g],M=Object.entries(w);if(M.some(([S])=>typeof this[S]<"u")){o=w;for(let S=0;S<M.length;S++){const[P,x]=M[S],F=c(P);if(typeof F>"u")throw new Error("Missing parameter: "+P+".");this[x]=F}break}}if(!o)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:u,phip:p}=Hb(this,o);this.lamp=u,Math.abs(p)>wt?(this.cphip=Math.cos(p),this.sphip=Math.sin(p),this.projectionType=Gf.OBLIQUE):this.projectionType=Gf.TRANSVERSE}function Xb(r){return this.projectionType.forward(this,r)}function jb(r){return this.projectionType.inverse(this,r)}function Hb(r,n){let o,l;if(n===ka.ROTATE){let c=r.oLongC,u=r.oLatC,p=r.oAlpha;if(Math.abs(Math.abs(u)-pt)<=wt)throw new Error("Invalid value for o_lat_c: "+r.o_lat_c+" should be < 90");l=c+Math.atan2(-1*Math.cos(p),-1*Math.sin(p)*Math.sin(u)),o=Math.asin(Math.cos(u)*Math.sin(p))}else if(n===ka.NEW_POLE)l=r.oLongP,o=r.oLatP;else{let c=r.oLong1,u=r.oLat1,p=r.oLong2,d=r.oLat2,g=Math.abs(u);if(Math.abs(u)>pt-wt)throw new Error("Invalid value for o_lat_1: "+r.o_lat_1+" should be < 90");if(Math.abs(d)>pt-wt)throw new Error("Invalid value for o_lat_2: "+r.o_lat_2+" should be < 90");if(Math.abs(u-d)<wt)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(g<wt)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");l=Math.atan2(Math.cos(u)*Math.sin(d)*Math.cos(c)-Math.sin(u)*Math.cos(d)*Math.cos(p),Math.sin(u)*Math.cos(d)*Math.sin(p)-Math.cos(u)*Math.sin(d)*Math.sin(c)),o=Math.atan(-1*Math.cos(l-c)/Math.tan(u))}return{lamp:l,phip:o}}function Yb(r,n){let{x:o,y:l}=n;o+=r.long0;const c=Math.cos(o),u=Math.sin(l),p=Math.cos(l);n.x=Ct(Math.atan2(p*Math.sin(o),r.sphip*p*c+r.cphip*u)+r.lamp),n.y=Math.asin(r.sphip*u-r.cphip*p*c);const d=r.obliqueProjection.forward(n);return r.isIdentity&&(d.x*=Ye,d.y*=Ye),d}function Jb(r,n){let{x:o,y:l}=n;o+=r.long0;const c=Math.cos(l),u=Math.cos(o);n.x=Ct(Math.atan2(c*Math.sin(o),Math.sin(l))+r.lamp),n.y=Math.asin(-1*c*u);const p=r.obliqueProjection.forward(n);return r.isIdentity&&(p.x*=Ye,p.y*=Ye),p}function $b(r,n){r.isIdentity&&(n.x*=de,n.y*=de);const o=r.obliqueProjection.inverse(n);let{x:l,y:c}=o;if(l<Number.MAX_VALUE){l-=r.lamp;const u=Math.cos(l),p=Math.sin(c),d=Math.cos(c);n.x=Math.atan2(d*Math.sin(l),r.sphip*d*u-r.cphip*p),n.y=Math.asin(r.sphip*p+r.cphip*d*u)}return n.x=Ct(n.x+r.long0),n}function qb(r,n){r.isIdentity&&(n.x*=de,n.y*=de);const o=r.obliqueProjection.inverse(n);let{x:l,y:c}=o;if(l<Number.MAX_VALUE){const u=Math.cos(c);l-=r.lamp,n.x=Math.atan2(u*Math.sin(l),-1*Math.sin(c)),n.y=Math.asin(u*Math.cos(l))}return n.x=Ct(n.x+r.long0),n}var Qb=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Kb={init:Db,forward:Xb,inverse:jb,names:Qb};function tR(r){r.Proj.projections.add(ya),r.Proj.projections.add(wa),r.Proj.projections.add(ZC),r.Proj.projections.add(qC),r.Proj.projections.add(iS),r.Proj.projections.add(aS),r.Proj.projections.add(dS),r.Proj.projections.add(gS),r.Proj.projections.add(CS),r.Proj.projections.add(PS),r.Proj.projections.add(WS),r.Proj.projections.add(HS),r.Proj.projections.add(QS),r.Proj.projections.add(rE),r.Proj.projections.add(cE),r.Proj.projections.add(pE),r.Proj.projections.add(vE),r.Proj.projections.add(SE),r.Proj.projections.add(TE),r.Proj.projections.add(BE),r.Proj.projections.add(VE),r.Proj.projections.add(XE),r.Proj.projections.add(QE),r.Proj.projections.add(nb),r.Proj.projections.add(lb),r.Proj.projections.add(Ab),r.Proj.projections.add(wb),r.Proj.projections.add(bb),r.Proj.projections.add(Fb),r.Proj.projections.add(Ob),r.Proj.projections.add(zb),r.Proj.projections.add(Kb)}const Fn=Object.assign(sC,{defaultDatum:"WGS84",Proj:Ai,WGS84:new Ai("WGS84"),Point:Qr,toPoint:Ud,defs:Pe,nadgrid:WM,transform:Pa,mgrs:oC,version:"__VERSION__"});tR(Fn);const eR={GpsTime:{arrayType:"float64"},ReturnNumber:{arrayType:"uint8"},NumberOfReturns:{arrayType:"uint8"},ScanDirectionFlag:{arrayType:"uint8"},EdgeOfFlightLine:{arrayType:"uint8"},ScanAngleRank:{arrayType:"int8"},ScanAngle:{arrayType:"float32"},UserData:{arrayType:"uint8"},PointSourceId:{arrayType:"uint16"},ScannerChannel:{arrayType:"uint8"},Synthetic:{arrayType:"uint8"},KeyPoint:{arrayType:"uint8"},Withheld:{arrayType:"uint8"},Overlap:{arrayType:"uint8"},ClassFlags:{arrayType:"uint8"},Nir:{arrayType:"uint16"},NearInfrared:{arrayType:"uint16"}},iR=new Set(["X","Y","Z","Intensity","Classification","Red","Green","Blue"]);function nR(r,n){switch(r){case"float64":return new Float64Array(n);case"float32":return new Float32Array(n);case"uint32":return new Uint32Array(n);case"uint16":return new Uint16Array(n);case"uint8":return new Uint8Array(n);case"int32":return new Int32Array(n);case"int16":return new Int16Array(n);case"int8":return new Int8Array(n);default:return new Float32Array(n)}}let El=null;async function Bf(){return El||(El=await Qf.createLazPerf({locateFile:r=>r.endsWith(".wasm")?"https://unpkg.com/laz-perf@0.0.7/lib/web/laz-perf.wasm":r})),El}function Of(r){const n=new Uint8Array(r);return async(o,l)=>n.slice(o,l)}function bl(r){if(r.startsWith("COMPD_CS[")){const n=r.indexOf("PROJCS[");if(n===-1)return r;let o=0,l=n;for(let c=n;c<r.length;c++)if(r[c]==="["&&o++,r[c]==="]"&&(o--,o===0)){l=c+1;break}return r.substring(n,l)}return r}function Rl(r){const o=.3048006096012192,l=r.toLowerCase();if(l.includes("us survey foot")||l.includes("us_survey_foot")||l.includes("foot_us"))return o;const c=[/unit\s*\[\s*"foot/i,/unit\s*\[\s*"international foot/i,/,\s*foot\s*\]/i,/"ft"/i];for(const u of c)if(u.test(r))return .3048;return 1}class rR{constructor(){I(this,"_onProgress")}async load(n,o){if(this._onProgress=o,typeof n=="string"){if(n.startsWith("http://")||n.startsWith("https://"))return await this._loadCopcFromUrl(n);{this._reportProgress(5,"Fetching file...");const c=await(await fetch(n)).arrayBuffer();return await this._loadCopcFromBuffer(c)}}else if(n instanceof File){this._reportProgress(5,"Reading file...");const l=await n.arrayBuffer();return await this._loadCopcFromBuffer(l)}else return await this._loadCopcFromBuffer(n)}_reportProgress(n,o){this._onProgress&&this._onProgress(n,o)}async _yieldToUI(){return new Promise(n=>setTimeout(n,0))}async _loadCopcFromUrl(n){this._reportProgress(5,"Initializing decoder..."),await this._yieldToUI();const o=await Bf();this._reportProgress(10,"Reading file header..."),await this._yieldToUI();let l;try{l=await je.Copc.create(n)}catch(u){if(u instanceof TypeError&&u.message==="Failed to fetch")throw new Error(`Failed to fetch from URL. This is likely a CORS (Cross-Origin Resource Sharing) error. The server at "${new URL(n).hostname}" doesn't allow requests from this origin. Solutions: (1) Download the file locally and load it as a file, (2) Use a CORS proxy, or (3) Host the file on a CORS-enabled server.`);if(u instanceof Error&&(u.message.includes("Invalid version")||u.message.includes("COPC info VLR is required")))return console.warn("copc.js cannot load this file, falling back to loaders.gl:",u.message),this._reportProgress(10,"Using alternative decoder..."),await this._loadUrlWithLoadersGL(n);throw u}this._reportProgress(15,"Loading hierarchy..."),await this._yieldToUI();const c=await this._loadFullHierarchy(n,l.info);return await this._processCopcData(n,l,c,o)}async _loadCopcFromBuffer(n){this._reportProgress(10,"Initializing decoder..."),await this._yieldToUI();const o=await Bf(),l=Of(n);this._reportProgress(15,"Reading file header..."),await this._yieldToUI();try{const c=await je.Copc.create(l);this._reportProgress(20,"Loading hierarchy..."),await this._yieldToUI();const u=await this._loadFullHierarchy(l,c.info);return await this._processCopcData(l,c,u,o)}catch(c){if(c instanceof Error){if(c.message.includes("COPC info VLR is required")){console.warn("Not a COPC file, trying to load as regular LAS:",c.message),this._reportProgress(15,"Loading as regular LAS file...");try{return await this._loadRegularLasFromBuffer(n,o)}catch(u){return console.warn("Las module failed, falling back to loaders.gl:",u),await this._loadWithLoadersGL(n)}}if(c.message.includes("Invalid version"))return console.warn("copc.js does not support this LAS version, falling back to loaders.gl:",c.message),this._reportProgress(15,"Using alternative decoder..."),await this._loadWithLoadersGL(n)}throw c}}async _loadRegularLasFromBuffer(n,o){this._reportProgress(20,"Parsing LAS header..."),await this._yieldToUI();const l=new Uint8Array(n),c=je.Las.Header.parse(l),u=(c.pointDataRecordFormat&128)!==0||c.generatingSoftware.toLowerCase().includes("laszip");let p;u?(this._reportProgress(30,"Decompressing LAZ data..."),await this._yieldToUI(),p=await je.Las.PointData.decompressFile(l,o)):p=l.slice(c.pointDataOffset),this._reportProgress(50,"Processing points..."),await this._yieldToUI();let d=null,g=!1,w=1,M;const E=Of(n);try{const z=await je.Las.Vlr.walk(E,c);for(const it of z)if(it.userId==="LASF_Projection"&&it.recordId===2112){const At=await je.Las.Vlr.fetch(E,it);M=new TextDecoder().decode(At).replace(/\0/g,"");break}}catch(z){console.warn("Failed to read VLRs:",z)}if(M)try{const z=bl(M),it=Fn(z,"EPSG:4326");d=At=>it.forward(At),g=!0,w=Rl(M)}catch(z){console.warn("Failed to setup coordinate transformation:",z)}const S=c.pointDataRecordFormat&127,P=je.Las.View.create(p,c);let x,F;if(g&&d){const[z,it]=d([c.min[0],c.min[1]]),[At,kt]=d([c.max[0],c.max[1]]);x={minX:Math.min(z,At),minY:Math.min(it,kt),minZ:c.min[2]*w,maxX:Math.max(z,At),maxY:Math.max(it,kt),maxZ:c.max[2]*w}}else x={minX:c.min[0],minY:c.min[1],minZ:c.min[2],maxX:c.max[0],maxY:c.max[1],maxZ:c.max[2]};F=[(x.minX+x.maxX)/2,(x.minY+x.maxY)/2,0];const G=c.pointCount;this._reportProgress(60,`Allocating memory for ${G.toLocaleString()} points...`),await this._yieldToUI();const Z=new Float32Array(G*3),W=new Float32Array(G),D=new Uint8Array(G),q=[2,3,5,7,8,10].includes(S);let K;q&&(K=new Uint8Array(G*4));const _t=P.getter("X"),nt=P.getter("Y"),ut=P.getter("Z"),st=P.getter("Intensity"),vt=P.getter("Classification"),Pt=q?P.getter("Red"):null,Yt=q?P.getter("Green"):null,$t=q?P.getter("Blue"):null;this._reportProgress(70,"Processing point coordinates..."),await this._yieldToUI();for(let z=0;z<G;z++){const it=_t(z),At=nt(z),kt=ut(z)*w;if(g&&d){const[Vt,bt]=d([it,At]);Z[z*3]=Vt-F[0],Z[z*3+1]=bt-F[1],Z[z*3+2]=kt}else Z[z*3]=it-F[0],Z[z*3+1]=At-F[1],Z[z*3+2]=kt;if(W[z]=st(z)/65535,D[z]=vt(z),q&&K&&Pt&&Yt&&$t&&(K[z*4]=Pt(z)>>8,K[z*4+1]=Yt(z)>>8,K[z*4+2]=$t(z)>>8,K[z*4+3]=255),z%1e5===0&&z>0){const Vt=70+z/G*25;this._reportProgress(Vt,`Processing points... ${z.toLocaleString()} / ${G.toLocaleString()}`),await this._yieldToUI()}}return this._reportProgress(95,"Finalizing..."),{positions:Z,intensities:W,classifications:D,colors:K,pointCount:G,bounds:x,hasRGB:q,hasIntensity:!0,hasClassification:!0,coordinateOrigin:F,wkt:M}}async _loadWithLoadersGL(n){var o,l,c,u,p,d,g,w,M,E;this._reportProgress(20,"Parsing point cloud data..."),await this._yieldToUI();const S=await wd(n,Sd,{las:{shape:"mesh",fp64:!1},worker:!1});this._reportProgress(50,"Processing points..."),await this._yieldToUI();const P=S.loaderData||{},x=P.header||{},F=x.pointsCount||x.vertexCount||((c=(l=(o=S.attributes)==null?void 0:o.POSITION)==null?void 0:l.value)!=null&&c.length?S.attributes.POSITION.value.length/3:0),G=((u=S.attributes)==null?void 0:u.POSITION)||((p=S.attributes)==null?void 0:p.positions),Z=G?.value;if(!Z||F===0)throw new Error("No point data found in file");let W=null,D=!1,tt=1,q;if(P.vlrs)for(const Tt of P.vlrs)Tt.userId==="LASF_Projection"&&Tt.recordId===2112&&(q=new TextDecoder().decode(Tt.data));if(q=q||x.wkt||((d=x.projection)==null?void 0:d.wkt),q)try{const Tt=bl(q),We=Fn(Tt,"EPSG:4326");W=xe=>We.forward(xe),D=!0,tt=Rl(q)}catch(Tt){console.warn("Failed to setup coordinate transformation:",Tt)}const K=Z[0],_t=Z[1];(Math.abs(K)>180||Math.abs(_t)>90)&&!D&&console.warn("Point cloud appears to be in a projected coordinate system but no WKT/projection info was found. Coordinates may not display correctly on the map.");let ut=1/0,st=1/0,vt=1/0,Pt=-1/0,Yt=-1/0,$t=-1/0;for(let Tt=0;Tt<F;Tt++){const We=Z[Tt*3],xe=Z[Tt*3+1],mi=Z[Tt*3+2];if(D&&W){const[dn,On]=W([We,xe]);ut=Math.min(ut,dn),Pt=Math.max(Pt,dn),st=Math.min(st,On),Yt=Math.max(Yt,On)}else ut=Math.min(ut,We),Pt=Math.max(Pt,We),st=Math.min(st,xe),Yt=Math.max(Yt,xe);const Ni=mi*tt;vt=Math.min(vt,Ni),$t=Math.max($t,Ni)}if(Math.abs(st)>90||Math.abs(Yt)>90||Math.abs(ut)>180||Math.abs(Pt)>180)throw new Error("Point cloud coordinates are not in WGS84 (latitude/longitude) format. The file appears to use a projected coordinate system but no valid projection information was found. Please ensure the LAS file contains proper CRS metadata (WKT in VLR records).");const z={minX:ut,minY:st,minZ:vt,maxX:Pt,maxY:Yt,maxZ:$t},it=[(z.minX+z.maxX)/2,(z.minY+z.maxY)/2,0];this._reportProgress(70,"Allocating arrays..."),await this._yieldToUI();const At=new Float32Array(F*3),kt=new Float32Array(F),Vt=new Uint8Array(F),bt=((g=S.attributes)==null?void 0:g.COLOR_0)||((w=S.attributes)==null?void 0:w.colors),Rt=bt?.value,Ae=Rt&&Rt.length>=F*3;let oe;Ae&&(oe=new Uint8Array(F*4));const Gt=(M=S.attributes)==null?void 0:M.intensity,qt=Gt?.value,Le=qt&&qt.length>=F,$e=(E=S.attributes)==null?void 0:E.classification,Ve=$e?.value,oi=Ve&&Ve.length>=F;this._reportProgress(80,"Transforming coordinates..."),await this._yieldToUI();for(let Tt=0;Tt<F;Tt++){const We=Z[Tt*3],xe=Z[Tt*3+1],mi=Z[Tt*3+2]*tt;if(D&&W){const[Ni,dn]=W([We,xe]);At[Tt*3]=Ni-it[0],At[Tt*3+1]=dn-it[1],At[Tt*3+2]=mi}else At[Tt*3]=We-it[0],At[Tt*3+1]=xe-it[1],At[Tt*3+2]=mi;Le&&(kt[Tt]=qt[Tt]/65535),oi&&(Vt[Tt]=Ve[Tt]),Ae&&oe&&((bt.size||3)===4?(oe[Tt*4]=Rt[Tt*4],oe[Tt*4+1]=Rt[Tt*4+1],oe[Tt*4+2]=Rt[Tt*4+2],oe[Tt*4+3]=Rt[Tt*4+3]):(oe[Tt*4]=Rt[Tt*3],oe[Tt*4+1]=Rt[Tt*3+1],oe[Tt*4+2]=Rt[Tt*3+2],oe[Tt*4+3]=255))}return this._reportProgress(95,"Finalizing..."),{positions:At,intensities:kt,classifications:Vt,colors:oe,pointCount:F,bounds:z,hasRGB:Ae,hasIntensity:Le,hasClassification:oi,coordinateOrigin:it,wkt:q}}async _loadUrlWithLoadersGL(n){this._reportProgress(15,"Downloading file..."),await this._yieldToUI();const o=await fetch(n);if(!o.ok)throw new Error(`Failed to fetch: ${o.status} ${o.statusText}`);const l=await o.arrayBuffer();return await this._loadWithLoadersGL(l)}async _loadFullHierarchy(n,o){const l={},c=async u=>{const p=await je.Hierarchy.load(n,u);for(const[d,g]of Object.entries(p.nodes))g&&(l[d]=g);for(const[,d]of Object.entries(p.pages))d&&await c(d)};return await c(o.rootHierarchyPage),{nodes:l,pages:{}}}async _processCopcData(n,o,l,c){const{header:u}=o;let p=null,d=!1,g=1;if(o.wkt)try{const st=bl(o.wkt),vt=Fn(st,"EPSG:4326");p=Pt=>vt.forward(Pt),d=!0,g=Rl(o.wkt)}catch(st){console.warn("Failed to setup coordinate transformation:",st)}const w=[];for(const[st,vt]of Object.entries(l.nodes))vt&&w.push({key:st,node:vt});const M=w.reduce((st,{node:vt})=>st+vt.pointCount,0);let E,S;if(d&&p){const[st,vt]=p([u.min[0],u.min[1]]),[Pt,Yt]=p([u.max[0],u.max[1]]);E={minX:Math.min(st,Pt),minY:Math.min(vt,Yt),minZ:u.min[2]*g,maxX:Math.max(st,Pt),maxY:Math.max(vt,Yt),maxZ:u.max[2]*g},S=[(E.minX+E.maxX)/2,(E.minY+E.maxY)/2,0]}else E={minX:u.min[0],minY:u.min[1],minZ:u.min[2],maxX:u.max[0],maxY:u.max[1],maxZ:u.max[2]},S=[(E.minX+E.maxX)/2,(E.minY+E.maxY)/2,0];this._reportProgress(25,`Allocating memory for ${M.toLocaleString()} points...`),await this._yieldToUI();const P=new Float32Array(M*3),x=new Float32Array(M),F=new Uint8Array(M);let G;const W=[2,3,5,7,8,10].includes(u.pointDataRecordFormat);W&&(G=new Uint8Array(M*4));const D={},tt=new Set;let q=!1,K=0,_t=Date.now();const nt=50;for(let st=0;st<w.length;st++){const{node:vt}=w[st],Pt=25+st/w.length*65,Yt=K.toLocaleString();this._reportProgress(Pt,`Loading points... ${Yt} / ${M.toLocaleString()}`);try{const $t=await je.Copc.loadPointDataView(n,o,vt,{lazPerf:c});if(!q){const Gt=Object.keys($t.dimensions||{});for(const qt of Gt)if(!iR.has(qt)){tt.add(qt);const Le=eR[qt]||{arrayType:"float32"};D[qt]=nR(Le.arrayType,M)}q=!0}const z=$t.getter("X"),it=$t.getter("Y"),At=$t.getter("Z"),kt=$t.getter("Intensity"),Vt=$t.getter("Classification"),bt=W?$t.getter("Red"):null,Rt=W?$t.getter("Green"):null,Ae=W?$t.getter("Blue"):null,oe=new Map;for(const Gt of tt)try{const qt=$t.getter(Gt);qt&&oe.set(Gt,qt)}catch{}for(let Gt=0;Gt<vt.pointCount;Gt++){const qt=z(Gt),Le=it(Gt),$e=At(Gt);if(d&&p){const[Ve,oi]=p([qt,Le]);P[K*3]=Ve-S[0],P[K*3+1]=oi-S[1],P[K*3+2]=$e*g}else P[K*3]=qt-S[0],P[K*3+1]=Le-S[1],P[K*3+2]=$e;x[K]=kt(Gt)/65535,F[K]=Vt(Gt),G&&bt&&Rt&&Ae&&(G[K*4]=bt(Gt)>>8,G[K*4+1]=Rt(Gt)>>8,G[K*4+2]=Ae(Gt)>>8,G[K*4+3]=255);for(const[Ve,oi]of oe){const Tt=D[Ve];Tt&&(Tt[K]=oi(Gt))}if(K++,Gt%5e4===0){const Ve=Date.now();Ve-_t>nt&&(await this._yieldToUI(),_t=Ve)}}}catch($t){console.warn(`Failed to load node: ${$t}`)}}this._reportProgress(92,"Processing complete, preparing visualization...");const ut={};for(const[st,vt]of Object.entries(D))ut[st]=vt.subarray(0,K);return{positions:P.subarray(0,K*3),coordinateOrigin:S,colors:G?.subarray(0,K*4),intensities:x.subarray(0,K),classifications:F.subarray(0,K),extraAttributes:Object.keys(ut).length>0?ut:void 0,pointCount:K,bounds:E,hasRGB:!!G,hasIntensity:!0,hasClassification:!0,wkt:o.wkt}}}Fn.defs("EPSG:2180","+proj=tmerc +lat_0=0 +lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs");function If(r){const n=new Uint8Array(r);return async(o,l)=>new Uint8Array(n.subarray(o,l))}const sR={GpsTime:{arrayType:"float64"},ReturnNumber:{arrayType:"uint8"},NumberOfReturns:{arrayType:"uint8"},ScanDirectionFlag:{arrayType:"uint8"},EdgeOfFlightLine:{arrayType:"uint8"},ScanAngleRank:{arrayType:"int8"},ScanAngle:{arrayType:"float32"},UserData:{arrayType:"uint8"},PointSourceId:{arrayType:"uint16"},ScannerChannel:{arrayType:"uint8"},Synthetic:{arrayType:"uint8"},KeyPoint:{arrayType:"uint8"},Withheld:{arrayType:"uint8"},Overlap:{arrayType:"uint8"},ClassFlags:{arrayType:"uint8"},Nir:{arrayType:"uint16"},NearInfrared:{arrayType:"uint16"}},oR=new Set(["X","Y","Z","Intensity","Classification","Red","Green","Blue"]);function aR(r,n){switch(r){case"float64":return new Float64Array(n);case"float32":return new Float32Array(n);case"uint32":return new Uint32Array(n);case"uint16":return new Uint16Array(n);case"uint8":return new Uint8Array(n);case"int32":return new Int32Array(n);case"int16":return new Int16Array(n);case"int8":return new Int8Array(n);default:return new Float32Array(n)}}let Pl=null;async function lR(){return Pl||(Pl=await Qf.createLazPerf({locateFile:r=>r.endsWith(".wasm")?"https://unpkg.com/laz-perf@0.0.7/lib/web/laz-perf.wasm":r})),Pl}function cR(r){if(r.startsWith("COMPD_CS[")){const n=r.indexOf("PROJCS[");if(n===-1)return r;let o=0,l=n;for(let c=n;c<r.length;c++)if(r[c]==="["&&o++,r[c]==="]"&&(o--,o===0)){l=c+1;break}return r.substring(n,l)}return r}function hR(r){const o=.3048006096012192,l=r.toLowerCase();if(l.includes("us survey foot")||l.includes("us_survey_foot")||l.includes("foot_us"))return o;const c=[/unit\s*\[\s*"foot/i,/unit\s*\[\s*"international foot/i,/,\s*foot\s*\]/i,/"ft"/i];for(const u of c)if(u.test(r))return .3048;return 1}function qs(r,n,o=""){let l=r,c=n,u=!1;return n>90?(c=90,u=!0):n<-90&&(c=-90,u=!0),r>180?(l=180,u=!0):r<-180&&(l=-180,u=!0),u&&console.warn(`COPC: Clamped transformed coordinates to valid WGS84 range${o?` (${o})`:""}:`,`[${r.toFixed(6)}, ${n.toFixed(6)}] -> [${l.toFixed(6)}, ${c.toFixed(6)}]`),[l,c]}const uR={pointBudget:5e6,maxConcurrentRequests:8,viewportDebounceMs:100,minDetailZoom:10,maxOctreeDepth:20,maxSubtreesPerViewport:60};class fR{constructor(n,o){I(this,"_originalSource"),I(this,"_source",null),I(this,"_copc",null),I(this,"_lazPerf",null),I(this,"_options"),I(this,"_hierarchyPages",new Map),I(this,"_loadedHierarchyKeys",new Set),I(this,"_rootHierarchyPage",null),I(this,"_nodeCache",new Map),I(this,"_positions",null),I(this,"_colors",null),I(this,"_intensities",null),I(this,"_classifications",null),I(this,"_extraAttributes",{}),I(this,"_coordinateOrigin",[0,0,0]),I(this,"_bounds",null),I(this,"_loadingQueue",[]),I(this,"_activeRequests",0),I(this,"_totalLoadedPoints",0),I(this,"_totalLoadedNodes",0),I(this,"_isInitialized",!1),I(this,"_transformer",null),I(this,"_verticalUnitFactor",1),I(this,"_needsTransform",!1),I(this,"_hasColor",!1),I(this,"_totalPointsInFile",0),I(this,"_octreeCube",[]),I(this,"_spacing",0),I(this,"_availableDimensions",new Set),I(this,"_dimensionsDetected",!1),I(this,"_eventHandlers",new Map),I(this,"_pendingLayerUpdate",!1),I(this,"_updateBatchTimeout",null),I(this,"_onPointsLoaded"),this._originalSource=n,this._options={...uR,...o}}async initialize(){if(this._lazPerf=await lR(),typeof this._originalSource=="string"){this._source=this._originalSource;try{this._copc=await je.Copc.create(this._source)}catch(c){throw c instanceof TypeError&&c.message==="Failed to fetch"?new Error(`Failed to fetch from URL. This is likely a CORS (Cross-Origin Resource Sharing) error. The server at "${new URL(this._source).hostname}" doesn't allow requests from this origin. Solutions: (1) Download the file locally and load it as a file, (2) Use a CORS proxy, or (3) Host the file on a CORS-enabled server.`):c}}else if(this._originalSource instanceof File){const c=await this._originalSource.arrayBuffer();this._source=If(c),this._copc=await je.Copc.create(this._source)}else this._source=If(this._originalSource),this._copc=await je.Copc.create(this._source);const{header:n,info:o}=this._copc;this._rootHierarchyPage=o.rootHierarchyPage,this._octreeCube=o.cube,this._spacing=o.spacing,this._totalPointsInFile=n.pointCount;const l=[2,3,5,7,8,10];if(this._hasColor=l.includes(n.pointDataRecordFormat),this._copc.wkt)try{const c=cR(this._copc.wkt),u=Fn(c,"EPSG:4326");this._transformer=p=>u.forward(p),this._needsTransform=!0,this._verticalUnitFactor=hR(this._copc.wkt)}catch(c){console.warn("Failed to setup coordinate transformation:",c)}else{const c=n.min[0],u=n.min[1],p=n.max[0],d=n.max[1];let g=null;if(c>=1e5&&p<=9e5&&u>=1e5&&d<=8e5&&(g="EPSG:2180"),g)try{const w=Fn(g,"EPSG:4326");this._transformer=M=>w.forward(M),this._needsTransform=!0}catch(w){console.warn(`Failed to setup coordinate transformation from ${g}:`,w)}}if(this._needsTransform&&this._transformer){const[c,u]=this._transformer([n.min[0],n.min[1]]),[p,d]=this._transformer([n.max[0],n.max[1]]),[g,w]=qs(c,u,"header bounds min"),[M,E]=qs(p,d,"header bounds max");this._bounds={minX:Math.min(g,M),minY:Math.min(w,E),minZ:n.min[2]*this._verticalUnitFactor,maxX:Math.max(g,M),maxY:Math.max(w,E),maxZ:n.max[2]*this._verticalUnitFactor}}else this._bounds={minX:n.min[0],minY:n.min[1],minZ:n.min[2],maxX:n.max[0],maxY:n.max[1],maxZ:n.max[2]};return this._coordinateOrigin=[(this._bounds.minX+this._bounds.maxX)/2,(this._bounds.minY+this._bounds.maxY)/2,0],this._allocateBuffers(),this._isInitialized=!0,{bounds:this._bounds,totalPoints:this._totalPointsInFile,hasRGB:this._hasColor,spacing:this._spacing}}_allocateBuffers(){const n=this._options.pointBudget;this._positions=new Float32Array(n*3),this._intensities=new Float32Array(n),this._classifications=new Uint8Array(n),this._hasColor&&(this._colors=new Uint8Array(n*4))}getSpacing(){return this._spacing}_parseNodeKey(n){const o=n.split("-").map(Number);return[o[0],o[1],o[2],o[3]]}_calculateNodeBounds(n){const[o,l,c,u]=n,p=this._octreeCube,d=p[0],g=p[1],w=p[2],E=p[3]-d,S=1/Math.pow(2,o),P=E*S,x=d+l*P,F=g+c*P,G=w+u*P,Z={minX:x,minY:F,minZ:G,maxX:x+P,maxY:F+P,maxZ:G+P};let W=Z;if(this._needsTransform&&this._transformer){const[D,tt]=this._transformer([x,F]),[q,K]=this._transformer([x+P,F+P]),[_t,nt]=qs(D,tt,"node bounds SW"),[ut,st]=qs(q,K,"node bounds NE");W={minX:Math.min(_t,ut),minY:Math.min(nt,st),minZ:G*this._verticalUnitFactor,maxX:Math.max(_t,ut),maxY:Math.max(nt,st),maxZ:(G+P)*this._verticalUnitFactor}}return{bounds:Z,boundsWgs84:W}}_boundsIntersectsViewport(n,o){const[l,c,u,p]=o.bounds,d=u-l,g=p-c,w=d*.2,M=g*.2,E=l-w,S=u+w,P=c-M,x=p+M;return!(n.maxX<E||n.minX>S||n.maxY<P||n.minY>x)}_calculateNodePriority(n,o){const l=(n.minX+n.maxX)/2,c=(n.minY+n.maxY)/2,u=l-o.center[0],p=c-o.center[1];return Math.sqrt(u*u+p*p)}async _ensureHierarchyLoaded(n){this._loadedHierarchyKeys.has(n)||this._rootHierarchyPage&&this._hierarchyPages.size===0&&await this._loadHierarchyRecursive(this._rootHierarchyPage)}async _loadHierarchyRecursive(n){const o=await je.Hierarchy.load(this._source,n);for(const[l,c]of Object.entries(o.nodes))if(c&&(this._loadedHierarchyKeys.add(l),!this._nodeCache.has(l))){const u=this._parseNodeKey(l),{bounds:p,boundsWgs84:d}=this._calculateNodeBounds(u);this._nodeCache.set(l,{key:l,keyArray:u,state:"pending",pointCount:c.pointCount,pointDataOffset:c.pointDataOffset,pointDataLength:c.pointDataLength,bounds:p,boundsWgs84:d})}for(const[,l]of Object.entries(o.pages))l&&await this._loadHierarchyRecursive(l)}async selectNodesForViewport(n){if(!this._isInitialized)throw new Error("CopcStreamingLoader not initialized. Call initialize() first.");await this._ensureHierarchyLoaded("0-0-0-0");const o=[],l=n.targetDepth;for(const[,c]of this._nodeCache){const u=c.keyArray[0];if(!(u>l+1)&&this._boundsIntersectsViewport(c.boundsWgs84,n)&&c.state!=="loaded"&&c.state!=="loading"){const p=this._calculateNodePriority(c.boundsWgs84,n);c.priority=p-u*1e-4,o.push(c)}}return o.sort((c,u)=>(c.priority||1/0)-(u.priority||1/0)),o}queueNode(n){n.state==="pending"&&(this._loadingQueue.find(o=>o.key===n.key)||(this._loadingQueue.push(n),this._loadingQueue.sort((o,l)=>(o.priority||1/0)-(l.priority||1/0))))}async loadQueuedNodes(){for(;this._loadingQueue.length>0&&this._activeRequests<this._options.maxConcurrentRequests&&this._totalLoadedPoints<this._options.pointBudget;){const n=this._loadingQueue.shift();if(this._totalLoadedPoints+n.pointCount>this._options.pointBudget){this._emit("budgetreached",this._getProgressEvent());break}this._loadNode(n)}}async _loadNode(n){if(n.state==="loaded"||n.state==="loading")return;n.state="loading",this._activeRequests++;const o=this._totalLoadedPoints;n.bufferStartIndex=o,this._totalLoadedPoints+=n.pointCount;try{const l={pointCount:n.pointCount,pointDataOffset:n.pointDataOffset,pointDataLength:n.pointDataLength},c=await je.Copc.loadPointDataView(this._source,this._copc,l,{lazPerf:this._lazPerf});if(!this._dimensionsDetected){const u=Object.keys(c.dimensions||{});for(const p of u)if(!oR.has(p)){this._availableDimensions.add(p);const d=sR[p]||{arrayType:"float32"};this._extraAttributes[p]=aR(d.arrayType,this._options.pointBudget)}this._dimensionsDetected=!0}await this._extractPointData(c,n,o),n.state="loaded",this._totalLoadedNodes++,this._emit("nodeloaded",n),this._emit("progress",this._getProgressEvent()),this._scheduleLayerUpdate()}catch(l){n.state="error",n.error=l instanceof Error?l.message:String(l),console.warn(`Failed to load node ${n.key}:`,l),this._emit("error",l)}finally{this._activeRequests--,this.loadQueuedNodes()}}async _extractPointData(n,o,l){const c=n.getter("X"),u=n.getter("Y"),p=n.getter("Z"),d=n.getter("Intensity"),g=n.getter("Classification"),w=this._hasColor?n.getter("Red"):null,M=this._hasColor?n.getter("Green"):null,E=this._hasColor?n.getter("Blue"):null,S=new Map;for(const P of this._availableDimensions)try{const x=n.getter(P);x&&S.set(P,x)}catch{}for(let P=0;P<o.pointCount;P++){const x=l+P,F=c(P),G=u(P),Z=p(P);if(this._needsTransform&&this._transformer){const[W,D]=this._transformer([F,G]),[tt,q]=qs(W,D,"");this._positions[x*3]=tt-this._coordinateOrigin[0],this._positions[x*3+1]=q-this._coordinateOrigin[1],this._positions[x*3+2]=Z*this._verticalUnitFactor}else this._positions[x*3]=F-this._coordinateOrigin[0],this._positions[x*3+1]=G-this._coordinateOrigin[1],this._positions[x*3+2]=Z;this._intensities[x]=d(P)/65535,this._classifications[x]=g(P),this._colors&&w&&M&&E&&(this._colors[x*4]=w(P)>>8,this._colors[x*4+1]=M(P)>>8,this._colors[x*4+2]=E(P)>>8,this._colors[x*4+3]=255);for(const[W,D]of S){const tt=this._extraAttributes[W];tt&&(tt[x]=D(P))}}}_scheduleLayerUpdate(){this._pendingLayerUpdate||(this._pendingLayerUpdate=!0,this._updateBatchTimeout=setTimeout(()=>{this._performLayerUpdate(),this._pendingLayerUpdate=!1,this._updateBatchTimeout=null},100))}_performLayerUpdate(){if(this._onPointsLoaded){const n=this.getLoadedPointCloudData();this._onPointsLoaded(n)}}setOnPointsLoaded(n){this._onPointsLoaded=n}getLoadedPointCloudData(){var n,o;const l=this._totalLoadedPoints,c={};for(const[u,p]of Object.entries(this._extraAttributes))c[u]=p.subarray(0,l);return{positions:this._positions.subarray(0,l*3),coordinateOrigin:this._coordinateOrigin,colors:(n=this._colors)==null?void 0:n.subarray(0,l*4),intensities:this._intensities.subarray(0,l),classifications:this._classifications.subarray(0,l),extraAttributes:Object.keys(c).length>0?c:void 0,pointCount:l,bounds:this._bounds,hasRGB:this._hasColor,hasIntensity:!0,hasClassification:!0,wkt:(o=this._copc)==null?void 0:o.wkt}}_getProgressEvent(){return{totalNodesInView:this._nodeCache.size,loadedNodes:this._totalLoadedNodes,loadedPoints:this._totalLoadedPoints,pointBudget:this._options.pointBudget,isLoading:this._activeRequests>0||this._loadingQueue.length>0,queueSize:this._loadingQueue.length}}on(n,o){this._eventHandlers.has(n)||this._eventHandlers.set(n,new Set),this._eventHandlers.get(n).add(o)}off(n,o){var l;(l=this._eventHandlers.get(n))==null||l.delete(o)}_emit(n,o){const l=this._eventHandlers.get(n);if(l)for(const c of l)c(n,o)}getLoadedPointCount(){return this._totalLoadedPoints}getLoadedNodeCount(){return this._totalLoadedNodes}isLoading(){return this._activeRequests>0||this._loadingQueue.length>0}getCopcMetadata(){var n;if(!this._copc)return;const{header:o,info:l}=this._copc,c=[];if(o.pointDataRecordFormat!==void 0){const u=["X","Y","Z","Intensity","ReturnNumber","NumberOfReturns","ScanDirectionFlag","EdgeOfFlightLine","Classification","ScanAngleRank","UserData","PointSourceId"];for(const d of u)c.push({name:d,type:d==="X"||d==="Y"||d==="Z"?"float":d==="Intensity"?"uint16":"uint8",size:d==="X"||d==="Y"||d==="Z"?8:d==="Intensity"?2:1,scale:d==="X"?o.scale[0]:d==="Y"?o.scale[1]:d==="Z"?o.scale[2]:void 0,offset:d==="X"?o.offset[0]:d==="Y"?o.offset[1]:d==="Z"?o.offset[2]:void 0});[2,3,5,7,8,10].includes(o.pointDataRecordFormat)&&(c.push({name:"Red",type:"uint16",size:2}),c.push({name:"Green",type:"uint16",size:2}),c.push({name:"Blue",type:"uint16",size:2}))}return{lasVersion:`${o.majorVersion}.${o.minorVersion}`,pointDataRecordFormat:o.pointDataRecordFormat,generatingSoftware:o.generatingSoftware||"Unknown",creationDate:o.fileCreationYear?{year:o.fileCreationYear,dayOfYear:o.fileCreationDayOfYear||1}:void 0,scale:o.scale,offset:o.offset,nativeBounds:{min:o.min,max:o.max},copcInfo:{spacing:l.spacing,rootHierarchyOffset:((n=l.rootHierarchyPage)==null?void 0:n.pageOffset)||0,pointSpacing:this._calculateNominalSpacing(o)},dimensions:c}}_calculateNominalSpacing(n){const o=n.max[0]-n.min[0],l=n.max[1]-n.min[1],c=o*l;return c<=0||n.pointCount<=0?0:Math.sqrt(c/n.pointCount)*this._verticalUnitFactor}getWkt(){var n;return(n=this._copc)==null?void 0:n.wkt}destroy(){this._updateBatchTimeout&&clearTimeout(this._updateBatchTimeout),this._loadingQueue=[],this._nodeCache.clear(),this._hierarchyPages.clear(),this._loadedHierarchyKeys.clear(),this._eventHandlers.clear(),this._positions=null,this._colors=null,this._intensities=null,this._classifications=null,this._extraAttributes={}}}const Uf={GpsTime:{arrayType:"float64"},ReturnNumber:{arrayType:"uint8"},NumberOfReturns:{arrayType:"uint8"},ScanDirectionFlag:{arrayType:"uint8"},EdgeOfFlightLine:{arrayType:"uint8"},ScanAngleRank:{arrayType:"int8"},ScanAngle:{arrayType:"float32"},UserData:{arrayType:"uint8"},PointSourceId:{arrayType:"uint16"},ScannerChannel:{arrayType:"uint8"},Synthetic:{arrayType:"uint8"},KeyPoint:{arrayType:"uint8"},Withheld:{arrayType:"uint8"},Overlap:{arrayType:"uint8"},ClassFlags:{arrayType:"uint8"},Nir:{arrayType:"uint16"},NearInfrared:{arrayType:"uint16"},OriginId:{arrayType:"uint32"}},Lf=new Set(["X","Y","Z","Intensity","Classification","Red","Green","Blue"]);function Vf(r,n){switch(r){case"float64":return new Float64Array(n);case"float32":return new Float32Array(n);case"uint32":return new Uint32Array(n);case"uint16":return new Uint16Array(n);case"uint8":return new Uint8Array(n);case"int32":return new Int32Array(n);case"int16":return new Int16Array(n);case"int8":return new Int8Array(n);default:return new Float32Array(n)}}function Wr(r,n,o=""){let l=r,c=n,u=!1;return n>90?(c=90,u=!0):n<-90&&(c=-90,u=!0),r>180?(l=180,u=!0):r<-180&&(l=-180,u=!0),u&&o&&console.warn(`EPT: Clamped transformed coordinates to valid WGS84 range${o?` (${o})`:""}:`,`[${r.toFixed(6)}, ${n.toFixed(6)}] -> [${l.toFixed(6)}, ${c.toFixed(6)}]`),[l,c]}function dR(r){if(r.startsWith("COMPD_CS[")){const n=r.indexOf("PROJCS[");if(n===-1)return r;let o=0,l=n;for(let c=n;c<r.length;c++)if(r[c]==="["&&o++,r[c]==="]"&&(o--,o===0)){l=c+1;break}return r.substring(n,l)}return r}function pR(r){const o=.3048006096012192,l=r.toLowerCase();if(l.includes("us survey foot")||l.includes("us_survey_foot")||l.includes("foot_us"))return o;const c=[/unit\s*\[\s*"foot/i,/unit\s*\[\s*"international foot/i,/,\s*foot\s*\]/i,/"ft"/i];for(const u of c)if(u.test(r))return .3048;return 1}const _R={pointBudget:5e6,maxConcurrentRequests:8,viewportDebounceMs:100,minDetailZoom:10,maxOctreeDepth:20,maxSubtreesPerViewport:60};class AR{constructor(n,o){I(this,"_baseUrl"),I(this,"_options"),I(this,"_metadata",null),I(this,"_hierarchyCache",new Map),I(this,"_hierarchyLoading",new Set),I(this,"_hierarchyFailures",new Map),I(this,"_subtreeRoots",new Set),I(this,"_rootHierarchyLoaded",!1),I(this,"_nodeCache",new Map),I(this,"_positions",null),I(this,"_colors",null),I(this,"_intensities",null),I(this,"_classifications",null),I(this,"_extraAttributes",{}),I(this,"_coordinateOrigin",[0,0,0]),I(this,"_bounds",null),I(this,"_loadingQueue",[]),I(this,"_activeRequests",0),I(this,"_totalLoadedPoints",0),I(this,"_totalLoadedNodes",0),I(this,"_isInitialized",!1),I(this,"_transformer",null),I(this,"_verticalUnitFactor",1),I(this,"_needsTransform",!1),I(this,"_hasColor",!1),I(this,"_hasIntensity",!1),I(this,"_totalPointsInFile",0),I(this,"_pointByteLength",0),I(this,"_parsedSchema",[]),I(this,"_availableDimensions",new Set),I(this,"_dimensionsDetected",!1),I(this,"_eventHandlers",new Map),I(this,"_pendingLayerUpdate",!1),I(this,"_updateBatchTimeout",null),I(this,"_onPointsLoaded"),I(this,"_isResetting",!1),this._baseUrl=n.endsWith("/ept.json")?n.slice(0,-9):n.replace(/\/$/,""),this._options={..._R,...o}}async initialize(){var n;try{const M=await fetch(`${this._baseUrl}/ept.json`);if(!M.ok)throw new Error(`Failed to fetch ept.json: ${M.status} ${M.statusText}`);this._metadata=await M.json()}catch(M){throw M instanceof TypeError&&M.message==="Failed to fetch"?new Error("Failed to fetch from URL. This is likely a CORS (Cross-Origin Resource Sharing) error. The server doesn't allow requests from this origin. Solutions: (1) Use a CORS proxy, or (2) Host the EPT data on a CORS-enabled server."):M}if(this._totalPointsInFile=this._metadata.numPoints??this._metadata.points??0,this._parseSchema(),this._hasColor=this._parsedSchema.some(M=>M.dimension.name==="Red"),this._hasIntensity=this._parsedSchema.some(M=>M.dimension.name==="Intensity"),(n=this._metadata.srs)!=null&&n.wkt)try{const M=dR(this._metadata.srs.wkt),E=Fn(M,"EPSG:4326");this._transformer=S=>E.forward(S),this._needsTransform=!0,this._verticalUnitFactor=pR(this._metadata.srs.wkt)}catch(M){console.warn("Failed to setup EPT coordinate transformation:",M)}const[o,l,c,u,p,d]=this._metadata.boundsConforming;if(this._needsTransform&&this._transformer){const[M,E]=this._transformer([o,l]),[S,P]=this._transformer([u,p]);if(isNaN(M)||isNaN(E)||isNaN(S)||isNaN(P)||!isFinite(M)||!isFinite(E)||!isFinite(S)||!isFinite(P))console.error("EPT coordinate transformation produced invalid bounds:",{input:{minX:o,minY:l,maxX:u,maxY:p},output:{rawMinLng:M,rawMinLat:E,rawMaxLng:S,rawMaxLat:P}}),this._bounds={minX:o,minY:l,minZ:c,maxX:u,maxY:p,maxZ:d},this._needsTransform=!1,this._transformer=null;else{const[x,F]=Wr(M,E,"header bounds min"),[G,Z]=Wr(S,P,"header bounds max");this._bounds={minX:Math.min(x,G),minY:Math.min(F,Z),minZ:c*this._verticalUnitFactor,maxX:Math.max(x,G),maxY:Math.max(F,Z),maxZ:d*this._verticalUnitFactor}}}else this._bounds={minX:o,minY:l,minZ:c,maxX:u,maxY:p,maxZ:d};this._coordinateOrigin=[(this._bounds.minX+this._bounds.maxX)/2,(this._bounds.minY+this._bounds.maxY)/2,0],this._allocateBuffers(),this._isInitialized=!0;const w=(this._metadata.bounds[3]-this._metadata.bounds[0])/this._metadata.span;return{bounds:this._bounds,totalPoints:this._totalPointsInFile,hasRGB:this._hasColor,spacing:w}}_parseSchema(){if(!this._metadata)return;let n=0;this._parsedSchema=[];for(const o of this._metadata.schema){const l=this._createDimensionGetter(o,n);this._parsedSchema.push({dimension:o,byteOffset:n,getter:l}),n+=o.size}this._pointByteLength=n}_createDimensionGetter(n,o){const l=n.scale??1,c=n.offset??0;if(n.type==="float"){if(n.size===4)return(u,p)=>u.getFloat32(p+o,!0)*l+c;if(n.size===8)return(u,p)=>u.getFloat64(p+o,!0)*l+c}else if(n.type==="signed"){if(n.size===1)return(u,p)=>u.getInt8(p+o)*l+c;if(n.size===2)return(u,p)=>u.getInt16(p+o,!0)*l+c;if(n.size===4)return(u,p)=>u.getInt32(p+o,!0)*l+c;if(n.size===8)return(u,p)=>Number(u.getBigInt64(p+o,!0))*l+c}else{if(n.size===1)return(u,p)=>u.getUint8(p+o)*l+c;if(n.size===2)return(u,p)=>u.getUint16(p+o,!0)*l+c;if(n.size===4)return(u,p)=>u.getUint32(p+o,!0)*l+c;if(n.size===8)return(u,p)=>Number(u.getBigUint64(p+o,!0))*l+c}return()=>0}_allocateBuffers(){const n=this._options.pointBudget;this._positions=new Float32Array(n*3),this._intensities=new Float32Array(n),this._classifications=new Uint8Array(n),this._hasColor&&(this._colors=new Uint8Array(n*4))}getSpacing(){return this._metadata?(this._metadata.bounds[3]-this._metadata.bounds[0])/this._metadata.span:1}_parseNodeKey(n){const o=n.split("-").map(Number);return[o[0],o[1],o[2],o[3]]}_calculateNodeBounds(n){if(!this._metadata)throw new Error("Metadata not loaded");const[o,l,c,u]=n,[p,d,g,w]=this._metadata.bounds,M=w-p,E=1/Math.pow(2,o),S=M*E,P=p+l*S,x=d+c*S,F=g+u*S,G={minX:P,minY:x,minZ:F,maxX:P+S,maxY:x+S,maxZ:F+S};let Z=G;if(this._needsTransform&&this._transformer){const[W,D]=this._transformer([P,x]),[tt,q]=this._transformer([P+S,x+S]),[K,_t]=Wr(W,D,"node bounds SW"),[nt,ut]=Wr(tt,q,"node bounds NE");Z={minX:Math.min(K,nt),minY:Math.min(_t,ut),minZ:F*this._verticalUnitFactor,maxX:Math.max(K,nt),maxY:Math.max(_t,ut),maxZ:(F+S)*this._verticalUnitFactor}}return{bounds:G,boundsWgs84:Z}}_boundsIntersectsViewport(n,o){const[l,c,u,p]=o.bounds,d=u-l,g=p-c,w=d*.2,M=g*.2,E=l-w,S=u+w,P=c-M,x=p+M;return!(n.maxX<E||n.minX>S||n.maxY<P||n.minY>x)}_calculateNodePriority(n,o){const l=(n.minX+n.maxX)/2,c=(n.minY+n.maxY)/2,u=l-o.center[0],p=c-o.center[1];return Math.sqrt(u*u+p*p)}async _loadHierarchy(n){if(this._hierarchyCache.has(n)||this._hierarchyLoading.has(n))return;const o=`${this._baseUrl}/ept-hierarchy/${n}.json`;this._hierarchyLoading.add(n);try{const l=await fetch(o);if(!l.ok){this._hierarchyFailures.set(n,Date.now()),console.warn(`Failed to load hierarchy ${n}: ${l.status}`);return}const c=await l.json();this._hierarchyCache.set(n,c),this._hierarchyFailures.delete(n);for(const[u,p]of Object.entries(c)){const d=this._parseNodeKey(u),{bounds:g,boundsWgs84:w}=this._calculateNodeBounds(d),M=this._nodeCache.get(u);p===-1?(this._subtreeRoots.add(u),M||this._nodeCache.set(u,{key:u,keyArray:d,state:"subtree",pointCount:0,bounds:g,boundsWgs84:w})):p>0&&(M?.state==="subtree"?(M.state="pending",M.pointCount=p,M.bounds=g,M.boundsWgs84=w):M||this._nodeCache.set(u,{key:u,keyArray:d,state:"pending",pointCount:p,bounds:g,boundsWgs84:w}))}}catch(l){this._hierarchyFailures.set(n,Date.now()),console.warn(`Error loading hierarchy ${n}:`,l)}finally{this._hierarchyLoading.delete(n)}}async _ensureHierarchyLoaded(){this._rootHierarchyLoaded||(await this._loadHierarchy("0-0-0-0"),this._rootHierarchyLoaded=!0)}async selectNodesForViewport(n){if(!this._isInitialized)throw new Error("EptStreamingLoader not initialized. Call initialize() first.");await this._ensureHierarchyLoaded();const o=n.targetDepth,l=Math.max(1,this._options.maxSubtreesPerViewport),c=new Set,u=3,p=Date.now(),d=5e3;for(let M=0;M<u;M++){const E=[];for(const[,x]of this._nodeCache){if(x.keyArray[0]>o+3)continue;const G=this._hierarchyFailures.get(x.key);if(x.state==="subtree"&&!this._hierarchyCache.has(x.key)&&!this._hierarchyLoading.has(x.key)&&!c.has(x.key)&&(!G||p-G>=d)&&this._boundsIntersectsViewport(x.boundsWgs84,n)){const Z=this._calculateNodePriority(x.boundsWgs84,n);E.push({key:x.key,priority:Z})}}if(E.length===0)break;E.sort((x,F)=>x.priority-F.priority);const S=Math.ceil(l/u),P=E.slice(0,S).map(x=>x.key);if(await Promise.all(P.map(x=>this._loadHierarchy(x))),P.forEach(x=>c.add(x)),c.size>=l)break}const g=[],w=5e3;for(const[,M]of this._nodeCache){const E=M.keyArray[0];if(M.state!=="subtree"&&M.state!=="error"&&!(M.lastFailedAt&&p-M.lastFailedAt<w)&&!(E>o+2)&&this._boundsIntersectsViewport(M.boundsWgs84,n)&&M.state!=="loaded"&&M.state!=="loading"){const S=this._calculateNodePriority(M.boundsWgs84,n);M.priority=S-E*1e-4,g.push(M)}}return g.sort((M,E)=>(M.priority||1/0)-(E.priority||1/0)),g}queueNode(n){n.state==="pending"&&(this._loadingQueue.find(o=>o.key===n.key)||(this._loadingQueue.push(n),this._loadingQueue.sort((o,l)=>(o.priority||1/0)-(l.priority||1/0))))}async loadQueuedNodes(){for(;this._loadingQueue.length>0&&this._activeRequests<this._options.maxConcurrentRequests&&this._totalLoadedPoints<this._options.pointBudget;){const n=this._loadingQueue.shift();if(this._totalLoadedPoints+n.pointCount>this._options.pointBudget){this._emit("budgetreached",this._getProgressEvent());break}this._loadNode(n)}}_getDataUrl(n){var o;const l=((o=this._metadata)==null?void 0:o.dataType)==="binary"?"bin":"laz";return`${this._baseUrl}/ept-data/${n}.${l}`}async _loadNode(n){var o;if(n.state==="loaded"||n.state==="loading")return;n.state="loading",this._activeRequests++;const l=this._totalLoadedPoints;n.bufferStartIndex=l;const c=n.pointCount;this._totalLoadedPoints+=c;try{const u=this._getDataUrl(n.key);((o=this._metadata)==null?void 0:o.dataType)==="laszip"?await this._loadLazNode(u,n,l):await this._loadBinaryNode(u,n,l),n.state="loaded",this._totalLoadedNodes++,this._emit("nodeloaded",n),this._emit("progress",this._getProgressEvent()),this._scheduleLayerUpdate()}catch(u){this._totalLoadedPoints-=c,n.bufferStartIndex=void 0,n.retryCount=(n.retryCount||0)+1,n.lastFailedAt=Date.now();const p=3;n.retryCount<p?(n.state="pending",n.error=u instanceof Error?u.message:String(u),n.retryCount===1&&console.warn(`Failed to load EPT node ${n.key} (will retry): ${n.error}`)):(n.state="error",n.error=u instanceof Error?u.message:String(u),console.warn(`Failed to load EPT node ${n.key} after ${p} attempts: ${n.error}`))}finally{this._activeRequests--,this.loadQueuedNodes()}}async _loadLazNode(n,o,l){var c,u,p,d,g,w;const M=await wd(n,Sd,{las:{shape:"mesh",fp64:!1},worker:!1}),E=((c=M.attributes)==null?void 0:c.POSITION)||((u=M.attributes)==null?void 0:u.positions),S=E?.value,P=((p=M.attributes)==null?void 0:p.COLOR_0)||((d=M.attributes)==null?void 0:d.colors),x=P?.value,F=M.loaderData||{};if(!S)throw new Error("No position data in LAZ file");const G=S.length/3;if(!this._dimensionsDetected){const q=Object.keys(M.attributes||{});for(const K of q)if(!Lf.has(K)&&K!=="POSITION"&&K!=="COLOR_0"&&K!=="positions"&&K!=="colors"){this._availableDimensions.add(K);const _t=Uf[K]||{arrayType:"float32"};this._extraAttributes[K]=Vf(_t.arrayType,this._options.pointBudget)}this._dimensionsDetected=!0}const Z=((g=M.attributes)==null?void 0:g.intensity)||F.intensity,W=Z?.value,D=((w=M.attributes)==null?void 0:w.classification)||F.classification,tt=D?.value;for(let q=0;q<G;q++){const K=l+q;if(K>=this._options.pointBudget)break;const _t=S[q*3],nt=S[q*3+1],ut=S[q*3+2];if(this._needsTransform&&this._transformer){const[st,vt]=this._transformer([_t,nt]),[Pt,Yt]=Wr(st,vt,"");this._positions[K*3]=Pt-this._coordinateOrigin[0],this._positions[K*3+1]=Yt-this._coordinateOrigin[1],this._positions[K*3+2]=ut*this._verticalUnitFactor}else this._positions[K*3]=_t-this._coordinateOrigin[0],this._positions[K*3+1]=nt-this._coordinateOrigin[1],this._positions[K*3+2]=ut;if(W&&(this._intensities[K]=W[q]/65535),tt&&(this._classifications[K]=tt[q]),this._colors&&x){const st=x.length/G,vt=q*st;this._colors[K*4]=x[vt],this._colors[K*4+1]=x[vt+1],this._colors[K*4+2]=x[vt+2],this._colors[K*4+3]=255}}}async _loadBinaryNode(n,o,l){var c,u,p,d,g,w,M,E,S;const P=await fetch(n);if(!P.ok)throw new Error(`Failed to fetch binary data: ${P.status}`);const x=await P.arrayBuffer(),F=new DataView(x),G=(c=this._parsedSchema.find(ut=>ut.dimension.name==="X"))==null?void 0:c.getter,Z=(u=this._parsedSchema.find(ut=>ut.dimension.name==="Y"))==null?void 0:u.getter,W=(p=this._parsedSchema.find(ut=>ut.dimension.name==="Z"))==null?void 0:p.getter,D=(d=this._parsedSchema.find(ut=>ut.dimension.name==="Intensity"))==null?void 0:d.getter,tt=(g=this._parsedSchema.find(ut=>ut.dimension.name==="Classification"))==null?void 0:g.getter,q=this._hasColor?(w=this._parsedSchema.find(ut=>ut.dimension.name==="Red"))==null?void 0:w.getter:null,K=this._hasColor?(M=this._parsedSchema.find(ut=>ut.dimension.name==="Green"))==null?void 0:M.getter:null,_t=this._hasColor?(E=this._parsedSchema.find(ut=>ut.dimension.name==="Blue"))==null?void 0:E.getter:null;if(!G||!Z||!W)throw new Error("Missing required X, Y, Z dimensions in EPT schema");if(!this._dimensionsDetected){for(const ut of this._parsedSchema){const st=ut.dimension.name;if(!Lf.has(st)){this._availableDimensions.add(st);const vt=Uf[st]||{arrayType:"float32"};this._extraAttributes[st]=Vf(vt.arrayType,this._options.pointBudget)}}this._dimensionsDetected=!0}const nt=new Map;for(const ut of this._availableDimensions){const st=this._parsedSchema.find(vt=>vt.dimension.name===ut);st&&nt.set(ut,st)}for(let ut=0;ut<o.pointCount;ut++){const st=l+ut;if(st>=this._options.pointBudget)break;const vt=ut*this._pointByteLength,Pt=G(F,vt),Yt=Z(F,vt),$t=W(F,vt);if(this._needsTransform&&this._transformer){const[z,it]=this._transformer([Pt,Yt]),[At,kt]=Wr(z,it,"");this._positions[st*3]=At-this._coordinateOrigin[0],this._positions[st*3+1]=kt-this._coordinateOrigin[1],this._positions[st*3+2]=$t*this._verticalUnitFactor}else this._positions[st*3]=Pt-this._coordinateOrigin[0],this._positions[st*3+1]=Yt-this._coordinateOrigin[1],this._positions[st*3+2]=$t;if(D&&(this._intensities[st]=D(F,vt)/65535),tt&&(this._classifications[st]=tt(F,vt)),this._colors&&q&&K&&_t){const z=(S=this._parsedSchema.find(At=>At.dimension.name==="Red"))==null?void 0:S.dimension;z?.size===2?(this._colors[st*4]=q(F,vt)>>8,this._colors[st*4+1]=K(F,vt)>>8,this._colors[st*4+2]=_t(F,vt)>>8):(this._colors[st*4]=q(F,vt),this._colors[st*4+1]=K(F,vt),this._colors[st*4+2]=_t(F,vt)),this._colors[st*4+3]=255}for(const[z,it]of nt){const At=this._extraAttributes[z];At&&(At[st]=it.getter(F,vt))}}}_scheduleLayerUpdate(){this._pendingLayerUpdate||(this._pendingLayerUpdate=!0,this._updateBatchTimeout=setTimeout(()=>{this._performLayerUpdate(),this._pendingLayerUpdate=!1,this._updateBatchTimeout=null},100))}_performLayerUpdate(){if(this._onPointsLoaded){const n=this.getLoadedPointCloudData();this._onPointsLoaded(n)}}setOnPointsLoaded(n){this._onPointsLoaded=n}getLoadedPointCloudData(){var n,o,l;const c=this._totalLoadedPoints,u={};for(const[p,d]of Object.entries(this._extraAttributes))u[p]=d.subarray(0,c);return{positions:this._positions.subarray(0,c*3),coordinateOrigin:this._coordinateOrigin,colors:(n=this._colors)==null?void 0:n.subarray(0,c*4),intensities:this._intensities.subarray(0,c),classifications:this._classifications.subarray(0,c),extraAttributes:Object.keys(u).length>0?u:void 0,pointCount:c,bounds:this._bounds,hasRGB:this._hasColor,hasIntensity:this._hasIntensity,hasClassification:!0,wkt:(l=(o=this._metadata)==null?void 0:o.srs)==null?void 0:l.wkt}}hasPendingSubtrees(n){if(!this._isInitialized)return!1;const o=n.targetDepth,l=Date.now(),c=5e3;for(const[,u]of this._nodeCache){if(u.keyArray[0]>o+3)continue;const d=this._hierarchyFailures.get(u.key);if(u.state==="subtree"&&!this._hierarchyCache.has(u.key)&&!this._hierarchyLoading.has(u.key)&&(!d||l-d>=c)&&this._boundsIntersectsViewport(u.boundsWgs84,n))return!0}return!1}_getProgressEvent(){return{totalNodesInView:this._nodeCache.size,loadedNodes:this._totalLoadedNodes,loadedPoints:this._totalLoadedPoints,pointBudget:this._options.pointBudget,isLoading:this._activeRequests>0||this._loadingQueue.length>0,queueSize:this._loadingQueue.length}}on(n,o){this._eventHandlers.has(n)||this._eventHandlers.set(n,new Set),this._eventHandlers.get(n).add(o)}off(n,o){var l;(l=this._eventHandlers.get(n))==null||l.delete(o)}_emit(n,o){const l=this._eventHandlers.get(n);if(l)for(const c of l)c(n,o)}getLoadedPointCount(){return this._totalLoadedPoints}getPointBudget(){return this._options.pointBudget}hasLoadedNodesInViewport(n,o=0){for(const[,l]of this._nodeCache)if(l.state==="loaded"&&!(l.keyArray[0]<o)&&this._boundsIntersectsViewport(l.boundsWgs84,n))return!0;return!1}getViewportCoverageRatio(n,o=0){const[l,c,u,p]=n.bounds,d=(u-l)*(p-c);if(d<=0)return 0;let g=0;for(const[,w]of this._nodeCache){if(w.state!=="loaded"||w.keyArray[0]<o)continue;const M=w.boundsWgs84.minX,E=w.boundsWgs84.minY,S=w.boundsWgs84.maxX,P=w.boundsWgs84.maxY,x=Math.max(l,M),F=Math.min(u,S),G=Math.max(c,E),Z=Math.min(p,P);if(x<F&&G<Z){const W=(F-x)*(Z-G);g+=W}}return Math.min(1,g/d)}getLoadedNodeCount(){return this._totalLoadedNodes}isLoading(){return this._activeRequests>0||this._loadingQueue.length>0}pruneQueueForViewport(n){if(this._loadingQueue.length!==0){this._loadingQueue=this._loadingQueue.filter(o=>this._boundsIntersectsViewport(o.boundsWgs84,n));for(const o of this._loadingQueue){const l=this._calculateNodePriority(o.boundsWgs84,n),c=o.keyArray[0];o.priority=l-c*1e-4}this._loadingQueue.sort((o,l)=>(o.priority||1/0)-(l.priority||1/0))}}resetLoadedData(){if(this._activeRequests>0||this._isResetting)return!1;this._isResetting=!0,this._loadingQueue=[],this._totalLoadedPoints=0,this._totalLoadedNodes=0;for(const[,n]of this._nodeCache)(n.state==="loaded"||n.state==="loading"||n.state==="error")&&(n.state="pending",n.bufferStartIndex=void 0,n.error=void 0,n.retryCount=void 0,n.lastFailedAt=void 0);return this._scheduleLayerUpdate(),this._isResetting=!1,!0}getMetadata(){return this._metadata}getExtendedMetadata(){if(!this._metadata)return;const n=this._metadata,o=[];if(n.schema)for(const c of n.schema)o.push({name:c.name,type:c.type,size:c.size,scale:c.scale,offset:c.offset});let l;if(n.bounds&&n.bounds.length>=6&&this._totalPointsInFile>0){const c=n.bounds[3]-n.bounds[0],u=n.bounds[4]-n.bounds[1],p=c*u;p>0&&(l=Math.sqrt(p/this._totalPointsInFile)*this._verticalUnitFactor)}return{version:n.version||"1.0",dataType:n.dataType||"laszip",hierarchyType:n.hierarchyType||"json",span:n.span||128,nativeBounds:n.bounds||[],srs:n.srs?{authority:n.srs.authority,horizontal:n.srs.horizontal,vertical:n.srs.vertical,wkt:n.srs.wkt}:void 0,dimensions:o,pointSpacing:l}}destroy(){this._updateBatchTimeout&&clearTimeout(this._updateBatchTimeout),this._loadingQueue=[],this._nodeCache.clear(),this._hierarchyCache.clear(),this._hierarchyLoading.clear(),this._hierarchyFailures.clear(),this._subtreeRoots.clear(),this._eventHandlers.clear(),this._positions=null,this._colors=null,this._intensities=null,this._classifications=null,this._extraAttributes={}}}function mR(r,n){if(n===0)return r.toString();const o=Math.max(0,-Math.floor(Math.log10(n)));return r.toFixed(o)}function Aa(r){const n=Math.random().toString(36).substring(2,9);return r?`${r}-${n}`:n}function gR(r,n){let o=null;return(...l)=>{o&&clearTimeout(o),o=setTimeout(()=>{r(...l),o=null},n)}}function vR(r){return r.toLocaleString()}function ma(r){var n;return((n=r.replace(/\\/g,"/").split("/").pop())==null?void 0:n.split("?")[0])||"unknown"}function Wf(r,n,o=1e5){if(r.length===0)return 0;if(r.length===1)return r[0];let l;if(r.length>o){const w=r.length/o;l=[];for(let M=0;M<o;M++){const E=Math.floor(M*w);l.push(r[E])}}else l=Array.from(r);l.sort((w,M)=>w-M);const u=n/100*(l.length-1),p=Math.floor(u),d=Math.ceil(u);if(p===d)return l[p];const g=u-p;return l[p]*(1-g)+l[d]*g}function Na(r,n=2,o=98){if(r.length===0)return{min:0,max:1};const l=Wf(r,n),c=Wf(r,o);return l===c?{min:l-.5,max:c+.5}:{min:l,max:c}}const yR=[[68,1,84],[72,40,120],[62,74,137],[49,104,142],[38,130,142],[31,158,137],[53,183,121],[109,205,89],[180,222,44],[253,231,37]],wR=[[13,8,135],[75,3,161],[125,3,168],[168,34,150],[203,70,121],[229,107,93],[248,148,65],[253,195,40],[240,249,33],[240,249,33]],MR=[[0,0,4],[40,11,84],[89,13,115],[137,31,107],[179,55,79],[213,87,49],[240,130,24],[253,184,43],[249,251,146],[252,255,164]],CR=[[0,0,4],[28,16,68],[79,18,123],[129,37,129],[181,54,122],[229,80,100],[251,135,97],[254,194,135],[254,247,187],[252,253,191]],SR=[[0,32,77],[0,58,103],[52,77,105],[87,95,108],[115,113,112],[143,132,108],[171,152,97],[200,173,79],[231,196,55],[253,231,37]],ER=[[48,18,59],[70,107,227],[40,170,225],[35,221,162],[122,249,85],[194,241,45],[241,206,51],[250,144,42],[229,68,25],[122,4,3]],bR=[[0,0,127],[0,0,255],[0,127,255],[0,255,255],[127,255,127],[255,255,0],[255,127,0],[255,0,0],[127,0,0],[127,0,0]],RR=[[150,0,90],[0,0,200],[0,125,255],[0,200,255],[0,255,125],[125,255,0],[255,255,0],[255,125,0],[255,0,0],[128,0,0]],PR=[[51,51,153],[51,102,153],[51,153,153],[102,178,102],[153,204,102],[204,229,102],[204,204,153],[178,153,102],[153,102,51],[255,255,255]],xR=[[59,76,192],[98,130,234],[141,176,254],[184,208,249],[221,221,221],[245,196,173],[244,154,123],[222,96,77],[180,4,38],[180,4,38]],TR=[[0,0,0],[28,28,28],[57,57,57],[85,85,85],[113,113,113],[142,142,142],[170,170,170],[198,198,198],[227,227,227],[255,255,255]],xn={viridis:yR,plasma:wR,inferno:MR,magma:CR,cividis:SR,turbo:ER,jet:bR,rainbow:RR,terrain:PR,coolwarm:xR,gray:TR},FR=["viridis","plasma","inferno","magma","cividis","turbo","jet","rainbow","terrain","coolwarm","gray"],kR={viridis:"Viridis",plasma:"Plasma",inferno:"Inferno",magma:"Magma",cividis:"Cividis",turbo:"Turbo",jet:"Jet",rainbow:"Rainbow",terrain:"Terrain",coolwarm:"Cool-Warm",gray:"Grayscale"};function NR(r){return xn[r]||xn.viridis}const $d={0:[128,128,128],1:[128,128,128],2:[165,113,78],3:[144,238,144],4:[34,139,34],5:[0,100,0],6:[255,165,0],7:[255,0,0],8:[128,128,128],9:[0,0,255],10:[139,90,43],11:[128,128,128],12:[128,128,128],13:[255,255,0],14:[255,200,0],15:[200,200,0],16:[100,100,100],17:[0,128,255],18:[255,0,255]};class GR{constructor(){I(this,"_lastComputedBounds")}getColors(n,o,l={}){return this.getColorsWithBounds(n,o,l).colors}getColorsWithBounds(n,o,l={}){const c=new Uint8Array(n.pointCount*4),u=l.colormap??"viridis",p=l.colorRange,d=l.usePercentile??!0;if(typeof o=="string")switch(o){case"elevation":return this._colorByElevation(n,c,u,p,d);case"intensity":return this._colorByIntensity(n,c,u,p,d);case"classification":return{colors:this._colorByClassification(n,c,l.hiddenClassifications)};case"rgb":return{colors:this._colorByRGB(n,c)};default:return this._colorByElevation(n,c,u,p,d)}else return{colors:this._colorByCustom(n,c,o,u,p,d)}}getLastComputedBounds(){return this._lastComputedBounds}_computeBounds(n,o,l,c){if(l){if(l.mode==="absolute")return{min:l.absoluteMin??o.min,max:l.absoluteMax??o.max};{const u=l.percentileLow??2,p=l.percentileHigh??98;return Na(n,u,p)}}else return c?Na(n,2,98):o}_colorByElevation(n,o,l,c,u){var p,d;if(!n.positions||n.positions.length===0)return{colors:o};const g=new Float32Array(n.pointCount);for(let F=0;F<n.pointCount;F++)g[F]=n.positions[F*3+2]??0;const w={min:((p=n.bounds)==null?void 0:p.minZ)??0,max:((d=n.bounds)==null?void 0:d.maxZ)??1},M=this._computeBounds(g,w,c,u);this._lastComputedBounds=M;const{min:E,max:S}=M,P=S-E||1,x=xn[l]||xn.viridis;for(let F=0;F<n.pointCount;F++){const Z=(g[F]-E)/P,W=this._interpolateRamp(x,Z);o[F*4]=W[0],o[F*4+1]=W[1],o[F*4+2]=W[2],o[F*4+3]=255}return{colors:o,bounds:M}}_colorByIntensity(n,o,l,c,u){if(!n.hasIntensity||!n.intensities)return this._colorByElevation(n,o,l,c,u);let p=1/0,d=-1/0;for(let x=0;x<n.pointCount;x++){const F=n.intensities[x];F<p&&(p=F),F>d&&(d=F)}const g={min:p,max:d},w=this._computeBounds(n.intensities,g,c,u);this._lastComputedBounds=w;const{min:M,max:E}=w,S=E-M||1,P=xn[l]||xn.gray;for(let x=0;x<n.pointCount;x++){const G=(n.intensities[x]-M)/S,Z=this._interpolateRamp(P,G);o[x*4]=Z[0],o[x*4+1]=Z[1],o[x*4+2]=Z[2],o[x*4+3]=255}return{colors:o,bounds:w}}_colorByClassification(n,o,l){if(!n.hasClassification||!n.classifications)return this._colorByElevation(n,o,"viridis",void 0,!0).colors;for(let c=0;c<n.pointCount;c++){const u=n.classifications[c],p=$d[u]||[128,128,128];o[c*4]=p[0],o[c*4+1]=p[1],o[c*4+2]=p[2],o[c*4+3]=l?.has(u)?0:255}return o}_colorByRGB(n,o){if(!n.hasRGB||!n.colors)return this._colorByElevation(n,o,"viridis",void 0,!0).colors;for(let l=0;l<n.pointCount;l++)o[l*4]=n.colors[l*4],o[l*4+1]=n.colors[l*4+1],o[l*4+2]=n.colors[l*4+2],o[l*4+3]=255;return o}_colorByCustom(n,o,l,c,u,p){return this._colorByElevation(n,o,c,u,p).colors}_interpolateRamp(n,o){if(!Number.isFinite(o))return n[0];const l=Math.max(0,Math.min(1,o)),c=Math.min(Math.floor(l*(n.length-1)),n.length-2),u=l*(n.length-1)-c;return[Math.round(n[c][0]+(n[c+1][0]-n[c][0])*u),Math.round(n[c][1]+(n[c+1][1]-n[c][1])*u),Math.round(n[c][2]+(n[c+1][2]-n[c][2])*u)]}}function BR(r){return{0:"Never Classified",1:"Unclassified",2:"Ground",3:"Low Vegetation",4:"Medium Vegetation",5:"High Vegetation",6:"Building",7:"Low Point (Noise)",8:"Reserved",9:"Water",10:"Rail",11:"Road Surface",12:"Reserved",13:"Wire - Guard",14:"Wire - Conductor",15:"Transmission Tower",16:"Wire-Structure Connector",17:"Bridge Deck",18:"High Noise"}[r]||`Class ${r}`}function ga(r){const n=new Set;if(r.hasClassification&&r.classifications)for(let o=0;o<r.pointCount;o++)n.add(r.classifications[o]);return n}class OR{constructor(n,o={}){I(this,"_deckOverlay"),I(this,"_pointClouds"),I(this,"_options"),I(this,"_colorProcessor"),I(this,"_lastComputedBounds"),this._deckOverlay=n,this._pointClouds=new Map,this._colorProcessor=new GR,this._options={pointSize:o.pointSize??2,opacity:o.opacity??1,colorScheme:o.colorScheme??"elevation",usePercentile:o.usePercentile??!0,colormap:o.colormap??"viridis",colorRange:o.colorRange,elevationRange:o.elevationRange??null,pickable:o.pickable??!1,zOffset:o.zOffset??0,onHover:o.onHover}}setOnHover(n){this._options.onHover=n}addPointCloud(n,o){const l=this._colorProcessor.getColorsWithBounds(o,this._options.colorScheme,{usePercentile:this._options.usePercentile,colormap:this._options.colormap,colorRange:this._options.colorRange,hiddenClassifications:this._options.hiddenClassifications});l.bounds&&(this._lastComputedBounds=l.bounds);const c=o.coordinateOrigin;this._pointClouds.set(n,{id:n,data:o,colors:l.colors,coordinateOrigin:c,visible:!0,opacityOverride:null}),this._createLayer(n)}updatePointCloud(n,o){if(!o.positions||o.pointCount===0)return;const l=this._pointClouds.get(n);if(l){const c=this._colorProcessor.getColorsWithBounds(o,this._options.colorScheme,{usePercentile:this._options.usePercentile,colormap:this._options.colormap,colorRange:this._options.colorRange,hiddenClassifications:this._options.hiddenClassifications});c.bounds&&(this._lastComputedBounds=c.bounds),this._pointClouds.set(n,{id:n,data:o,colors:c.colors,coordinateOrigin:o.coordinateOrigin,visible:l.visible,opacityOverride:l.opacityOverride}),this._createLayer(n)}else this.addPointCloud(n,o)}getPointCount(n){var o;return((o=this._pointClouds.get(n))==null?void 0:o.data.pointCount)||0}removePointCloud(n){const o=this._pointClouds.get(n);if(o){const c=Math.ceil(o.data.pointCount/1e6);for(let u=0;u<c;u++)this._deckOverlay.removeLayer(`pointcloud-${n}-chunk${u}`)}this._pointClouds.delete(n)}hasPointCloud(n){return this._pointClouds.has(n)}getPointCloudIds(){return Array.from(this._pointClouds.keys())}getPointCloudBounds(n){var o;return(o=this._pointClouds.get(n))==null?void 0:o.data.bounds}updateStyle(n){const o=n.colorScheme!==void 0&&n.colorScheme!==this._options.colorScheme,l=n.usePercentile!==void 0&&n.usePercentile!==this._options.usePercentile,c=n.colormap!==void 0&&n.colormap!==this._options.colormap,u=n.colorRange!==void 0,p=n.hiddenClassifications!==void 0;if(this._options={...this._options,...n},o||l||c||u||p)for(const[d,g]of this._pointClouds){const w=this._colorProcessor.getColorsWithBounds(g.data,this._options.colorScheme,{usePercentile:this._options.usePercentile,colormap:this._options.colormap,colorRange:this._options.colorRange,hiddenClassifications:this._options.hiddenClassifications});w.bounds&&(this._lastComputedBounds=w.bounds),this._pointClouds.set(d,{...g,colors:w.colors,coordinateOrigin:g.coordinateOrigin,visible:g.visible,opacityOverride:g.opacityOverride})}this._updateAllLayers()}setPointSize(n){this.updateStyle({pointSize:n})}setOpacity(n){for(const[o,l]of this._pointClouds)l.opacityOverride!==null&&this._pointClouds.set(o,{...l,opacityOverride:null});this.updateStyle({opacity:n})}setColorScheme(n){this.updateStyle({colorScheme:n})}setUsePercentile(n){this.updateStyle({usePercentile:n})}setColormap(n){this.updateStyle({colormap:n})}setColorRange(n){this.updateStyle({colorRange:n})}setElevationRange(n){this.updateStyle({elevationRange:n})}setPickable(n){this.updateStyle({pickable:n})}setZOffset(n){this.updateStyle({zOffset:n})}setHiddenClassifications(n){this.updateStyle({hiddenClassifications:n})}setPointCloudVisibility(n,o){const l=this._pointClouds.get(n);l&&(this._pointClouds.set(n,{...l,visible:o}),this._createLayer(n))}getPointCloudVisibility(n){var o;return(o=this._pointClouds.get(n))==null?void 0:o.visible}setPointCloudOpacity(n,o){const l=this._pointClouds.get(n);l&&(this._pointClouds.set(n,{...l,opacityOverride:o}),this._createLayer(n))}getPointCloudOpacity(n){const o=this._pointClouds.get(n);if(o)return o.opacityOverride??this._options.opacity}clear(){for(const[n,o]of this._pointClouds){const c=Math.ceil(o.data.pointCount/1e6);for(let u=0;u<c;u++)this._deckOverlay.removeLayer(`pointcloud-${n}-chunk${u}`)}this._pointClouds.clear()}getOptions(){return{...this._options}}getLastComputedBounds(){return this._lastComputedBounds}getMergedPointCloudData(){if(this._pointClouds.size===0)return null;if(this._pointClouds.size===1){const[w]=this._pointClouds.values();return w.data}let n=0;for(const w of this._pointClouds.values())n+=w.data.pointCount;if(n===0)return null;const[o]=this._pointClouds.values(),l=o.coordinateOrigin[0],c=o.coordinateOrigin[1],u=new Float32Array(n*3),p=new Float32Array(n),d=new Uint8Array(n);let g=0;for(const w of this._pointClouds.values()){const M=w.data,E=M.pointCount,S=w.coordinateOrigin[0]-l,P=w.coordinateOrigin[1]-c;for(let x=0;x<E;x++)u[(g+x)*3]=M.positions[x*3]+S,u[(g+x)*3+1]=M.positions[x*3+1]+P,u[(g+x)*3+2]=M.positions[x*3+2];M.intensities&&p.set(M.intensities.subarray(0,E),g),M.classifications&&d.set(M.classifications.subarray(0,E),g),g+=E}return{positions:u,coordinateOrigin:[l,c,0],intensities:p,classifications:d,pointCount:n,bounds:o.data.bounds,hasRGB:o.data.hasRGB,hasIntensity:!0,hasClassification:!0}}_createLayer(n){const o=this._pointClouds.get(n);if(!o)return;const{data:l,colors:c,coordinateOrigin:u,visible:p,opacityOverride:d}=o,g=this._options.elevationRange,w=this._options.zOffset??0,M=d??this._options.opacity,E=Math.ceil(l.pointCount/1e6)+1;for(let F=0;F<E;F++)this._deckOverlay.removeLayer(`pointcloud-${n}-chunk${F}`);if(!p)return;const S=[];for(let F=0;F<l.pointCount;F++){const G=l.positions[F*3+2];(g===null||G>=g[0]&&G<=g[1])&&S.push(F)}if(S.length===0)return;const P=1e6,x=Math.ceil(S.length/P);for(let F=0;F<x;F++){const G=F*P,W=Math.min(G+P,S.length)-G,D=new Float32Array(W*3),tt=new Uint8Array(W*4),q=[];for(let st=0;st<W;st++){const vt=S[G+st];q.push(vt),D[st*3]=l.positions[vt*3],D[st*3+1]=l.positions[vt*3+1],D[st*3+2]=l.positions[vt*3+2]+w,tt[st*4]=c[vt*4],tt[st*4+1]=c[vt*4+1],tt[st*4+2]=c[vt*4+2],tt[st*4+3]=c[vt*4+3]}const K=st=>{if(this._options.onHover)if(st.index>=0&&st.picked&&st.index<q.length){const vt=q[st.index],Pt={index:vt,longitude:u[0]+D[st.index*3],latitude:u[1]+D[st.index*3+1],elevation:D[st.index*3+2],x:st.x,y:st.y};if(l.intensities&&(Pt.intensity=l.intensities[vt]),l.classifications&&(Pt.classification=l.classifications[vt]),l.colors&&l.hasRGB&&(Pt.red=l.colors[vt*4],Pt.green=l.colors[vt*4+1],Pt.blue=l.colors[vt*4+2]),l.extraAttributes){const Yt={};for(const[$t,z]of Object.entries(l.extraAttributes))z&&vt<z.length&&(Yt[$t]=z[vt]);Object.keys(Yt).length>0&&(Pt.attributes=Yt)}this._options.onHover(Pt)}else this._options.onHover(null)},_t=g?`${g[0]}-${g[1]}`:"none",nt=w,ut=new y2({id:`pointcloud-${n}-chunk${F}`,coordinateSystem:v2.LNGLAT_OFFSETS,coordinateOrigin:u,data:{length:W,attributes:{getPosition:{value:D,size:3},getColor:{value:tt,size:4}}},pointSize:this._options.pointSize,sizeUnits:"pixels",opacity:M,getNormal:[0,0,1],pickable:this._options.pickable,onHover:this._options.pickable?K:void 0,autoHighlight:this._options.pickable,highlightColor:[255,255,0,200],updateTriggers:{getPosition:[_t,nt,W],getColor:[_t,W]}});this._deckOverlay.addLayer(`pointcloud-${n}-chunk${F}`,ut)}}_updateAllLayers(){for(const n of this._pointClouds.keys())this._createLayer(n)}}class Zf{constructor(n,o,l){I(this,"_map"),I(this,"_debounceMs"),I(this,"_onViewportChange"),I(this,"_debouncedHandler"),I(this,"_isActive",!1),I(this,"_minDetailZoom"),I(this,"_maxOctreeDepth"),I(this,"_spacing"),this._map=n,this._onViewportChange=o,this._debounceMs=l?.debounceMs??150,this._minDetailZoom=l?.minDetailZoom??10,this._maxOctreeDepth=l?.maxOctreeDepth??20,this._spacing=l?.spacing??null,this._debouncedHandler=gR(()=>this._handleViewportChange(),this._debounceMs)}start(){this._isActive||(this._isActive=!0,this._map.on("moveend",this._debouncedHandler),this._map.on("zoomend",this._debouncedHandler),this._map.on("pitchend",this._debouncedHandler),this._handleViewportChange())}stop(){this._isActive&&(this._isActive=!1,this._map.off("moveend",this._debouncedHandler),this._map.off("zoomend",this._debouncedHandler),this._map.off("pitchend",this._debouncedHandler))}getCurrentViewport(){const n=this._map.getBounds(),o=this._map.getCenter(),l=this._map.getZoom(),c=this._map.getPitch();return{bounds:[n.getWest(),n.getSouth(),n.getEast(),n.getNorth()],center:[o.lng,o.lat],zoom:l,pitch:c,targetDepth:this._calculateTargetDepth(l,c)}}_calculateTargetDepth(n,o){let l;if(this._spacing!==null){const g=156543.03/Math.pow(2,n)*2;l=Math.floor(Math.log2(this._spacing/g)),l=Math.max(0,l)}else n<this._minDetailZoom?l=Math.floor(n/5):l=Math.floor(2+(n-this._minDetailZoom)*1);const c=o*Math.PI/180,u=Math.cos(c),p=Math.floor((1-u)*3);return l=Math.max(0,l-p),Math.min(l,this._maxOctreeDepth)}_handleViewportChange(){if(!this._isActive)return;const n=this.getCurrentViewport();this._onViewportChange(n)}forceUpdate(){this._handleViewportChange()}setSpacing(n){this._spacing=n}isActive(){return this._isActive}destroy(){this.stop()}}class IR{constructor(n){I(this,"_options"),I(this,"_input"),I(this,"_label"),this._options={accept:".las,.laz",label:"Drop LAS/LAZ file here or click to browse",...n}}render(){const n=document.createElement("div");n.className="lidar-file-input-wrapper";const o=document.createElement("div");o.className="lidar-file-input-label",o.innerHTML=`
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="17 8 12 3 7 8"/>
        <line x1="12" y1="3" x2="12" y2="15"/>
      </svg>
      <span>${this._options.label}</span>
    `,this._label=o;const l=document.createElement("input");return l.type="file",l.className="lidar-file-input",l.accept=this._options.accept||"",this._input=l,l.addEventListener("change",()=>{var c;const u=(c=l.files)==null?void 0:c[0];u&&(this._options.onChange(u),l.value="")}),o.addEventListener("dragover",c=>{c.preventDefault(),c.stopPropagation(),o.classList.add("drag-over")}),o.addEventListener("dragleave",c=>{c.preventDefault(),c.stopPropagation(),o.classList.remove("drag-over")}),o.addEventListener("drop",c=>{var u,p;c.preventDefault(),c.stopPropagation(),o.classList.remove("drag-over");const d=(p=(u=c.dataTransfer)==null?void 0:u.files)==null?void 0:p[0];d&&this._isValidFile(d)&&this._options.onChange(d)}),n.appendChild(l),n.appendChild(o),n}setLabel(n){if(this._label){const o=this._label.querySelector("span");o&&(o.textContent=n)}}resetLabel(){this.setLabel(this._options.label||"Drop LAS/LAZ file here or click to browse")}setEnabled(n){this._input&&(this._input.disabled=!n),this._label&&(this._label.style.pointerEvents=n?"auto":"none",this._label.style.opacity=n?"1":"0.5")}_isValidFile(n){const l=(this._options.accept||"").split(",").map(u=>u.trim().toLowerCase()),c=n.name.toLowerCase();return l.some(u=>c.endsWith(u.replace("*","")))}}class xl{constructor(n){I(this,"_options"),I(this,"_slider"),I(this,"_valueDisplay"),this._options=n}render(){const n=document.createElement("div");n.className="lidar-control-group";const o=document.createElement("div");o.className="lidar-control-label-row";const l=document.createElement("label");l.className="lidar-control-label",l.textContent=this._options.label;const c=document.createElement("span");c.className="lidar-control-value",c.textContent=this._formatValue(this._options.value),this._valueDisplay=c,o.appendChild(l),o.appendChild(c);const u=document.createElement("input");return u.type="range",u.className="lidar-control-slider",u.min=String(this._options.min),u.max=String(this._options.max),u.step=String(this._options.step),u.value=String(this._options.value),this._slider=u,u.addEventListener("input",()=>{const p=parseFloat(u.value);this._valueDisplay.textContent=this._formatValue(p),this._options.onChange(p)}),n.appendChild(o),n.appendChild(u),n}setValue(n){this._slider&&(this._slider.value=String(n)),this._valueDisplay&&(this._valueDisplay.textContent=this._formatValue(n))}getValue(){return this._slider?parseFloat(this._slider.value):this._options.value}setEnabled(n){this._slider&&(this._slider.disabled=!n)}setBounds(n,o){this._options.min=n,this._options.max=o,this._slider&&(this._slider.min=String(n),this._slider.max=String(o))}_formatValue(n){return this._options.formatValue?this._options.formatValue(n):mR(n,this._options.step)}}class Ll{constructor(n){I(this,"_options"),I(this,"_sliderLow"),I(this,"_sliderHigh"),I(this,"_valueDisplay"),I(this,"_rangeHighlight"),this._options=n}render(){const n=document.createElement("div");n.className="lidar-control-group";const o=document.createElement("div");o.className="lidar-control-label-row";const l=document.createElement("label");l.className="lidar-control-label",l.textContent=this._options.label;const c=document.createElement("span");c.className="lidar-control-value",c.textContent=this._formatRange(this._options.valueLow,this._options.valueHigh),this._valueDisplay=c,o.appendChild(l),o.appendChild(c),n.appendChild(o);const u=document.createElement("div");u.style.cssText=`
      position: relative;
      height: 20px;
      margin-top: 8px;
    `;const p=document.createElement("div");p.style.cssText=`
      position: absolute;
      top: 8px;
      left: 0;
      right: 0;
      height: 4px;
      background: #e0e0e0;
      border-radius: 2px;
    `,u.appendChild(p);const d=document.createElement("div");d.style.cssText=`
      position: absolute;
      top: 8px;
      height: 4px;
      background: #159895;
      border-radius: 2px;
    `,this._rangeHighlight=d,u.appendChild(d);const g=document.createElement("input");g.type="range",g.min=String(this._options.min),g.max=String(this._options.max),g.step=String(this._options.step),g.value=String(this._options.valueLow),g.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 20px;
      -webkit-appearance: none;
      appearance: none;
      background: transparent;
      pointer-events: none;
      z-index: 2;
    `,this._sliderLow=g;const w=document.createElement("input");w.type="range",w.min=String(this._options.min),w.max=String(this._options.max),w.step=String(this._options.step),w.value=String(this._options.valueHigh),w.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 20px;
      -webkit-appearance: none;
      appearance: none;
      background: transparent;
      pointer-events: none;
      z-index: 2;
    `,this._sliderHigh=w;const M=document.createElement("style");M.textContent=`
      .dual-range-slider input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #159895;
        cursor: pointer;
        pointer-events: auto;
        border: 2px solid #fff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      }
      .dual-range-slider input[type="range"]::-moz-range-thumb {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #159895;
        cursor: pointer;
        pointer-events: auto;
        border: 2px solid #fff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      }
    `,n.appendChild(M),u.classList.add("dual-range-slider"),u.appendChild(g),u.appendChild(w),n.appendChild(u);const E=()=>{const S=parseFloat(g.value),P=parseFloat(w.value),x=this._options.min,F=this._options.max,G=(S-x)/(F-x)*100,Z=(P-x)/(F-x)*100;d.style.left=`${G}%`,d.style.width=`${Z-G}%`};return E(),g.addEventListener("input",()=>{let S=parseFloat(g.value);const P=parseFloat(w.value);S>P&&(S=P,g.value=String(S)),this._valueDisplay.textContent=this._formatRange(S,P),E(),this._options.onChange(S,P)}),w.addEventListener("input",()=>{const S=parseFloat(g.value);let P=parseFloat(w.value);P<S&&(P=S,w.value=String(P)),this._valueDisplay.textContent=this._formatRange(S,P),E(),this._options.onChange(S,P)}),n}setRange(n,o){this._sliderLow&&(this._sliderLow.value=String(n)),this._sliderHigh&&(this._sliderHigh.value=String(o)),this._valueDisplay&&(this._valueDisplay.textContent=this._formatRange(n,o)),this._updateRangeHighlight()}setBounds(n,o){this._options.min=n,this._options.max=o,this._sliderLow&&(this._sliderLow.min=String(n),this._sliderLow.max=String(o)),this._sliderHigh&&(this._sliderHigh.min=String(n),this._sliderHigh.max=String(o)),this._updateRangeHighlight()}setStep(n){this._options.step=n,this._sliderLow&&(this._sliderLow.step=String(n)),this._sliderHigh&&(this._sliderHigh.step=String(n))}_updateRangeHighlight(){if(!this._rangeHighlight||!this._sliderLow||!this._sliderHigh)return;const n=parseFloat(this._sliderLow.value),o=parseFloat(this._sliderHigh.value),l=this._options.min,c=this._options.max,u=(n-l)/(c-l)*100,p=(o-l)/(c-l)*100;this._rangeHighlight.style.left=`${u}%`,this._rangeHighlight.style.width=`${p-u}%`}getRange(){const n=this._sliderLow?parseFloat(this._sliderLow.value):this._options.valueLow,o=this._sliderHigh?parseFloat(this._sliderHigh.value):this._options.valueHigh;return[n,o]}_formatRange(n,o){const l=this._options.formatValue||(c=>c.toFixed(1));return`${l(n)} - ${l(o)}`}}class UR{constructor(n){I(this,"_options"),I(this,"_container"),I(this,"_listContainer"),I(this,"_checkboxes",new Map),this._options=n}render(){const n=document.createElement("div");n.className="lidar-classification-legend",this._container=n;const o=document.createElement("div");o.className="lidar-classification-legend-header";const l=document.createElement("button");l.type="button",l.className="lidar-legend-action-btn",l.textContent="Show All",l.addEventListener("click",()=>this._options.onShowAll());const c=document.createElement("button");c.type="button",c.className="lidar-legend-action-btn",c.textContent="Hide All",c.addEventListener("click",()=>this._options.onHideAll()),o.appendChild(l),o.appendChild(c),n.appendChild(o);const u=document.createElement("div");u.className="lidar-classification-legend-list",this._listContainer=u;const p=[...this._options.classifications].sort((d,g)=>d-g);if(p.length===0){const d=document.createElement("div");d.className="lidar-classification-empty",d.textContent="Loading classifications...",u.appendChild(d)}else for(const d of p)u.appendChild(this._buildLegendItem(d));return n.appendChild(u),n}_buildLegendItem(n){const o=document.createElement("div");o.className="lidar-classification-legend-item";const l=document.createElement("input");l.type="checkbox",l.checked=!this._options.hiddenClassifications.has(n),l.id=`lidar-class-${n}`,l.addEventListener("change",()=>{this._options.onToggle(n,l.checked)}),this._checkboxes.set(n,l);const c=document.createElement("span");c.className="lidar-classification-swatch";const u=$d[n]||[128,128,128];c.style.backgroundColor=`rgb(${u[0]}, ${u[1]}, ${u[2]})`;const p=document.createElement("label");return p.htmlFor=`lidar-class-${n}`,p.className="lidar-classification-label",p.textContent=BR(n),o.appendChild(l),o.appendChild(c),o.appendChild(p),o}updateClassification(n,o){const l=this._checkboxes.get(n);l&&(l.checked=o)}updateAll(n){for(const[o,l]of this._checkboxes)l.checked=!n.has(o)}setClassifications(n,o){if(this._options.classifications=n,this._options.hiddenClassifications=o,this._listContainer)if(this._listContainer.innerHTML="",this._checkboxes.clear(),n.length===0){const l=document.createElement("div");l.className="lidar-classification-empty",l.textContent="No classifications found",this._listContainer.appendChild(l)}else{const l=[...n].sort((c,u)=>c-u);for(const c of l)this._listContainer.appendChild(this._buildLegendItem(c))}}getContainer(){return this._container}}class LR{constructor(n){I(this,"_options"),I(this,"_canvas"),I(this,"_minLabel"),I(this,"_maxLabel"),this._options={...n}}render(){const n=document.createElement("div");if(n.className="lidar-colorbar",this._options.label){const p=document.createElement("div");p.className="lidar-colorbar-label",p.textContent=this._options.label,n.appendChild(p)}const o=document.createElement("canvas");o.className="lidar-colorbar-gradient",o.width=200,o.height=14,this._canvas=o,n.appendChild(o);const l=document.createElement("div");l.className="lidar-colorbar-labels";const c=document.createElement("span");c.className="lidar-colorbar-min",this._minLabel=c;const u=document.createElement("span");return u.className="lidar-colorbar-max",this._maxLabel=u,l.appendChild(c),l.appendChild(u),n.appendChild(l),this._drawGradient(),this._updateLabels(),n}update(n){n.colormap!==void 0&&(this._options.colormap=n.colormap),n.minValue!==void 0&&(this._options.minValue=n.minValue),n.maxValue!==void 0&&(this._options.maxValue=n.maxValue),n.label!==void 0&&(this._options.label=n.label),this._drawGradient(),this._updateLabels()}setColormap(n){this._options.colormap=n,this._drawGradient()}setRange(n,o){this._options.minValue=n,this._options.maxValue=o,this._updateLabels()}getColormap(){return this._options.colormap}getRange(){return{min:this._options.minValue,max:this._options.maxValue}}_drawGradient(){if(!this._canvas)return;const n=this._canvas.getContext("2d");if(!n)return;const o=this._canvas.width,l=this._canvas.height,c=xn[this._options.colormap]||xn.viridis,u=n.createLinearGradient(0,0,o,0);for(let p=0;p<c.length;p++){const d=p/(c.length-1),[g,w,M]=c[p];u.addColorStop(d,`rgb(${g}, ${w}, ${M})`)}n.fillStyle=u,n.fillRect(0,0,o,l)}_updateLabels(){this._minLabel&&(this._minLabel.textContent=this._formatValue(this._options.minValue)),this._maxLabel&&(this._maxLabel.textContent=this._formatValue(this._options.maxValue))}_formatValue(n){if(!Number.isFinite(n))return"";const o=Math.abs(this._options.maxValue-this._options.minValue);return o<1?n.toFixed(3):o<10?n.toFixed(2):o<100?n.toFixed(1):n.toFixed(0)}}const Zr=2,zr=98;class VR{constructor(n){I(this,"_options"),I(this,"_percentileRadio"),I(this,"_absoluteRadio"),I(this,"_percentileSliderContainer"),I(this,"_absoluteSliderContainer"),I(this,"_percentileSlider"),I(this,"_absoluteSlider"),I(this,"_computedBounds"),this._options={...n},this._computedBounds=n.computedBounds}render(){const n=document.createElement("div");n.className="lidar-color-range";const o=document.createElement("div");o.className="lidar-color-range-header";const l=document.createElement("div");l.className="lidar-control-label",l.textContent="Color Range",o.appendChild(l);const c=document.createElement("button");c.className="lidar-range-reset-btn",c.textContent="Reset",c.title="Reset to default (2-98% percentile)",c.addEventListener("click",()=>this._onReset()),o.appendChild(c),n.appendChild(o);const u=document.createElement("div");u.className="lidar-range-mode";const p=document.createElement("label"),d=document.createElement("input");d.type="radio",d.name="lidar-range-mode",d.value="percentile",d.checked=this._options.config.mode==="percentile",this._percentileRadio=d,p.appendChild(d),p.appendChild(document.createTextNode(" Percentile")),u.appendChild(p);const g=document.createElement("label"),w=document.createElement("input");w.type="radio",w.name="lidar-range-mode",w.value="absolute",w.checked=this._options.config.mode==="absolute",this._absoluteRadio=w,g.appendChild(w),g.appendChild(document.createTextNode(" Absolute")),u.appendChild(g),n.appendChild(u);const M=document.createElement("div");M.style.display=this._options.config.mode==="percentile"?"block":"none",this._percentileSliderContainer=M,this._percentileSlider=new Ll({label:"",min:0,max:100,step:1,valueLow:this._options.config.percentileLow??Zr,valueHigh:this._options.config.percentileHigh??zr,onChange:(F,G)=>this._onPercentileChange(F,G),formatValue:F=>`${F.toFixed(0)}%`}),M.appendChild(this._percentileSlider.render()),n.appendChild(M);const E=document.createElement("div");E.style.display=this._options.config.mode==="absolute"?"block":"none",this._absoluteSliderContainer=E;const S=this._options.dataBounds||{min:0,max:100},P=this._options.config.absoluteMin??S.min,x=this._options.config.absoluteMax??S.max;return this._absoluteSlider=new Ll({label:"",min:S.min,max:S.max,step:this._getAbsoluteStep(S),valueLow:P,valueHigh:x,onChange:(F,G)=>this._onAbsoluteChange(F,G),formatValue:F=>this._formatAbsoluteValue(F)}),E.appendChild(this._absoluteSlider.render()),n.appendChild(E),d.addEventListener("change",()=>this._onModeChange()),w.addEventListener("change",()=>this._onModeChange()),n}setConfig(n){if(this._options.config={...n},this._percentileRadio&&this._absoluteRadio&&(this._percentileRadio.checked=n.mode==="percentile",this._absoluteRadio.checked=n.mode==="absolute"),this._percentileSlider&&this._percentileSlider.setRange(n.percentileLow??Zr,n.percentileHigh??zr),this._absoluteSlider){const o=this._options.dataBounds||{min:0,max:100};this._absoluteSlider.setRange(n.absoluteMin??o.min,n.absoluteMax??o.max)}this._updateSlidersVisibility()}setDataBounds(n){if(this._options.dataBounds=n,this._absoluteSlider){this._absoluteSlider.setBounds(n.min,n.max),this._absoluteSlider.setStep(this._getAbsoluteStep(n)),this._options.config.absoluteMin===void 0&&(this._options.config.absoluteMin=n.min),this._options.config.absoluteMax===void 0&&(this._options.config.absoluteMax=n.max);const o=this._options.config.absoluteMin??n.min,l=this._options.config.absoluteMax??n.max,c=Math.max(n.min,Math.min(n.max,o)),u=Math.max(n.min,Math.min(n.max,l));this._absoluteSlider.setRange(c,u)}}setComputedBounds(n){this._computedBounds=n}getConfig(){return{...this._options.config}}_onPercentileChange(n,o){this._options.config.percentileLow=n,this._options.config.percentileHigh=o,this._emitChange()}_onAbsoluteChange(n,o){this._options.config.absoluteMin=n,this._options.config.absoluteMax=o,this._emitChange()}_onModeChange(){var n;const o=(n=this._percentileRadio)!=null&&n.checked?"percentile":"absolute",l=this._options.config.mode;if(o!==l&&o==="absolute"){if(this._computedBounds)this._options.config.absoluteMin=this._computedBounds.min,this._options.config.absoluteMax=this._computedBounds.max;else if(this._options.dataBounds){const{min:c,max:u}=this._options.dataBounds,p=u-c,d=this._options.config.percentileLow??Zr,g=this._options.config.percentileHigh??zr;this._options.config.absoluteMin=parseFloat((c+p*(d/100)).toFixed(2)),this._options.config.absoluteMax=parseFloat((c+p*(g/100)).toFixed(2))}this._absoluteSlider&&this._options.config.absoluteMin!==void 0&&this._options.config.absoluteMax!==void 0&&this._absoluteSlider.setRange(this._options.config.absoluteMin,this._options.config.absoluteMax)}this._options.config.mode=o,this._updateSlidersVisibility(),this._emitChange()}_onReset(){if(this._options.config.mode="percentile",this._options.config.percentileLow=Zr,this._options.config.percentileHigh=zr,this._options.dataBounds){const{min:n,max:o}=this._options.dataBounds,l=o-n;this._options.config.absoluteMin=parseFloat((n+l*(Zr/100)).toFixed(2)),this._options.config.absoluteMax=parseFloat((n+l*(zr/100)).toFixed(2))}this._percentileRadio&&(this._percentileRadio.checked=!0),this._absoluteRadio&&(this._absoluteRadio.checked=!1),this._percentileSlider&&this._percentileSlider.setRange(Zr,zr),this._absoluteSlider&&this._options.config.absoluteMin!==void 0&&this._options.config.absoluteMax!==void 0&&this._absoluteSlider.setRange(this._options.config.absoluteMin,this._options.config.absoluteMax),this._updateSlidersVisibility(),this._emitChange()}_updateSlidersVisibility(){this._percentileSliderContainer&&(this._percentileSliderContainer.style.display=this._options.config.mode==="percentile"?"block":"none"),this._absoluteSliderContainer&&(this._absoluteSliderContainer.style.display=this._options.config.mode==="absolute"?"block":"none")}_getAbsoluteStep(n){const o=n.max-n.min;return o<=1?.01:o<=10?.1:o<=100||o<=1e3?1:Math.round(o/100)}_formatAbsoluteValue(n){const o=this._options.dataBounds||{min:0,max:100},l=o.max-o.min;return l<=1?n.toFixed(2):l<=10?n.toFixed(1):n.toFixed(0)}_emitChange(){this._options.onChange({...this._options.config})}}class WR{constructor(n,o){I(this,"_callbacks"),I(this,"_state"),I(this,"_contentElement"),I(this,"_fileInput"),I(this,"_urlInput"),I(this,"_loadButton"),I(this,"_colorSelect"),I(this,"_colormapSelect"),I(this,"_colormapGroup"),I(this,"_colorbar"),I(this,"_colorbarContainer"),I(this,"_colorRangeControl"),I(this,"_colorRangeContainer"),I(this,"_percentileCheckbox"),I(this,"_percentileGroup"),I(this,"_pointSizeSlider"),I(this,"_opacitySlider"),I(this,"_pointCloudsList"),I(this,"_pickableCheckbox"),I(this,"_elevationSlider"),I(this,"_elevationCheckbox"),I(this,"_zOffsetCheckbox"),I(this,"_zOffsetSlider"),I(this,"_zOffsetSliderContainer"),I(this,"_terrainCheckbox"),I(this,"_loadingIndicator"),I(this,"_errorMessage"),I(this,"_classificationLegend"),I(this,"_classificationLegendContainer"),this._callbacks=n,this._state=o}build(){const n=document.createElement("div");n.className="lidar-control-content",this._state.maxHeight&&(n.style.maxHeight=`${this._state.maxHeight}px`),this._contentElement=n,n.appendChild(this._buildFileSection()),n.appendChild(this._buildStylingSection()),n.appendChild(this._buildPointCloudsList());const o=this._buildCrossSectionSection();return o&&n.appendChild(o),n.appendChild(this._buildLoadingIndicator()),n.appendChild(this._buildErrorMessage()),n}updateState(n){var o,l;if(this._state=n,this._contentElement&&n.maxHeight&&(this._contentElement.style.maxHeight=`${n.maxHeight}px`),this._loadingIndicator&&(n.loading?this._loadingIndicator.classList.add("active"):this._loadingIndicator.classList.remove("active")),this._errorMessage&&(n.error?(this._errorMessage.textContent=n.error,this._errorMessage.style.display="block"):this._errorMessage.style.display="none"),this._updatePointCloudsList(),this._pointSizeSlider&&this._pointSizeSlider.setValue(n.pointSize),this._opacitySlider&&this._opacitySlider.setValue(n.opacity),this._colorSelect&&typeof n.colorScheme=="string"&&(this._colorSelect.value=n.colorScheme,this._updatePercentileVisibility(n.colorScheme)),this._colormapSelect&&n.colormap&&(this._colormapSelect.value=n.colormap),this._colorbar&&(n.colormap&&this._colorbar.setColormap(n.colormap),n.computedColorBounds&&this._colorbar.setRange(n.computedColorBounds.min,n.computedColorBounds.max)),this._colorRangeControl&&n.colorRange){this._colorRangeControl.setConfig(n.colorRange);const u=this._getDataBoundsForCurrentScheme();this._colorRangeControl.setDataBounds(u),n.computedColorBounds&&this._colorRangeControl.setComputedBounds(n.computedColorBounds)}if(this._percentileCheckbox&&(this._percentileCheckbox.checked=n.usePercentile??!0),this._pickableCheckbox&&(this._pickableCheckbox.checked=n.pickable??!1),this._zOffsetCheckbox&&(this._zOffsetCheckbox.checked=n.zOffsetEnabled??!1),this._zOffsetSliderContainer&&(this._zOffsetSliderContainer.style.display=n.zOffsetEnabled?"block":"none"),this._zOffsetSlider){if(n.zOffsetBase!==void 0){const u=-n.zOffsetBase,p=u-100,d=u+100;this._zOffsetSlider.setBounds(p,d)}this._zOffsetSlider.setValue(n.zOffset??0)}if(this._terrainCheckbox&&(this._terrainCheckbox.checked=n.terrainEnabled??!1),this._elevationSlider&&n.pointClouds.length>0){const u=this._getElevationBounds();this._elevationSlider.setBounds(u.min,u.max),(o=this._elevationCheckbox)!=null&&o.checked||this._elevationSlider.setRange(u.min,u.max)}this._classificationLegend&&n.availableClassifications&&this._classificationLegend.setClassifications(Array.from(n.availableClassifications),n.hiddenClassifications||new Set);const c=!n.loading;(l=this._fileInput)==null||l.setEnabled(c),this._urlInput&&(this._urlInput.disabled=!c),this._loadButton&&(this._loadButton.disabled=!c)}updateLoadingProgress(n,o){if(!this._loadingIndicator)return;const l=this._loadingIndicator.querySelector(".lidar-loading-bar-fill"),c=this._loadingIndicator.querySelector(".lidar-loading-progress");l&&(l.style.width=`${n}%`),c&&o&&(c.textContent=o)}_buildFileSection(){const n=document.createElement("div");n.className="lidar-control-section",this._fileInput=new IR({accept:".las,.laz",onChange:d=>this._callbacks.onFileSelect(d)}),n.appendChild(this._fileInput.render());const o=document.createElement("div");o.className="lidar-control-group",o.style.marginTop="12px";const l=document.createElement("label");l.className="lidar-control-label",l.textContent="Load COPC or EPT from URL",o.appendChild(l);const c=document.createElement("div");c.className="lidar-control-flex";const u=document.createElement("input");u.type="text",u.className="lidar-control-input",u.placeholder="https://example.com/pointcloud.laz",u.style.flex="1",this._urlInput=u;const p=document.createElement("button");return p.type="button",p.className="lidar-control-button",p.textContent="Load",p.addEventListener("click",()=>{const d=u.value.trim();d&&(this._callbacks.onUrlSubmit(d),u.value="")}),this._loadButton=p,u.addEventListener("keypress",d=>{d.key==="Enter"&&p.click()}),c.appendChild(u),c.appendChild(p),o.appendChild(c),n.appendChild(o),n}_buildStylingSection(){const n=document.createElement("div");n.className="lidar-control-section";const o=document.createElement("div");o.className="lidar-control-section-header",o.textContent="Styling",n.appendChild(o);const l=document.createElement("div");l.className="lidar-control-group";const c=document.createElement("label");c.className="lidar-control-label",c.textContent="Color By",l.appendChild(c);const u=document.createElement("select");return u.className="lidar-control-select",u.innerHTML=`
      <option value="elevation">Elevation</option>
      <option value="intensity">Intensity</option>
      <option value="classification">Classification</option>
      <option value="rgb">RGB (if available)</option>
    `,u.value=typeof this._state.colorScheme=="string"?this._state.colorScheme:"elevation",u.addEventListener("change",()=>{this._callbacks.onColorSchemeChange(u.value),this._updatePercentileVisibility(u.value)}),this._colorSelect=u,l.appendChild(u),n.appendChild(l),n.appendChild(this._buildColormapSelector()),n.appendChild(this._buildColorbar()),n.appendChild(this._buildClassificationLegend()),n.appendChild(this._buildColorRangeControl()),this._pointSizeSlider=new xl({label:"Point Size",min:1,max:10,step:.5,value:this._state.pointSize,onChange:p=>this._callbacks.onPointSizeChange(p)}),n.appendChild(this._pointSizeSlider.render()),this._opacitySlider=new xl({label:"Opacity",min:0,max:1,step:.05,value:this._state.opacity,onChange:p=>this._callbacks.onOpacityChange(p)}),n.appendChild(this._opacitySlider.render()),n.appendChild(this._buildTerrainCheckbox()),n.appendChild(this._buildPickableCheckbox()),n.appendChild(this._buildElevationFilter()),n.appendChild(this._buildZOffsetControl()),n}_buildElevationFilter(){const n=document.createElement("div");n.className="lidar-control-group";const o=document.createElement("div");o.className="lidar-control-label-row",o.style.cursor="pointer";const l=document.createElement("input");l.type="checkbox",l.id="lidar-elevation-filter-checkbox",l.style.marginRight="6px",this._elevationCheckbox=l;const c=document.createElement("label");c.className="lidar-control-label",c.htmlFor="lidar-elevation-filter-checkbox",c.style.display="inline",c.style.cursor="pointer",c.textContent="Elevation Filter",o.appendChild(l),o.appendChild(c),n.appendChild(o);const u=document.createElement("div");u.style.display="none",u.style.marginTop="8px";const p=this._getElevationBounds();return this._elevationSlider=new Ll({label:"Range (m)",min:p.min,max:p.max,step:1,valueLow:p.min,valueHigh:p.max,onChange:(d,g)=>{l.checked&&this._callbacks.onElevationRangeChange([d,g])},formatValue:d=>d.toFixed(0)}),u.appendChild(this._elevationSlider.render()),n.appendChild(u),l.addEventListener("change",()=>{var d,g,w;if(u.style.display=l.checked?"block":"none",l.checked){const M=this._getElevationBounds();(d=this._elevationSlider)==null||d.setBounds(M.min,M.max),(g=this._elevationSlider)==null||g.setRange(M.min,M.max);const E=(w=this._elevationSlider)==null?void 0:w.getRange();E&&this._callbacks.onElevationRangeChange(E)}else this._callbacks.onElevationRangeChange(null)}),n}_buildZOffsetControl(){const n=document.createElement("div");n.className="lidar-control-group";const o=document.createElement("div");o.className="lidar-control-label-row",o.style.cursor="pointer";const l=document.createElement("input");l.type="checkbox",l.id="lidar-zoffset-checkbox",l.checked=this._state.zOffsetEnabled??!1,l.style.marginRight="6px",this._zOffsetCheckbox=l;const c=document.createElement("label");c.className="lidar-control-label",c.htmlFor="lidar-zoffset-checkbox",c.style.display="inline",c.style.cursor="pointer",c.textContent="Z Offset",o.appendChild(l),o.appendChild(c),n.appendChild(o);const u=document.createElement("div");u.style.display=this._state.zOffsetEnabled?"block":"none",u.style.marginTop="8px",this._zOffsetSliderContainer=u;const d=-(this._state.zOffsetBase??0),g=d-100,w=d+100;return this._zOffsetSlider=new xl({label:"Offset (m)",min:g,max:w,step:1,value:this._state.zOffset??d,onChange:M=>this._callbacks.onZOffsetChange(M)}),u.appendChild(this._zOffsetSlider.render()),n.appendChild(u),l.addEventListener("change",()=>{var M;u.style.display=l.checked?"block":"none",this._callbacks.onZOffsetEnabledChange(l.checked),l.checked||((M=this._zOffsetSlider)==null||M.setValue(0),this._callbacks.onZOffsetChange(0))}),n}_buildTerrainCheckbox(){const n=document.createElement("div");n.className="lidar-control-group";const o=document.createElement("div");o.className="lidar-control-label-row",o.style.cursor="pointer";const l=document.createElement("input");l.type="checkbox",l.id="lidar-terrain-checkbox",l.checked=this._state.terrainEnabled??!1,l.style.marginRight="6px",this._terrainCheckbox=l;const c=document.createElement("label");return c.className="lidar-control-label",c.htmlFor="lidar-terrain-checkbox",c.style.display="inline",c.style.cursor="pointer",c.textContent="3D Terrain",o.appendChild(l),o.appendChild(c),n.appendChild(o),l.addEventListener("change",()=>{this._callbacks.onTerrainChange(l.checked)}),n}_getElevationBounds(){if(this._state.pointClouds.length===0)return{min:0,max:100};let n=1/0,o=-1/0;for(const l of this._state.pointClouds)n=Math.min(n,l.bounds.minZ),o=Math.max(o,l.bounds.maxZ);return n=Math.floor(n),o=Math.ceil(o),{min:n,max:o}}_getIntensityBounds(){return{min:0,max:1}}_getDataBoundsForCurrentScheme(){return(typeof this._state.colorScheme=="string"?this._state.colorScheme:"elevation")==="intensity"?this._getIntensityBounds():this._getElevationBounds()}_buildColormapSelector(){const n=document.createElement("div");n.className="lidar-colormap-group",this._colormapGroup=n;const o=typeof this._state.colorScheme=="string"?this._state.colorScheme:"elevation",l=o==="elevation"||o==="intensity";n.style.display=l?"block":"none";const c=document.createElement("label");c.className="lidar-control-label",c.textContent="Colormap",n.appendChild(c);const u=document.createElement("select");u.className="lidar-colormap-select";for(const p of FR){const d=document.createElement("option");d.value=p,d.textContent=kR[p],u.appendChild(d)}return u.value=this._state.colormap||"viridis",this._colormapSelect=u,u.addEventListener("change",()=>{const p=u.value;this._callbacks.onColormapChange(p)}),n.appendChild(u),n}_buildColorbar(){var n,o;const l=document.createElement("div");l.className="lidar-control-group",this._colorbarContainer=l;const c=typeof this._state.colorScheme=="string"?this._state.colorScheme:"elevation",u=(c==="elevation"||c==="intensity")&&this._state.showColorbar;return l.style.display=u?"block":"none",this._colorbar=new LR({colormap:this._state.colormap||"viridis",minValue:((n=this._state.computedColorBounds)==null?void 0:n.min)??0,maxValue:((o=this._state.computedColorBounds)==null?void 0:o.max)??100}),l.appendChild(this._colorbar.render()),l}_buildColorRangeControl(){const n=document.createElement("div");n.className="lidar-control-group",this._colorRangeContainer=n;const o=typeof this._state.colorScheme=="string"?this._state.colorScheme:"elevation",l=o==="elevation"||o==="intensity";n.style.display=l?"block":"none";const c=this._getDataBoundsForCurrentScheme();return this._colorRangeControl=new VR({config:this._state.colorRange||{mode:"percentile",percentileLow:2,percentileHigh:98},dataBounds:c,computedBounds:this._state.computedColorBounds,onChange:u=>{this._callbacks.onColorRangeChange(u)}}),n.appendChild(this._colorRangeControl.render()),n}_updatePercentileVisibility(n){const o=n==="elevation"||n==="intensity";if(this._colormapGroup&&(this._colormapGroup.style.display=o?"block":"none"),this._colorbarContainer&&(this._colorbarContainer.style.display=o&&this._state.showColorbar?"block":"none"),this._colorRangeContainer&&(this._colorRangeContainer.style.display=o?"block":"none"),this._colorRangeControl&&o){const l=this._getDataBoundsForCurrentScheme();this._colorRangeControl.setDataBounds(l)}this._percentileGroup&&(this._percentileGroup.style.display="none"),this._classificationLegendContainer&&(this._classificationLegendContainer.style.display=n==="classification"?"block":"none")}_buildClassificationLegend(){const n=document.createElement("div");n.className="lidar-control-group",this._classificationLegendContainer=n;const o=typeof this._state.colorScheme=="string"?this._state.colorScheme:"elevation";return n.style.display=o==="classification"?"block":"none",this._classificationLegend=new UR({classifications:Array.from(this._state.availableClassifications||new Set),hiddenClassifications:this._state.hiddenClassifications||new Set,onToggle:(l,c)=>this._callbacks.onClassificationToggle(l,c),onShowAll:()=>this._callbacks.onClassificationShowAll(),onHideAll:()=>this._callbacks.onClassificationHideAll()}),n.appendChild(this._classificationLegend.render()),n}_buildPickableCheckbox(){const n=document.createElement("div");n.className="lidar-control-group";const o=document.createElement("div");o.className="lidar-control-label-row",o.style.cursor="pointer";const l=document.createElement("input");l.type="checkbox",l.id="lidar-pickable-checkbox",l.checked=this._state.pickable??!1,l.style.marginRight="6px",this._pickableCheckbox=l;const c=document.createElement("label");return c.className="lidar-control-label",c.htmlFor="lidar-pickable-checkbox",c.style.display="inline",c.style.cursor="pointer",c.textContent="Enable point picking",l.addEventListener("change",()=>{this._callbacks.onPickableChange(l.checked)}),o.appendChild(l),o.appendChild(c),n.appendChild(o),n}_buildPointCloudsList(){const n=document.createElement("div");n.className="lidar-control-section lidar-pointclouds-section";const o=document.createElement("div");o.className="lidar-control-section-header",o.textContent="Loaded Point Clouds",n.appendChild(o);const l=document.createElement("div");return l.className="lidar-pointclouds-list",this._pointCloudsList=l,n.appendChild(l),this._updatePointCloudsList(),n}_updatePointCloudsList(){if(this._pointCloudsList){if(this._pointCloudsList.innerHTML="",this._state.pointClouds.length===0){const n=document.createElement("div");n.className="lidar-pointclouds-empty",n.textContent="No point clouds loaded",this._pointCloudsList.appendChild(n);return}for(const n of this._state.pointClouds)this._pointCloudsList.appendChild(this._buildPointCloudItem(n))}}_buildPointCloudItem(n){const o=document.createElement("div");o.className="lidar-pointcloud-item";const l=document.createElement("div");l.className="lidar-pointcloud-info";const c=document.createElement("div");c.className="lidar-pointcloud-name",c.textContent=n.name,c.title=n.name;const u=document.createElement("div");u.className="lidar-pointcloud-details",u.textContent=`${vR(n.pointCount)} points`,l.appendChild(c),l.appendChild(u);const p=document.createElement("div");if(p.className="lidar-pointcloud-actions",this._callbacks.onShowMetadata){const w=document.createElement("button");w.type="button",w.className="lidar-pointcloud-action info",w.textContent="Info",w.title="Show metadata",w.addEventListener("click",M=>{M.stopPropagation(),this._callbacks.onShowMetadata(n.id)}),p.appendChild(w)}const d=document.createElement("button");d.type="button",d.className="lidar-pointcloud-action",d.textContent="Zoom",d.title="Zoom to point cloud",d.addEventListener("click",()=>this._callbacks.onZoomTo(n.id));const g=document.createElement("button");return g.type="button",g.className="lidar-pointcloud-action remove",g.textContent="Remove",g.title="Remove point cloud",g.addEventListener("click",w=>{w.stopPropagation(),this._callbacks.onUnload(n.id)}),p.appendChild(d),p.appendChild(g),o.appendChild(l),o.appendChild(p),o}_buildLoadingIndicator(){const n=document.createElement("div");return n.className="lidar-loading",n.innerHTML=`
      <div class="lidar-loading-spinner"></div>
      <div class="lidar-loading-text">Loading point cloud...</div>
      <div class="lidar-loading-progress">Preparing...</div>
      <div class="lidar-loading-bar">
        <div class="lidar-loading-bar-fill"></div>
      </div>
    `,this._loadingIndicator=n,n}_buildErrorMessage(){const n=document.createElement("div");return n.className="lidar-error",n.style.display="none",this._errorMessage=n,n}_buildCrossSectionSection(){if(!this._callbacks.onCrossSectionPanel)return null;const n=this._callbacks.onCrossSectionPanel();if(!n)return null;const o=document.createElement("div");o.className="lidar-control-section lidar-crosssection-section";const l=document.createElement("div");l.className="lidar-control-section-header lidar-section-collapsible",l.innerHTML='<span class="lidar-section-toggle"></span> Cross-Section',l.style.cursor="pointer";const c=document.createElement("div");return c.className="lidar-section-body",c.style.display="none",c.appendChild(n),l.addEventListener("click",()=>{const u=l.querySelector(".lidar-section-toggle");c.style.display==="none"?(c.style.display="block",u&&(u.textContent="")):(c.style.display="none",u&&(u.textContent=""))}),o.appendChild(l),o.appendChild(c),o}}class ZR{constructor(n){I(this,"_container",null),I(this,"_backdrop",null),I(this,"_options"),I(this,"_metadata",null),this._options=n}show(n){this._metadata=n,this._render()}hide(){var n,o;(n=this._backdrop)==null||n.remove(),(o=this._container)==null||o.remove(),this._backdrop=null,this._container=null}_render(){var n;if(!this._metadata)return;this._backdrop=document.createElement("div"),this._backdrop.className="lidar-metadata-backdrop",this._backdrop.addEventListener("click",()=>this._close()),document.body.appendChild(this._backdrop),this._container=document.createElement("div"),this._container.className="lidar-metadata-panel",this._container.addEventListener("click",c=>c.stopPropagation());const o=document.createElement("div");o.className="lidar-metadata-header",o.innerHTML=`
      <span class="lidar-metadata-title">Point Cloud Metadata</span>
      <button type="button" class="lidar-metadata-close" title="Close">&times;</button>
    `,(n=o.querySelector(".lidar-metadata-close"))==null||n.addEventListener("click",()=>this._close()),this._container.appendChild(o);const l=document.createElement("div");l.className="lidar-metadata-content",l.appendChild(this._buildBasicInfoSection()),l.appendChild(this._buildBoundsSection()),l.appendChild(this._buildCrsSection()),l.appendChild(this._buildPointFormatSection()),l.appendChild(this._buildDimensionsSection()),this._container.appendChild(l),document.body.appendChild(this._container)}_close(){this.hide(),this._options.onClose()}_buildBasicInfoSection(){var n;const o=this._createSection("Basic Info",!0),l=o.querySelector(".lidar-metadata-section-body"),c=this._metadata,u=c.basic,p=[{label:"Name",value:u.name},{label:"Type",value:c.type.toUpperCase()},{label:"Point Count",value:this._formatNumber(u.pointCount)},{label:"Has RGB",value:u.hasRGB?"Yes":"No"},{label:"Has Intensity",value:u.hasIntensity?"Yes":"No"},{label:"Has Classification",value:u.hasClassification?"Yes":"No"},{label:"Source",value:u.source}];c.type==="copc"&&c.copc&&(p.push({label:"LAS Version",value:c.copc.lasVersion}),p.push({label:"Point Format",value:String(c.copc.pointDataRecordFormat)}),p.push({label:"Generating Software",value:c.copc.generatingSoftware}),c.copc.creationDate&&p.push({label:"Creation Date",value:`${c.copc.creationDate.year}, Day ${c.copc.creationDate.dayOfYear}`}),((n=c.copc.copcInfo)==null?void 0:n.pointSpacing)!==void 0&&c.copc.copcInfo.pointSpacing>0&&p.push({label:"Point Spacing (est.)",value:"~"+c.copc.copcInfo.pointSpacing.toFixed(2)+" m"})),c.type==="ept"&&c.ept&&(p.push({label:"EPT Version",value:c.ept.version}),p.push({label:"Data Type",value:c.ept.dataType}),c.ept.pointSpacing!==void 0&&c.ept.pointSpacing>0&&p.push({label:"Point Spacing (est.)",value:"~"+c.ept.pointSpacing.toFixed(2)+" m"}));for(const d of p)l.appendChild(this._createRow(d.label,d.value));return o}_buildBoundsSection(){var n,o;const l=this._createSection("Bounds",!1),c=l.querySelector(".lidar-metadata-section-body"),u=this._metadata,p=u.basic;if(c.appendChild(this._createSubheader("Geographic (WGS84)")),c.appendChild(this._createRow("Min X (Lng)",p.bounds.minX.toFixed(6)+"")),c.appendChild(this._createRow("Max X (Lng)",p.bounds.maxX.toFixed(6)+"")),c.appendChild(this._createRow("Min Y (Lat)",p.bounds.minY.toFixed(6)+"")),c.appendChild(this._createRow("Max Y (Lat)",p.bounds.maxY.toFixed(6)+"")),c.appendChild(this._createRow("Min Z",p.bounds.minZ.toFixed(2)+" m")),c.appendChild(this._createRow("Max Z",p.bounds.maxZ.toFixed(2)+" m")),u.type==="copc"&&((n=u.copc)!=null&&n.nativeBounds)){c.appendChild(this._createSubheader("Native CRS"));const d=u.copc.nativeBounds;c.appendChild(this._createRow("Min X",d.min[0].toFixed(3))),c.appendChild(this._createRow("Max X",d.max[0].toFixed(3))),c.appendChild(this._createRow("Min Y",d.min[1].toFixed(3))),c.appendChild(this._createRow("Max Y",d.max[1].toFixed(3))),c.appendChild(this._createRow("Min Z",d.min[2].toFixed(3))),c.appendChild(this._createRow("Max Z",d.max[2].toFixed(3)))}if(u.type==="ept"&&((o=u.ept)!=null&&o.nativeBounds)&&u.ept.nativeBounds.length>=6){c.appendChild(this._createSubheader("Native CRS"));const d=u.ept.nativeBounds;c.appendChild(this._createRow("Min X",d[0].toFixed(3))),c.appendChild(this._createRow("Max X",d[3].toFixed(3))),c.appendChild(this._createRow("Min Y",d[1].toFixed(3))),c.appendChild(this._createRow("Max Y",d[4].toFixed(3))),c.appendChild(this._createRow("Min Z",d[2].toFixed(3))),c.appendChild(this._createRow("Max Z",d[5].toFixed(3)))}return l}_buildCrsSection(){var n;const o=this._createSection("Coordinate Reference System",!1),l=o.querySelector(".lidar-metadata-section-body"),c=this._metadata,u=c.basic.wkt;if(u){const p=document.createElement("div");p.className="lidar-metadata-wkt";const d=document.createElement("button");d.type="button",d.className="lidar-metadata-copy-btn",d.textContent="Copy WKT",d.addEventListener("click",()=>{navigator.clipboard.writeText(u).then(()=>{d.textContent="Copied!",setTimeout(()=>{d.textContent="Copy WKT"},2e3)})}),p.appendChild(d);const g=document.createElement("pre");g.className="lidar-metadata-code",g.textContent=this._formatWkt(u),p.appendChild(g),l.appendChild(p)}else l.appendChild(this._createRow("WKT","Not available"));if(c.type==="ept"&&((n=c.ept)!=null&&n.srs)){const p=c.ept.srs;p.authority&&l.appendChild(this._createRow("Authority",p.authority)),p.horizontal&&l.appendChild(this._createRow("Horizontal",p.horizontal)),p.vertical&&l.appendChild(this._createRow("Vertical",p.vertical))}return c.type==="copc"&&c.copc&&(l.appendChild(this._createSubheader("Scale & Offset")),l.appendChild(this._createRow("Scale X",c.copc.scale[0].toExponential(4))),l.appendChild(this._createRow("Scale Y",c.copc.scale[1].toExponential(4))),l.appendChild(this._createRow("Scale Z",c.copc.scale[2].toExponential(4))),l.appendChild(this._createRow("Offset X",c.copc.offset[0].toFixed(3))),l.appendChild(this._createRow("Offset Y",c.copc.offset[1].toFixed(3))),l.appendChild(this._createRow("Offset Z",c.copc.offset[2].toFixed(3)))),o}_buildPointFormatSection(){const n=this._createSection("Point Format",!1),o=n.querySelector(".lidar-metadata-section-body"),l=this._metadata;if(l.type==="copc"&&l.copc){o.appendChild(this._createRow("Point Data Record Format",String(l.copc.pointDataRecordFormat))),o.appendChild(this._createRow("LAS Version",l.copc.lasVersion));const c=l.copc.pointDataRecordFormat,u={0:"Core (XYZ, Intensity, Return, Classification)",1:"Format 0 + GPS Time",2:"Format 0 + RGB",3:"Format 0 + GPS Time + RGB",6:"Extended (14-bit Classification, NIR)",7:"Format 6 + RGB",8:"Format 6 + RGB + NIR"};u[c]&&o.appendChild(this._createRow("Description",u[c]))}return l.type==="ept"&&l.ept&&o.appendChild(this._createRow("Data Encoding",l.ept.dataType)),n}_buildDimensionsSection(){var n,o;const l=this._createSection("Dimensions",!1),c=l.querySelector(".lidar-metadata-section-body"),u=this._metadata;let p=[];if(u.type==="copc"&&((n=u.copc)!=null&&n.dimensions)?p=u.copc.dimensions:u.type==="ept"&&((o=u.ept)!=null&&o.dimensions)&&(p=u.ept.dimensions),p.length>0){const d=document.createElement("table");d.className="lidar-metadata-table",d.innerHTML=`
        <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Size</th>
          </tr>
        </thead>
        <tbody></tbody>
      `;const g=d.querySelector("tbody");for(const w of p){const M=document.createElement("tr");M.innerHTML=`
          <td>${w.name}</td>
          <td>${w.type}</td>
          <td>${w.size} bytes</td>
        `,g.appendChild(M)}c.appendChild(d)}else c.appendChild(this._createRow("Dimensions","Not available"));return l}_createSection(n,o){const l=document.createElement("div");l.className="lidar-metadata-section";const c=document.createElement("div");c.className="lidar-metadata-section-header",c.innerHTML=`
      <span class="lidar-metadata-section-toggle">${o?"":""}</span>
      <span class="lidar-metadata-section-title">${n}</span>
    `;const u=document.createElement("div");return u.className="lidar-metadata-section-body",u.style.display=o?"block":"none",c.addEventListener("click",()=>{const p=c.querySelector(".lidar-metadata-section-toggle");u.style.display==="none"?(u.style.display="block",p.textContent=""):(u.style.display="none",p.textContent="")}),l.appendChild(c),l.appendChild(u),l}_createRow(n,o){const l=document.createElement("div");return l.className="lidar-metadata-row",l.innerHTML=`
      <span class="lidar-metadata-label">${n}:</span>
      <span class="lidar-metadata-value">${o}</span>
    `,l}_createSubheader(n){const o=document.createElement("div");return o.className="lidar-metadata-subheader",o.textContent=n,o}_formatNumber(n){return n.toLocaleString()}_formatWkt(n){let o="",l=0;for(let c=0;c<n.length;c++){const u=n[c];u==="["?o+=`[
`+"  ".repeat(++l):u==="]"?o+=`
`+"  ".repeat(--l)+"]":u===","?o+=`,
`+"  ".repeat(l):o+=u}return o}}class zf{constructor(n){I(this,"_container"),I(this,"_canvas"),I(this,"_ctx"),I(this,"_tooltip"),I(this,"_options"),I(this,"_profile",null),I(this,"_hoveredPointIndex",-1),I(this,"MARGIN",{top:20,right:20,bottom:40,left:60}),this._options={width:n?.width??300,height:n?.height??150,colormap:n?.colormap??"viridis",onPointHover:n?.onPointHover??(()=>{})},this._container=document.createElement("div"),this._container.className="lidar-profile-chart-container",this._canvas=document.createElement("canvas"),this._canvas.className="lidar-profile-chart",this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._container.appendChild(this._canvas),this._ctx=this._canvas.getContext("2d"),this._tooltip=document.createElement("div"),this._tooltip.className="lidar-profile-tooltip",this._tooltip.style.display="none",this._container.appendChild(this._tooltip),this._canvas.addEventListener("mousemove",this._handleMouseMove.bind(this)),this._canvas.addEventListener("mouseleave",this._handleMouseLeave.bind(this))}render(){return this._container}setProfile(n){this._profile=n,this._draw()}setColormap(n){this._options.colormap=n,this._draw()}resize(n,o){const l=Math.max(100,Math.round(n)),c=Math.max(80,Math.round(o));this._options.width=l,this._options.height=c,this._canvas.width=l,this._canvas.height=c;const u=this._canvas.getContext("2d");u&&(this._ctx=u),this._draw()}_draw(){const{width:n,height:o}=this._options,l=this._ctx;if(l.clearRect(0,0,n,o),l.fillStyle="#f8f8f8",l.fillRect(0,0,n,o),!this._profile||this._profile.points.length===0){this._drawNoData();return}const c=n-this.MARGIN.left-this.MARGIN.right,u=o-this.MARGIN.top-this.MARGIN.bottom;this._drawGrid(c,u),this._drawPoints(c,u),this._drawAxes(c,u)}_drawNoData(){const{width:n,height:o}=this._options,l=this._ctx;l.fillStyle="#888",l.font="12px sans-serif",l.textAlign="center",l.textBaseline="middle",l.fillText("Draw a cross-section line to view elevation profile",n/2,o/2)}_drawGrid(n,o){const l=this._ctx,{left:c,top:u}=this.MARGIN;l.strokeStyle="#ddd",l.lineWidth=1;for(let p=0;p<=4;p++){const d=u+o*p/4;l.beginPath(),l.moveTo(c,d),l.lineTo(c+n,d),l.stroke()}for(let p=0;p<=4;p++){const d=c+n*p/4;l.beginPath(),l.moveTo(d,u),l.lineTo(d,u+o),l.stroke()}}_drawPoints(n,o){if(!this._profile)return;const l=this._ctx,{left:c,top:u}=this.MARGIN,{points:p,stats:d}=this._profile,g=NR(this._options.colormap),w=n/d.totalDistance,M=d.maxElevation-d.minElevation,E=M>0?o/M:1,S=Math.max(1,Math.min(3,500/p.length));for(let P=0;P<p.length;P++){const x=p[P],F=c+x.distance*w,G=u+o-(x.elevation-d.minElevation)*E,Z=M>0?(x.elevation-d.minElevation)/M:.5,W=Math.floor(Z*(g.length-1)),D=g[Math.max(0,Math.min(g.length-1,W))];l.fillStyle=`rgb(${D[0]}, ${D[1]}, ${D[2]})`,l.beginPath(),l.arc(F,G,S,0,Math.PI*2),l.fill(),P===this._hoveredPointIndex&&(l.strokeStyle="#000",l.lineWidth=2,l.beginPath(),l.arc(F,G,S+2,0,Math.PI*2),l.stroke())}}_drawAxes(n,o){if(!this._profile)return;const l=this._ctx,{left:c,top:u}=this.MARGIN,{width:p,height:d}=this._options,{stats:g}=this._profile;l.strokeStyle="#333",l.lineWidth=1,l.beginPath(),l.moveTo(c,u),l.lineTo(c,u+o),l.stroke(),l.beginPath(),l.moveTo(c,u+o),l.lineTo(c+n,u+o),l.stroke(),l.fillStyle="#333",l.font="10px sans-serif",l.textAlign="center",l.textBaseline="top";for(let M=0;M<=4;M++){const E=c+n*M/4,S=g.totalDistance*M/4;l.fillText(this._formatDistance(S),E,u+o+5)}l.textBaseline="bottom",l.fillText("Distance (m)",p/2,d-6),l.textAlign="right",l.textBaseline="middle";const w=g.maxElevation-g.minElevation;for(let M=0;M<=4;M++){const E=u+o-o*M/4,S=g.minElevation+w*M/4;l.fillText(S.toFixed(1),c-5,E)}l.save(),l.translate(12,d/2),l.rotate(-Math.PI/2),l.textAlign="center",l.fillText("Elevation (m)",0,0),l.restore()}_formatDistance(n){return n>=1e3?(n/1e3).toFixed(1)+"km":Math.round(n)+""}_handleMouseMove(n){if(!this._profile||this._profile.points.length===0){this._hideTooltip();return}const o=this._canvas.getBoundingClientRect(),l=n.clientX-o.left,c=n.clientY-o.top,{left:u,top:p}=this.MARGIN,d=this._options.width-this.MARGIN.left-this.MARGIN.right,g=this._options.height-this.MARGIN.top-this.MARGIN.bottom,{points:w,stats:M}=this._profile,E=d/M.totalDistance,S=M.maxElevation-M.minElevation,P=S>0?g/S:1;let x=-1,F=1/0;for(let G=0;G<w.length;G++){const Z=w[G],W=u+Z.distance*E,D=p+g-(Z.elevation-M.minElevation)*P,tt=Math.sqrt((l-W)**2+(c-D)**2);tt<F&&tt<15&&(F=tt,x=G)}if(x!==this._hoveredPointIndex)if(this._hoveredPointIndex=x,this._draw(),x>=0){const G=w[x];this._showTooltip(G,n.clientX,n.clientY),this._options.onPointHover(G,n.clientX,n.clientY)}else this._hideTooltip(),this._options.onPointHover(null,0,0)}_handleMouseLeave(){this._hoveredPointIndex=-1,this._draw(),this._hideTooltip(),this._options.onPointHover(null,0,0)}_showTooltip(n,o,l){const c=[`Distance: ${n.distance.toFixed(1)} m`,`Elevation: ${n.elevation.toFixed(2)} m`,`Offset: ${n.offsetFromLine.toFixed(2)} m`];n.classification!==void 0&&c.push(`Class: ${n.classification}`),this._tooltip.innerHTML=c.join("<br>"),this._tooltip.style.display="block";const u=this._container.getBoundingClientRect();this._tooltip.style.left=`${o-u.left+10}px`,this._tooltip.style.top=`${l-u.top-40}px`}_hideTooltip(){this._tooltip.style.display="none"}destroy(){this._canvas.removeEventListener("mousemove",this._handleMouseMove.bind(this)),this._canvas.removeEventListener("mouseleave",this._handleMouseLeave.bind(this)),this._container.remove()}}class zR{constructor(n,o){I(this,"_container"),I(this,"_callbacks"),I(this,"_options"),I(this,"_drawButton"),I(this,"_clearButton"),I(this,"_downloadButton"),I(this,"_expandButton"),I(this,"_bufferSlider"),I(this,"_bufferValue"),I(this,"_statsContainer"),I(this,"_chartContainer"),I(this,"_chart"),I(this,"_popupBackdrop"),I(this,"_popupContainer"),I(this,"_popupChartContainer"),I(this,"_popupChart"),I(this,"_popupResizeObserver"),I(this,"_isDrawing",!1),I(this,"_profile",null),I(this,"_isResizing",!1),I(this,"_ignoreBackdropClick",!1),I(this,"_resizeStartX",0),I(this,"_resizeStartY",0),I(this,"_resizeStartWidth",0),I(this,"_resizeStartHeight",0),I(this,"_resizeObserver"),I(this,"_handlePopupResizeMouseMove"),I(this,"_handlePopupResizeMouseUp"),this._callbacks=n,this._options={bufferDistance:o?.bufferDistance??10,colormap:o?.colormap??"viridis",chartHeight:o?.chartHeight??180},this._container=document.createElement("div"),this._container.className="lidar-crosssection-panel",this._chart=new zf({width:320,height:this._options.chartHeight,colormap:this._options.colormap}),this._handlePopupResizeMouseMove=this._onPopupResizeMouseMove.bind(this),this._handlePopupResizeMouseUp=this._onPopupResizeMouseUp.bind(this),this._build(),this._setupResizeObserver()}render(){return this._container}setProfile(n){var o;this._profile=n,this._chart.setProfile(n),(o=this._popupChart)==null||o.setProfile(n),this._updateStats();const l=n&&n.points.length>0;this._downloadButton&&(this._downloadButton.disabled=!l),this._expandButton&&(this._expandButton.disabled=!l)}setDrawing(n){this._isDrawing=n,this._drawButton&&(this._drawButton.textContent=n?"Cancel":"Draw Line",this._drawButton.classList.toggle("active",n))}setColormap(n){var o;this._options.colormap=n,this._chart.setColormap(n),(o=this._popupChart)==null||o.setColormap(n)}setBufferDistance(n){this._options.bufferDistance=n,this._bufferSlider&&(this._bufferSlider.value=String(n)),this._bufferValue&&(this._bufferValue.textContent=`${n} m`)}_build(){const n=document.createElement("div");n.className="lidar-crosssection-controls",this._drawButton=document.createElement("button"),this._drawButton.type="button",this._drawButton.className="lidar-control-button lidar-crosssection-draw",this._drawButton.textContent="Draw Line",this._drawButton.addEventListener("click",c=>{c.stopPropagation(),this._isDrawing=!this._isDrawing,this.setDrawing(this._isDrawing),this._callbacks.onDrawToggle(this._isDrawing)}),n.appendChild(this._drawButton),this._clearButton=document.createElement("button"),this._clearButton.type="button",this._clearButton.className="lidar-control-button lidar-crosssection-clear",this._clearButton.textContent="Clear",this._clearButton.addEventListener("click",c=>{c.stopPropagation(),this._callbacks.onClear(),this.setDrawing(!1)}),n.appendChild(this._clearButton),this._downloadButton=document.createElement("button"),this._downloadButton.type="button",this._downloadButton.className="lidar-control-button secondary",this._downloadButton.textContent="CSV",this._downloadButton.title="Download profile data as CSV",this._downloadButton.disabled=!0,this._downloadButton.addEventListener("click",c=>{c.stopPropagation(),this._downloadCSV()}),n.appendChild(this._downloadButton),this._expandButton=document.createElement("button"),this._expandButton.type="button",this._expandButton.className="lidar-control-button secondary",this._expandButton.innerHTML="",this._expandButton.title="Expand chart in popup",this._expandButton.disabled=!0,this._expandButton.addEventListener("click",c=>{c.stopPropagation(),this._openPopup()}),n.appendChild(this._expandButton),this._container.appendChild(n);const o=document.createElement("div");o.className="lidar-control-group";const l=document.createElement("label");l.className="lidar-control-label",l.textContent="Buffer Distance: ",this._bufferValue=document.createElement("span"),this._bufferValue.textContent=`${this._options.bufferDistance} m`,l.appendChild(this._bufferValue),o.appendChild(l),this._bufferSlider=document.createElement("input"),this._bufferSlider.type="range",this._bufferSlider.className="lidar-control-slider",this._bufferSlider.min="1",this._bufferSlider.max="100",this._bufferSlider.step="1",this._bufferSlider.value=String(this._options.bufferDistance),this._bufferSlider.addEventListener("input",c=>{c.stopPropagation();const u=parseInt(this._bufferSlider.value,10);this._bufferValue.textContent=`${u} m`,this._callbacks.onBufferDistanceChange(u)}),o.appendChild(this._bufferSlider),this._container.appendChild(o),this._chartContainer=document.createElement("div"),this._chartContainer.className="lidar-crosssection-chart",this._chartContainer.appendChild(this._chart.render()),this._container.appendChild(this._chartContainer),this._statsContainer=document.createElement("div"),this._statsContainer.className="lidar-crosssection-stats",this._container.appendChild(this._statsContainer),this._updateStats()}_updateStats(){if(!this._statsContainer)return;if(!this._profile||this._profile.points.length===0){this._statsContainer.innerHTML='<div class="lidar-crosssection-stat">No profile data</div>';return}const{stats:n}=this._profile;this._statsContainer.innerHTML=`
      <div class="lidar-crosssection-stat">
        <span class="lidar-crosssection-stat-label">Points:</span>
        <span class="lidar-crosssection-stat-value">${n.pointCount.toLocaleString()}</span>
      </div>
      <div class="lidar-crosssection-stat">
        <span class="lidar-crosssection-stat-label">Distance:</span>
        <span class="lidar-crosssection-stat-value">${n.totalDistance.toFixed(1)} m</span>
      </div>
      <div class="lidar-crosssection-stat">
        <span class="lidar-crosssection-stat-label">Elevation:</span>
        <span class="lidar-crosssection-stat-value">${n.minElevation.toFixed(1)} - ${n.maxElevation.toFixed(1)} m</span>
      </div>
      <div class="lidar-crosssection-stat">
        <span class="lidar-crosssection-stat-label">Mean:</span>
        <span class="lidar-crosssection-stat-value">${n.meanElevation.toFixed(1)} m</span>
      </div>
    `}_setupResizeObserver(){this._resizeObserver=new ResizeObserver(n=>{for(const o of n)if(o.target===this._container){const l=o.contentRect.width,c=Math.max(200,l-4);this._chart.resize(c,this._options.chartHeight)}}),this._resizeObserver.observe(this._container)}_openPopup(){if(!this._profile)return;this._popupBackdrop=document.createElement("div"),this._popupBackdrop.className="lidar-chart-popup-backdrop",this._popupBackdrop.addEventListener("click",g=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=!1;return}g.target===this._popupBackdrop&&this._closePopup()}),this._popupContainer=document.createElement("div"),this._popupContainer.className="lidar-chart-popup";const n=document.createElement("div");n.className="lidar-chart-popup-header";const o=document.createElement("span");o.className="lidar-chart-popup-title",o.textContent="Cross-Section Elevation Profile",n.appendChild(o);const l=document.createElement("button");l.className="lidar-chart-popup-close",l.innerHTML="",l.title="Close",l.addEventListener("click",()=>this._closePopup()),n.appendChild(l),this._popupContainer.appendChild(n);const c=document.createElement("div");c.className="lidar-chart-popup-content",this._popupChartContainer=c,this._popupChart=new zf({width:700,height:400,colormap:this._options.colormap}),this._popupChart.setProfile(this._profile),c.appendChild(this._popupChart.render()),this._popupContainer.appendChild(c);const u=document.createElement("div");u.className="lidar-chart-popup-stats";const{stats:p}=this._profile;u.innerHTML=`
      <span><strong>Points:</strong> ${p.pointCount.toLocaleString()}</span>
      <span><strong>Distance:</strong> ${p.totalDistance.toFixed(1)} m</span>
      <span><strong>Elevation:</strong> ${p.minElevation.toFixed(1)} - ${p.maxElevation.toFixed(1)} m</span>
      <span><strong>Mean:</strong> ${p.meanElevation.toFixed(1)} m</span>
    `,this._popupContainer.appendChild(u);const d=document.createElement("div");d.className="lidar-chart-popup-resize",d.title="Drag to resize",d.addEventListener("mousedown",g=>{g.preventDefault(),g.stopPropagation(),this._startPopupResize(g)}),this._popupContainer.appendChild(d),this._popupBackdrop.appendChild(this._popupContainer),document.body.appendChild(this._popupBackdrop),document.body.style.overflow="hidden",this._popupResizeObserver=new ResizeObserver(()=>{this._syncPopupChartSize()}),this._popupResizeObserver.observe(c),this._syncPopupChartSize()}_closePopup(){this._popupBackdrop&&(this._popupBackdrop.remove(),this._popupBackdrop=void 0),this._popupChart&&(this._popupChart.destroy(),this._popupChart=void 0),this._popupResizeObserver&&(this._popupResizeObserver.disconnect(),this._popupResizeObserver=void 0),this._popupContainer=void 0,this._popupChartContainer=void 0,this._ignoreBackdropClick=!1,document.body.style.overflow=""}_startPopupResize(n){if(!this._popupContainer)return;this._isResizing=!0,this._ignoreBackdropClick=!0,this._resizeStartX=n.clientX,this._resizeStartY=n.clientY;const o=this._popupContainer.getBoundingClientRect();this._resizeStartWidth=o.width,this._resizeStartHeight=o.height,document.addEventListener("mousemove",this._handlePopupResizeMouseMove),document.addEventListener("mouseup",this._handlePopupResizeMouseUp),document.body.style.cursor="nwse-resize",document.body.style.userSelect="none"}_onPopupResizeMouseMove(n){if(!this._isResizing||!this._popupContainer)return;const o=n.clientX-this._resizeStartX,l=n.clientY-this._resizeStartY,c=Math.max(400,Math.min(window.innerWidth-40,this._resizeStartWidth+o)),u=Math.max(300,Math.min(window.innerHeight-40,this._resizeStartHeight+l));this._popupContainer.style.width=`${c}px`,this._popupContainer.style.height=`${u}px`,this._syncPopupChartSize()}_onPopupResizeMouseUp(){this._isResizing=!1,document.removeEventListener("mousemove",this._handlePopupResizeMouseMove),document.removeEventListener("mouseup",this._handlePopupResizeMouseUp),document.body.style.cursor="",document.body.style.userSelect="",this._syncPopupChartSize(),window.setTimeout(()=>{this._ignoreBackdropClick=!1},0),this._popupChart&&this._profile&&this._popupChart.setProfile(this._profile)}_syncPopupChartSize(){if(!this._popupChart||!this._popupChartContainer)return;const n=this._popupChartContainer.getBoundingClientRect(),o=window.getComputedStyle(this._popupChartContainer),l=(Number.parseFloat(o.paddingLeft)||0)+(Number.parseFloat(o.paddingRight)||0),c=(Number.parseFloat(o.paddingTop)||0)+(Number.parseFloat(o.paddingBottom)||0),u=Math.max(200,n.width-l),p=Math.max(150,n.height-c);this._popupChart.resize(u,p)}_downloadCSV(){if(!this._profile||this._profile.points.length===0)return;const o=[["distance","elevation","offsetFromLine","longitude","latitude","intensity","classification"].join(",")];for(const d of this._profile.points){const g=[d.distance.toFixed(3),d.elevation.toFixed(3),d.offsetFromLine.toFixed(3),d.longitude.toFixed(8),d.latitude.toFixed(8),d.intensity!==void 0?d.intensity.toFixed(4):"",d.classification!==void 0?String(d.classification):""];o.push(g.join(","))}const l=o.join(`
`),c=new Blob([l],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(c),p=document.createElement("a");p.href=u,p.download=`cross-section-profile-${Date.now()}.csv`,p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(u)}destroy(){this._closePopup(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._isResizing&&(document.removeEventListener("mousemove",this._handlePopupResizeMouseMove),document.removeEventListener("mouseup",this._handlePopupResizeMouseUp),document.body.style.cursor="",document.body.style.userSelect=""),this._chart.destroy(),this._container.remove()}}class ac{static extract(n,o,l){const c=[],{positions:u,intensities:p,classifications:d,pointCount:g}=o,w=n.start,M=n.end,E=this.haversineDistance(w,M),S=M[0]-w[0],P=M[1]-w[1],x=S*S+P*P;for(let G=0;G<g;G++){const Z=u[G*3]+l[0],W=u[G*3+1]+l[1],D=u[G*3+2],{distance:tt,offset:q}=this.pointToLineDistance([Z,W],w,M,x,E);if(q<=n.bufferDistance&&tt>=0&&tt<=E){const K={distance:tt,elevation:D,offsetFromLine:q,longitude:Z,latitude:W,intensity:p?p[G]:void 0,classification:d?d[G]:void 0};c.push(K)}}c.sort((G,Z)=>G.distance-Z.distance);const F=this.calculateStats(c,E);return{line:n,points:c,stats:F}}static haversineDistance(n,o){const l=this.toRadians(n[1]),c=this.toRadians(o[1]),u=this.toRadians(o[1]-n[1]),p=this.toRadians(o[0]-n[0]),d=Math.sin(u/2)*Math.sin(u/2)+Math.cos(l)*Math.cos(c)*Math.sin(p/2)*Math.sin(p/2),g=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return this.EARTH_RADIUS_M*g}static pointToLineDistance(n,o,l,c,u){const p=l[0]-o[0],d=l[1]-o[1],g=n[0]-o[0],w=n[1]-o[1];let M=(g*p+w*d)/c;M=Math.max(0,Math.min(1,M));const E=o[0]+M*p,S=o[1]+M*d,P=M*u,x=this.haversineDistance(n,[E,S]);return{distance:P,offset:x}}static calculateStats(n,o){if(n.length===0)return{minElevation:0,maxElevation:0,meanElevation:0,totalDistance:o,pointCount:0};let l=1/0,c=-1/0,u=0;for(const p of n)l=Math.min(l,p.elevation),c=Math.max(c,p.elevation),u+=p.elevation;return{minElevation:l,maxElevation:c,meanElevation:u/n.length,totalDistance:o,pointCount:n.length}}static toRadians(n){return n*(Math.PI/180)}static createBufferPolygon(n,o=8){const[l,c]=n.start,[u,p]=n.end,d=this.metersToDegrees(n.bufferDistance,(c+p)/2),g=u-l,w=p-c,M=Math.sqrt(g*g+w*w),E=-w/M,S=g/M,P=[];P.push([l+E*d,c+S*d]),P.push([u+E*d,p+S*d]);for(let x=0;x<=o;x++){const F=Math.atan2(S,E)-Math.PI+Math.PI*x/o;P.push([u+Math.cos(F)*d,p+Math.sin(F)*d])}P.push([u-E*d,p-S*d]),P.push([l-E*d,c-S*d]);for(let x=0;x<=o;x++){const F=Math.atan2(S,E)+Math.PI*x/o;P.push([l+Math.cos(F)*d,c+Math.sin(F)*d])}return P.push(P[0]),P}static metersToDegrees(n,o){const l=this.toRadians(o);return n/(this.EARTH_RADIUS_M*Math.cos(l)*(Math.PI/180))}}I(ac,"EARTH_RADIUS_M",6371e3);class DR{constructor(n,o){I(this,"_map"),I(this,"_deckOverlay"),I(this,"_enabled",!1),I(this,"_isDrawing",!1),I(this,"_startPoint",null),I(this,"_endPoint",null),I(this,"_bufferDistance",10),I(this,"LAYER_ID","lidar-cross-section-layer"),I(this,"_onLineChange"),I(this,"_handleClickBound"),I(this,"_handleMouseMoveBound"),this._map=n,this._deckOverlay=o,this._handleClickBound=this._handleClick.bind(this),this._handleMouseMoveBound=this._handleMouseMove.bind(this)}enable(){this._enabled||(this._enabled=!0,this._addEventListeners(),this._map.getCanvas().style.cursor="crosshair")}disable(){this._enabled&&(this._enabled=!1,this._removeEventListeners(),this._map.getCanvas().style.cursor="",this._isDrawing=!1)}isEnabled(){return this._enabled}getLine(){return!this._startPoint||!this._endPoint?null:{start:this._startPoint,end:this._endPoint,bufferDistance:this._bufferDistance}}setBufferDistance(n){this._bufferDistance=n,this._updateVisualization(),this._notifyLineChange()}getBufferDistance(){return this._bufferDistance}clearLine(){this._startPoint=null,this._endPoint=null,this._isDrawing=!1,this._removeDeckLayers(),this._notifyLineChange()}setOnLineChange(n){this._onLineChange=n}destroy(){this.disable(),this._removeDeckLayers()}_removeDeckLayers(){this._deckOverlay.hasLayer(this.LAYER_ID)&&this._deckOverlay.removeLayer(this.LAYER_ID)}_addEventListeners(){this._map.on("click",this._handleClickBound),this._map.on("mousemove",this._handleMouseMoveBound)}_removeEventListeners(){this._map.off("click",this._handleClickBound),this._map.off("mousemove",this._handleMouseMoveBound)}_handleClick(n){const o=n.lngLat;this._isDrawing?(this._endPoint=[o.lng,o.lat],this._isDrawing=!1,this._notifyLineChange()):(this._startPoint=[o.lng,o.lat],this._endPoint=null,this._isDrawing=!0),this._updateVisualization()}_handleMouseMove(n){!this._isDrawing||!this._startPoint||(this._endPoint=[n.lngLat.lng,n.lngLat.lat],this._updateVisualization())}_updateVisualization(){const n=[];if(this._startPoint&&n.push({type:"Feature",properties:{type:"point",position:"start"},geometry:{type:"Point",coordinates:this._startPoint}}),this._startPoint&&this._endPoint){n.push({type:"Feature",properties:{type:"point",position:"end"},geometry:{type:"Point",coordinates:this._endPoint}}),n.push({type:"Feature",properties:{type:"line"},geometry:{type:"LineString",coordinates:[this._startPoint,this._endPoint]}});const c=ac.createBufferPolygon({start:this._startPoint,end:this._endPoint,bufferDistance:this._bufferDistance});n.push({type:"Feature",properties:{type:"buffer"},geometry:{type:"Polygon",coordinates:[c]}})}const o={type:"FeatureCollection",features:n},l=new w2({id:this.LAYER_ID,data:o,pickable:!1,stroked:!0,filled:!0,parameters:{depthTest:!1,depthMask:!1},getFillColor:c=>{var u,p;return((u=c.properties)==null?void 0:u.type)==="point"?[255,51,51,255]:((p=c.properties)==null?void 0:p.type)==="buffer"?[51,136,255,50]:[0,0,0,0]},getLineColor:c=>{var u,p,d;return((u=c.properties)==null?void 0:u.type)==="line"?[51,136,255,255]:((p=c.properties)==null?void 0:p.type)==="buffer"?[51,136,255,100]:((d=c.properties)==null?void 0:d.type)==="point"?[255,255,255,255]:[0,0,0,0]},getLineWidth:c=>{var u,p;return((u=c.properties)==null?void 0:u.type)==="line"?3:((p=c.properties)==null?void 0:p.type)==="point"?2:1},lineWidthUnits:"pixels",pointType:"circle",getPointRadius:8,pointRadiusUnits:"pixels"});this._deckOverlay.hasLayer(this.LAYER_ID)?this._deckOverlay.updateLayer(this.LAYER_ID,l):this._deckOverlay.addLayer(this.LAYER_ID,l)}_notifyLineChange(){this._onLineChange&&this._onLineChange(this.getLine())}}const XR={collapsed:!0,position:"top-right",title:"LiDAR Viewer",panelWidth:365,maxHeight:500,className:"",pointSize:2,opacity:1,colorScheme:"elevation",usePercentile:!0,colormap:"viridis",colorRange:{mode:"percentile",percentileLow:2,percentileHigh:98},showColorbar:!0,pointBudget:1e6,elevationRange:null,pickable:!1,autoZoom:!0,pickInfoFields:void 0,zOffsetEnabled:!1,zOffset:0,autoZOffset:!0,copcLoadingMode:void 0,streamingPointBudget:5e6,streamingMaxConcurrentRequests:4,streamingViewportDebounceMs:150,terrainEnabled:!1,terrainExaggeration:1};class jR{constructor(n){I(this,"_map"),I(this,"_mapContainer"),I(this,"_container"),I(this,"_panel"),I(this,"_options"),I(this,"_state"),I(this,"_eventHandlers",new globalThis.Map),I(this,"_resizeHandler",null),I(this,"_mapResizeHandler",null),I(this,"_clickOutsideHandler",null),I(this,"_deckOverlay"),I(this,"_pointCloudManager"),I(this,"_loader"),I(this,"_panelBuilder"),I(this,"_tooltip"),I(this,"_streamingLoaders",new Map),I(this,"_eptStreamingLoaders",new Map),I(this,"_viewportManagers",new Map),I(this,"_eptViewportRequestIds",new Map),I(this,"_eptLastViewport",new Map),I(this,"_manualZOffset",!1),I(this,"_metadataPanel"),I(this,"_fullMetadata",new Map),I(this,"_crossSectionTool"),I(this,"_crossSectionPanel"),I(this,"_currentProfile",null),this._options={...XR,...n};const o=this._options.colorRange??{mode:"percentile",percentileLow:2,percentileHigh:98};this._state={collapsed:this._options.collapsed,panelWidth:this._options.panelWidth,maxHeight:this._options.maxHeight,pointClouds:[],activePointCloudId:null,pointSize:this._options.pointSize,opacity:this._options.opacity,colorScheme:this._options.colorScheme,colormap:this._options.colormap??"viridis",colorRange:o,showColorbar:this._options.showColorbar??!0,usePercentile:this._options.usePercentile,elevationRange:this._options.elevationRange,pointBudget:this._options.pointBudget,pickable:this._options.pickable,loading:!1,error:null,pickInfoFields:this._options.pickInfoFields,zOffsetEnabled:this._options.zOffsetEnabled??!1,zOffset:this._options.zOffset??0,hiddenClassifications:new Set,availableClassifications:new Set,terrainEnabled:this._options.terrainEnabled??!1},this._loader=new rR,(n?.zOffset!==void 0||n?.zOffsetEnabled!==void 0)&&(this._manualZOffset=!0)}onAdd(n){return this._map=n,this._mapContainer=n.getContainer(),this._deckOverlay=new E2(n),this._pointCloudManager=new OR(this._deckOverlay,{pointSize:this._state.pointSize,opacity:this._state.opacity,colorScheme:this._state.colorScheme,usePercentile:this._state.usePercentile,elevationRange:this._state.elevationRange,pickable:this._state.pickable,zOffset:this._state.zOffset,onHover:o=>this._handlePointHover(o)}),this._tooltip=this._createTooltip(),document.body.appendChild(this._tooltip),this._container=this._createContainer(),this._panel=this._createPanel(),this._mapContainer.appendChild(this._panel),this._setupEventListeners(),this._state.collapsed||(this._panel.classList.add("expanded"),requestAnimationFrame(()=>{this._updatePanelPosition()})),this._state.terrainEnabled&&this.setTerrain(!0),this._container}onRemove(){var n,o,l,c,u,p,d;this.stopStreaming(),(n=this._deckOverlay)==null||n.destroy(),this._resizeHandler&&(window.removeEventListener("resize",this._resizeHandler),this._resizeHandler=null),this._mapResizeHandler&&this._map&&(this._map.off("resize",this._mapResizeHandler),this._mapResizeHandler=null),this._clickOutsideHandler&&(document.removeEventListener("click",this._clickOutsideHandler),this._clickOutsideHandler=null),(l=(o=this._tooltip)==null?void 0:o.parentNode)==null||l.removeChild(this._tooltip),(u=(c=this._panel)==null?void 0:c.parentNode)==null||u.removeChild(this._panel),(d=(p=this._container)==null?void 0:p.parentNode)==null||d.removeChild(this._container),this._map=void 0,this._mapContainer=void 0,this._container=void 0,this._panel=void 0,this._deckOverlay=void 0,this._pointCloudManager=void 0,this._panelBuilder=void 0,this._tooltip=void 0,this._eventHandlers.clear()}getState(){return{...this._state}}setState(n){var o;this._state={...this._state,...n},(o=this._panelBuilder)==null||o.updateState(this._state),this._emit("statechange")}toggle(){this._state.collapsed=!this._state.collapsed,this._panel&&(this._state.collapsed?(this._panel.classList.remove("expanded"),this._emit("collapse")):(this._panel.classList.add("expanded"),this._updatePanelPosition(),this._emit("expand"))),this._emit("statechange")}expand(){this._state.collapsed&&this.toggle()}collapse(){this._state.collapsed||this.toggle()}on(n,o){this._eventHandlers.has(n)||this._eventHandlers.set(n,new Set),this._eventHandlers.get(n).add(o)}off(n,o){var l;(l=this._eventHandlers.get(n))==null||l.delete(o)}getMap(){return this._map}getContainer(){return this._container}getDeckOverlay(){return this._deckOverlay}async loadPointCloud(n,o){var l,c,u,p,d;if(typeof n=="string"&&(n.endsWith("/ept.json")||n.includes("/ept.json?")))return this.loadPointCloudEptStreaming(n);const w=typeof n=="string"&&(n.startsWith("http://")||n.startsWith("https://"))&&/\.copc\./i.test(n),M=n instanceof File&&/\.copc\./i.test(n.name),E=w||M;if((o?.loadingMode??this._options.copcLoadingMode??(E?"dynamic":"full"))==="dynamic"&&E)return this.loadPointCloudStreaming(n);const P=Aa("pc");let x;typeof n=="string"?x=ma(n):n instanceof File?x=n.name:x=`PointCloud ${P}`,this.setState({loading:!0,error:null}),this._emit("loadstart");const F=(G,Z)=>{var W;(W=this._panelBuilder)==null||W.updateLoadingProgress(G,Z)};try{const G=await this._loader.load(n,F);F(95,"Creating visualization layers..."),(l=this._pointCloudManager)==null||l.addPointCloud(P,G);let Z,W,D=this._state.zOffsetEnabled;if(this._options.autoZOffset&&!this._manualZOffset&&G.positions&&G.pointCount>0){const nt=new Float32Array(G.pointCount);for(let st=0;st<G.pointCount;st++)nt[st]=G.positions[st*3+2]??0;Z=Na(nt,2,98).min,W=-Z,D=!0,(c=this._pointCloudManager)==null||c.setZOffset(W),console.log(`Auto Z offset applied: zOffsetBase=${Z.toFixed(1)}, zOffset=${W.toFixed(1)}, enabled=${D}`)}else this._manualZOffset?((u=this._pointCloudManager)==null||u.setZOffset(this._state.zOffset),W=this._state.zOffset,D=this._state.zOffsetEnabled,console.log(`Manual Z offset applied: zOffset=${W}, enabled=${D}`)):console.log("Auto Z offset skipped - conditions not met");F(100,"Complete!");const tt={id:P,name:x,pointCount:G.pointCount,bounds:G.bounds,hasRGB:G.hasRGB,hasIntensity:G.hasIntensity,hasClassification:G.hasClassification,source:typeof n=="string"?n:"file",wkt:G.wkt},q=ga(G),K=new Set([...this._state.availableClassifications,...q]),_t=[...this._state.pointClouds,tt];return this.setState({loading:!1,pointClouds:_t,activePointCloudId:P,availableClassifications:K,zOffsetBase:Z,zOffset:W??this._state.zOffset,zOffsetEnabled:D}),this._updateComputedColorBounds(),(p=this._panelBuilder)==null||p.updateState(this._state),this._emitWithData("load",{pointCloud:tt}),this._options.autoZoom&&this.flyToPointCloud(P),tt}catch(G){const Z=G instanceof Error?G:new Error(String(G)),W=Z.message.includes("CORS")||Z.message==="Failed to fetch"||G instanceof TypeError&&Z.message==="Failed to fetch",D=typeof n=="string"&&(n.startsWith("http://")||n.startsWith("https://"));if(W&&D)return console.warn(`CORS error detected for ${n}. Falling back to download mode...`),(d=this._panelBuilder)==null||d.updateLoadingProgress(5,"CORS blocked - downloading file..."),this._loadPointCloudFullDownload(n);throw this.setState({loading:!1,error:`Failed to load: ${Z.message}`}),this._emitWithData("loaderror",{error:Z}),Z}}unloadPointCloud(n){var o,l,c;if(n){if(this._streamingLoaders.has(n)||this._eptStreamingLoaders.has(n)){this.stopStreaming(n);return}(o=this._pointCloudManager)==null||o.removePointCloud(n);const u=this._state.pointClouds.filter(d=>d.id!==n),p={pointClouds:u,activePointCloudId:this._state.activePointCloudId===n?((l=u[0])==null?void 0:l.id)||null:this._state.activePointCloudId,availableClassifications:new Set,hiddenClassifications:new Set};this.setState(p),this._emitWithData("unload",{pointCloud:{id:n}})}else{const u=this._state.pointClouds.map(p=>p.id);this.stopStreaming(),(c=this._pointCloudManager)==null||c.clear(),this.setState({pointClouds:[],activePointCloudId:null,availableClassifications:new Set,hiddenClassifications:new Set});for(const p of u)this._emitWithData("unload",{pointCloud:{id:p}})}}async loadPointCloudStreaming(n,o){var l,c,u,p,d;const g=Aa("pc-stream");let w;typeof n=="string"?w=ma(n):n instanceof File?w=n.name:w=`PointCloud ${g}`,this.setState({loading:!0,error:null,streamingActive:!0}),this._emit("loadstart"),this._emit("streamingstart");try{const M=new fR(n,{pointBudget:o?.pointBudget??this._options.streamingPointBudget,maxConcurrentRequests:o?.maxConcurrentRequests??this._options.streamingMaxConcurrentRequests,viewportDebounceMs:o?.viewportDebounceMs??this._options.streamingViewportDebounceMs,minDetailZoom:o?.minDetailZoom??10,maxOctreeDepth:o?.maxOctreeDepth??20});(l=this._panelBuilder)==null||l.updateLoadingProgress(10,"Initializing COPC file...");const{bounds:E,totalPoints:S,hasRGB:P,spacing:x}=await M.initialize();(c=this._panelBuilder)==null||c.updateLoadingProgress(20,"Setting up streaming...");let F=!1;M.setOnPointsLoaded(D=>{var tt,q,K;if((tt=this._pointCloudManager)==null||tt.updatePointCloud(g,D),this._options.autoZOffset&&!this._manualZOffset&&!F&&D.bounds){const nt=D.bounds.minZ,ut=-nt;(q=this._pointCloudManager)==null||q.setZOffset(ut),console.log(`Auto Z offset applied (streaming): ${ut.toFixed(1)}m (ground level from bounds: ${nt.toFixed(1)}m)`),this.setState({zOffsetBase:nt,zOffset:ut,zOffsetEnabled:!0}),F=!0}else this._manualZOffset&&!F&&((K=this._pointCloudManager)==null||K.setZOffset(this._state.zOffset),F=!0);const _t=ga(D);if(_t.size>0){const nt=new Set([...this._state.availableClassifications,..._t]);nt.size>this._state.availableClassifications.size&&this.setState({availableClassifications:nt})}}),M.on("progress",(D,tt)=>{var q;const K=tt;this.setState({streamingProgress:{loadedNodes:K.loadedNodes,loadedPoints:K.loadedPoints,queueSize:K.queueSize,isLoading:K.isLoading}});const _t=Math.min(99,20+Math.round(K.loadedPoints/K.pointBudget*70));(q=this._panelBuilder)==null||q.updateLoadingProgress(_t,`Streaming: ${K.loadedPoints.toLocaleString()} points loaded`),this._emit("streamingprogress")}),M.on("budgetreached",()=>{this._emit("budgetreached")}),this._streamingLoaders.set(g,M);const G=new Zf(this._map,D=>this._handleViewportChangeForStreaming(D,g),{debounceMs:o?.viewportDebounceMs??this._options.streamingViewportDebounceMs,minDetailZoom:o?.minDetailZoom??10,maxOctreeDepth:o?.maxOctreeDepth??20,spacing:x});this._viewportManagers.set(g,G);const Z={id:g,name:`${w}`,pointCount:S,bounds:E,hasRGB:P,hasIntensity:!0,hasClassification:!0,source:typeof n=="string"?n:w,wkt:void 0},W=[...this._state.pointClouds,Z];if(this.setState({loading:!1,pointClouds:W,activePointCloudId:g}),this._updateComputedColorBounds(),(u=this._panelBuilder)==null||u.updateState(this._state),G.start(),this._options.autoZoom){const D=Math.max(-90,Math.min(90,E.minY)),tt=Math.max(-90,Math.min(90,E.maxY)),q=Math.max(-180,Math.min(180,E.minX)),K=Math.max(-180,Math.min(180,E.maxX));(p=this._map)==null||p.fitBounds([[q,D],[K,tt]],{padding:50,duration:1e3}),setTimeout(()=>{G.forceUpdate()},1100)}return this._emitWithData("load",{pointCloud:Z}),Z}catch(M){const E=M instanceof Error?M:new Error(String(M));if((E.message.includes("CORS")||E.message==="Failed to fetch"||M instanceof TypeError&&E.message==="Failed to fetch")&&typeof n=="string"){console.warn(`CORS error detected for ${n}. Falling back to download mode...`);const P=this._streamingLoaders.get(g);P&&(P.destroy(),this._streamingLoaders.delete(g));const x=this._viewportManagers.get(g);x&&(x.destroy(),this._viewportManagers.delete(g));const F=this._streamingLoaders.size>0;return this.setState({loading:!0,streamingActive:F,error:null}),(d=this._panelBuilder)==null||d.updateLoadingProgress(5,"CORS blocked - downloading file..."),this._loadPointCloudFullDownload(n)}throw this.setState({loading:!1,streamingActive:!1,error:`Failed to load: ${E.message}`}),this._emitWithData("loaderror",{error:E}),E}}async loadPointCloudEptStreaming(n,o){var l,c,u,p,d;const g=Aa("ept-stream"),w=ma(n.replace("/ept.json",""));this.setState({loading:!0,error:null,streamingActive:!0}),this._emit("loadstart"),this._emit("streamingstart");try{const M=new AR(n,{pointBudget:o?.pointBudget??this._options.streamingPointBudget,maxConcurrentRequests:o?.maxConcurrentRequests??this._options.streamingMaxConcurrentRequests,viewportDebounceMs:o?.viewportDebounceMs??this._options.streamingViewportDebounceMs,minDetailZoom:o?.minDetailZoom??10,maxOctreeDepth:o?.maxOctreeDepth??20});(l=this._panelBuilder)==null||l.updateLoadingProgress(10,"Initializing EPT dataset...");const{bounds:E,totalPoints:S,hasRGB:P,spacing:x}=await M.initialize();(c=this._panelBuilder)==null||c.updateLoadingProgress(20,"Setting up streaming...");let F=!1;M.setOnPointsLoaded(tt=>{var q,K,_t;if((q=this._pointCloudManager)==null||q.updatePointCloud(g,tt),this._options.autoZOffset&&!this._manualZOffset&&!F&&tt.bounds){const ut=tt.bounds.minZ,st=-ut;(K=this._pointCloudManager)==null||K.setZOffset(st),console.log(`Auto Z offset applied (EPT streaming): ${st.toFixed(1)}m`),this.setState({zOffsetBase:ut,zOffset:st,zOffsetEnabled:!0}),F=!0}else this._manualZOffset&&!F&&((_t=this._pointCloudManager)==null||_t.setZOffset(this._state.zOffset),F=!0);const nt=ga(tt);if(nt.size>0){const ut=new Set([...this._state.availableClassifications,...nt]);ut.size>this._state.availableClassifications.size&&this.setState({availableClassifications:ut})}}),M.on("progress",(tt,q)=>{var K;const _t=q;this.setState({streamingProgress:{loadedNodes:_t.loadedNodes,loadedPoints:_t.loadedPoints,queueSize:_t.queueSize,isLoading:_t.isLoading}});const nt=Math.min(99,20+Math.round(_t.loadedPoints/_t.pointBudget*70));(K=this._panelBuilder)==null||K.updateLoadingProgress(nt,`Streaming EPT: ${_t.loadedPoints.toLocaleString()} points loaded`),this._emit("streamingprogress")}),M.on("budgetreached",()=>{this._emit("budgetreached")}),this._eptStreamingLoaders.set(g,M);const G=new Zf(this._map,tt=>this._handleViewportChangeForEptStreaming(tt,g),{debounceMs:o?.viewportDebounceMs??this._options.streamingViewportDebounceMs,minDetailZoom:o?.minDetailZoom??10,maxOctreeDepth:o?.maxOctreeDepth??20,spacing:x});this._viewportManagers.set(g,G);const Z=M.getMetadata(),W={id:g,name:`${w} (EPT)`,pointCount:S,bounds:E,hasRGB:P,hasIntensity:!0,hasClassification:!0,source:n,wkt:(u=Z?.srs)==null?void 0:u.wkt},D=[...this._state.pointClouds,W];if(this.setState({loading:!1,pointClouds:D,activePointCloudId:g}),this._updateComputedColorBounds(),(p=this._panelBuilder)==null||p.updateState(this._state),G.start(),this._options.autoZoom){const tt=Math.max(-90,Math.min(90,E.minY)),q=Math.max(-90,Math.min(90,E.maxY)),K=Math.max(-180,Math.min(180,E.minX)),_t=Math.max(-180,Math.min(180,E.maxX));(d=this._map)==null||d.fitBounds([[K,tt],[_t,q]],{padding:50,duration:1e3}),setTimeout(()=>{G.forceUpdate()},1100)}return this._emitWithData("load",{pointCloud:W}),W}catch(M){const E=M instanceof Error?M:new Error(String(M)),S=this._eptStreamingLoaders.get(g);S&&(S.destroy(),this._eptStreamingLoaders.delete(g)),this._eptViewportRequestIds.delete(g),this._eptLastViewport.delete(g);const P=this._viewportManagers.get(g);P&&(P.destroy(),this._viewportManagers.delete(g));const x=this._streamingLoaders.size>0||this._eptStreamingLoaders.size>0;throw this.setState({loading:!1,streamingActive:x,error:`Failed to load EPT: ${E.message}`}),this._emitWithData("loaderror",{error:E}),E}}_shouldResetEptForViewportChange(n,o){if(!n)return!1;const[l,c,u,p]=n.bounds,[d,g,w,M]=o.bounds;if(!!(w<l||d>u||M<c||g>p))return!0;const S=u-l,P=p-c,x=o.center[0]-n.center[0],F=o.center[1]-n.center[1],G=Math.sqrt(x*x+F*F),Z=Math.max(S,P)*.3;return G>Z}async _handleViewportChangeForEptStreaming(n,o,l){const c=this._eptStreamingLoaders.get(o);if(c)try{const u=l??(this._eptViewportRequestIds.get(o)??0)+1;if(l===void 0&&this._eptViewportRequestIds.set(o,u),this._eptViewportRequestIds.get(o)!==u)return;const p=this._eptLastViewport.get(o),d=this._shouldResetEptForViewportChange(p,n);if(this._eptLastViewport.set(o,n),c.pruneQueueForViewport(n),d&&!c.resetLoadedData()){setTimeout(()=>{this._handleViewportChangeForEptStreaming(n,o,u)},200);return}let g=await c.selectNodesForViewport(n),w=!1;const M=c.getLoadedPointCount(),E=c.getPointBudget(),S=M>=E*.8,P=Math.max(0,n.targetDepth-2),x=c.getViewportCoverageRatio(n,P),F=x<.5,G=c.hasPendingSubtrees(n),Z=g.length>0||G;S&&F&&Z&&(w=c.resetLoadedData(),w&&(g=await c.selectNodesForViewport(n))),!S&&x<.1&&g.length===0&&(g=await c.selectNodesForViewport(n));for(const W of g)c.queueNode(W);if(await c.loadQueuedNodes(),this._eptViewportRequestIds.get(o)!==u)return;if(S&&F&&g.length>0&&!w){setTimeout(()=>{this._handleViewportChangeForEptStreaming(n,o,u)},200);return}G&&setTimeout(()=>{this._handleViewportChangeForEptStreaming(n,o,u)},100)}catch(u){console.warn("Failed to load EPT nodes for viewport:",u)}}async _loadPointCloudFullDownload(n){var o,l,c,u,p,d,g,w,M,E;const S=Aa("pc"),P=ma(n);try{(o=this._panelBuilder)==null||o.updateLoadingProgress(10,"Downloading file...");const x=await fetch(n);if(!x.ok)throw new Error(`HTTP ${x.status}: ${x.statusText}`);const F=x.headers.get("content-length"),G=F?parseInt(F,10):0,Z=(l=x.body)==null?void 0:l.getReader();if(!Z)throw new Error("Failed to get response reader");const W=[];let D=0;for(;;){const{done:z,value:it}=await Z.read();if(z)break;if(W.push(it),D+=it.length,G>0){const At=Math.round(D/G*50);(c=this._panelBuilder)==null||c.updateLoadingProgress(10+At,`Downloading: ${(D/1024/1024).toFixed(1)} MB`)}}const tt=new Uint8Array(D);let q=0;for(const z of W)tt.set(z,q),q+=z.length;(u=this._panelBuilder)==null||u.updateLoadingProgress(60,"Processing point cloud...");const K=(z,it)=>{var At;const kt=60+z*.4;(At=this._panelBuilder)==null||At.updateLoadingProgress(kt,it)},_t=await this._loader.load(tt.buffer,K);(p=this._panelBuilder)==null||p.updateLoadingProgress(95,"Creating visualization layers..."),(d=this._pointCloudManager)==null||d.addPointCloud(S,_t);let nt,ut,st=this._state.zOffsetEnabled;if(this._options.autoZOffset&&!this._manualZOffset&&_t.positions&&_t.pointCount>0){const z=new Float32Array(_t.pointCount);for(let At=0;At<_t.pointCount;At++)z[At]=_t.positions[At*3+2]??0;nt=Na(z,2,98).min,ut=-nt,st=!0,(g=this._pointCloudManager)==null||g.setZOffset(ut),console.log(`Auto Z offset applied (download): ${ut.toFixed(1)}m (ground level: ${nt.toFixed(1)}m)`)}else this._manualZOffset&&((w=this._pointCloudManager)==null||w.setZOffset(this._state.zOffset),ut=this._state.zOffset,st=this._state.zOffsetEnabled);(M=this._panelBuilder)==null||M.updateLoadingProgress(100,"Complete!");const vt={id:S,name:P,pointCount:_t.pointCount,bounds:_t.bounds,hasRGB:_t.hasRGB,hasIntensity:_t.hasIntensity,hasClassification:_t.hasClassification,source:n,wkt:_t.wkt},Pt=ga(_t),Yt=new Set([...this._state.availableClassifications,...Pt]),$t=[...this._state.pointClouds,vt];return this.setState({loading:!1,pointClouds:$t,activePointCloudId:S,availableClassifications:Yt,zOffsetBase:nt,zOffset:ut??this._state.zOffset,zOffsetEnabled:st}),this._updateComputedColorBounds(),(E=this._panelBuilder)==null||E.updateState(this._state),this._emitWithData("load",{pointCloud:vt}),this._options.autoZoom&&this.flyToPointCloud(S),vt}catch(x){const F=x instanceof Error?x:new Error(String(x)),G=F.message.includes("CORS")||F.message==="Failed to fetch"||x instanceof TypeError&&F.message==="Failed to fetch";let Z;throw G?Z=`Cannot load from "${new URL(n).hostname}" - server blocks cross-origin requests (CORS). Please download the file manually and load it using the file picker above.`:Z=`Failed to download: ${F.message}`,this.setState({loading:!1,error:Z}),this._emitWithData("loaderror",{error:new Error(Z)}),new Error(Z)}}async _handleViewportChangeForStreaming(n,o){const l=this._streamingLoaders.get(o);if(l)try{const c=await l.selectNodesForViewport(n);for(const u of c)l.queueNode(u);await l.loadQueuedNodes()}catch(c){console.warn("Failed to load nodes for viewport:",c)}}stopStreaming(n){var o,l,c,u;if(n){const p=this._viewportManagers.get(n);p&&(p.destroy(),this._viewportManagers.delete(n));const d=this._streamingLoaders.get(n);d&&(d.destroy(),this._streamingLoaders.delete(n));const g=this._eptStreamingLoaders.get(n);g&&(g.destroy(),this._eptStreamingLoaders.delete(n)),(o=this._pointCloudManager)==null||o.removePointCloud(n);const w=this._state.pointClouds.filter(E=>E.id!==n),M=this._streamingLoaders.size>0||this._eptStreamingLoaders.size>0;this.setState({pointClouds:w,activePointCloudId:this._state.activePointCloudId===n?((l=w[0])==null?void 0:l.id)||null:this._state.activePointCloudId,streamingActive:M,streamingProgress:M?this._state.streamingProgress:void 0,availableClassifications:new Set,hiddenClassifications:new Set}),this._emit("streamingstop"),this._emitWithData("unload",{pointCloud:{id:n}})}else{const p=[...Array.from(this._streamingLoaders.keys()),...Array.from(this._eptStreamingLoaders.keys())];for(const g of this._viewportManagers.values())g.destroy();this._viewportManagers.clear();for(const g of this._streamingLoaders.values())g.destroy();this._streamingLoaders.clear();for(const g of this._eptStreamingLoaders.values())g.destroy();this._eptStreamingLoaders.clear(),this._eptViewportRequestIds.clear(),this._eptLastViewport.clear();for(const g of p)(c=this._pointCloudManager)==null||c.removePointCloud(g);const d=this._state.pointClouds.filter(g=>!p.includes(g.id));if(this.setState({pointClouds:d,activePointCloudId:p.includes(this._state.activePointCloudId||"")?((u=d[0])==null?void 0:u.id)||null:this._state.activePointCloudId,streamingActive:!1,streamingProgress:void 0,availableClassifications:new Set,hiddenClassifications:new Set}),p.length>0){this._emit("streamingstop");for(const g of p)this._emitWithData("unload",{pointCloud:{id:g}})}}}isStreaming(n){return n?this._streamingLoaders.has(n)||this._eptStreamingLoaders.has(n):this._streamingLoaders.size>0||this._eptStreamingLoaders.size>0}getStreamingProgress(){return this._state.streamingProgress}setPointSize(n){var o;this._state.pointSize=n,(o=this._pointCloudManager)==null||o.setPointSize(n),this._emit("stylechange"),this._emit("statechange")}setOpacity(n){var o;this._state.opacity=n,(o=this._pointCloudManager)==null||o.setOpacity(n),this._emit("stylechange"),this._emit("statechange")}setColorScheme(n){var o,l,c,u,p;const d=this._state.colorScheme;this._state.colorScheme=n,(o=this._pointCloudManager)==null||o.setColorScheme(n),typeof n=="string"&&typeof d=="string"&&((n==="elevation"||n==="intensity")&&(d==="elevation"||d==="intensity")&&n!==d&&(this._state.colorRange={mode:"percentile",percentileLow:2,percentileHigh:98},(l=this._pointCloudManager)==null||l.setColorRange(this._state.colorRange)),n==="intensity"&&d!=="intensity"?(this._state.colormap="gray",(c=this._pointCloudManager)==null||c.setColormap("gray")):n==="elevation"&&d==="intensity"&&(this._state.colormap="viridis",(u=this._pointCloudManager)==null||u.setColormap("viridis"))),this._updateComputedColorBounds(),(p=this._panelBuilder)==null||p.updateState(this._state),this._emit("stylechange"),this._emit("statechange")}setColormap(n){var o,l;this._state.colormap=n,(o=this._pointCloudManager)==null||o.setColormap(n),this._updateComputedColorBounds(),(l=this._panelBuilder)==null||l.updateState(this._state),this._emit("stylechange"),this._emit("statechange")}getColormap(){return this._state.colormap}setColorRange(n){var o,l;this._state.colorRange=n,(o=this._pointCloudManager)==null||o.setColorRange(n),this._updateComputedColorBounds(),(l=this._panelBuilder)==null||l.updateState(this._state),this._emit("stylechange"),this._emit("statechange")}getColorRange(){return this._state.colorRange}setUsePercentile(n){var o;this._state.usePercentile=n,(o=this._pointCloudManager)==null||o.setUsePercentile(n),this._emit("stylechange"),this._emit("statechange")}getUsePercentile(){return this._state.usePercentile}setElevationRange(n,o){var l;this._state.elevationRange=[n,o],(l=this._pointCloudManager)==null||l.setElevationRange([n,o]),this._emit("stylechange"),this._emit("statechange")}clearElevationRange(){var n;this._state.elevationRange=null,(n=this._pointCloudManager)==null||n.setElevationRange(null),this._emit("stylechange"),this._emit("statechange")}setPointBudget(n){this._state.pointBudget=n,this._emit("statechange")}setPickable(n){var o;this._state.pickable=n,(o=this._pointCloudManager)==null||o.setPickable(n),!n&&this._tooltip&&(this._tooltip.style.display="none"),this._emit("stylechange"),this._emit("statechange")}setZOffsetEnabled(n){var o;this._state.zOffsetEnabled=n,n||(this._state.zOffset=0,(o=this._pointCloudManager)==null||o.setZOffset(0)),this._emit("stylechange"),this._emit("statechange")}setZOffset(n){var o;this._manualZOffset=!0,this._state.zOffset=n,(o=this._pointCloudManager)==null||o.setZOffset(n),this._emit("stylechange"),this._emit("statechange")}getZOffset(){return this._state.zOffset}setTerrain(n){this._map&&(this._state.terrainEnabled=n,n?(this._map.getSource("terrain-dem")||this._map.addSource("terrain-dem",{type:"raster-dem",tiles:["https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png"],encoding:"terrarium",tileSize:256,maxzoom:15}),this._map.setTerrain({source:"terrain-dem",exaggeration:this._options.terrainExaggeration??1})):this._map.setTerrain(null),this._emit("stylechange"),this._emit("statechange"))}getTerrain(){return this._state.terrainEnabled}getPointClouds(){return[...this._state.pointClouds]}flyToPointCloud(n){var o,l;const c=n||this._state.activePointCloudId||((o=this._state.pointClouds[0])==null?void 0:o.id);if(!c||!this._map)return;let u=(l=this._pointCloudManager)==null?void 0:l.getPointCloudBounds(c);if(!u){const p=this._state.pointClouds.find(d=>d.id===c);u=p?.bounds}if(!u){console.warn("Cannot fly to point cloud: no bounds available");return}if(Math.abs(u.minY)>90||Math.abs(u.maxY)>90||Math.abs(u.minX)>180||Math.abs(u.maxX)>180){console.error("Cannot fly to point cloud: coordinates are not in WGS84 range",u);return}if(isNaN(u.minX)||isNaN(u.minY)||isNaN(u.maxX)||isNaN(u.maxY)){console.error("Cannot fly to point cloud: bounds contain NaN values",u);return}this._map.fitBounds([[u.minX,u.minY],[u.maxX,u.maxY]],{padding:50,duration:1e3})}_emit(n){const o=this._eventHandlers.get(n);if(o){const l={type:n,state:this.getState()};o.forEach(c=>c(l))}}_emitWithData(n,o){const l=this._eventHandlers.get(n);if(l){const c={type:n,state:this.getState(),...o};l.forEach(u=>u(c))}}_updateComputedColorBounds(){var n;if(this._state.pointClouds.length===0){this._state.computedColorBounds=void 0;return}const o=(n=this._pointCloudManager)==null?void 0:n.getLastComputedBounds();o?this._state.computedColorBounds=o:(typeof this._state.colorScheme=="string"?this._state.colorScheme:"elevation")==="intensity"?this._state.computedColorBounds=this._getIntensityBounds():this._state.computedColorBounds=this._getElevationBounds()}_getElevationBounds(){if(this._state.pointClouds.length===0)return{min:0,max:100};let n=1/0,o=-1/0;for(const l of this._state.pointClouds)n=Math.min(n,l.bounds.minZ),o=Math.max(o,l.bounds.maxZ);return{min:n,max:o}}_getIntensityBounds(){return{min:0,max:1}}_createContainer(){const n=document.createElement("div");n.className=`maplibregl-ctrl maplibregl-ctrl-group lidar-control${this._options.className?` ${this._options.className}`:""}`;const o=document.createElement("button");return o.className="lidar-control-toggle",o.type="button",o.setAttribute("aria-label",this._options.title),o.innerHTML=`
      <span class="lidar-control-icon">
        <svg viewBox="0 0 24 24" width="22" height="22" stroke="currentColor" stroke-width="1.5" fill="none">
          <circle cx="12" cy="12" r="2"/>
          <circle cx="12" cy="5" r="1.5"/>
          <circle cx="12" cy="19" r="1.5"/>
          <circle cx="5" cy="12" r="1.5"/>
          <circle cx="19" cy="12" r="1.5"/>
          <circle cx="7" cy="7" r="1"/>
          <circle cx="17" cy="7" r="1"/>
          <circle cx="7" cy="17" r="1"/>
          <circle cx="17" cy="17" r="1"/>
        </svg>
      </span>
    `,o.addEventListener("click",()=>this.toggle()),n.appendChild(o),n}_createPanel(){const n=document.createElement("div");n.className="lidar-control-panel",n.style.width=`${this._options.panelWidth}px`;const o=document.createElement("div");o.className="lidar-control-header";const l=document.createElement("span");l.className="lidar-control-title",l.textContent=this._options.title;const c=document.createElement("button");c.className="lidar-control-close",c.type="button",c.setAttribute("aria-label","Close panel"),c.innerHTML="&times;",c.addEventListener("click",()=>this.collapse()),o.appendChild(l),o.appendChild(c),this._panelBuilder=new WR({onFileSelect:p=>this.loadPointCloud(p),onUrlSubmit:p=>this.loadPointCloud(p),onPointSizeChange:p=>this.setPointSize(p),onOpacityChange:p=>this.setOpacity(p),onColorSchemeChange:p=>this.setColorScheme(p),onColormapChange:p=>this.setColormap(p),onColorRangeChange:p=>this.setColorRange(p),onUsePercentileChange:p=>this.setUsePercentile(p),onElevationRangeChange:p=>{p?this.setElevationRange(p[0],p[1]):this.clearElevationRange()},onPickableChange:p=>this.setPickable(p),onZOffsetEnabledChange:p=>this.setZOffsetEnabled(p),onZOffsetChange:p=>this.setZOffset(p),onUnload:p=>this.unloadPointCloud(p),onZoomTo:p=>this.flyToPointCloud(p),onClassificationToggle:(p,d)=>this._toggleClassification(p,d),onClassificationShowAll:()=>this._showAllClassifications(),onClassificationHideAll:()=>this._hideAllClassifications(),onTerrainChange:p=>this.setTerrain(p),onShowMetadata:p=>this.showMetadataPanel(p),onCrossSectionPanel:()=>this.getCrossSectionPanel().render()},this._state);const u=this._panelBuilder.build();return n.appendChild(o),n.appendChild(u),n}_createTooltip(){const n=document.createElement("div");return n.className="lidar-tooltip",n.style.cssText=`
      position: fixed;
      pointer-events: none;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      z-index: 10000;
      display: none;
      white-space: nowrap;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    `,n}_formatGpsTime(n){if(n>1e9){const c=Date.UTC(1980,0,6,0,0,0)+(n-18)*1e3;return new Date(c).toISOString().replace("T"," ").slice(0,19)}return n.toFixed(6)}_formatAttributeValue(n,o){const l=n.toLowerCase();return l==="gpstime"?this._formatGpsTime(o):l==="intensity"?`${(o*100).toFixed(1)}%`:l==="classification"?this._getClassificationName(o):l.includes("angle")?`${o.toFixed(1)}`:["synthetic","keypoint","withheld","overlap","edgeofflightline","scandirectionflag"].includes(l)?o===0?"0":"1":Number.isInteger(o)||["returnnumber","numberofreturns","pointsourceid","userdata","scannerchannel"].includes(l)?Math.round(o).toString():Math.abs(o)<.01||Math.abs(o)>1e5?o.toExponential(4):o.toFixed(2)}_getClassificationName(n){return{0:"Never Classified",1:"Unassigned",2:"Ground",3:"Low Vegetation",4:"Medium Vegetation",5:"High Vegetation",6:"Building",7:"Low Point",8:"Reserved",9:"Water",10:"Rail",11:"Road Surface",12:"Reserved",13:"Wire - Guard",14:"Wire - Conductor",15:"Transmission Tower",16:"Wire - Connector",17:"Bridge Deck",18:"High Noise"}[n]||`Class ${n}`}_shouldShowAttribute(n){const o=this._state.pickInfoFields;return!o||o.length===0?!0:o.some(l=>l.toLowerCase()===n.toLowerCase())}_handlePointHover(n){var o;if(this._tooltip)if(n&&this._state.pickable){let l=`
        <div style="margin-bottom: 4px; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 4px;">Point Info</div>
      `;if((this._shouldShowAttribute("X")||this._shouldShowAttribute("Longitude"))&&(l+=`<div>X: ${n.longitude.toFixed(6)}</div>`),(this._shouldShowAttribute("Y")||this._shouldShowAttribute("Latitude"))&&(l+=`<div>Y: ${n.latitude.toFixed(6)}</div>`),(this._shouldShowAttribute("Z")||this._shouldShowAttribute("Elevation"))&&(l+=`<div>Z: ${n.elevation.toFixed(2)}</div>`),n.intensity!==void 0&&this._shouldShowAttribute("Intensity")&&(l+=`<div>Intensity: ${this._formatAttributeValue("Intensity",n.intensity)}</div>`),n.classification!==void 0&&this._shouldShowAttribute("Classification")&&(l+=`<div>Classification: ${this._getClassificationName(n.classification)}</div>`),n.red!==void 0&&this._shouldShowAttribute("Red")&&(l+=`<div>Red: ${n.red}</div>`),n.green!==void 0&&this._shouldShowAttribute("Green")&&(l+=`<div>Green: ${n.green}</div>`),n.blue!==void 0&&this._shouldShowAttribute("Blue")&&(l+=`<div>Blue: ${n.blue}</div>`),n.attributes){for(const[d,g]of Object.entries(n.attributes))if(this._shouldShowAttribute(d)){const w=this._formatAttributeValue(d,g);l+=`<div>${d}: ${w}</div>`}}this._tooltip.innerHTML=l,this._tooltip.style.display="block";const c=(o=this._mapContainer)==null?void 0:o.getBoundingClientRect(),u=c?.left??0,p=c?.top??0;this._tooltip.style.left=`${n.x+u+15}px`,this._tooltip.style.top=`${n.y+p+15}px`}else this._tooltip.style.display="none"}setPickInfoFields(n){this._state.pickInfoFields=n,this._emit("statechange")}getPickInfoFields(){return this._state.pickInfoFields}_toggleClassification(n,o){var l;const c=new Set(this._state.hiddenClassifications);o?c.delete(n):c.add(n),(l=this._pointCloudManager)==null||l.setHiddenClassifications(c),this.setState({hiddenClassifications:c}),this._emit("stylechange")}_showAllClassifications(){var n;const o=new Set;(n=this._pointCloudManager)==null||n.setHiddenClassifications(o),this.setState({hiddenClassifications:o}),this._emit("stylechange")}_hideAllClassifications(){var n;const o=new Set(this._state.availableClassifications);(n=this._pointCloudManager)==null||n.setHiddenClassifications(o),this.setState({hiddenClassifications:o}),this._emit("stylechange")}setClassificationVisibility(n,o){this._toggleClassification(n,o)}getHiddenClassifications(){return Array.from(this._state.hiddenClassifications)}getAvailableClassifications(){return Array.from(this._state.availableClassifications)}showAllClassifications(){this._showAllClassifications()}hideAllClassifications(){this._hideAllClassifications()}_setupEventListeners(){var n;this._clickOutsideHandler=o=>{var l,c;if((l=this._crossSectionTool)!=null&&l.isEnabled()||(c=this._crossSectionTool)!=null&&c.getLine())return;const u=o.target;this._container&&this._panel&&!this._container.contains(u)&&!this._panel.contains(u)&&this.collapse()},document.addEventListener("click",this._clickOutsideHandler),this._resizeHandler=()=>{this._state.collapsed||this._updatePanelPosition()},window.addEventListener("resize",this._resizeHandler),this._mapResizeHandler=()=>{this._state.collapsed||this._updatePanelPosition()},(n=this._map)==null||n.on("resize",this._mapResizeHandler)}_getControlPosition(){var n;const o=(n=this._container)==null?void 0:n.parentElement;return o?o.classList.contains("maplibregl-ctrl-top-left")?"top-left":o.classList.contains("maplibregl-ctrl-top-right")?"top-right":o.classList.contains("maplibregl-ctrl-bottom-left")?"bottom-left":o.classList.contains("maplibregl-ctrl-bottom-right")?"bottom-right":"top-right":"top-right"}_updatePanelPosition(){if(!this._container||!this._panel||!this._mapContainer)return;const n=this._container.querySelector(".lidar-control-toggle");if(!n)return;const o=n.getBoundingClientRect(),l=this._mapContainer.getBoundingClientRect(),c=this._getControlPosition(),u=o.top-l.top,p=l.bottom-o.bottom,d=o.left-l.left,g=l.right-o.right,w=5;switch(this._panel.style.top="",this._panel.style.bottom="",this._panel.style.left="",this._panel.style.right="",c){case"top-left":this._panel.style.top=`${u+o.height+w}px`,this._panel.style.left=`${d}px`;break;case"top-right":this._panel.style.top=`${u+o.height+w}px`,this._panel.style.right=`${g}px`;break;case"bottom-left":this._panel.style.bottom=`${p+o.height+w}px`,this._panel.style.left=`${d}px`;break;case"bottom-right":this._panel.style.bottom=`${p+o.height+w}px`,this._panel.style.right=`${g}px`;break}}getFullMetadata(n){const o=n??this._state.activePointCloudId;if(o)return this._fullMetadata.get(o)}showMetadataPanel(n){const o=n??this._state.activePointCloudId;if(!o)return;let l=this._fullMetadata.get(o);l||(l=this._buildFullMetadata(o),l&&this._fullMetadata.set(o,l)),l&&(this._metadataPanel||(this._metadataPanel=new ZR({onClose:()=>{}})),this._metadataPanel.show(l))}hideMetadataPanel(){var n;(n=this._metadataPanel)==null||n.hide()}_buildFullMetadata(n){const o=this._state.pointClouds.find(u=>u.id===n);if(!o)return;const l=this._streamingLoaders.get(n);if(l)return{type:"copc",copc:l.getCopcMetadata(),basic:{...o,wkt:l.getWkt()??o.wkt}};const c=this._eptStreamingLoaders.get(n);return c?{type:"ept",ept:c.getExtendedMetadata(),basic:o}:{type:"las",basic:o}}enableCrossSection(){var n,o;this._map&&(!this._crossSectionTool&&this._deckOverlay&&(this._crossSectionTool=new DR(this._map,this._deckOverlay),this._crossSectionTool.setOnLineChange(l=>{this._handleCrossSectionLineChange(l)})),(n=this._crossSectionTool)==null||n.enable(),(o=this._crossSectionPanel)==null||o.setDrawing(!0))}disableCrossSection(){var n,o;(n=this._crossSectionTool)==null||n.disable(),(o=this._crossSectionPanel)==null||o.setDrawing(!1)}isCrossSectionEnabled(){var n;return((n=this._crossSectionTool)==null?void 0:n.isEnabled())??!1}getCrossSectionProfile(){return this._currentProfile}setCrossSectionBufferDistance(n){var o,l,c;(o=this._crossSectionTool)==null||o.setBufferDistance(n),(l=this._crossSectionPanel)==null||l.setBufferDistance(n);const u=(c=this._crossSectionTool)==null?void 0:c.getLine();u&&this._extractElevationProfile(u)}getCrossSectionBufferDistance(){var n;return((n=this._crossSectionTool)==null?void 0:n.getBufferDistance())??10}clearCrossSection(){var n,o;(n=this._crossSectionTool)==null||n.clearLine(),this._currentProfile=null,(o=this._crossSectionPanel)==null||o.setProfile(null)}getCrossSectionLine(){var n;return((n=this._crossSectionTool)==null?void 0:n.getLine())??null}_handleCrossSectionLineChange(n){var o,l,c;n?(this._extractElevationProfile(n),(o=this._crossSectionTool)==null||o.disable(),(l=this._crossSectionPanel)==null||l.setDrawing(!1)):(this._currentProfile=null,(c=this._crossSectionPanel)==null||c.setProfile(null))}_extractElevationProfile(n){var o,l,c;const u=(o=this._pointCloudManager)==null?void 0:o.getMergedPointCloudData();if(!u||u.pointCount===0){this._currentProfile=null,(l=this._crossSectionPanel)==null||l.setProfile(null);return}this._currentProfile=ac.extract(n,u,u.coordinateOrigin),(c=this._crossSectionPanel)==null||c.setProfile(this._currentProfile)}getCrossSectionPanel(){return this._crossSectionPanel||(this._crossSectionPanel=new zR({onDrawToggle:n=>{n?this.enableCrossSection():this.disableCrossSection()},onClear:()=>this.clearCrossSection(),onBufferDistanceChange:n=>this.setCrossSectionBufferDistance(n)},{colormap:this._state.colormap})),this._crossSectionPanel}getPanelElement(){return this._panel??null}}class HR{constructor(n){I(this,"type","lidar"),I(this,"_lidarControl"),I(this,"_changeCallbacks",[]),I(this,"_unsubscribe"),this._lidarControl=n,this._setupEventListeners()}_setupEventListeners(){const n=l=>{var c;(c=l.pointCloud)!=null&&c.id&&this._notifyLayerAdded(l.pointCloud.id)},o=l=>{var c;(c=l.pointCloud)!=null&&c.id&&this.notifyLayerRemoved(l.pointCloud.id)};this._lidarControl.on("load",n),this._lidarControl.on("unload",o),this._unsubscribe=()=>{this._lidarControl.off("load",n),this._lidarControl.off("unload",o)}}getLayerIds(){return this._lidarControl.getPointClouds().map(n=>n.id)}getLayerState(n){if(!this._lidarControl.getPointClouds().find(g=>g.id===n))return null;const c=this._lidarControl.getState(),u=this._lidarControl._pointCloudManager,p=u?.getPointCloudVisibility(n)??!0,d=u?.getPointCloudOpacity(n)??c.opacity;return{visible:p,opacity:d,name:this.getName(n),isCustomLayer:!0,customLayerType:"lidar"}}setVisibility(n,o){const l=this._lidarControl._pointCloudManager;l?.setPointCloudVisibility(n,o)}setOpacity(n,o){const l=this._lidarControl._pointCloudManager;l?.setPointCloudOpacity(n,o)}getName(n){const l=this._lidarControl.getPointClouds().find(c=>c.id===n);return l?l.name:n.replace(/[-_]/g," ").replace(/\b\w/g,c=>c.toUpperCase())}getSymbolType(n){return"circle"}removeLayer(n){this._lidarControl.unloadPointCloud(n)}onLayerChange(n){return this._changeCallbacks.push(n),()=>{const o=this._changeCallbacks.indexOf(n);o>=0&&this._changeCallbacks.splice(o,1)}}_notifyLayerAdded(n){this._changeCallbacks.forEach(o=>o("add",n))}notifyLayerRemoved(n){this._changeCallbacks.forEach(o=>o("remove",n))}destroy(){var n;(n=this._unsubscribe)==null||n.call(this),this._changeCallbacks=[]}}const YR="https://s3.amazonaws.com/hobu-lidar/autzen-classified.copc.laz",ao=new Zl.Map({container:"map",style:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",center:[-123.07,44.05],zoom:15,pitch:60,bearing:-20,maxPitch:85});ao.addControl(new Zl.NavigationControl,"top-right");ao.addControl(new Zl.ScaleControl({unit:"metric"}),"bottom-right");const Vl=new jR({collapsed:!1,position:"top-left",title:"LiDAR Viewer",pointSize:2,opacity:1,colorScheme:"elevation",usePercentile:!0,pointBudget:2e6,pickable:!0,autoZoom:!0,copcLoadingMode:"dynamic",streamingPointBudget:5e6}),JR=new HR(Vl),$R=new M2({collapsed:!0,customLayerAdapters:[JR]});ao.on("load",()=>{ao.addControl($R,"top-right"),ao.addControl(Vl,"top-right"),Vl.loadPointCloudStreaming(YR,{id:"autzen",name:"Autzen Stadium"})})});export default qR();
