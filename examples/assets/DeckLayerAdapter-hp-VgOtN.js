var o=Object.defineProperty;var h=(a,t,e)=>t in a?o(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var i=(a,t,e)=>h(a,typeof t!="symbol"?t+"":t,e);const c=class c{constructor(t,e,s){i(this,"type","deck");i(this,"map");i(this,"deckOverlay");i(this,"deckLayers");i(this,"changeCallbacks",[]);this.map=t,this.deckOverlay=e,this.deckLayers=s}getLayerIds(){return Array.from(this.deckLayers.keys()).filter(t=>c.LAYER_PREFIXES.some(e=>t.startsWith(e)))}getLayerState(t){const e=this.deckLayers.get(t);return!e||!e.props?null:{visible:e.props.visible!==!1,opacity:e.props.opacity??1,name:this.getName(t)}}setVisibility(t,e){const s=this.deckLayers.get(t);if(!s||typeof s.clone!="function")return;const r=s.clone({visible:e});this.deckLayers.set(t,r),this.updateOverlay()}setOpacity(t,e){const s=this.deckLayers.get(t);if(!s||typeof s.clone!="function")return;const r=s.clone({opacity:e});this.deckLayers.set(t,r),this.updateOverlay()}getName(t){for(const e of c.LAYER_PREFIXES)if(t.startsWith(e)){const s=t.slice(e.length);if(!s||/^\d+$/.test(s)){const r=e.slice(0,-1);return r.charAt(0).toUpperCase()+r.slice(1)+" Layer"}return s.replace(/[-_]/g," ").replace(/\b\w/g,r=>r.toUpperCase())}return t}getSymbolType(t){return t.startsWith("scatterplot-")||t.startsWith("pointcloud-")||t.startsWith("icon-")?"circle":t.startsWith("arc-")||t.startsWith("line-")||t.startsWith("path-")||t.startsWith("trips-")?"line":t.startsWith("polygon-")||t.startsWith("hexagon-")||t.startsWith("grid-")||t.startsWith("geojson-")?"fill":t.startsWith("heatmap-")||t.startsWith("screengrid-")||t.startsWith("contour-")?"heatmap":t.startsWith("text-")?"symbol":t.startsWith("cog-")?"raster":"deck"}notifyLayerAdded(t){this.changeCallbacks.forEach(e=>e("add",t))}notifyLayerRemoved(t){this.changeCallbacks.forEach(e=>e("remove",t))}onLayerChange(t){return this.changeCallbacks.push(t),()=>{const e=this.changeCallbacks.indexOf(t);e>=0&&this.changeCallbacks.splice(e,1)}}updateOverlay(){const t=Array.from(this.deckLayers.values());this.deckOverlay.setProps({layers:t}),this.map.triggerRepaint()}};i(c,"LAYER_PREFIXES",["scatterplot-","arc-","path-","polygon-","hexagon-","heatmap-","grid-","icon-","text-","geojson-","contour-","screengrid-","pointcloud-","trips-","line-","cog-"]);let n=c;export{n as D};
