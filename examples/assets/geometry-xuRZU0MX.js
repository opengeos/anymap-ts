var c=Object.defineProperty;var d=(a,t,e)=>t in a?c(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var u=(a,t,e)=>d(a,typeof t!="symbol"?t+"":t,e);import{K as h}from"./mapbox-overlay-C46bI65L.js";class b{constructor(t){u(this,"id");u(this,"topology");u(this,"vertexCount");u(this,"indices");u(this,"attributes");u(this,"userData",{});const{attributes:e={},indices:i=null,vertexCount:o=null}=t;this.id=t.id||h("geometry"),this.topology=t.topology,i&&(this.indices=ArrayBuffer.isView(i)?{value:i,size:1}:i),this.attributes={};for(const[s,r]of Object.entries(e)){const n=ArrayBuffer.isView(r)?{value:r}:r;if(!ArrayBuffer.isView(n.value))throw new Error(`${this._print(s)}: must be typed array or object with value as typed array`);if((s==="POSITION"||s==="positions")&&!n.size&&(n.size=3),s==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=n}else this.attributes[s]=n}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return`Geometry ${this.id} attribute ${t}`}_setAttributes(t,e){return this}_calculateVertexCount(t,e){if(e)return e.value.length;let i=1/0;for(const o of Object.values(t)){const{value:s,size:r,constant:n}=o;!n&&s&&r!==void 0&&r>=1&&(i=Math.min(i,s.length/r))}return i}}export{b as G};
