import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */import{m as d}from"./maplibre-gl-DRLNSq4X.js";import{L as E}from"./maplibre-gl-layer-control-BGT4Bb5x.js";import{D as h}from"./DeckLayerAdapter-kz44PQGX.js";import{K as v,U as w,M as I}from"./mapbox-overlay-dETm6WBN.js";import{C as N}from"./column-layer-q4U6peHt.js";import{G as _}from"./geometry-C3q6ySK1.js";import"./_commonjsHelpers-CqkleIqs.js";import"./polygon-utils-B8iYQ3Og.js";import"./picking-CN0D5Hbh.js";import"./phong-material-5awQa6rM.js";import"./lighting-Cn2RfB9N.js";import"./phong-shaders-wgsl-3FV41e28.js";import"./gouraud-material-Dz7aR_BC.js";class M extends _{constructor(t={}){const{id:e=v("cube-geometry"),indices:r=!0}=t;super(r?{...t,id:e,topology:"triangle-list",indices:{size:1,value:z},attributes:{...P,...t.attributes}}:{...t,id:e,topology:"triangle-list",indices:void 0,attributes:{...B,...t.attributes}})}}const z=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),A=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),D=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),L=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),T=new Float32Array([1,-1,1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,1,1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,-1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1]),U=new Float32Array([1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,1,0,0]),b=new Float32Array([1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,0,1,1,0,1,1,1,0,1,0,1,0,0,0,1,0,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,0,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,0,0,1,0,0,0,1,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,1]),P={POSITION:{size:3,value:A},NORMAL:{size:3,value:D},TEXCOORD_0:{size:2,value:L}},B={POSITION:{size:3,value:T},TEXCOORD_0:{size:2,value:U},COLOR_0:{size:3,value:b}},x={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}};class c extends N{_updateGeometry(){const t=new M;this.state.fillModel.setGeometry(t)}draw({uniforms:t}){const{elevationScale:e,extruded:r,offset:a,coverage:n,cellSize:i,angle:O,radiusUnits:g}=this.props,p=this.state.fillModel,S={radius:i/2,radiusUnits:w[g],angle:O,offset:a,extruded:r,stroked:!1,coverage:n,elevationScale:e,edgeDistance:1,isStroke:!1,widthUnits:0,widthScale:0,widthMinPixels:0,widthMaxPixels:0};p.shaderInputs.setProps({column:S}),p.draw(this.context.renderPass)}}c.layerName="GridCellLayer";c.defaultProps=x;function R(o,t,e){const r=[],a=Math.ceil(Math.sqrt(e));for(let n=0;n<a;n++)for(let i=0;i<a&&!(r.length>=e);i++)r.push({position:[o+(n-a/2)*.003,t+(i-a/2)*.003],elevation:Math.random()*1e3+100,color:[Math.floor(Math.random()*155+100),Math.floor(Math.random()*155+100),255,200]});return r}const k=R(-122.4,37.8,100),l=new d.Map({container:"map",style:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",center:[-122.4,37.8],zoom:12,pitch:45,bearing:-17});l.addControl(new d.NavigationControl,"top-right");l.addControl(new d.ScaleControl({unit:"metric"}),"bottom-right");const m=new I({layers:[]}),u=new Map,C=new h(l,m,u);let s=200;function G(){m.setProps({layers:Array.from(u.values())})}function f(){const o="gridcell-layer",t=new c({id:o,data:k,getPosition:e=>e.position,getElevation:e=>e.elevation,getFillColor:e=>e.color,cellSize:s,extruded:!0,elevationScale:1,pickable:!0});u.set(o,t),G(),C.notifyLayerAdded(o)}const y=document.getElementById("cellSize"),X=document.getElementById("cellSizeValue");y?.addEventListener("input",()=>{s=parseInt(y.value,10),X.textContent=`${s}m`,f()});l.on("load",()=>{l.addControl(m);const o=new E({collapsed:!0,customLayerAdapters:[C],panelWidth:360});l.addControl(o,"top-right"),f()});
