import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */import{h as Pt}from"./maplibre-gl-CBvcbTUS.js";import{L as Dt}from"./maplibre-gl-layer-control-CbPNLzzp.js";import{c as xt,g as Ut}from"./_commonjsHelpers-Cpj98o6Y.js";import{c as Et}from"./_commonjs-dynamic-modules-TDtrdbi3.js";var zt={exports:{}};var It;function Mt(){return It||(It=1,(function(rt,z){(function(r){rt.exports=r()})(function(){return(function r(w,m,s){function a(p,g){if(!m[p]){if(!w[p]){var u=typeof Et=="function"&&Et;if(!g&&u)return u(p,!0);if(i)return i(p,!0);var b=new Error("Cannot find module '"+p+"'");throw b.code="MODULE_NOT_FOUND",b}var o=m[p]={exports:{}};w[p][0].call(o.exports,function(_){var n=w[p][1][_];return a(n||_)},o,o.exports,r,w,m,s)}return m[p].exports}for(var i=typeof Et=="function"&&Et,l=0;l<s.length;l++)a(s[l]);return a})({1:[function(r,w,m){var s=r("./utils"),a=r("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";m.encode=function(l){for(var p,g,u,b,o,_,n,d=[],h=0,v=l.length,k=v,C=s.getTypeOf(l)!=="string";h<l.length;)k=v-h,u=C?(p=l[h++],g=h<v?l[h++]:0,h<v?l[h++]:0):(p=l.charCodeAt(h++),g=h<v?l.charCodeAt(h++):0,h<v?l.charCodeAt(h++):0),b=p>>2,o=(3&p)<<4|g>>4,_=1<k?(15&g)<<2|u>>6:64,n=2<k?63&u:64,d.push(i.charAt(b)+i.charAt(o)+i.charAt(_)+i.charAt(n));return d.join("")},m.decode=function(l){var p,g,u,b,o,_,n=0,d=0,h="data:";if(l.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var v,k=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===i.charAt(64)&&k--,l.charAt(l.length-2)===i.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=a.uint8array?new Uint8Array(0|k):new Array(0|k);n<l.length;)p=i.indexOf(l.charAt(n++))<<2|(b=i.indexOf(l.charAt(n++)))>>4,g=(15&b)<<4|(o=i.indexOf(l.charAt(n++)))>>2,u=(3&o)<<6|(_=i.indexOf(l.charAt(n++))),v[d++]=p,o!==64&&(v[d++]=g),_!==64&&(v[d++]=u);return v}},{"./support":30,"./utils":32}],2:[function(r,w,m){var s=r("./external"),a=r("./stream/DataWorker"),i=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function p(g,u,b,o,_){this.compressedSize=g,this.uncompressedSize=u,this.crc32=b,this.compression=o,this.compressedContent=_}p.prototype={getContentWorker:function(){var g=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),u=this;return g.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(g,u,b){return g.pipe(new i).pipe(new l("uncompressedSize")).pipe(u.compressWorker(b)).pipe(new l("compressedSize")).withStreamInfo("compression",u)},w.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,w,m){var s=r("./stream/GenericWorker");m.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},m.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,w,m){var s=r("./utils"),a=(function(){for(var i,l=[],p=0;p<256;p++){i=p;for(var g=0;g<8;g++)i=1&i?3988292384^i>>>1:i>>>1;l[p]=i}return l})();w.exports=function(i,l){return i!==void 0&&i.length?s.getTypeOf(i)!=="string"?(function(p,g,u,b){var o=a,_=b+u;p^=-1;for(var n=b;n<_;n++)p=p>>>8^o[255&(p^g[n])];return-1^p})(0|l,i,i.length,0):(function(p,g,u,b){var o=a,_=b+u;p^=-1;for(var n=b;n<_;n++)p=p>>>8^o[255&(p^g.charCodeAt(n))];return-1^p})(0|l,i,i.length,0):0}},{"./utils":32}],5:[function(r,w,m){m.base64=!1,m.binary=!1,m.dir=!1,m.createFolders=!0,m.date=null,m.compression=null,m.compressionOptions=null,m.comment=null,m.unixPermissions=null,m.dosPermissions=null},{}],6:[function(r,w,m){var s=null;s=typeof Promise<"u"?Promise:r("lie"),w.exports={Promise:s}},{lie:37}],7:[function(r,w,m){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=r("pako"),i=r("./utils"),l=r("./stream/GenericWorker"),p=s?"uint8array":"array";function g(u,b){l.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=b,this.meta={}}m.magic="\b\0",i.inherits(g,l),g.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(p,u.data),!1)},g.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(b){u.push({data:b,meta:u.meta})}},m.compressWorker=function(u){return new g("Deflate",u)},m.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,w,m){function s(o,_){var n,d="";for(n=0;n<_;n++)d+=String.fromCharCode(255&o),o>>>=8;return d}function a(o,_,n,d,h,v){var k,C,E=o.file,N=o.compression,O=v!==p.utf8encode,U=i.transformTo("string",v(E.name)),L=i.transformTo("string",p.utf8encode(E.name)),W=E.comment,K=i.transformTo("string",v(W)),y=i.transformTo("string",p.utf8encode(W)),R=L.length!==E.name.length,e=y.length!==W.length,T="",q="",D="",tt=E.dir,M=E.date,V={crc32:0,compressedSize:0,uncompressedSize:0};_&&!n||(V.crc32=o.crc32,V.compressedSize=o.compressedSize,V.uncompressedSize=o.uncompressedSize);var I=0;_&&(I|=8),O||!R&&!e||(I|=2048);var A=0,Y=0;tt&&(A|=16),h==="UNIX"?(Y=798,A|=(function(G,at){var ct=G;return G||(ct=at?16893:33204),(65535&ct)<<16})(E.unixPermissions,tt)):(Y=20,A|=(function(G){return 63&(G||0)})(E.dosPermissions)),k=M.getUTCHours(),k<<=6,k|=M.getUTCMinutes(),k<<=5,k|=M.getUTCSeconds()/2,C=M.getUTCFullYear()-1980,C<<=4,C|=M.getUTCMonth()+1,C<<=5,C|=M.getUTCDate(),R&&(q=s(1,1)+s(g(U),4)+L,T+="up"+s(q.length,2)+q),e&&(D=s(1,1)+s(g(K),4)+y,T+="uc"+s(D.length,2)+D);var $="";return $+=`
\0`,$+=s(I,2),$+=N.magic,$+=s(k,2),$+=s(C,2),$+=s(V.crc32,4),$+=s(V.compressedSize,4),$+=s(V.uncompressedSize,4),$+=s(U.length,2),$+=s(T.length,2),{fileRecord:u.LOCAL_FILE_HEADER+$+U+T,dirRecord:u.CENTRAL_FILE_HEADER+s(Y,2)+$+s(K.length,2)+"\0\0\0\0"+s(A,4)+s(d,4)+U+T+K}}var i=r("../utils"),l=r("../stream/GenericWorker"),p=r("../utf8"),g=r("../crc32"),u=r("../signature");function b(o,_,n,d){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=n,this.encodeFileName=d,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(b,l),b.prototype.push=function(o){var _=o.meta.percent||0,n=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,l.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:n?(_+100*(n-d-1))/n:100}}))},b.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var _=this.streamFiles&&!o.file.dir;if(_){var n=a(o,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(o){this.accumulate=!1;var _=this.streamFiles&&!o.file.dir,n=a(o,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),_)this.push({data:(function(d){return u.DATA_DESCRIPTOR+s(d.crc32,4)+s(d.compressedSize,4)+s(d.uncompressedSize,4)})(o),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var o=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var n=this.bytesWritten-o,d=(function(h,v,k,C,E){var N=i.transformTo("string",E(C));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(h,2)+s(h,2)+s(v,4)+s(k,4)+s(N.length,2)+N})(this.dirRecords.length,n,o,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(o){this._sources.push(o);var _=this;return o.on("data",function(n){_.processChunk(n)}),o.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),o.on("error",function(n){_.error(n)}),this},b.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(o){var _=this._sources;if(!l.prototype.error.call(this,o))return!1;for(var n=0;n<_.length;n++)try{_[n].error(o)}catch{}return!0},b.prototype.lock=function(){l.prototype.lock.call(this);for(var o=this._sources,_=0;_<o.length;_++)o[_].lock()},w.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,w,m){var s=r("../compressions"),a=r("./ZipFileWorker");m.generateWorker=function(i,l,p){var g=new a(l.streamFiles,p,l.platform,l.encodeFileName),u=0;try{i.forEach(function(b,o){u++;var _=(function(v,k){var C=v||k,E=s[C];if(!E)throw new Error(C+" is not a valid compression method !");return E})(o.options.compression,l.compression),n=o.options.compressionOptions||l.compressionOptions||{},d=o.dir,h=o.date;o._compressWorker(_,n).withStreamInfo("file",{name:b,dir:d,date:h,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(g)}),g.entriesCount=u}catch(b){g.error(b)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,w,m){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var i in this)typeof this[i]!="function"&&(a[i]=this[i]);return a}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(a,i){return new s().loadAsync(a,i)},s.external=r("./external"),w.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,w,m){var s=r("./utils"),a=r("./external"),i=r("./utf8"),l=r("./zipEntries"),p=r("./stream/Crc32Probe"),g=r("./nodejsUtils");function u(b){return new a.Promise(function(o,_){var n=b.decompressed.getContentWorker().pipe(new p);n.on("error",function(d){_(d)}).on("end",function(){n.streamInfo.crc32!==b.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):o()}).resume()})}w.exports=function(b,o){var _=this;return o=s.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),g.isNode&&g.isStream(b)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",b,!0,o.optimizedBinaryString,o.base64).then(function(n){var d=new l(o);return d.load(n),d}).then(function(n){var d=[a.Promise.resolve(n)],h=n.files;if(o.checkCRC32)for(var v=0;v<h.length;v++)d.push(u(h[v]));return a.Promise.all(d)}).then(function(n){for(var d=n.shift(),h=d.files,v=0;v<h.length;v++){var k=h[v],C=k.fileNameStr,E=s.resolve(k.fileNameStr);_.file(E,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:o.createFolders}),k.dir||(_.file(E).unsafeOriginalName=C)}return d.zipComment.length&&(_.comment=d.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,w,m){var s=r("../utils"),a=r("../stream/GenericWorker");function i(l,p){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(p)}s.inherits(i,a),i.prototype._bindStream=function(l){var p=this;(this._stream=l).pause(),l.on("data",function(g){p.push({data:g,meta:{percent:0}})}).on("error",function(g){p.isPaused?this.generatedError=g:p.error(g)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},i.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},w.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,w,m){var s=r("readable-stream").Readable;function a(i,l,p){s.call(this,l),this._helper=i;var g=this;i.on("data",function(u,b){g.push(u)||g._helper.pause(),p&&p(b)}).on("error",function(u){g.emit("error",u)}).on("end",function(){g.push(null)})}r("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},w.exports=a},{"../utils":32,"readable-stream":16}],14:[function(r,w,m){w.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,w,m){function s(E,N,O){var U,L=i.getTypeOf(N),W=i.extend(O||{},g);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(E=h(E)),W.createFolders&&(U=d(E))&&v.call(this,U,!0);var K=L==="string"&&W.binary===!1&&W.base64===!1;O&&O.binary!==void 0||(W.binary=!K),(N instanceof u&&N.uncompressedSize===0||W.dir||!N||N.length===0)&&(W.base64=!1,W.binary=!0,N="",W.compression="STORE",L="string");var y=null;y=N instanceof u||N instanceof l?N:_.isNode&&_.isStream(N)?new n(E,N):i.prepareContent(E,N,W.binary,W.optimizedBinaryString,W.base64);var R=new b(E,y,W);this.files[E]=R}var a=r("./utf8"),i=r("./utils"),l=r("./stream/GenericWorker"),p=r("./stream/StreamHelper"),g=r("./defaults"),u=r("./compressedObject"),b=r("./zipObject"),o=r("./generate"),_=r("./nodejsUtils"),n=r("./nodejs/NodejsStreamInputAdapter"),d=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var N=E.lastIndexOf("/");return 0<N?E.substring(0,N):""},h=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},v=function(E,N){return N=N!==void 0?N:g.createFolders,E=h(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:N}),this.files[E]};function k(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var N,O,U;for(N in this.files)U=this.files[N],(O=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&E(O,U)},filter:function(E){var N=[];return this.forEach(function(O,U){E(O,U)&&N.push(U)}),N},file:function(E,N,O){if(arguments.length!==1)return E=this.root+E,s.call(this,E,N,O),this;if(k(E)){var U=E;return this.filter(function(W,K){return!K.dir&&U.test(W)})}var L=this.files[this.root+E];return L&&!L.dir?L:null},folder:function(E){if(!E)return this;if(k(E))return this.filter(function(L,W){return W.dir&&E.test(L)});var N=this.root+E,O=v.call(this,N),U=this.clone();return U.root=O.name,U},remove:function(E){E=this.root+E;var N=this.files[E];if(N||(E.slice(-1)!=="/"&&(E+="/"),N=this.files[E]),N&&!N.dir)delete this.files[E];else for(var O=this.filter(function(L,W){return W.name.slice(0,E.length)===E}),U=0;U<O.length;U++)delete this.files[O[U].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var N,O={};try{if((O=i.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");i.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var U=O.comment||this.comment||"";N=o.generateWorker(this,O,U)}catch(L){(N=new l("error")).error(L)}return new p(N,O.type||"string",O.mimeType)},generateAsync:function(E,N){return this.generateInternalStream(E).accumulate(N)},generateNodeStream:function(E,N){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(N)}};w.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,w,m){w.exports=r("stream")},{stream:void 0}],17:[function(r,w,m){var s=r("./DataReader");function a(i){s.call(this,i);for(var l=0;l<this.data.length;l++)i[l]=255&i[l]}r("../utils").inherits(a,s),a.prototype.byteAt=function(i){return this.data[this.zero+i]},a.prototype.lastIndexOfSignature=function(i){for(var l=i.charCodeAt(0),p=i.charCodeAt(1),g=i.charCodeAt(2),u=i.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===l&&this.data[b+1]===p&&this.data[b+2]===g&&this.data[b+3]===u)return b-this.zero;return-1},a.prototype.readAndCheckSignature=function(i){var l=i.charCodeAt(0),p=i.charCodeAt(1),g=i.charCodeAt(2),u=i.charCodeAt(3),b=this.readData(4);return l===b[0]&&p===b[1]&&g===b[2]&&u===b[3]},a.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,l},w.exports=a},{"../utils":32,"./DataReader":18}],18:[function(r,w,m){var s=r("../utils");function a(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var l,p=0;for(this.checkOffset(i),l=this.index+i-1;l>=this.index;l--)p=(p<<8)+this.byteAt(l);return this.index+=i,p},readString:function(i){return s.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},w.exports=a},{"../utils":32}],19:[function(r,w,m){var s=r("./Uint8ArrayReader");function a(i){s.call(this,i)}r("../utils").inherits(a,s),a.prototype.readData=function(i){this.checkOffset(i);var l=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,l},w.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,w,m){var s=r("./DataReader");function a(i){s.call(this,i)}r("../utils").inherits(a,s),a.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},a.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},a.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},a.prototype.readData=function(i){this.checkOffset(i);var l=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,l},w.exports=a},{"../utils":32,"./DataReader":18}],21:[function(r,w,m){var s=r("./ArrayReader");function a(i){s.call(this,i)}r("../utils").inherits(a,s),a.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,l},w.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(r,w,m){var s=r("../utils"),a=r("../support"),i=r("./ArrayReader"),l=r("./StringReader"),p=r("./NodeBufferReader"),g=r("./Uint8ArrayReader");w.exports=function(u){var b=s.getTypeOf(u);return s.checkSupport(b),b!=="string"||a.uint8array?b==="nodebuffer"?new p(u):a.uint8array?new g(s.transformTo("uint8array",u)):new i(s.transformTo("array",u)):new l(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,w,m){m.LOCAL_FILE_HEADER="PK",m.CENTRAL_FILE_HEADER="PK",m.CENTRAL_DIRECTORY_END="PK",m.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",m.ZIP64_CENTRAL_DIRECTORY_END="PK",m.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,w,m){var s=r("./GenericWorker"),a=r("../utils");function i(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(i,s),i.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},w.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(r,w,m){var s=r("./GenericWorker"),a=r("../crc32");function i(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(i,s),i.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},w.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,w,m){var s=r("../utils"),a=r("./GenericWorker");function i(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(i,a),i.prototype.processChunk=function(l){if(l){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+l.data.length}a.prototype.processChunk.call(this,l)},w.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(r,w,m){var s=r("../utils"),a=r("./GenericWorker");function i(l){a.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(g){p.dataIsReady=!0,p.data=g,p.max=g&&g.length||0,p.type=s.getTypeOf(g),p.isPaused||p._tickAndRepeat()},function(g){p.error(g)})}s.inherits(i,a),i.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,p);break;case"uint8array":l=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":l=this.data.slice(this.index,p)}return this.index=p,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},w.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(r,w,m){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,i){return this._listeners[a].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,i){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,i)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var i=this;return a.on("data",function(l){i.processChunk(l)}),a.on("end",function(){i.end()}),a.on("error",function(l){i.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,i){return this.extraStreamInfo[a]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},w.exports=s},{}],29:[function(r,w,m){var s=r("../utils"),a=r("./ConvertWorker"),i=r("./GenericWorker"),l=r("../base64"),p=r("../support"),g=r("../external"),u=null;if(p.nodestream)try{u=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(_,n){return new g.Promise(function(d,h){var v=[],k=_._internalType,C=_._outputType,E=_._mimeType;_.on("data",function(N,O){v.push(N),n&&n(O)}).on("error",function(N){v=[],h(N)}).on("end",function(){try{var N=(function(O,U,L){switch(O){case"blob":return s.newBlob(s.transformTo("arraybuffer",U),L);case"base64":return l.encode(U);default:return s.transformTo(O,U)}})(C,(function(O,U){var L,W=0,K=null,y=0;for(L=0;L<U.length;L++)y+=U[L].length;switch(O){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(K=new Uint8Array(y),L=0;L<U.length;L++)K.set(U[L],W),W+=U[L].length;return K;case"nodebuffer":return Buffer.concat(U);default:throw new Error("concat : unsupported type '"+O+"'")}})(k,v),E);d(N)}catch(O){h(O)}v=[]}).resume()})}function o(_,n,d){var h=n;switch(n){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=n,this._mimeType=d,s.checkSupport(h),this._worker=_.pipe(new a(h)),_.lock()}catch(v){this._worker=new i("error"),this._worker.error(v)}}o.prototype={accumulate:function(_){return b(this,_)},on:function(_,n){var d=this;return _==="data"?this._worker.on(_,function(h){n.call(d,h.data,h.meta)}):this._worker.on(_,function(){s.delay(n,arguments,d)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},_)}},w.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,w,m){if(m.base64=!0,m.array=!0,m.string=!0,m.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",m.nodebuffer=typeof Buffer<"u",m.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")m.blob=!1;else{var s=new ArrayBuffer(0);try{m.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),m.blob=a.getBlob("application/zip").size===0}catch{m.blob=!1}}}try{m.nodestream=!!r("readable-stream").Readable}catch{m.nodestream=!1}},{"readable-stream":16}],31:[function(r,w,m){for(var s=r("./utils"),a=r("./support"),i=r("./nodejsUtils"),l=r("./stream/GenericWorker"),p=new Array(256),g=0;g<256;g++)p[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;p[254]=p[254]=1;function u(){l.call(this,"utf-8 decode"),this.leftOver=null}function b(){l.call(this,"utf-8 encode")}m.utf8encode=function(o){return a.nodebuffer?i.newBufferFrom(o,"utf-8"):(function(_){var n,d,h,v,k,C=_.length,E=0;for(v=0;v<C;v++)(64512&(d=_.charCodeAt(v)))==55296&&v+1<C&&(64512&(h=_.charCodeAt(v+1)))==56320&&(d=65536+(d-55296<<10)+(h-56320),v++),E+=d<128?1:d<2048?2:d<65536?3:4;for(n=a.uint8array?new Uint8Array(E):new Array(E),v=k=0;k<E;v++)(64512&(d=_.charCodeAt(v)))==55296&&v+1<C&&(64512&(h=_.charCodeAt(v+1)))==56320&&(d=65536+(d-55296<<10)+(h-56320),v++),d<128?n[k++]=d:(d<2048?n[k++]=192|d>>>6:(d<65536?n[k++]=224|d>>>12:(n[k++]=240|d>>>18,n[k++]=128|d>>>12&63),n[k++]=128|d>>>6&63),n[k++]=128|63&d);return n})(o)},m.utf8decode=function(o){return a.nodebuffer?s.transformTo("nodebuffer",o).toString("utf-8"):(function(_){var n,d,h,v,k=_.length,C=new Array(2*k);for(n=d=0;n<k;)if((h=_[n++])<128)C[d++]=h;else if(4<(v=p[h]))C[d++]=65533,n+=v-1;else{for(h&=v===2?31:v===3?15:7;1<v&&n<k;)h=h<<6|63&_[n++],v--;1<v?C[d++]=65533:h<65536?C[d++]=h:(h-=65536,C[d++]=55296|h>>10&1023,C[d++]=56320|1023&h)}return C.length!==d&&(C.subarray?C=C.subarray(0,d):C.length=d),s.applyFromCharCode(C)})(o=s.transformTo(a.uint8array?"uint8array":"array",o))},s.inherits(u,l),u.prototype.processChunk=function(o){var _=s.transformTo(a.uint8array?"uint8array":"array",o.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var n=_;(_=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),_.set(n,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var d=(function(v,k){var C;for((k=k||v.length)>v.length&&(k=v.length),C=k-1;0<=C&&(192&v[C])==128;)C--;return C<0||C===0?k:C+p[v[C]]>k?C:k})(_),h=_;d!==_.length&&(a.uint8array?(h=_.subarray(0,d),this.leftOver=_.subarray(d,_.length)):(h=_.slice(0,d),this.leftOver=_.slice(d,_.length))),this.push({data:m.utf8decode(h),meta:o.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:m.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},m.Utf8DecodeWorker=u,s.inherits(b,l),b.prototype.processChunk=function(o){this.push({data:m.utf8encode(o.data),meta:o.meta})},m.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,w,m){var s=r("./support"),a=r("./base64"),i=r("./nodejsUtils"),l=r("./external");function p(n){return n}function g(n,d){for(var h=0;h<n.length;++h)d[h]=255&n.charCodeAt(h);return d}r("setimmediate"),m.newBlob=function(n,d){m.checkSupport("blob");try{return new Blob([n],{type:d})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(n),h.getBlob(d)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(n,d,h){var v=[],k=0,C=n.length;if(C<=h)return String.fromCharCode.apply(null,n);for(;k<C;)d==="array"||d==="nodebuffer"?v.push(String.fromCharCode.apply(null,n.slice(k,Math.min(k+h,C)))):v.push(String.fromCharCode.apply(null,n.subarray(k,Math.min(k+h,C)))),k+=h;return v.join("")},stringifyByChar:function(n){for(var d="",h=0;h<n.length;h++)d+=String.fromCharCode(n[h]);return d},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}})()}};function b(n){var d=65536,h=m.getTypeOf(n),v=!0;if(h==="uint8array"?v=u.applyCanBeUsed.uint8array:h==="nodebuffer"&&(v=u.applyCanBeUsed.nodebuffer),v)for(;1<d;)try{return u.stringifyByChunk(n,h,d)}catch{d=Math.floor(d/2)}return u.stringifyByChar(n)}function o(n,d){for(var h=0;h<n.length;h++)d[h]=n[h];return d}m.applyFromCharCode=b;var _={};_.string={string:p,array:function(n){return g(n,new Array(n.length))},arraybuffer:function(n){return _.string.uint8array(n).buffer},uint8array:function(n){return g(n,new Uint8Array(n.length))},nodebuffer:function(n){return g(n,i.allocBuffer(n.length))}},_.array={string:b,array:p,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return i.newBufferFrom(n)}},_.arraybuffer={string:function(n){return b(new Uint8Array(n))},array:function(n){return o(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:p,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return i.newBufferFrom(new Uint8Array(n))}},_.uint8array={string:b,array:function(n){return o(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:p,nodebuffer:function(n){return i.newBufferFrom(n)}},_.nodebuffer={string:b,array:function(n){return o(n,new Array(n.length))},arraybuffer:function(n){return _.nodebuffer.uint8array(n).buffer},uint8array:function(n){return o(n,new Uint8Array(n.length))},nodebuffer:p},m.transformTo=function(n,d){if(d=d||"",!n)return d;m.checkSupport(n);var h=m.getTypeOf(d);return _[h][n](d)},m.resolve=function(n){for(var d=n.split("/"),h=[],v=0;v<d.length;v++){var k=d[v];k==="."||k===""&&v!==0&&v!==d.length-1||(k===".."?h.pop():h.push(k))}return h.join("/")},m.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":s.nodebuffer&&i.isBuffer(n)?"nodebuffer":s.uint8array&&n instanceof Uint8Array?"uint8array":s.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},m.checkSupport=function(n){if(!s[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},m.MAX_VALUE_16BITS=65535,m.MAX_VALUE_32BITS=-1,m.pretty=function(n){var d,h,v="";for(h=0;h<(n||"").length;h++)v+="\\x"+((d=n.charCodeAt(h))<16?"0":"")+d.toString(16).toUpperCase();return v},m.delay=function(n,d,h){setImmediate(function(){n.apply(h||null,d||[])})},m.inherits=function(n,d){function h(){}h.prototype=d.prototype,n.prototype=new h},m.extend=function(){var n,d,h={};for(n=0;n<arguments.length;n++)for(d in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],d)&&h[d]===void 0&&(h[d]=arguments[n][d]);return h},m.prepareContent=function(n,d,h,v,k){return l.Promise.resolve(d).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,N){var O=new FileReader;O.onload=function(U){E(U.target.result)},O.onerror=function(U){N(U.target.error)},O.readAsArrayBuffer(C)}):C}).then(function(C){var E=m.getTypeOf(C);return E?(E==="arraybuffer"?C=m.transformTo("uint8array",C):E==="string"&&(k?C=a.decode(C):h&&v!==!0&&(C=(function(N){return g(N,s.uint8array?new Uint8Array(N.length):new Array(N.length))})(C))),C):l.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,w,m){var s=r("./reader/readerFor"),a=r("./utils"),i=r("./signature"),l=r("./zipEntry"),p=r("./support");function g(u){this.files=[],this.loadOptions=u}g.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(b)+", expected "+a.pretty(u)+")")}},isSignature:function(u,b){var o=this.reader.index;this.reader.setIndex(u);var _=this.reader.readString(4)===b;return this.reader.setIndex(o),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),b=p.uint8array?"uint8array":"array",o=a.transformTo(b,u);this.zipComment=this.loadOptions.decodeFileName(o)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,b,o,_=this.zip64EndOfCentralSize-44;0<_;)u=this.reader.readInt(2),b=this.reader.readInt(4),o=this.reader.readData(b),this.zip64ExtensibleData[u]={id:u,length:b,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,b;for(u=0;u<this.files.length;u++)b=this.files[u],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(u=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var b=u;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var o=this.centralDirOffset+this.centralDirSize;this.zip64&&(o+=20,o+=12+this.zip64EndOfCentralSize);var _=b-o;if(0<_)this.isSignature(b,i.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(u){this.reader=s(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},w.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,w,m){var s=r("./reader/readerFor"),a=r("./utils"),i=r("./compressedObject"),l=r("./crc32"),p=r("./utf8"),g=r("./compressions"),u=r("./support");function b(o,_){this.options=o,this.loadOptions=_}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(o){var _,n;if(o.skip(22),this.fileNameLength=o.readInt(2),n=o.readInt(2),this.fileName=o.readData(this.fileNameLength),o.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=(function(d){for(var h in g)if(Object.prototype.hasOwnProperty.call(g,h)&&g[h].magic===d)return g[h];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,_,o.readData(this.compressedSize))},readCentralPart:function(o){this.versionMadeBy=o.readInt(2),o.skip(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4);var _=o.readInt(2);if(this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");o.skip(_),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),o==0&&(this.dosPermissions=63&this.externalFileAttributes),o==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var o=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=o.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=o.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=o.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=o.readInt(4))}},readExtraFields:function(o){var _,n,d,h=o.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});o.index+4<h;)_=o.readInt(2),n=o.readInt(2),d=o.readData(n),this.extraFields[_]={id:_,length:n,value:d};o.setIndex(h)},handleUTF8:function(){var o=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var n=a.transformTo(o,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var d=this.findExtraFieldUnicodeComment();if(d!==null)this.fileCommentStr=d;else{var h=a.transformTo(o,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var _=s(o.value);return _.readInt(1)!==1||l(this.fileName)!==_.readInt(4)?null:p.utf8decode(_.readData(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var _=s(o.value);return _.readInt(1)!==1||l(this.fileComment)!==_.readInt(4)?null:p.utf8decode(_.readData(o.length-5))}return null}},w.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,w,m){function s(_,n,d){this.name=_,this.dir=d.dir,this.date=d.date,this.comment=d.comment,this.unixPermissions=d.unixPermissions,this.dosPermissions=d.dosPermissions,this._data=n,this._dataBinary=d.binary,this.options={compression:d.compression,compressionOptions:d.compressionOptions}}var a=r("./stream/StreamHelper"),i=r("./stream/DataWorker"),l=r("./utf8"),p=r("./compressedObject"),g=r("./stream/GenericWorker");s.prototype={internalStream:function(_){var n=null,d="string";try{if(!_)throw new Error("No output type specified.");var h=(d=_.toLowerCase())==="string"||d==="text";d!=="binarystring"&&d!=="text"||(d="string"),n=this._decompressWorker();var v=!this._dataBinary;v&&!h&&(n=n.pipe(new l.Utf8EncodeWorker)),!v&&h&&(n=n.pipe(new l.Utf8DecodeWorker))}catch(k){(n=new g("error")).error(k)}return new a(n,d,"")},async:function(_,n){return this.internalStream(_).accumulate(n)},nodeStream:function(_,n){return this.internalStream(_||"nodebuffer").toNodejsStream(n)},_compressWorker:function(_,n){if(this._data instanceof p&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var d=this._decompressWorker();return this._dataBinary||(d=d.pipe(new l.Utf8EncodeWorker)),p.createWorkerFrom(d,_,n)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof g?this._data:new i(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},o=0;o<u.length;o++)s.prototype[u[o]]=b;w.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,w,m){(function(s){var a,i,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var p=0,g=new l(_),u=s.document.createTextNode("");g.observe(u,{characterData:!0}),a=function(){u.data=p=++p%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var n=s.document.createElement("script");n.onreadystatechange=function(){_(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},s.document.documentElement.appendChild(n)}:function(){setTimeout(_,0)};else{var b=new s.MessageChannel;b.port1.onmessage=_,a=function(){b.port2.postMessage(0)}}var o=[];function _(){var n,d;i=!0;for(var h=o.length;h;){for(d=o,o=[],n=-1;++n<h;)d[n]();h=o.length}i=!1}w.exports=function(n){o.push(n)!==1||i||a()}}).call(this,typeof xt<"u"?xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,w,m){var s=r("immediate");function a(){}var i={},l=["REJECTED"],p=["FULFILLED"],g=["PENDING"];function u(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,h!==a&&n(this,h)}function b(h,v,k){this.promise=h,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function o(h,v,k){s(function(){var C;try{C=v(k)}catch(E){return i.reject(h,E)}C===h?i.reject(h,new TypeError("Cannot resolve promise with itself")):i.resolve(h,C)})}function _(h){var v=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof v=="function")return function(){v.apply(h,arguments)}}function n(h,v){var k=!1;function C(O){k||(k=!0,i.reject(h,O))}function E(O){k||(k=!0,i.resolve(h,O))}var N=d(function(){v(E,C)});N.status==="error"&&C(N.value)}function d(h,v){var k={};try{k.value=h(v),k.status="success"}catch(C){k.status="error",k.value=C}return k}(w.exports=u).prototype.finally=function(h){if(typeof h!="function")return this;var v=this.constructor;return this.then(function(k){return v.resolve(h()).then(function(){return k})},function(k){return v.resolve(h()).then(function(){throw k})})},u.prototype.catch=function(h){return this.then(null,h)},u.prototype.then=function(h,v){if(typeof h!="function"&&this.state===p||typeof v!="function"&&this.state===l)return this;var k=new this.constructor(a);return this.state!==g?o(k,this.state===p?h:v,this.outcome):this.queue.push(new b(k,h,v)),k},b.prototype.callFulfilled=function(h){i.resolve(this.promise,h)},b.prototype.otherCallFulfilled=function(h){o(this.promise,this.onFulfilled,h)},b.prototype.callRejected=function(h){i.reject(this.promise,h)},b.prototype.otherCallRejected=function(h){o(this.promise,this.onRejected,h)},i.resolve=function(h,v){var k=d(_,v);if(k.status==="error")return i.reject(h,k.value);var C=k.value;if(C)n(h,C);else{h.state=p,h.outcome=v;for(var E=-1,N=h.queue.length;++E<N;)h.queue[E].callFulfilled(v)}return h},i.reject=function(h,v){h.state=l,h.outcome=v;for(var k=-1,C=h.queue.length;++k<C;)h.queue[k].callRejected(v);return h},u.resolve=function(h){return h instanceof this?h:i.resolve(new this(a),h)},u.reject=function(h){var v=new this(a);return i.reject(v,h)},u.all=function(h){var v=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=h.length,C=!1;if(!k)return this.resolve([]);for(var E=new Array(k),N=0,O=-1,U=new this(a);++O<k;)L(h[O],O);return U;function L(W,K){v.resolve(W).then(function(y){E[K]=y,++N!==k||C||(C=!0,i.resolve(U,E))},function(y){C||(C=!0,i.reject(U,y))})}},u.race=function(h){var v=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=h.length,C=!1;if(!k)return this.resolve([]);for(var E=-1,N=new this(a);++E<k;)O=h[E],v.resolve(O).then(function(U){C||(C=!0,i.resolve(N,U))},function(U){C||(C=!0,i.reject(N,U))});var O;return N}},{immediate:36}],38:[function(r,w,m){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),w.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,w,m){var s=r("./zlib/deflate"),a=r("./utils/common"),i=r("./utils/strings"),l=r("./zlib/messages"),p=r("./zlib/zstream"),g=Object.prototype.toString,u=0,b=-1,o=0,_=8;function n(h){if(!(this instanceof n))return new n(h);this.options=a.assign({level:b,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:o,to:""},h||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var k=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(k!==u)throw new Error(l[k]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var C;if(C=typeof v.dictionary=="string"?i.string2buf(v.dictionary):g.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(k=s.deflateSetDictionary(this.strm,C))!==u)throw new Error(l[k]);this._dict_set=!0}}function d(h,v){var k=new n(v);if(k.push(h,!0),k.err)throw k.msg||l[k.err];return k.result}n.prototype.push=function(h,v){var k,C,E=this.strm,N=this.options.chunkSize;if(this.ended)return!1;C=v===~~v?v:v===!0?4:0,typeof h=="string"?E.input=i.string2buf(h):g.call(h)==="[object ArrayBuffer]"?E.input=new Uint8Array(h):E.input=h,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(N),E.next_out=0,E.avail_out=N),(k=s.deflate(E,C))!==1&&k!==u)return this.onEnd(k),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(a.shrinkBuf(E.output,E.next_out))):this.onData(a.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&k!==1);return C===4?(k=s.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===u):C!==2||(this.onEnd(u),!(E.avail_out=0))},n.prototype.onData=function(h){this.chunks.push(h)},n.prototype.onEnd=function(h){h===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},m.Deflate=n,m.deflate=d,m.deflateRaw=function(h,v){return(v=v||{}).raw=!0,d(h,v)},m.gzip=function(h,v){return(v=v||{}).gzip=!0,d(h,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,w,m){var s=r("./zlib/inflate"),a=r("./utils/common"),i=r("./utils/strings"),l=r("./zlib/constants"),p=r("./zlib/messages"),g=r("./zlib/zstream"),u=r("./zlib/gzheader"),b=Object.prototype.toString;function o(n){if(!(this instanceof o))return new o(n);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},n||{});var d=this.options;d.raw&&0<=d.windowBits&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),!(0<=d.windowBits&&d.windowBits<16)||n&&n.windowBits||(d.windowBits+=32),15<d.windowBits&&d.windowBits<48&&(15&d.windowBits)==0&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var h=s.inflateInit2(this.strm,d.windowBits);if(h!==l.Z_OK)throw new Error(p[h]);this.header=new u,s.inflateGetHeader(this.strm,this.header)}function _(n,d){var h=new o(d);if(h.push(n,!0),h.err)throw h.msg||p[h.err];return h.result}o.prototype.push=function(n,d){var h,v,k,C,E,N,O=this.strm,U=this.options.chunkSize,L=this.options.dictionary,W=!1;if(this.ended)return!1;v=d===~~d?d:d===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof n=="string"?O.input=i.binstring2buf(n):b.call(n)==="[object ArrayBuffer]"?O.input=new Uint8Array(n):O.input=n,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new a.Buf8(U),O.next_out=0,O.avail_out=U),(h=s.inflate(O,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&L&&(N=typeof L=="string"?i.string2buf(L):b.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,h=s.inflateSetDictionary(this.strm,N)),h===l.Z_BUF_ERROR&&W===!0&&(h=l.Z_OK,W=!1),h!==l.Z_STREAM_END&&h!==l.Z_OK)return this.onEnd(h),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&h!==l.Z_STREAM_END&&(O.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=i.utf8border(O.output,O.next_out),C=O.next_out-k,E=i.buf2string(O.output,k),O.next_out=C,O.avail_out=U-C,C&&a.arraySet(O.output,O.output,k,C,0),this.onData(E)):this.onData(a.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(W=!0)}while((0<O.avail_in||O.avail_out===0)&&h!==l.Z_STREAM_END);return h===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(h=s.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(O.avail_out=0))},o.prototype.onData=function(n){this.chunks.push(n)},o.prototype.onEnd=function(n){n===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},m.Inflate=o,m.inflate=_,m.inflateRaw=function(n,d){return(d=d||{}).raw=!0,_(n,d)},m.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,w,m){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";m.assign=function(l){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var u in g)g.hasOwnProperty(u)&&(l[u]=g[u])}}return l},m.shrinkBuf=function(l,p){return l.length===p?l:l.subarray?l.subarray(0,p):(l.length=p,l)};var a={arraySet:function(l,p,g,u,b){if(p.subarray&&l.subarray)l.set(p.subarray(g,g+u),b);else for(var o=0;o<u;o++)l[b+o]=p[g+o]},flattenChunks:function(l){var p,g,u,b,o,_;for(p=u=0,g=l.length;p<g;p++)u+=l[p].length;for(_=new Uint8Array(u),p=b=0,g=l.length;p<g;p++)o=l[p],_.set(o,b),b+=o.length;return _}},i={arraySet:function(l,p,g,u,b){for(var o=0;o<u;o++)l[b+o]=p[g+o]},flattenChunks:function(l){return[].concat.apply([],l)}};m.setTyped=function(l){l?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,a)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,i))},m.setTyped(s)},{}],42:[function(r,w,m){var s=r("./common"),a=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var l=new s.Buf8(256),p=0;p<256;p++)l[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function g(u,b){if(b<65537&&(u.subarray&&i||!u.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(u,b));for(var o="",_=0;_<b;_++)o+=String.fromCharCode(u[_]);return o}l[254]=l[254]=1,m.string2buf=function(u){var b,o,_,n,d,h=u.length,v=0;for(n=0;n<h;n++)(64512&(o=u.charCodeAt(n)))==55296&&n+1<h&&(64512&(_=u.charCodeAt(n+1)))==56320&&(o=65536+(o-55296<<10)+(_-56320),n++),v+=o<128?1:o<2048?2:o<65536?3:4;for(b=new s.Buf8(v),n=d=0;d<v;n++)(64512&(o=u.charCodeAt(n)))==55296&&n+1<h&&(64512&(_=u.charCodeAt(n+1)))==56320&&(o=65536+(o-55296<<10)+(_-56320),n++),o<128?b[d++]=o:(o<2048?b[d++]=192|o>>>6:(o<65536?b[d++]=224|o>>>12:(b[d++]=240|o>>>18,b[d++]=128|o>>>12&63),b[d++]=128|o>>>6&63),b[d++]=128|63&o);return b},m.buf2binstring=function(u){return g(u,u.length)},m.binstring2buf=function(u){for(var b=new s.Buf8(u.length),o=0,_=b.length;o<_;o++)b[o]=u.charCodeAt(o);return b},m.buf2string=function(u,b){var o,_,n,d,h=b||u.length,v=new Array(2*h);for(o=_=0;o<h;)if((n=u[o++])<128)v[_++]=n;else if(4<(d=l[n]))v[_++]=65533,o+=d-1;else{for(n&=d===2?31:d===3?15:7;1<d&&o<h;)n=n<<6|63&u[o++],d--;1<d?v[_++]=65533:n<65536?v[_++]=n:(n-=65536,v[_++]=55296|n>>10&1023,v[_++]=56320|1023&n)}return g(v,_)},m.utf8border=function(u,b){var o;for((b=b||u.length)>u.length&&(b=u.length),o=b-1;0<=o&&(192&u[o])==128;)o--;return o<0||o===0?b:o+l[u[o]]>b?o:b}},{"./common":41}],43:[function(r,w,m){w.exports=function(s,a,i,l){for(var p=65535&s|0,g=s>>>16&65535|0,u=0;i!==0;){for(i-=u=2e3<i?2e3:i;g=g+(p=p+a[l++]|0)|0,--u;);p%=65521,g%=65521}return p|g<<16|0}},{}],44:[function(r,w,m){w.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,w,m){var s=(function(){for(var a,i=[],l=0;l<256;l++){a=l;for(var p=0;p<8;p++)a=1&a?3988292384^a>>>1:a>>>1;i[l]=a}return i})();w.exports=function(a,i,l,p){var g=s,u=p+l;a^=-1;for(var b=p;b<u;b++)a=a>>>8^g[255&(a^i[b])];return-1^a}},{}],46:[function(r,w,m){var s,a=r("../utils/common"),i=r("./trees"),l=r("./adler32"),p=r("./crc32"),g=r("./messages"),u=0,b=4,o=0,_=-2,n=-1,d=4,h=2,v=8,k=9,C=286,E=30,N=19,O=2*C+1,U=15,L=3,W=258,K=W+L+1,y=42,R=113,e=1,T=2,q=3,D=4;function tt(t,P){return t.msg=g[P],P}function M(t){return(t<<1)-(4<t?9:0)}function V(t){for(var P=t.length;0<=--P;)t[P]=0}function I(t){var P=t.state,B=P.pending;B>t.avail_out&&(B=t.avail_out),B!==0&&(a.arraySet(t.output,P.pending_buf,P.pending_out,B,t.next_out),t.next_out+=B,P.pending_out+=B,t.total_out+=B,t.avail_out-=B,P.pending-=B,P.pending===0&&(P.pending_out=0))}function A(t,P){i._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,P),t.block_start=t.strstart,I(t.strm)}function Y(t,P){t.pending_buf[t.pending++]=P}function $(t,P){t.pending_buf[t.pending++]=P>>>8&255,t.pending_buf[t.pending++]=255&P}function G(t,P){var B,f,c=t.max_chain_length,x=t.strstart,F=t.prev_length,j=t.nice_match,S=t.strstart>t.w_size-K?t.strstart-(t.w_size-K):0,H=t.window,J=t.w_mask,Z=t.prev,X=t.strstart+W,st=H[x+F-1],it=H[x+F];t.prev_length>=t.good_match&&(c>>=2),j>t.lookahead&&(j=t.lookahead);do if(H[(B=P)+F]===it&&H[B+F-1]===st&&H[B]===H[x]&&H[++B]===H[x+1]){x+=2,B++;do;while(H[++x]===H[++B]&&H[++x]===H[++B]&&H[++x]===H[++B]&&H[++x]===H[++B]&&H[++x]===H[++B]&&H[++x]===H[++B]&&H[++x]===H[++B]&&H[++x]===H[++B]&&x<X);if(f=W-(X-x),x=X-W,F<f){if(t.match_start=P,j<=(F=f))break;st=H[x+F-1],it=H[x+F]}}while((P=Z[P&J])>S&&--c!=0);return F<=t.lookahead?F:t.lookahead}function at(t){var P,B,f,c,x,F,j,S,H,J,Z=t.w_size;do{if(c=t.window_size-t.lookahead-t.strstart,t.strstart>=Z+(Z-K)){for(a.arraySet(t.window,t.window,Z,Z,0),t.match_start-=Z,t.strstart-=Z,t.block_start-=Z,P=B=t.hash_size;f=t.head[--P],t.head[P]=Z<=f?f-Z:0,--B;);for(P=B=Z;f=t.prev[--P],t.prev[P]=Z<=f?f-Z:0,--B;);c+=Z}if(t.strm.avail_in===0)break;if(F=t.strm,j=t.window,S=t.strstart+t.lookahead,H=c,J=void 0,J=F.avail_in,H<J&&(J=H),B=J===0?0:(F.avail_in-=J,a.arraySet(j,F.input,F.next_in,J,S),F.state.wrap===1?F.adler=l(F.adler,j,J,S):F.state.wrap===2&&(F.adler=p(F.adler,j,J,S)),F.next_in+=J,F.total_in+=J,J),t.lookahead+=B,t.lookahead+t.insert>=L)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+L-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<L)););}while(t.lookahead<K&&t.strm.avail_in!==0)}function ct(t,P){for(var B,f;;){if(t.lookahead<K){if(at(t),t.lookahead<K&&P===u)return e;if(t.lookahead===0)break}if(B=0,t.lookahead>=L&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),B!==0&&t.strstart-B<=t.w_size-K&&(t.match_length=G(t,B)),t.match_length>=L)if(f=i._tr_tally(t,t.strstart-t.match_start,t.match_length-L),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=L){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else f=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(f&&(A(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<L-1?t.strstart:L-1,P===b?(A(t,!0),t.strm.avail_out===0?q:D):t.last_lit&&(A(t,!1),t.strm.avail_out===0)?e:T}function et(t,P){for(var B,f,c;;){if(t.lookahead<K){if(at(t),t.lookahead<K&&P===u)return e;if(t.lookahead===0)break}if(B=0,t.lookahead>=L&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=L-1,B!==0&&t.prev_length<t.max_lazy_match&&t.strstart-B<=t.w_size-K&&(t.match_length=G(t,B),t.match_length<=5&&(t.strategy===1||t.match_length===L&&4096<t.strstart-t.match_start)&&(t.match_length=L-1)),t.prev_length>=L&&t.match_length<=t.prev_length){for(c=t.strstart+t.lookahead-L,f=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-L),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=c&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=L-1,t.strstart++,f&&(A(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((f=i._tr_tally(t,0,t.window[t.strstart-1]))&&A(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(f=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<L-1?t.strstart:L-1,P===b?(A(t,!0),t.strm.avail_out===0?q:D):t.last_lit&&(A(t,!1),t.strm.avail_out===0)?e:T}function nt(t,P,B,f,c){this.good_length=t,this.max_lazy=P,this.nice_length=B,this.max_chain=f,this.func=c}function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*O),this.dyn_dtree=new a.Buf16(2*(2*E+1)),this.bl_tree=new a.Buf16(2*(2*N+1)),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(U+1),this.heap=new a.Buf16(2*C+1),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ot(t){var P;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=h,(P=t.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?y:R,t.adler=P.wrap===2?0:1,P.last_flush=u,i._tr_init(P),o):tt(t,_)}function ft(t){var P=ot(t);return P===o&&(function(B){B.window_size=2*B.w_size,V(B.head),B.max_lazy_match=s[B.level].max_lazy,B.good_match=s[B.level].good_length,B.nice_match=s[B.level].nice_length,B.max_chain_length=s[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=L-1,B.match_available=0,B.ins_h=0})(t.state),P}function ut(t,P,B,f,c,x){if(!t)return _;var F=1;if(P===n&&(P=6),f<0?(F=0,f=-f):15<f&&(F=2,f-=16),c<1||k<c||B!==v||f<8||15<f||P<0||9<P||x<0||d<x)return tt(t,_);f===8&&(f=9);var j=new ht;return(t.state=j).strm=t,j.wrap=F,j.gzhead=null,j.w_bits=f,j.w_size=1<<j.w_bits,j.w_mask=j.w_size-1,j.hash_bits=c+7,j.hash_size=1<<j.hash_bits,j.hash_mask=j.hash_size-1,j.hash_shift=~~((j.hash_bits+L-1)/L),j.window=new a.Buf8(2*j.w_size),j.head=new a.Buf16(j.hash_size),j.prev=new a.Buf16(j.w_size),j.lit_bufsize=1<<c+6,j.pending_buf_size=4*j.lit_bufsize,j.pending_buf=new a.Buf8(j.pending_buf_size),j.d_buf=1*j.lit_bufsize,j.l_buf=3*j.lit_bufsize,j.level=P,j.strategy=x,j.method=B,ft(t)}s=[new nt(0,0,0,0,function(t,P){var B=65535;for(B>t.pending_buf_size-5&&(B=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),t.lookahead===0&&P===u)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var f=t.block_start+B;if((t.strstart===0||t.strstart>=f)&&(t.lookahead=t.strstart-f,t.strstart=f,A(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-K&&(A(t,!1),t.strm.avail_out===0))return e}return t.insert=0,P===b?(A(t,!0),t.strm.avail_out===0?q:D):(t.strstart>t.block_start&&(A(t,!1),t.strm.avail_out),e)}),new nt(4,4,8,4,ct),new nt(4,5,16,8,ct),new nt(4,6,32,32,ct),new nt(4,4,16,16,et),new nt(8,16,32,32,et),new nt(8,16,128,128,et),new nt(8,32,128,256,et),new nt(32,128,258,1024,et),new nt(32,258,258,4096,et)],m.deflateInit=function(t,P){return ut(t,P,v,15,8,0)},m.deflateInit2=ut,m.deflateReset=ft,m.deflateResetKeep=ot,m.deflateSetHeader=function(t,P){return t&&t.state?t.state.wrap!==2?_:(t.state.gzhead=P,o):_},m.deflate=function(t,P){var B,f,c,x;if(!t||!t.state||5<P||P<0)return t?tt(t,_):_;if(f=t.state,!t.output||!t.input&&t.avail_in!==0||f.status===666&&P!==b)return tt(t,t.avail_out===0?-5:_);if(f.strm=t,B=f.last_flush,f.last_flush=P,f.status===y)if(f.wrap===2)t.adler=0,Y(f,31),Y(f,139),Y(f,8),f.gzhead?(Y(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),Y(f,255&f.gzhead.time),Y(f,f.gzhead.time>>8&255),Y(f,f.gzhead.time>>16&255),Y(f,f.gzhead.time>>24&255),Y(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Y(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(Y(f,255&f.gzhead.extra.length),Y(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(t.adler=p(t.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(Y(f,0),Y(f,0),Y(f,0),Y(f,0),Y(f,0),Y(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Y(f,3),f.status=R);else{var F=v+(f.w_bits-8<<4)<<8;F|=(2<=f.strategy||f.level<2?0:f.level<6?1:f.level===6?2:3)<<6,f.strstart!==0&&(F|=32),F+=31-F%31,f.status=R,$(f,F),f.strstart!==0&&($(f,t.adler>>>16),$(f,65535&t.adler)),t.adler=1}if(f.status===69)if(f.gzhead.extra){for(c=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>c&&(t.adler=p(t.adler,f.pending_buf,f.pending-c,c)),I(t),c=f.pending,f.pending!==f.pending_buf_size));)Y(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>c&&(t.adler=p(t.adler,f.pending_buf,f.pending-c,c)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(f.status===73)if(f.gzhead.name){c=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>c&&(t.adler=p(t.adler,f.pending_buf,f.pending-c,c)),I(t),c=f.pending,f.pending===f.pending_buf_size)){x=1;break}x=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,Y(f,x)}while(x!==0);f.gzhead.hcrc&&f.pending>c&&(t.adler=p(t.adler,f.pending_buf,f.pending-c,c)),x===0&&(f.gzindex=0,f.status=91)}else f.status=91;if(f.status===91)if(f.gzhead.comment){c=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>c&&(t.adler=p(t.adler,f.pending_buf,f.pending-c,c)),I(t),c=f.pending,f.pending===f.pending_buf_size)){x=1;break}x=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,Y(f,x)}while(x!==0);f.gzhead.hcrc&&f.pending>c&&(t.adler=p(t.adler,f.pending_buf,f.pending-c,c)),x===0&&(f.status=103)}else f.status=103;if(f.status===103&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&I(t),f.pending+2<=f.pending_buf_size&&(Y(f,255&t.adler),Y(f,t.adler>>8&255),t.adler=0,f.status=R)):f.status=R),f.pending!==0){if(I(t),t.avail_out===0)return f.last_flush=-1,o}else if(t.avail_in===0&&M(P)<=M(B)&&P!==b)return tt(t,-5);if(f.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||f.lookahead!==0||P!==u&&f.status!==666){var j=f.strategy===2?(function(S,H){for(var J;;){if(S.lookahead===0&&(at(S),S.lookahead===0)){if(H===u)return e;break}if(S.match_length=0,J=i._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++,J&&(A(S,!1),S.strm.avail_out===0))return e}return S.insert=0,H===b?(A(S,!0),S.strm.avail_out===0?q:D):S.last_lit&&(A(S,!1),S.strm.avail_out===0)?e:T})(f,P):f.strategy===3?(function(S,H){for(var J,Z,X,st,it=S.window;;){if(S.lookahead<=W){if(at(S),S.lookahead<=W&&H===u)return e;if(S.lookahead===0)break}if(S.match_length=0,S.lookahead>=L&&0<S.strstart&&(Z=it[X=S.strstart-1])===it[++X]&&Z===it[++X]&&Z===it[++X]){st=S.strstart+W;do;while(Z===it[++X]&&Z===it[++X]&&Z===it[++X]&&Z===it[++X]&&Z===it[++X]&&Z===it[++X]&&Z===it[++X]&&Z===it[++X]&&X<st);S.match_length=W-(st-X),S.match_length>S.lookahead&&(S.match_length=S.lookahead)}if(S.match_length>=L?(J=i._tr_tally(S,1,S.match_length-L),S.lookahead-=S.match_length,S.strstart+=S.match_length,S.match_length=0):(J=i._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++),J&&(A(S,!1),S.strm.avail_out===0))return e}return S.insert=0,H===b?(A(S,!0),S.strm.avail_out===0?q:D):S.last_lit&&(A(S,!1),S.strm.avail_out===0)?e:T})(f,P):s[f.level].func(f,P);if(j!==q&&j!==D||(f.status=666),j===e||j===q)return t.avail_out===0&&(f.last_flush=-1),o;if(j===T&&(P===1?i._tr_align(f):P!==5&&(i._tr_stored_block(f,0,0,!1),P===3&&(V(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),I(t),t.avail_out===0))return f.last_flush=-1,o}return P!==b?o:f.wrap<=0?1:(f.wrap===2?(Y(f,255&t.adler),Y(f,t.adler>>8&255),Y(f,t.adler>>16&255),Y(f,t.adler>>24&255),Y(f,255&t.total_in),Y(f,t.total_in>>8&255),Y(f,t.total_in>>16&255),Y(f,t.total_in>>24&255)):($(f,t.adler>>>16),$(f,65535&t.adler)),I(t),0<f.wrap&&(f.wrap=-f.wrap),f.pending!==0?o:1)},m.deflateEnd=function(t){var P;return t&&t.state?(P=t.state.status)!==y&&P!==69&&P!==73&&P!==91&&P!==103&&P!==R&&P!==666?tt(t,_):(t.state=null,P===R?tt(t,-3):o):_},m.deflateSetDictionary=function(t,P){var B,f,c,x,F,j,S,H,J=P.length;if(!t||!t.state||(x=(B=t.state).wrap)===2||x===1&&B.status!==y||B.lookahead)return _;for(x===1&&(t.adler=l(t.adler,P,J,0)),B.wrap=0,J>=B.w_size&&(x===0&&(V(B.head),B.strstart=0,B.block_start=0,B.insert=0),H=new a.Buf8(B.w_size),a.arraySet(H,P,J-B.w_size,B.w_size,0),P=H,J=B.w_size),F=t.avail_in,j=t.next_in,S=t.input,t.avail_in=J,t.next_in=0,t.input=P,at(B);B.lookahead>=L;){for(f=B.strstart,c=B.lookahead-(L-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[f+L-1])&B.hash_mask,B.prev[f&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=f,f++,--c;);B.strstart=f,B.lookahead=L-1,at(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=L-1,B.match_available=0,t.next_in=j,t.input=S,t.avail_in=F,B.wrap=x,o},m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,w,m){w.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,w,m){w.exports=function(s,a){var i,l,p,g,u,b,o,_,n,d,h,v,k,C,E,N,O,U,L,W,K,y,R,e,T;i=s.state,l=s.next_in,e=s.input,p=l+(s.avail_in-5),g=s.next_out,T=s.output,u=g-(a-s.avail_out),b=g+(s.avail_out-257),o=i.dmax,_=i.wsize,n=i.whave,d=i.wnext,h=i.window,v=i.hold,k=i.bits,C=i.lencode,E=i.distcode,N=(1<<i.lenbits)-1,O=(1<<i.distbits)-1;t:do{k<15&&(v+=e[l++]<<k,k+=8,v+=e[l++]<<k,k+=8),U=C[v&N];e:for(;;){if(v>>>=L=U>>>24,k-=L,(L=U>>>16&255)===0)T[g++]=65535&U;else{if(!(16&L)){if((64&L)==0){U=C[(65535&U)+(v&(1<<L)-1)];continue e}if(32&L){i.mode=12;break t}s.msg="invalid literal/length code",i.mode=30;break t}W=65535&U,(L&=15)&&(k<L&&(v+=e[l++]<<k,k+=8),W+=v&(1<<L)-1,v>>>=L,k-=L),k<15&&(v+=e[l++]<<k,k+=8,v+=e[l++]<<k,k+=8),U=E[v&O];i:for(;;){if(v>>>=L=U>>>24,k-=L,!(16&(L=U>>>16&255))){if((64&L)==0){U=E[(65535&U)+(v&(1<<L)-1)];continue i}s.msg="invalid distance code",i.mode=30;break t}if(K=65535&U,k<(L&=15)&&(v+=e[l++]<<k,(k+=8)<L&&(v+=e[l++]<<k,k+=8)),o<(K+=v&(1<<L)-1)){s.msg="invalid distance too far back",i.mode=30;break t}if(v>>>=L,k-=L,(L=g-u)<K){if(n<(L=K-L)&&i.sane){s.msg="invalid distance too far back",i.mode=30;break t}if(R=h,(y=0)===d){if(y+=_-L,L<W){for(W-=L;T[g++]=h[y++],--L;);y=g-K,R=T}}else if(d<L){if(y+=_+d-L,(L-=d)<W){for(W-=L;T[g++]=h[y++],--L;);if(y=0,d<W){for(W-=L=d;T[g++]=h[y++],--L;);y=g-K,R=T}}}else if(y+=d-L,L<W){for(W-=L;T[g++]=h[y++],--L;);y=g-K,R=T}for(;2<W;)T[g++]=R[y++],T[g++]=R[y++],T[g++]=R[y++],W-=3;W&&(T[g++]=R[y++],1<W&&(T[g++]=R[y++]))}else{for(y=g-K;T[g++]=T[y++],T[g++]=T[y++],T[g++]=T[y++],2<(W-=3););W&&(T[g++]=T[y++],1<W&&(T[g++]=T[y++]))}break}}break}}while(l<p&&g<b);l-=W=k>>3,v&=(1<<(k-=W<<3))-1,s.next_in=l,s.next_out=g,s.avail_in=l<p?p-l+5:5-(l-p),s.avail_out=g<b?b-g+257:257-(g-b),i.hold=v,i.bits=k}},{}],49:[function(r,w,m){var s=r("../utils/common"),a=r("./adler32"),i=r("./crc32"),l=r("./inffast"),p=r("./inftrees"),g=1,u=2,b=0,o=-2,_=1,n=852,d=592;function h(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(y){var R;return y&&y.state?(R=y.state,y.total_in=y.total_out=R.total=0,y.msg="",R.wrap&&(y.adler=1&R.wrap),R.mode=_,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new s.Buf32(n),R.distcode=R.distdyn=new s.Buf32(d),R.sane=1,R.back=-1,b):o}function C(y){var R;return y&&y.state?((R=y.state).wsize=0,R.whave=0,R.wnext=0,k(y)):o}function E(y,R){var e,T;return y&&y.state?(T=y.state,R<0?(e=0,R=-R):(e=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?o:(T.window!==null&&T.wbits!==R&&(T.window=null),T.wrap=e,T.wbits=R,C(y))):o}function N(y,R){var e,T;return y?(T=new v,(y.state=T).window=null,(e=E(y,R))!==b&&(y.state=null),e):o}var O,U,L=!0;function W(y){if(L){var R;for(O=new s.Buf32(512),U=new s.Buf32(32),R=0;R<144;)y.lens[R++]=8;for(;R<256;)y.lens[R++]=9;for(;R<280;)y.lens[R++]=7;for(;R<288;)y.lens[R++]=8;for(p(g,y.lens,0,288,O,0,y.work,{bits:9}),R=0;R<32;)y.lens[R++]=5;p(u,y.lens,0,32,U,0,y.work,{bits:5}),L=!1}y.lencode=O,y.lenbits=9,y.distcode=U,y.distbits=5}function K(y,R,e,T){var q,D=y.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new s.Buf8(D.wsize)),T>=D.wsize?(s.arraySet(D.window,R,e-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(T<(q=D.wsize-D.wnext)&&(q=T),s.arraySet(D.window,R,e-T,q,D.wnext),(T-=q)?(s.arraySet(D.window,R,e-T,T,0),D.wnext=T,D.whave=D.wsize):(D.wnext+=q,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=q))),0}m.inflateReset=C,m.inflateReset2=E,m.inflateResetKeep=k,m.inflateInit=function(y){return N(y,15)},m.inflateInit2=N,m.inflate=function(y,R){var e,T,q,D,tt,M,V,I,A,Y,$,G,at,ct,et,nt,ht,ot,ft,ut,t,P,B,f,c=0,x=new s.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return o;(e=y.state).mode===12&&(e.mode=13),tt=y.next_out,q=y.output,V=y.avail_out,D=y.next_in,T=y.input,M=y.avail_in,I=e.hold,A=e.bits,Y=M,$=V,P=b;t:for(;;)switch(e.mode){case _:if(e.wrap===0){e.mode=13;break}for(;A<16;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if(2&e.wrap&&I===35615){x[e.check=0]=255&I,x[1]=I>>>8&255,e.check=i(e.check,x,2,0),A=I=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&I)<<8)+(I>>8))%31){y.msg="incorrect header check",e.mode=30;break}if((15&I)!=8){y.msg="unknown compression method",e.mode=30;break}if(A-=4,t=8+(15&(I>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){y.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,y.adler=e.check=1,e.mode=512&I?10:12,A=I=0;break;case 2:for(;A<16;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if(e.flags=I,(255&e.flags)!=8){y.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){y.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=I>>8&1),512&e.flags&&(x[0]=255&I,x[1]=I>>>8&255,e.check=i(e.check,x,2,0)),A=I=0,e.mode=3;case 3:for(;A<32;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}e.head&&(e.head.time=I),512&e.flags&&(x[0]=255&I,x[1]=I>>>8&255,x[2]=I>>>16&255,x[3]=I>>>24&255,e.check=i(e.check,x,4,0)),A=I=0,e.mode=4;case 4:for(;A<16;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}e.head&&(e.head.xflags=255&I,e.head.os=I>>8),512&e.flags&&(x[0]=255&I,x[1]=I>>>8&255,e.check=i(e.check,x,2,0)),A=I=0,e.mode=5;case 5:if(1024&e.flags){for(;A<16;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}e.length=I,e.head&&(e.head.extra_len=I),512&e.flags&&(x[0]=255&I,x[1]=I>>>8&255,e.check=i(e.check,x,2,0)),A=I=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(M<(G=e.length)&&(G=M),G&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),s.arraySet(e.head.extra,T,D,G,t)),512&e.flags&&(e.check=i(e.check,T,G,D)),M-=G,D+=G,e.length-=G),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(M===0)break t;for(G=0;t=T[D+G++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&G<M;);if(512&e.flags&&(e.check=i(e.check,T,G,D)),M-=G,D+=G,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(M===0)break t;for(G=0;t=T[D+G++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&G<M;);if(512&e.flags&&(e.check=i(e.check,T,G,D)),M-=G,D+=G,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;A<16;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if(I!==(65535&e.check)){y.msg="header crc mismatch",e.mode=30;break}A=I=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),y.adler=e.check=0,e.mode=12;break;case 10:for(;A<32;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}y.adler=e.check=h(I),A=I=0,e.mode=11;case 11:if(e.havedict===0)return y.next_out=tt,y.avail_out=V,y.next_in=D,y.avail_in=M,e.hold=I,e.bits=A,2;y.adler=e.check=1,e.mode=12;case 12:if(R===5||R===6)break t;case 13:if(e.last){I>>>=7&A,A-=7&A,e.mode=27;break}for(;A<3;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}switch(e.last=1&I,A-=1,3&(I>>>=1)){case 0:e.mode=14;break;case 1:if(W(e),e.mode=20,R!==6)break;I>>>=2,A-=2;break t;case 2:e.mode=17;break;case 3:y.msg="invalid block type",e.mode=30}I>>>=2,A-=2;break;case 14:for(I>>>=7&A,A-=7&A;A<32;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if((65535&I)!=(I>>>16^65535)){y.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&I,A=I=0,e.mode=15,R===6)break t;case 15:e.mode=16;case 16:if(G=e.length){if(M<G&&(G=M),V<G&&(G=V),G===0)break t;s.arraySet(q,T,D,G,tt),M-=G,D+=G,V-=G,tt+=G,e.length-=G;break}e.mode=12;break;case 17:for(;A<14;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if(e.nlen=257+(31&I),I>>>=5,A-=5,e.ndist=1+(31&I),I>>>=5,A-=5,e.ncode=4+(15&I),I>>>=4,A-=4,286<e.nlen||30<e.ndist){y.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;A<3;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}e.lens[F[e.have++]]=7&I,I>>>=3,A-=3}for(;e.have<19;)e.lens[F[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,B={bits:e.lenbits},P=p(0,e.lens,0,19,e.lencode,0,e.work,B),e.lenbits=B.bits,P){y.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;nt=(c=e.lencode[I&(1<<e.lenbits)-1])>>>16&255,ht=65535&c,!((et=c>>>24)<=A);){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if(ht<16)I>>>=et,A-=et,e.lens[e.have++]=ht;else{if(ht===16){for(f=et+2;A<f;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if(I>>>=et,A-=et,e.have===0){y.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],G=3+(3&I),I>>>=2,A-=2}else if(ht===17){for(f=et+3;A<f;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}A-=et,t=0,G=3+(7&(I>>>=et)),I>>>=3,A-=3}else{for(f=et+7;A<f;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}A-=et,t=0,G=11+(127&(I>>>=et)),I>>>=7,A-=7}if(e.have+G>e.nlen+e.ndist){y.msg="invalid bit length repeat",e.mode=30;break}for(;G--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){y.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,B={bits:e.lenbits},P=p(g,e.lens,0,e.nlen,e.lencode,0,e.work,B),e.lenbits=B.bits,P){y.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,B={bits:e.distbits},P=p(u,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,B),e.distbits=B.bits,P){y.msg="invalid distances set",e.mode=30;break}if(e.mode=20,R===6)break t;case 20:e.mode=21;case 21:if(6<=M&&258<=V){y.next_out=tt,y.avail_out=V,y.next_in=D,y.avail_in=M,e.hold=I,e.bits=A,l(y,$),tt=y.next_out,q=y.output,V=y.avail_out,D=y.next_in,T=y.input,M=y.avail_in,I=e.hold,A=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;nt=(c=e.lencode[I&(1<<e.lenbits)-1])>>>16&255,ht=65535&c,!((et=c>>>24)<=A);){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if(nt&&(240&nt)==0){for(ot=et,ft=nt,ut=ht;nt=(c=e.lencode[ut+((I&(1<<ot+ft)-1)>>ot)])>>>16&255,ht=65535&c,!(ot+(et=c>>>24)<=A);){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}I>>>=ot,A-=ot,e.back+=ot}if(I>>>=et,A-=et,e.back+=et,e.length=ht,nt===0){e.mode=26;break}if(32&nt){e.back=-1,e.mode=12;break}if(64&nt){y.msg="invalid literal/length code",e.mode=30;break}e.extra=15&nt,e.mode=22;case 22:if(e.extra){for(f=e.extra;A<f;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}e.length+=I&(1<<e.extra)-1,I>>>=e.extra,A-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;nt=(c=e.distcode[I&(1<<e.distbits)-1])>>>16&255,ht=65535&c,!((et=c>>>24)<=A);){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if((240&nt)==0){for(ot=et,ft=nt,ut=ht;nt=(c=e.distcode[ut+((I&(1<<ot+ft)-1)>>ot)])>>>16&255,ht=65535&c,!(ot+(et=c>>>24)<=A);){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}I>>>=ot,A-=ot,e.back+=ot}if(I>>>=et,A-=et,e.back+=et,64&nt){y.msg="invalid distance code",e.mode=30;break}e.offset=ht,e.extra=15&nt,e.mode=24;case 24:if(e.extra){for(f=e.extra;A<f;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}e.offset+=I&(1<<e.extra)-1,I>>>=e.extra,A-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){y.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(V===0)break t;if(G=$-V,e.offset>G){if((G=e.offset-G)>e.whave&&e.sane){y.msg="invalid distance too far back",e.mode=30;break}at=G>e.wnext?(G-=e.wnext,e.wsize-G):e.wnext-G,G>e.length&&(G=e.length),ct=e.window}else ct=q,at=tt-e.offset,G=e.length;for(V<G&&(G=V),V-=G,e.length-=G;q[tt++]=ct[at++],--G;);e.length===0&&(e.mode=21);break;case 26:if(V===0)break t;q[tt++]=e.length,V--,e.mode=21;break;case 27:if(e.wrap){for(;A<32;){if(M===0)break t;M--,I|=T[D++]<<A,A+=8}if($-=V,y.total_out+=$,e.total+=$,$&&(y.adler=e.check=e.flags?i(e.check,q,$,tt-$):a(e.check,q,$,tt-$)),$=V,(e.flags?I:h(I))!==e.check){y.msg="incorrect data check",e.mode=30;break}A=I=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;A<32;){if(M===0)break t;M--,I+=T[D++]<<A,A+=8}if(I!==(4294967295&e.total)){y.msg="incorrect length check",e.mode=30;break}A=I=0}e.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;default:return o}return y.next_out=tt,y.avail_out=V,y.next_in=D,y.avail_in=M,e.hold=I,e.bits=A,(e.wsize||$!==y.avail_out&&e.mode<30&&(e.mode<27||R!==4))&&K(y,y.output,y.next_out,$-y.avail_out)?(e.mode=31,-4):(Y-=y.avail_in,$-=y.avail_out,y.total_in+=Y,y.total_out+=$,e.total+=$,e.wrap&&$&&(y.adler=e.check=e.flags?i(e.check,q,$,y.next_out-$):a(e.check,q,$,y.next_out-$)),y.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(Y==0&&$===0||R===4)&&P===b&&(P=-5),P)},m.inflateEnd=function(y){if(!y||!y.state)return o;var R=y.state;return R.window&&(R.window=null),y.state=null,b},m.inflateGetHeader=function(y,R){var e;return y&&y.state?(2&(e=y.state).wrap)==0?o:((e.head=R).done=!1,b):o},m.inflateSetDictionary=function(y,R){var e,T=R.length;return y&&y.state?(e=y.state).wrap!==0&&e.mode!==11?o:e.mode===11&&a(1,R,T,0)!==e.check?-3:K(y,R,T,T)?(e.mode=31,-4):(e.havedict=1,b):o},m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,w,m){var s=r("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];w.exports=function(g,u,b,o,_,n,d,h){var v,k,C,E,N,O,U,L,W,K=h.bits,y=0,R=0,e=0,T=0,q=0,D=0,tt=0,M=0,V=0,I=0,A=null,Y=0,$=new s.Buf16(16),G=new s.Buf16(16),at=null,ct=0;for(y=0;y<=15;y++)$[y]=0;for(R=0;R<o;R++)$[u[b+R]]++;for(q=K,T=15;1<=T&&$[T]===0;T--);if(T<q&&(q=T),T===0)return _[n++]=20971520,_[n++]=20971520,h.bits=1,0;for(e=1;e<T&&$[e]===0;e++);for(q<e&&(q=e),y=M=1;y<=15;y++)if(M<<=1,(M-=$[y])<0)return-1;if(0<M&&(g===0||T!==1))return-1;for(G[1]=0,y=1;y<15;y++)G[y+1]=G[y]+$[y];for(R=0;R<o;R++)u[b+R]!==0&&(d[G[u[b+R]]++]=R);if(O=g===0?(A=at=d,19):g===1?(A=a,Y-=257,at=i,ct-=257,256):(A=l,at=p,-1),y=e,N=n,tt=R=I=0,C=-1,E=(V=1<<(D=q))-1,g===1&&852<V||g===2&&592<V)return 1;for(;;){for(U=y-tt,W=d[R]<O?(L=0,d[R]):d[R]>O?(L=at[ct+d[R]],A[Y+d[R]]):(L=96,0),v=1<<y-tt,e=k=1<<D;_[N+(I>>tt)+(k-=v)]=U<<24|L<<16|W|0,k!==0;);for(v=1<<y-1;I&v;)v>>=1;if(v!==0?(I&=v-1,I+=v):I=0,R++,--$[y]==0){if(y===T)break;y=u[b+d[R]]}if(q<y&&(I&E)!==C){for(tt===0&&(tt=q),N+=e,M=1<<(D=y-tt);D+tt<T&&!((M-=$[D+tt])<=0);)D++,M<<=1;if(V+=1<<D,g===1&&852<V||g===2&&592<V)return 1;_[C=I&E]=q<<24|D<<16|N-n|0}}return I!==0&&(_[N+I]=y-tt<<24|64<<16|0),h.bits=q,0}},{"../utils/common":41}],51:[function(r,w,m){w.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,w,m){var s=r("../utils/common"),a=0,i=1;function l(c){for(var x=c.length;0<=--x;)c[x]=0}var p=0,g=29,u=256,b=u+1+g,o=30,_=19,n=2*b+1,d=15,h=16,v=7,k=256,C=16,E=17,N=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(b+2));l(K);var y=new Array(2*o);l(y);var R=new Array(512);l(R);var e=new Array(256);l(e);var T=new Array(g);l(T);var q,D,tt,M=new Array(o);function V(c,x,F,j,S){this.static_tree=c,this.extra_bits=x,this.extra_base=F,this.elems=j,this.max_length=S,this.has_stree=c&&c.length}function I(c,x){this.dyn_tree=c,this.max_code=0,this.stat_desc=x}function A(c){return c<256?R[c]:R[256+(c>>>7)]}function Y(c,x){c.pending_buf[c.pending++]=255&x,c.pending_buf[c.pending++]=x>>>8&255}function $(c,x,F){c.bi_valid>h-F?(c.bi_buf|=x<<c.bi_valid&65535,Y(c,c.bi_buf),c.bi_buf=x>>h-c.bi_valid,c.bi_valid+=F-h):(c.bi_buf|=x<<c.bi_valid&65535,c.bi_valid+=F)}function G(c,x,F){$(c,F[2*x],F[2*x+1])}function at(c,x){for(var F=0;F|=1&c,c>>>=1,F<<=1,0<--x;);return F>>>1}function ct(c,x,F){var j,S,H=new Array(d+1),J=0;for(j=1;j<=d;j++)H[j]=J=J+F[j-1]<<1;for(S=0;S<=x;S++){var Z=c[2*S+1];Z!==0&&(c[2*S]=at(H[Z]++,Z))}}function et(c){var x;for(x=0;x<b;x++)c.dyn_ltree[2*x]=0;for(x=0;x<o;x++)c.dyn_dtree[2*x]=0;for(x=0;x<_;x++)c.bl_tree[2*x]=0;c.dyn_ltree[2*k]=1,c.opt_len=c.static_len=0,c.last_lit=c.matches=0}function nt(c){8<c.bi_valid?Y(c,c.bi_buf):0<c.bi_valid&&(c.pending_buf[c.pending++]=c.bi_buf),c.bi_buf=0,c.bi_valid=0}function ht(c,x,F,j){var S=2*x,H=2*F;return c[S]<c[H]||c[S]===c[H]&&j[x]<=j[F]}function ot(c,x,F){for(var j=c.heap[F],S=F<<1;S<=c.heap_len&&(S<c.heap_len&&ht(x,c.heap[S+1],c.heap[S],c.depth)&&S++,!ht(x,j,c.heap[S],c.depth));)c.heap[F]=c.heap[S],F=S,S<<=1;c.heap[F]=j}function ft(c,x,F){var j,S,H,J,Z=0;if(c.last_lit!==0)for(;j=c.pending_buf[c.d_buf+2*Z]<<8|c.pending_buf[c.d_buf+2*Z+1],S=c.pending_buf[c.l_buf+Z],Z++,j===0?G(c,S,x):(G(c,(H=e[S])+u+1,x),(J=O[H])!==0&&$(c,S-=T[H],J),G(c,H=A(--j),F),(J=U[H])!==0&&$(c,j-=M[H],J)),Z<c.last_lit;);G(c,k,x)}function ut(c,x){var F,j,S,H=x.dyn_tree,J=x.stat_desc.static_tree,Z=x.stat_desc.has_stree,X=x.stat_desc.elems,st=-1;for(c.heap_len=0,c.heap_max=n,F=0;F<X;F++)H[2*F]!==0?(c.heap[++c.heap_len]=st=F,c.depth[F]=0):H[2*F+1]=0;for(;c.heap_len<2;)H[2*(S=c.heap[++c.heap_len]=st<2?++st:0)]=1,c.depth[S]=0,c.opt_len--,Z&&(c.static_len-=J[2*S+1]);for(x.max_code=st,F=c.heap_len>>1;1<=F;F--)ot(c,H,F);for(S=X;F=c.heap[1],c.heap[1]=c.heap[c.heap_len--],ot(c,H,1),j=c.heap[1],c.heap[--c.heap_max]=F,c.heap[--c.heap_max]=j,H[2*S]=H[2*F]+H[2*j],c.depth[S]=(c.depth[F]>=c.depth[j]?c.depth[F]:c.depth[j])+1,H[2*F+1]=H[2*j+1]=S,c.heap[1]=S++,ot(c,H,1),2<=c.heap_len;);c.heap[--c.heap_max]=c.heap[1],(function(it,dt){var vt,pt,bt,lt,wt,Ct,mt=dt.dyn_tree,St=dt.max_code,Nt=dt.stat_desc.static_tree,Ft=dt.stat_desc.has_stree,jt=dt.stat_desc.extra_bits,At=dt.stat_desc.extra_base,yt=dt.stat_desc.max_length,kt=0;for(lt=0;lt<=d;lt++)it.bl_count[lt]=0;for(mt[2*it.heap[it.heap_max]+1]=0,vt=it.heap_max+1;vt<n;vt++)yt<(lt=mt[2*mt[2*(pt=it.heap[vt])+1]+1]+1)&&(lt=yt,kt++),mt[2*pt+1]=lt,St<pt||(it.bl_count[lt]++,wt=0,At<=pt&&(wt=jt[pt-At]),Ct=mt[2*pt],it.opt_len+=Ct*(lt+wt),Ft&&(it.static_len+=Ct*(Nt[2*pt+1]+wt)));if(kt!==0){do{for(lt=yt-1;it.bl_count[lt]===0;)lt--;it.bl_count[lt]--,it.bl_count[lt+1]+=2,it.bl_count[yt]--,kt-=2}while(0<kt);for(lt=yt;lt!==0;lt--)for(pt=it.bl_count[lt];pt!==0;)St<(bt=it.heap[--vt])||(mt[2*bt+1]!==lt&&(it.opt_len+=(lt-mt[2*bt+1])*mt[2*bt],mt[2*bt+1]=lt),pt--)}})(c,x),ct(H,st,c.bl_count)}function t(c,x,F){var j,S,H=-1,J=x[1],Z=0,X=7,st=4;for(J===0&&(X=138,st=3),x[2*(F+1)+1]=65535,j=0;j<=F;j++)S=J,J=x[2*(j+1)+1],++Z<X&&S===J||(Z<st?c.bl_tree[2*S]+=Z:S!==0?(S!==H&&c.bl_tree[2*S]++,c.bl_tree[2*C]++):Z<=10?c.bl_tree[2*E]++:c.bl_tree[2*N]++,H=S,st=(Z=0)===J?(X=138,3):S===J?(X=6,3):(X=7,4))}function P(c,x,F){var j,S,H=-1,J=x[1],Z=0,X=7,st=4;for(J===0&&(X=138,st=3),j=0;j<=F;j++)if(S=J,J=x[2*(j+1)+1],!(++Z<X&&S===J)){if(Z<st)for(;G(c,S,c.bl_tree),--Z!=0;);else S!==0?(S!==H&&(G(c,S,c.bl_tree),Z--),G(c,C,c.bl_tree),$(c,Z-3,2)):Z<=10?(G(c,E,c.bl_tree),$(c,Z-3,3)):(G(c,N,c.bl_tree),$(c,Z-11,7));H=S,st=(Z=0)===J?(X=138,3):S===J?(X=6,3):(X=7,4)}}l(M);var B=!1;function f(c,x,F,j){$(c,(p<<1)+(j?1:0),3),(function(S,H,J,Z){nt(S),Y(S,J),Y(S,~J),s.arraySet(S.pending_buf,S.window,H,J,S.pending),S.pending+=J})(c,x,F)}m._tr_init=function(c){B||((function(){var x,F,j,S,H,J=new Array(d+1);for(S=j=0;S<g-1;S++)for(T[S]=j,x=0;x<1<<O[S];x++)e[j++]=S;for(e[j-1]=S,S=H=0;S<16;S++)for(M[S]=H,x=0;x<1<<U[S];x++)R[H++]=S;for(H>>=7;S<o;S++)for(M[S]=H<<7,x=0;x<1<<U[S]-7;x++)R[256+H++]=S;for(F=0;F<=d;F++)J[F]=0;for(x=0;x<=143;)K[2*x+1]=8,x++,J[8]++;for(;x<=255;)K[2*x+1]=9,x++,J[9]++;for(;x<=279;)K[2*x+1]=7,x++,J[7]++;for(;x<=287;)K[2*x+1]=8,x++,J[8]++;for(ct(K,b+1,J),x=0;x<o;x++)y[2*x+1]=5,y[2*x]=at(x,5);q=new V(K,O,u+1,b,d),D=new V(y,U,0,o,d),tt=new V(new Array(0),L,0,_,v)})(),B=!0),c.l_desc=new I(c.dyn_ltree,q),c.d_desc=new I(c.dyn_dtree,D),c.bl_desc=new I(c.bl_tree,tt),c.bi_buf=0,c.bi_valid=0,et(c)},m._tr_stored_block=f,m._tr_flush_block=function(c,x,F,j){var S,H,J=0;0<c.level?(c.strm.data_type===2&&(c.strm.data_type=(function(Z){var X,st=4093624447;for(X=0;X<=31;X++,st>>>=1)if(1&st&&Z.dyn_ltree[2*X]!==0)return a;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return i;for(X=32;X<u;X++)if(Z.dyn_ltree[2*X]!==0)return i;return a})(c)),ut(c,c.l_desc),ut(c,c.d_desc),J=(function(Z){var X;for(t(Z,Z.dyn_ltree,Z.l_desc.max_code),t(Z,Z.dyn_dtree,Z.d_desc.max_code),ut(Z,Z.bl_desc),X=_-1;3<=X&&Z.bl_tree[2*W[X]+1]===0;X--);return Z.opt_len+=3*(X+1)+5+5+4,X})(c),S=c.opt_len+3+7>>>3,(H=c.static_len+3+7>>>3)<=S&&(S=H)):S=H=F+5,F+4<=S&&x!==-1?f(c,x,F,j):c.strategy===4||H===S?($(c,2+(j?1:0),3),ft(c,K,y)):($(c,4+(j?1:0),3),(function(Z,X,st,it){var dt;for($(Z,X-257,5),$(Z,st-1,5),$(Z,it-4,4),dt=0;dt<it;dt++)$(Z,Z.bl_tree[2*W[dt]+1],3);P(Z,Z.dyn_ltree,X-1),P(Z,Z.dyn_dtree,st-1)})(c,c.l_desc.max_code+1,c.d_desc.max_code+1,J+1),ft(c,c.dyn_ltree,c.dyn_dtree)),et(c),j&&nt(c)},m._tr_tally=function(c,x,F){return c.pending_buf[c.d_buf+2*c.last_lit]=x>>>8&255,c.pending_buf[c.d_buf+2*c.last_lit+1]=255&x,c.pending_buf[c.l_buf+c.last_lit]=255&F,c.last_lit++,x===0?c.dyn_ltree[2*F]++:(c.matches++,x--,c.dyn_ltree[2*(e[F]+u+1)]++,c.dyn_dtree[2*A(x)]++),c.last_lit===c.lit_bufsize-1},m._tr_align=function(c){$(c,2,3),G(c,k,K),(function(x){x.bi_valid===16?(Y(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)})(c)}},{"../utils/common":41}],53:[function(r,w,m){w.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,w,m){(function(s){(function(a,i){if(!a.setImmediate){var l,p,g,u,b=1,o={},_=!1,n=a.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(a);d=d&&d.setTimeout?d:a,l={}.toString.call(a.process)==="[object process]"?function(C){process.nextTick(function(){v(C)})}:(function(){if(a.postMessage&&!a.importScripts){var C=!0,E=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=E,C}})()?(u="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),function(C){a.postMessage(u+C,"*")}):a.MessageChannel?((g=new MessageChannel).port1.onmessage=function(C){v(C.data)},function(C){g.port2.postMessage(C)}):n&&"onreadystatechange"in n.createElement("script")?(p=n.documentElement,function(C){var E=n.createElement("script");E.onreadystatechange=function(){v(C),E.onreadystatechange=null,p.removeChild(E),E=null},p.appendChild(E)}):function(C){setTimeout(v,0,C)},d.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var E=new Array(arguments.length-1),N=0;N<E.length;N++)E[N]=arguments[N+1];var O={callback:C,args:E};return o[b]=O,l(b),b++},d.clearImmediate=h}function h(C){delete o[C]}function v(C){if(_)setTimeout(v,0,C);else{var E=o[C];if(E){_=!0;try{(function(N){var O=N.callback,U=N.args;switch(U.length){case 0:O();break;case 1:O(U[0]);break;case 2:O(U[0],U[1]);break;case 3:O(U[0],U[1],U[2]);break;default:O.apply(i,U)}})(E)}finally{h(C),_=!1}}}}function k(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(u)===0&&v(+C.data.slice(u.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof xt<"u"?xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(zt)),zt.exports}var Ht=Mt();const Wt=Ut(Ht);var Zt=Object.defineProperty,Gt=(rt,z,r)=>z in rt?Zt(rt,z,{enumerable:!0,configurable:!0,writable:!0,value:r}):rt[z]=r,Q=(rt,z,r)=>Gt(rt,typeof z!="symbol"?z+"":z,r);function $t(rt){return[rt[1],rt[0]]}function Jt(rt){if(rt.length===0)return[[0,0],[0,0]];let z=1/0,r=1/0,w=-1/0,m=-1/0;for(const[s,a]of rt)s<z&&(z=s),a<r&&(r=a),s>w&&(w=s),a>m&&(m=a);return[[z,r],[w,m]]}function Xt(rt,z){var r;const w=Object.values(rt).find(g=>{if(!Array.isArray(g)||g.length===0)return!1;const u=g[0];return typeof u=="object"&&u!==null&&"cameras"in u}),m=((r=rt.trajectories)==null?void 0:r[0])??w?.[0];if(!m||!m.cameras)return{cameras:[],lineFeature:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}},bounds:[[0,0],[0,0]]};const s=new Map;if(z&&z.length>0){const g=z[0].shots;for(const[u,b]of Object.entries(g))b.capture_time!==void 0&&s.set(u,b.capture_time)}const a=m.cameras.map(g=>{const u=$t(g.coordinates);return{id:g.id,coordinates:u,elevation:g.coordinates[2],rotation:g.rotation,captureTime:s.get(g.id)}});s.size>0&&a.sort((g,u)=>g.captureTime!==void 0&&u.captureTime!==void 0?g.captureTime-u.captureTime:0);const i=a.map(g=>g.coordinates),l={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}},p=Jt(a.map(g=>g.coordinates));return{cameras:a,lineFeature:l,bounds:p}}function Bt(rt,z=-1){return{type:"FeatureCollection",features:rt.map((r,w)=>({type:"Feature",properties:{id:r.id,index:w,elevation:r.elevation,captureTime:r.captureTime??null,selected:w===z},geometry:{type:"Point",coordinates:r.coordinates}}))}}async function Yt(rt){let z=null,r=null,w=null,m=null;const s=rt;for await(const[p,g]of s)if(g.kind==="file"){if(p==="trajectory.geojson"){const u=await g.getFile();z=JSON.parse(await u.text())}else if(!z&&p.endsWith(".geojson")&&p!=="objects.geojson"){const u=await g.getFile();z=JSON.parse(await u.text())}else if(p==="trajectory.json"){const u=await g.getFile();r=JSON.parse(await u.text())}else if(!r&&p.endsWith(".json")&&p!=="trajectory.json"){const u=await g.getFile();r=JSON.parse(await u.text())}else if(p==="objects.geojson"){const u=await g.getFile();w=JSON.parse(await u.text())}}else g.kind==="directory"&&p==="images"&&(m=g);const a=new Map;if(m){const p=m;for await(const[g,u]of p)u.kind==="file"&&a.set(g,u)}const i=new Set,l=async p=>{const g=a.get(p);if(!g)return null;const u=await g.getFile(),b=URL.createObjectURL(u);return i.add(b),b};return l.cleanup=()=>{for(const p of i)URL.revokeObjectURL(p);i.clear()},{trajectoryGeojson:z,trajectoryJson:r,objectsGeojson:w,imageResolver:l}}async function Lt(rt){var z,r;const w=await Wt.loadAsync(rt);let m=null,s=null,a=null;const i=Object.keys(w.files);let l="";if(i.length>0){const n=i[0].indexOf("/");if(n>0){const d=i[0].substring(0,n+1);i.every(v=>v.startsWith(d)||v===d.slice(0,-1))&&(l=d)}}const p=w.file(l+"trajectory.geojson")??((z=Object.entries(w.files).find(([n,d])=>{if(d.dir||!n.startsWith(l))return!1;const h=n.slice(l.length);return!!h&&h.endsWith(".geojson")&&h!=="objects.geojson"}))==null?void 0:z[1]);p&&(m=JSON.parse(await p.async("text")));const g=w.file(l+"trajectory.json")??((r=Object.entries(w.files).find(([n,d])=>{if(d.dir||!n.startsWith(l))return!1;const h=n.slice(l.length);return!!h&&h.endsWith(".json")&&!h.endsWith(".geojson")&&h!=="trajectory.json"}))==null?void 0:r[1]);g&&(s=JSON.parse(await g.async("text")));const u=w.file(l+"objects.geojson");u&&(a=JSON.parse(await u.async("text")));const b=new Map,o=l+"images/";for(const[n,d]of Object.entries(w.files))if(n.startsWith(o)&&!d.dir){const h=n.substring(o.length);if(h&&(h.endsWith(".jpg")||h.endsWith(".jpeg")||h.endsWith(".png"))){const v=await d.async("blob");b.set(h,URL.createObjectURL(v))}}const _=async n=>b.get(n)??null;return _.cleanup=()=>{for(const n of b.values())URL.revokeObjectURL(n);b.clear()},{trajectoryGeojson:m,trajectoryJson:s,objectsGeojson:a,imageResolver:_}}async function Kt(rt,z,r,w){const[m,s,a]=await Promise.all([fetch(rt).then(l=>l.json()),z?fetch(z).then(l=>l.json()):Promise.resolve(null),r?fetch(r).then(l=>l.json()):Promise.resolve(null)]),i=async l=>w?`${w}/${l}`:null;return i.cleanup=()=>{},{trajectoryGeojson:m,trajectoryJson:s,objectsGeojson:a,imageResolver:i}}const gt='viewBox="0 0 24 24" width="14" height="14" fill="currentColor" stroke="none"',Vt=`<svg ${gt}><rect x="3" y="5" width="3" height="14" rx="1"/><path d="M10 5.5v13a1 1 0 0 0 1.5.86l10-6.5a1 1 0 0 0 0-1.72l-10-6.5A1 1 0 0 0 10 5.5z" transform="scale(-1,1) translate(-24,0)"/></svg>`,qt=`<svg ${gt}><path d="M7 12l11-7v14z"/></svg>`,Ot=`<svg ${gt}><path d="M6 4.5v15a1 1 0 0 0 1.5.86l12-7.5a1 1 0 0 0 0-1.72l-12-7.5A1 1 0 0 0 6 4.5z"/></svg>`,Qt=`<svg ${gt}><rect x="5" y="4" width="5" height="16" rx="1"/><rect x="14" y="4" width="5" height="16" rx="1"/></svg>`,te=`<svg ${gt}><path d="M17 12L6 5v14z"/></svg>`,ee=`<svg ${gt}><path d="M10 5.5v13a1 1 0 0 0 1.5.86l10-6.5a1 1 0 0 0 0-1.72l-10-6.5A1 1 0 0 0 10 5.5z"/><rect x="18" y="5" width="3" height="14" rx="1"/></svg>`,ie={collapsed:!0,position:"top-right",title:"GeoPhoto",panelWidth:360,maxHeight:500,className:"",showPath:!0,showPathDirectionArrows:!1,pathDirectionArrowSpacing:48,pathDirectionArrowSize:11,pathDirectionArrowColor:"#4a90d9",preloadUrl:"",fitBoundsOnLoad:!0,fitBoundsPadding:50,showObjects:!0,pathColor:"#4a90d9",pointColor:"#4a90d9",selectedPointColor:"#f97316",imageFadeDuration:300};class re{constructor(z){Q(this,"_map"),Q(this,"_mapContainer"),Q(this,"_container"),Q(this,"_panel"),Q(this,"_options"),Q(this,"_state"),Q(this,"_eventHandlers",new globalThis.Map),Q(this,"_resizeHandler",null),Q(this,"_mapResizeHandler",null),Q(this,"_clickOutsideHandler",null),Q(this,"_resizeHandleEl"),Q(this,"_isResizing",!1),Q(this,"_resizeStartX",0),Q(this,"_resizeStartWidth",0),Q(this,"_resizeMouseMoveHandler",null),Q(this,"_resizeMouseUpHandler",null),Q(this,"_cameras",[]),Q(this,"_currentIndex",-1),Q(this,"_imageResolver",null),Q(this,"_isPlaying",!1),Q(this,"_playTimer",null),Q(this,"_playIntervalMs",1e3),Q(this,"_filePickerEl"),Q(this,"_viewerEl"),Q(this,"_loadingEl"),Q(this,"_imageEl"),Q(this,"_imageElBack"),Q(this,"_imagePlaceholder"),Q(this,"_coordsEl"),Q(this,"_elevEl"),Q(this,"_timeEl"),Q(this,"_counterEl"),Q(this,"_firstBtn"),Q(this,"_prevBtn"),Q(this,"_nextBtn"),Q(this,"_lastBtn"),Q(this,"_playBtn"),Q(this,"_lightboxEl"),Q(this,"_lightboxImg"),this._options={...ie,...z},z?.pathDirectionArrowColor===void 0&&(this._options.pathDirectionArrowColor=this._options.pathColor),this._state={collapsed:this._options.collapsed,panelWidth:this._options.panelWidth,data:{}}}onAdd(z){return this._map=z,this._mapContainer=z.getContainer(),this._container=this._createContainer(),this._panel=this._createPanel(),this._setupResizeHandle(),this._mapContainer.appendChild(this._panel),this._setupEventListeners(),this._state.collapsed||(this._panel.classList.add("expanded"),requestAnimationFrame(()=>this._updatePanelPosition())),this._options.preloadUrl&&this._loadZipFromUrl(this._options.preloadUrl),this._container}onRemove(){var z,r,w,m,s,a;this.stop(),this._cleanupMapLayers(),this._revokeBlobs(),(r=(z=this._lightboxEl)==null?void 0:z.parentNode)==null||r.removeChild(this._lightboxEl),this._resizeHandler&&(window.removeEventListener("resize",this._resizeHandler),this._resizeHandler=null),this._mapResizeHandler&&this._map&&(this._map.off("resize",this._mapResizeHandler),this._mapResizeHandler=null),this._clickOutsideHandler&&(document.removeEventListener("click",this._clickOutsideHandler),this._clickOutsideHandler=null),this._resizeMouseMoveHandler&&(document.removeEventListener("mousemove",this._resizeMouseMoveHandler),this._resizeMouseMoveHandler=null),this._resizeMouseUpHandler&&(document.removeEventListener("mouseup",this._resizeMouseUpHandler),this._resizeMouseUpHandler=null),(m=(w=this._panel)==null?void 0:w.parentNode)==null||m.removeChild(this._panel),(a=(s=this._container)==null?void 0:s.parentNode)==null||a.removeChild(this._container),this._map=void 0,this._mapContainer=void 0,this._container=void 0,this._panel=void 0,this._eventHandlers.clear()}getState(){return{...this._state}}setState(z){this._state={...this._state,...z},this._emit("statechange")}toggle(){this._state.collapsed=!this._state.collapsed,this._panel&&(this._state.collapsed?(this._panel.classList.remove("expanded"),this._emit("collapse")):(this._panel.classList.add("expanded"),this._updatePanelPosition(),this._emit("expand"))),this._emit("statechange")}expand(){this._state.collapsed&&this.toggle()}collapse(){this._state.collapsed||this.toggle()}on(z,r){this._eventHandlers.has(z)||this._eventHandlers.set(z,new Set),this._eventHandlers.get(z).add(r)}off(z,r){var w;(w=this._eventHandlers.get(z))==null||w.delete(r)}async openFolder(){try{const z=await window.showDirectoryPicker();this._showLoading("Loading folder...");const r=await Yt(z);await this._processLoadedData(r)}catch(z){if(z.name==="AbortError")return;console.error("Failed to load folder:",z),this._showFilePicker()}}async openZip(z){try{this._showLoading("Extracting ZIP...");const r=await Lt(z);await this._processLoadedData(r)}catch(r){console.error("Failed to load ZIP:",r),this._showFilePicker()}}async loadFromUrls(z,r,w,m){try{this._showLoading("Loading data...");const s=await Kt(z,r,w,m);await this._processLoadedData(s)}catch(s){console.error("Failed to load URLs:",s),this._showFilePicker()}}async loadZipFromUrl(z){await this._loadZipFromUrl(z)}selectCamera(z){z<0||z>=this._cameras.length||(this._currentIndex=z,this._updateViewer(),this._updateMapSelection(),this._emit("cameraselect"))}nextCamera(){this._currentIndex<this._cameras.length-1&&this.selectCamera(this._currentIndex+1)}prevCamera(){this._currentIndex>0&&this.selectCamera(this._currentIndex-1)}firstCamera(){this._cameras.length>0&&this.selectCamera(0)}lastCamera(){this._cameras.length>0&&this.selectCamera(this._cameras.length-1)}play(){this._isPlaying||this._cameras.length===0||(this._isPlaying=!0,this._updatePlayButton(),this._playTimer=setInterval(()=>{this._currentIndex<this._cameras.length-1?this.selectCamera(this._currentIndex+1):this.stop()},this._playIntervalMs))}stop(){this._isPlaying&&(this._isPlaying=!1,this._playTimer&&(clearInterval(this._playTimer),this._playTimer=null),this._updatePlayButton())}togglePlay(){this._isPlaying?this.stop():this.play()}getCameras(){return[...this._cameras]}getCurrentCamera(){return this._cameras[this._currentIndex]??null}clearData(){this.stop(),this._cleanupMapLayers(),this._revokeBlobs(),this._cameras=[],this._currentIndex=-1,this._imageResolver=null,this._showFilePicker(),this._emit("datacleared")}getMap(){return this._map}getContainer(){return this._container}_emit(z){const r=this._eventHandlers.get(z);if(r){const w={type:z,state:this.getState(),camera:this.getCurrentCamera()??void 0,cameraIndex:this._currentIndex>=0?this._currentIndex:void 0};r.forEach(m=>m(w))}}_createContainer(){const z=document.createElement("div");z.className=`maplibregl-ctrl maplibregl-ctrl-group plugin-control${this._options.className?` ${this._options.className}`:""}`;const r=document.createElement("button");return r.className="plugin-control-toggle",r.type="button",r.setAttribute("aria-label",this._options.title),r.innerHTML=`
      <span class="plugin-control-icon">
        <svg viewBox="0 0 24 24" width="22" height="22" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="2" y="4" width="15" height="16" rx="2" ry="2"/>
          <polygon points="17 8 22 5.5 22 18.5 17 16"/>
        </svg>
      </span>
    `,r.addEventListener("click",()=>this.toggle()),z.appendChild(r),z}_createPanel(){const z=document.createElement("div");z.className="plugin-control-panel geophoto-panel",z.style.width=`${this._options.panelWidth}px`,z.style.maxHeight=`${this._options.maxHeight}px`;const r=document.createElement("div");r.className="plugin-control-header";const w=document.createElement("span");w.className="plugin-control-title",w.textContent=this._options.title;const m=document.createElement("button");m.className="plugin-control-close",m.type="button",m.setAttribute("aria-label","Close panel"),m.innerHTML="&times;",m.addEventListener("click",()=>this.collapse()),r.appendChild(w),r.appendChild(m);const s=document.createElement("div");s.className="plugin-control-content",this._filePickerEl=this._createFilePicker(),s.appendChild(this._filePickerEl),this._loadingEl=this._createLoadingEl(),this._loadingEl.style.display="none",s.appendChild(this._loadingEl),this._viewerEl=this._createViewer(),this._viewerEl.style.display="none",s.appendChild(this._viewerEl),z.appendChild(r),z.appendChild(s),this._resizeHandleEl=document.createElement("div");const a=this._options.position==="top-right"||this._options.position==="bottom-right";return this._resizeHandleEl.className=`geophoto-resize-handle ${a?"geophoto-resize-handle-left":"geophoto-resize-handle-right"}`,z.appendChild(this._resizeHandleEl),z}_createFilePicker(){const z=document.createElement("div");z.className="geophoto-file-picker";const r=document.createElement("p");r.className="geophoto-instructions",r.textContent="Select a folder, ZIP file, or HTTP ZIP URL containing trajectory data";const w=document.createElement("button");w.className="geophoto-btn",w.type="button",w.innerHTML='<span class="geophoto-btn-icon">&#128193;</span> Open Folder',w.addEventListener("click",()=>this.openFolder());const m=document.createElement("div");m.className="geophoto-file-divider",m.textContent="or";const s=document.createElement("button");s.className="geophoto-btn",s.type="button",s.innerHTML='<span class="geophoto-btn-icon">&#128230;</span> Open ZIP File';const a=document.createElement("input");a.type="file",a.accept=".zip",a.style.display="none",a.addEventListener("change",()=>{var o;const _=(o=a.files)==null?void 0:o[0];_&&this.openZip(_),a.value=""}),s.addEventListener("click",()=>{a.click()});const i=document.createElement("div");i.className="geophoto-file-divider",i.textContent="or";const l=document.createElement("button");l.className="geophoto-btn",l.type="button",l.innerHTML='<span class="geophoto-btn-icon">&#127760;</span> Load from URL';const p=document.createElement("div");p.className="geophoto-url-panel",p.hidden=!0;const g=document.createElement("form");g.className="geophoto-url-form";const u=document.createElement("input");u.className="geophoto-url-input",u.type="url",u.inputMode="url",u.placeholder="https://example.com/dataset.zip",u.value=this._options.preloadUrl||"",u.setAttribute("aria-label","ZIP file URL");const b=document.createElement("button");return b.className="geophoto-btn geophoto-url-submit",b.type="submit",b.innerHTML='<span class="geophoto-btn-icon">&#11015;</span> Load ZIP URL',g.addEventListener("submit",o=>{o.preventDefault();const _=u.value.trim();_&&this.loadZipFromUrl(_)}),l.addEventListener("click",()=>{p.hidden=!p.hidden,l.setAttribute("aria-expanded",String(!p.hidden)),p.hidden||requestAnimationFrame(()=>u.focus())}),l.setAttribute("aria-expanded","false"),g.appendChild(u),g.appendChild(b),p.appendChild(g),z.appendChild(r),z.appendChild(w),z.appendChild(m),z.appendChild(s),z.appendChild(i),z.appendChild(l),z.appendChild(p),z.appendChild(a),z}_createLoadingEl(){const z=document.createElement("div");z.className="geophoto-loading";const r=document.createElement("div");r.className="geophoto-spinner";const w=document.createElement("p");return w.className="geophoto-loading-text",w.textContent="Loading...",z.appendChild(r),z.appendChild(w),z}_createViewer(){const z=document.createElement("div");z.className="geophoto-viewer";const r=document.createElement("div");r.className="geophoto-image-container",this._imageElBack=document.createElement("img"),this._imageElBack.className="geophoto-image geophoto-image-back",this._imageElBack.alt="",this._imageEl=document.createElement("img"),this._imageEl.className="geophoto-image geophoto-image-front",this._imageEl.alt="Streetview photo";const w=this._options.imageFadeDuration;w>0&&(this._imageEl.style.transitionDuration=`${w}ms`),this._imagePlaceholder=document.createElement("div"),this._imagePlaceholder.className="geophoto-image-loading",this._imagePlaceholder.innerHTML='<div class="geophoto-spinner"></div>',this._imagePlaceholder.style.display="none";const m=document.createElement("button");m.className="geophoto-expand-btn",m.type="button",m.setAttribute("aria-label","Enlarge image"),m.innerHTML='<svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/></svg>',m.addEventListener("click",()=>this._openLightbox()),r.appendChild(this._imageElBack),r.appendChild(this._imageEl),r.appendChild(this._imagePlaceholder),r.appendChild(m),this._imageEl.addEventListener("click",()=>this._openLightbox()),this._imageEl.style.cursor="zoom-in";const s=document.createElement("div");s.className="geophoto-metadata";const a=this._createMetadataRow("Coords:");this._coordsEl=a.querySelector(".geophoto-metadata-value");const i=this._createMetadataRow("Elevation:");this._elevEl=i.querySelector(".geophoto-metadata-value");const l=this._createMetadataRow("Time:");this._timeEl=l.querySelector(".geophoto-metadata-value"),s.appendChild(a),s.appendChild(i),s.appendChild(l);const p=document.createElement("div");p.className="geophoto-nav",this._firstBtn=document.createElement("button"),this._firstBtn.className="geophoto-nav-btn geophoto-nav-btn-icon",this._firstBtn.type="button",this._firstBtn.setAttribute("aria-label","First image"),this._firstBtn.innerHTML=Vt,this._firstBtn.addEventListener("click",()=>this.firstCamera()),this._prevBtn=document.createElement("button"),this._prevBtn.className="geophoto-nav-btn geophoto-nav-btn-icon",this._prevBtn.type="button",this._prevBtn.setAttribute("aria-label","Previous image"),this._prevBtn.innerHTML=qt,this._prevBtn.addEventListener("click",()=>this.prevCamera()),this._playBtn=document.createElement("button"),this._playBtn.className="geophoto-nav-btn geophoto-play-btn",this._playBtn.type="button",this._playBtn.setAttribute("aria-label","Play sequence"),this._playBtn.innerHTML=Ot,this._playBtn.addEventListener("click",()=>this.togglePlay()),this._counterEl=document.createElement("span"),this._counterEl.className="geophoto-nav-counter",this._counterEl.textContent="0 / 0",this._nextBtn=document.createElement("button"),this._nextBtn.className="geophoto-nav-btn geophoto-nav-btn-icon",this._nextBtn.type="button",this._nextBtn.setAttribute("aria-label","Next image"),this._nextBtn.innerHTML=te,this._nextBtn.addEventListener("click",()=>this.nextCamera()),this._lastBtn=document.createElement("button"),this._lastBtn.className="geophoto-nav-btn geophoto-nav-btn-icon",this._lastBtn.type="button",this._lastBtn.setAttribute("aria-label","Last image"),this._lastBtn.innerHTML=ee,this._lastBtn.addEventListener("click",()=>this.lastCamera()),p.appendChild(this._firstBtn),p.appendChild(this._prevBtn),p.appendChild(this._playBtn),p.appendChild(this._counterEl),p.appendChild(this._nextBtn),p.appendChild(this._lastBtn);const g=document.createElement("div");g.className="geophoto-actions";const u=document.createElement("button");return u.className="geophoto-btn-small",u.type="button",u.textContent="Load Different Data",u.addEventListener("click",()=>this.clearData()),g.appendChild(u),z.appendChild(r),z.appendChild(s),z.appendChild(p),z.appendChild(g),z}_createMetadataRow(z){const r=document.createElement("div");r.className="geophoto-metadata-row";const w=document.createElement("span");w.className="geophoto-metadata-label",w.textContent=z;const m=document.createElement("span");return m.className="geophoto-metadata-value",m.textContent="-",r.appendChild(w),r.appendChild(m),r}_showFilePicker(){this._filePickerEl&&(this._filePickerEl.style.display=""),this._loadingEl&&(this._loadingEl.style.display="none"),this._viewerEl&&(this._viewerEl.style.display="none")}_showLoading(z){if(this._filePickerEl&&(this._filePickerEl.style.display="none"),this._loadingEl){this._loadingEl.style.display="";const r=this._loadingEl.querySelector(".geophoto-loading-text");r&&(r.textContent=z)}this._viewerEl&&(this._viewerEl.style.display="none"),this._state.collapsed&&this.expand()}_showViewer(){this._filePickerEl&&(this._filePickerEl.style.display="none"),this._loadingEl&&(this._loadingEl.style.display="none"),this._viewerEl&&(this._viewerEl.style.display="")}async _processLoadedData(z){if(this._revokeBlobs(),!z.trajectoryGeojson){console.warn("No trajectory.geojson file found"),this._showFilePicker();return}const r=Xt(z.trajectoryGeojson,z.trajectoryJson);if(this._cameras=r.cameras,this._imageResolver=z.imageResolver,this._cameras.length===0){console.warn("No cameras found in trajectory data"),this._showFilePicker();return}this._setupMapLayers(r),z.objectsGeojson&&this._options.showObjects&&this._setupObjectsLayer(z.objectsGeojson),this._setupMapInteractions(),this._showViewer(),this.selectCamera(0),this._options.fitBoundsOnLoad&&this._map&&this._map.fitBounds(r.bounds,{padding:this._options.fitBoundsPadding}),this._emit("dataloaded")}async _loadZipFromUrl(z){try{this._showLoading("Loading ZIP from URL...");const r=await fetch(z);if(!r.ok)throw new Error(`HTTP ${r.status} while fetching ZIP`);const w=await r.blob(),s=new URL(z,window.location.href).pathname.split("/").pop()||"dataset.zip",a=new File([w],s,{type:w.type||"application/zip"}),i=await Lt(a);await this._processLoadedData(i)}catch(r){console.error("Failed to load ZIP from URL:",r),this._showFilePicker()}}_setupMapLayers(z){this._map&&(this._map.addSource("geophoto-cameras",{type:"geojson",data:Bt(this._cameras,-1)}),this._options.showPath&&(this._map.addSource("geophoto-path",{type:"geojson",data:z.lineFeature}),this._map.addLayer({id:"geophoto-path-line",type:"line",source:"geophoto-path",paint:{"line-color":this._options.pathColor,"line-width":2,"line-dasharray":[2,2],"line-opacity":.7}}),this._options.showPathDirectionArrows&&this._map.addLayer({id:"geophoto-path-arrows",type:"symbol",source:"geophoto-path",layout:{"symbol-placement":"line","symbol-spacing":this._options.pathDirectionArrowSpacing,"text-field":"","text-size":this._options.pathDirectionArrowSize,"text-keep-upright":!1,"text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":this._options.pathDirectionArrowColor,"text-opacity":.9,"text-halo-color":"#ffffff","text-halo-width":1}})),this._map.addLayer({id:"geophoto-cameras-points",type:"circle",source:"geophoto-cameras",paint:{"circle-radius":6,"circle-color":this._options.pointColor,"circle-stroke-width":2,"circle-stroke-color":"#ffffff","circle-opacity":.9}}),this._map.addLayer({id:"geophoto-cameras-selected",type:"circle",source:"geophoto-cameras",filter:["==",["get","selected"],!0],paint:{"circle-radius":9,"circle-color":this._options.selectedPointColor,"circle-stroke-width":2,"circle-stroke-color":"#ffffff"}}))}_setupObjectsLayer(z){this._map&&(this._map.addSource("geophoto-objects",{type:"geojson",data:z}),this._map.addLayer({id:"geophoto-objects-points",type:"circle",source:"geophoto-objects",paint:{"circle-radius":5,"circle-color":"#ef4444","circle-stroke-width":1.5,"circle-stroke-color":"#ffffff","circle-opacity":.8}}),this._map.addLayer({id:"geophoto-objects-labels",type:"symbol",source:"geophoto-objects",layout:{"text-field":["get","label"],"text-size":11,"text-offset":[0,1.5],"text-anchor":"top","text-optional":!0},paint:{"text-color":"#ef4444","text-halo-color":"#ffffff","text-halo-width":1}}))}_setupMapInteractions(){this._map&&(this._map.on("click","geophoto-cameras-points",z=>{var r;const w=z;if(w.originalEvent&&w.originalEvent.stopPropagation(),w.features&&w.features.length>0){const m=(r=w.features[0].properties)==null?void 0:r.index;typeof m=="number"&&(this.stop(),this.selectCamera(m),this._state.collapsed&&this.expand())}}),this._map.on("mouseenter","geophoto-cameras-points",()=>{this._map&&(this._map.getCanvas().style.cursor="pointer")}),this._map.on("mouseleave","geophoto-cameras-points",()=>{this._map&&(this._map.getCanvas().style.cursor="")}),this._map.getLayer("geophoto-objects-points")&&(this._map.on("mouseenter","geophoto-objects-points",()=>{this._map&&(this._map.getCanvas().style.cursor="pointer")}),this._map.on("mouseleave","geophoto-objects-points",()=>{this._map&&(this._map.getCanvas().style.cursor="")})))}_cleanupMapLayers(){if(!this._map)return;const z=["geophoto-cameras-selected","geophoto-cameras-points","geophoto-path-arrows","geophoto-path-line","geophoto-objects-labels","geophoto-objects-points"];for(const w of z)this._map.getLayer(w)&&this._map.removeLayer(w);const r=["geophoto-cameras","geophoto-path","geophoto-objects"];for(const w of r)this._map.getSource(w)&&this._map.removeSource(w)}async _updateViewer(){var z;const r=this._cameras[this._currentIndex];if(r){if(this._coordsEl&&(this._coordsEl.textContent=`${r.coordinates[1].toFixed(6)}, ${r.coordinates[0].toFixed(6)}`),this._elevEl&&(this._elevEl.textContent=`${r.elevation.toFixed(1)} m`),this._timeEl)if(r.captureTime){const w=new Date(r.captureTime*1e3);this._timeEl.textContent=w.toISOString().replace("T"," ").substring(0,19)}else this._timeEl.textContent="-";if(this._counterEl&&(this._counterEl.textContent=`${this._currentIndex+1} / ${this._cameras.length}`),this._firstBtn&&(this._firstBtn.disabled=this._currentIndex<=0),this._prevBtn&&(this._prevBtn.disabled=this._currentIndex<=0),this._nextBtn&&(this._nextBtn.disabled=this._currentIndex>=this._cameras.length-1),this._lastBtn&&(this._lastBtn.disabled=this._currentIndex>=this._cameras.length-1),this._imageEl&&this._imageResolver){this._imagePlaceholder&&(this._imagePlaceholder.style.display="");const w=this._currentIndex,s=this._options.imageFadeDuration>0&&this._imageElBack&&this._imageEl.src;s&&this._imageElBack&&(this._imageElBack.src=this._imageEl.src,this._imageEl.classList.add("geophoto-image-fade-out"));try{const a=await this._imageResolver(r.id);a&&this._currentIndex===w&&(this._imageEl.src=a,this._lightboxImg&&((z=this._lightboxEl)!=null&&z.classList.contains("geophoto-lightbox-open"))&&(this._lightboxImg.src=a),this._imageEl.onload=()=>{this._imagePlaceholder&&(this._imagePlaceholder.style.display="none"),s&&this._imageEl&&(this._imageEl.offsetWidth,this._imageEl.classList.remove("geophoto-image-fade-out"))},this._imageEl.onerror=()=>{this._imagePlaceholder&&(this._imagePlaceholder.style.display="none"),this._imageEl&&this._imageEl.classList.remove("geophoto-image-fade-out")})}catch{this._imagePlaceholder&&(this._imagePlaceholder.style.display="none"),this._imageEl&&this._imageEl.classList.remove("geophoto-image-fade-out")}}}}_updateMapSelection(){if(!this._map||!this._map.getSource("geophoto-cameras"))return;this._map.getSource("geophoto-cameras").setData(Bt(this._cameras,this._currentIndex));const r=this._cameras[this._currentIndex];r&&this._map.panTo(r.coordinates)}_updatePlayButton(){this._playBtn&&(this._isPlaying?(this._playBtn.innerHTML=Qt,this._playBtn.setAttribute("aria-label","Pause sequence"),this._playBtn.classList.add("geophoto-playing")):(this._playBtn.innerHTML=Ot,this._playBtn.setAttribute("aria-label","Play sequence"),this._playBtn.classList.remove("geophoto-playing")))}_openLightbox(){if(!(!this._imageEl||!this._imageEl.src)){if(!this._lightboxEl){this._lightboxEl=document.createElement("div"),this._lightboxEl.className="geophoto-lightbox";const z=document.createElement("button");z.className="geophoto-lightbox-close",z.type="button",z.innerHTML="&times;",z.addEventListener("click",()=>this._closeLightbox()),this._lightboxImg=document.createElement("img"),this._lightboxImg.className="geophoto-lightbox-img",this._lightboxImg.alt="Enlarged streetview photo";const r=document.createElement("div");r.className="geophoto-lightbox-nav";const w=document.createElement("button");w.className="geophoto-lightbox-nav-btn",w.type="button",w.innerHTML="",w.addEventListener("click",s=>{s.stopPropagation(),this.prevCamera()});const m=document.createElement("button");m.className="geophoto-lightbox-nav-btn",m.type="button",m.innerHTML="",m.addEventListener("click",s=>{s.stopPropagation(),this.nextCamera()}),r.appendChild(w),r.appendChild(m),this._lightboxEl.appendChild(z),this._lightboxEl.appendChild(this._lightboxImg),this._lightboxEl.appendChild(r),this._lightboxEl.addEventListener("click",s=>{s.target===this._lightboxEl&&this._closeLightbox()}),this._lightboxEl.addEventListener("keydown",s=>{s.key==="Escape"&&this._closeLightbox(),s.key==="ArrowLeft"&&this.prevCamera(),s.key==="ArrowRight"&&this.nextCamera()}),document.body.appendChild(this._lightboxEl)}this._lightboxImg.src=this._imageEl.src,this._lightboxEl.classList.add("geophoto-lightbox-open"),this._lightboxEl.focus(),this._lightboxEl.setAttribute("tabindex","-1")}}_closeLightbox(){this._lightboxEl&&this._lightboxEl.classList.remove("geophoto-lightbox-open")}_revokeBlobs(){var z;(z=this._imageResolver)!=null&&z.cleanup&&this._imageResolver.cleanup()}_setupResizeHandle(){!this._resizeHandleEl||!this._panel||this._resizeHandleEl.addEventListener("mousedown",z=>{var r;z.preventDefault(),z.stopPropagation(),this._isResizing=!0,this._resizeStartX=z.clientX,this._resizeStartWidth=((r=this._panel)==null?void 0:r.offsetWidth)??this._options.panelWidth,document.body.style.userSelect="none",document.body.style.cursor="col-resize",this._resizeMouseMoveHandler=w=>{if(!this._isResizing||!this._panel)return;w.preventDefault();const m=this._getControlPosition(),s=m==="top-right"||m==="bottom-right",a=w.clientX-this._resizeStartX,i=s?this._resizeStartWidth-a:this._resizeStartWidth+a,l=Math.max(240,Math.min(i,1e3));this._panel.style.width=`${l}px`,this._state.panelWidth=l},this._resizeMouseUpHandler=()=>{this._isResizing=!1,document.body.style.userSelect="",document.body.style.cursor="",this._resizeMouseMoveHandler&&(document.removeEventListener("mousemove",this._resizeMouseMoveHandler),this._resizeMouseMoveHandler=null),this._resizeMouseUpHandler&&(document.removeEventListener("mouseup",this._resizeMouseUpHandler),this._resizeMouseUpHandler=null)},document.addEventListener("mousemove",this._resizeMouseMoveHandler),document.addEventListener("mouseup",this._resizeMouseUpHandler)})}_setupEventListeners(){var z;this._clickOutsideHandler=r=>{const w=r.target;w.isConnected&&this._container&&this._panel&&!this._container.contains(w)&&!this._panel.contains(w)&&!(this._mapContainer&&this._mapContainer.contains(w))&&!(this._lightboxEl&&this._lightboxEl.contains(w))&&this.collapse()},document.addEventListener("click",this._clickOutsideHandler),this._resizeHandler=()=>{this._state.collapsed||this._updatePanelPosition()},window.addEventListener("resize",this._resizeHandler),this._mapResizeHandler=()=>{this._state.collapsed||this._updatePanelPosition()},(z=this._map)==null||z.on("resize",this._mapResizeHandler)}_getControlPosition(){var z;const r=(z=this._container)==null?void 0:z.parentElement;return r?r.classList.contains("maplibregl-ctrl-top-left")?"top-left":r.classList.contains("maplibregl-ctrl-top-right")?"top-right":r.classList.contains("maplibregl-ctrl-bottom-left")?"bottom-left":r.classList.contains("maplibregl-ctrl-bottom-right")?"bottom-right":"top-right":"top-right"}_updatePanelPosition(){if(!this._container||!this._panel||!this._mapContainer)return;const z=this._container.querySelector(".plugin-control-toggle");if(!z)return;const r=z.getBoundingClientRect(),w=this._mapContainer.getBoundingClientRect(),m=this._getControlPosition();if(this._resizeHandleEl){const g=m==="top-right"||m==="bottom-right";this._resizeHandleEl.classList.toggle("geophoto-resize-handle-left",g),this._resizeHandleEl.classList.toggle("geophoto-resize-handle-right",!g)}const s=r.top-w.top,a=w.bottom-r.bottom,i=r.left-w.left,l=w.right-r.right,p=5;switch(this._panel.style.top="",this._panel.style.bottom="",this._panel.style.left="",this._panel.style.right="",m){case"top-left":this._panel.style.top=`${s+r.height+p}px`,this._panel.style.left=`${i}px`;break;case"top-right":this._panel.style.top=`${s+r.height+p}px`,this._panel.style.right=`${l}px`;break;case"bottom-left":this._panel.style.bottom=`${a+r.height+p}px`,this._panel.style.left=`${i}px`;break;case"bottom-right":this._panel.style.bottom=`${a+r.height+p}px`,this._panel.style.right=`${l}px`;break}}}const Tt="https://tiles.openfreemap.org/styles/liberty",Rt="google-satellite",ne="satellite",se="https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",_t=new Pt.Map({container:"map",style:Tt,center:[-122.274,47.671],zoom:15,maxZoom:30,maxPitch:85});_t.addControl(new Pt.NavigationControl,"top-right");const ae=new Dt({collapsed:!0,layers:[],panelWidth:340,panelMinWidth:240,panelMaxWidth:450,basemapStyleUrl:Tt});_t.addControl(ae,"top-right");_t.on("load",()=>{_t.addSource(Rt,{type:"raster",tiles:[se],tileSize:256}),_t.addLayer({id:ne,type:"raster",source:Rt});const rt=new re({title:"GeoPhoto",collapsed:!1,panelWidth:360,showPath:!0,showPathDirectionArrows:!0,showObjects:!0,fitBoundsOnLoad:!0});_t.addControl(rt,"top-right"),rt.on("cameraselect",z=>{console.log("Camera selected:",z.cameraIndex,z.camera?.id)}),rt.on("dataloaded",()=>{console.log("Data loaded:",rt.getCameras().length,"cameras")}),console.log("GeoPhoto control added to map")});
