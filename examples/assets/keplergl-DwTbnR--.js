import"./modulepreload-polyfill-B5Qt9EMX.js";import{m as u}from"./maplibre-gl-BTjYUjN0.js";import{Y as L}from"./mapbox-overlay-DuGg2Dfa.js";import{S as E}from"./scatterplot-layer-CrHtgie3.js";import{H as x}from"./hexagon-layer-BxlIRGnZ.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./color-CUNNsFV-.js";import"./picking-CN0D5Hbh.js";import"./geometry-BGUg4AMQ.js";import"./composite-layer-Dy_jReoP.js";import"./color-utils-CKKUW6_w.js";import"./polygon-utils-DosR6vop.js";import"./gouraud-material-Bh_EEl0e.js";function B(e=100){const t=["A","B","C"];return Array.from({length:e},(n,r)=>({id:r,latitude:37.8+(Math.random()-.5)*.4,longitude:-122.4+(Math.random()-.5)*.4,value:Math.floor(Math.random()*100)+1,category:t[Math.floor(Math.random()*3)]}))}const m={type:"Feature",geometry:{type:"Polygon",coordinates:[[[-122.5,37.7],[-122.3,37.7],[-122.3,37.9],[-122.5,37.9],[-122.5,37.7]]]},properties:{name:"Area"}},d=B();let l=[...d];const f={dark:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",light:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",streets:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json"},o=new u.Map({container:"map",style:f.dark,center:[-122.4,37.8],zoom:10});o.addControl(new u.NavigationControl,"top-right");const a={points:!0,polygon:!0,hexagon:!1},v=new L({layers:[]});o.on("load",()=>{o.addControl(v),o.addSource("polygon",{type:"geojson",data:m}),o.addLayer({id:"polygon-fill",type:"fill",source:"polygon",paint:{"fill-color":"#00d9ff","fill-opacity":.3}}),o.addLayer({id:"polygon-outline",type:"line",source:"polygon",paint:{"line-color":"#00d9ff","line-width":2}}),c(),b()});function M(){const e=[];return a.points&&e.push(new E({id:"scatterplot",data:l,pickable:!0,opacity:.8,stroked:!0,filled:!0,radiusMinPixels:4,radiusMaxPixels:20,getPosition:t=>[t.longitude,t.latitude],getRadius:t=>t.value*2,getFillColor:t=>[...{A:[255,107,107],B:[107,255,107],C:[107,107,255]}[t.category],200],getLineColor:[255,255,255,100],onHover:t=>S(t)})),a.hexagon&&e.push(new x({id:"hexagon",data:l,pickable:!0,extruded:!0,radius:300,elevationScale:30,getPosition:t=>[t.longitude,t.latitude],colorRange:[[1,152,189],[73,227,206],[216,254,181],[254,237,177],[254,173,84],[209,55,78]]})),e}function c(){v.setProps({layers:M()}),o.getLayer("polygon-fill")&&(o.setLayoutProperty("polygon-fill","visibility",a.polygon?"visible":"none"),o.setLayoutProperty("polygon-outline","visibility",a.polygon?"visible":"none"))}function P(e){a[e]=!a[e];const t=document.getElementById(`toggle-${e}`);t==null||t.classList.toggle("active",a[e]),c()}function h(){const e=document.getElementById("valueFilter"),t=document.getElementById("categoryFilter"),n=document.getElementById("valueLabel"),r=parseInt((e==null?void 0:e.value)||"0"),i=(t==null?void 0:t.value)||"all";n&&(n.textContent=`${r}+`),l=d.filter(s=>!(s.value<r||i!=="all"&&s.category!==i)),c(),b()}function C(){const e=document.getElementById("baseMapSelect"),t=(e==null?void 0:e.value)||"dark";o.setStyle(f[t]),o.once("style.load",()=>{o.addSource("polygon",{type:"geojson",data:m}),o.addLayer({id:"polygon-fill",type:"fill",source:"polygon",paint:{"fill-color":"#00d9ff","fill-opacity":.3}}),o.addLayer({id:"polygon-outline",type:"line",source:"polygon",paint:{"line-color":"#00d9ff","line-width":2}}),c()})}function b(){const e=document.getElementById("totalPoints"),t=document.getElementById("filteredPoints"),n=document.getElementById("avgValue");if(e&&(e.textContent=d.length.toString()),t&&(t.textContent=l.length.toString()),n){const r=l.length>0?(l.reduce((i,s)=>i+s.value,0)/l.length).toFixed(1):"0";n.textContent=r}}function S(e){const t=document.getElementById("tooltip");t&&(e.object?(t.style.display="block",t.style.left=`${e.x+10}px`,t.style.top=`${e.y+10}px`,t.innerHTML=`
      <strong>Point ${e.object.id}</strong><br>
      Value: ${e.object.value}<br>
      Category: ${e.object.category}
    `):t.style.display="none")}document.querySelectorAll(".layer-item").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-layer");t&&P(t)})});var y;(y=document.getElementById("valueFilter"))==null||y.addEventListener("input",h);var g;(g=document.getElementById("categoryFilter"))==null||g.addEventListener("change",h);var p;(p=document.getElementById("baseMapSelect"))==null||p.addEventListener("change",C);
