import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */import{m as c}from"./maplibre-gl-BTjYUjN0.js";import{L as h}from"./maplibre-gl-layer-control-Bv-vXquT.js";import{D as S}from"./DeckLayerAdapter-DCj5phjl.js";import{K as v,U as w,M as I}from"./mapbox-overlay-CtMyNbGZ.js";import{C as N}from"./column-layer-1kteMgOt.js";import{G as _}from"./geometry-CwO1uo58.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./polygon-utils-B8iYQ3Og.js";import"./picking-CN0D5Hbh.js";import"./phong-material-BoTCu5o1.js";import"./lighting-p30x1bFT.js";import"./phong-shaders-wgsl-3FV41e28.js";import"./gouraud-material-NoqXAwxE.js";class M extends _{constructor(t={}){const{id:e=v("cube-geometry"),indices:r=!0}=t;super(r?{...t,id:e,topology:"triangle-list",indices:{size:1,value:A},attributes:{...P,...t.attributes}}:{...t,id:e,topology:"triangle-list",indices:void 0,attributes:{...B,...t.attributes}})}}const A=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),D=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),L=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),T=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),U=new Float32Array([1,-1,1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,1,1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,-1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1]),b=new Float32Array([1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,1,0,0]),z=new Float32Array([1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,0,1,1,0,1,1,1,0,1,0,1,0,0,0,1,0,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,0,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,0,0,1,0,0,0,1,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,1]),P={POSITION:{size:3,value:D},NORMAL:{size:3,value:L},TEXCOORD_0:{size:2,value:T}},B={POSITION:{size:3,value:U},TEXCOORD_0:{size:2,value:b},COLOR_0:{size:3,value:z}},x={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}};class m extends N{_updateGeometry(){const t=new M;this.state.fillModel.setGeometry(t)}draw({uniforms:t}){const{elevationScale:e,extruded:r,offset:a,coverage:n,cellSize:s,angle:O,radiusUnits:g}=this.props,y=this.state.fillModel,E={radius:s/2,radiusUnits:w[g],angle:O,offset:a,extruded:r,stroked:!1,coverage:n,elevationScale:e,edgeDistance:1,isStroke:!1,widthUnits:0,widthScale:0,widthMinPixels:0,widthMaxPixels:0};y.shaderInputs.setProps({column:E}),y.draw(this.context.renderPass)}}m.layerName="GridCellLayer";m.defaultProps=x;function R(o,t,e){const r=[],a=Math.ceil(Math.sqrt(e));for(let n=0;n<a;n++)for(let s=0;s<a&&!(r.length>=e);s++)r.push({position:[o+(n-a/2)*.003,t+(s-a/2)*.003],elevation:Math.random()*1e3+100,color:[Math.floor(Math.random()*155+100),Math.floor(Math.random()*155+100),255,200]});return r}const k=R(-122.4,37.8,100),l=new c.Map({container:"map",style:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",center:[-122.4,37.8],zoom:12,pitch:45,bearing:-17});l.addControl(new c.NavigationControl,"top-right");l.addControl(new c.ScaleControl({unit:"metric"}),"bottom-right");const u=new I({layers:[]}),p=new Map,C=new S(l,u,p);let d=200;function G(){u.setProps({layers:Array.from(p.values())})}function f(){const o="gridcell-layer",t=new m({id:o,data:k,getPosition:e=>e.position,getElevation:e=>e.elevation,getFillColor:e=>e.color,cellSize:d,extruded:!0,elevationScale:1,pickable:!0});p.set(o,t),G(),C.notifyLayerAdded(o)}const i=document.getElementById("cellSize"),X=document.getElementById("cellSizeValue");i==null||i.addEventListener("input",()=>{d=parseInt(i.value,10),X.textContent=`${d}m`,f()});l.on("load",()=>{l.addControl(u);const o=new h({collapsed:!0,customLayerAdapters:[C],panelWidth:360});l.addControl(o,"top-right"),f()});
