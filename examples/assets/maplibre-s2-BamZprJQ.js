import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */import{h as D}from"./maplibre-gl-C9tqRo8a.js";import{L as tt}from"./maplibre-gl-layer-control-CbPNLzzp.js";import{D as et}from"./DeckLayerAdapter-kz44PQGX.js";import{M as nt}from"./mapbox-overlay-CjL5nCza.js";import{G as rt}from"./GeoCellLayer-BEL9dw2G.js";import{g as it}from"./_commonjsHelpers-Cpj98o6Y.js";import"./preload-helper-PPVm8Dsz.js";import"./composite-layer-dQcQCi_n.js";import"./polygon-layer-DvLHhwoC.js";import"./solid-polygon-layer-DvkMDu8v.js";import"./polygon-utils-B8iYQ3Og.js";import"./cut-by-mercator-bounds-BgqYccvj.js";import"./picking-CN0D5Hbh.js";import"./gouraud-material-DpEoe11x.js";import"./lighting-Vr4zHQkI.js";import"./phong-shaders-wgsl-3FV41e28.js";import"./geometry-U_tfiUzx.js";import"./path-layer-BtOBY6v6.js";import"./utils-2CUC2toc.js";function ot(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var P={exports:{}},st=P.exports,Q;function ht(){return Q||(Q=1,(function(i){(function(r,s){typeof ot=="function"&&i&&i.exports?i.exports=s():(r.dcodeIO=r.dcodeIO||{}).Long=s()})(st,function(){function r(e,t,o){this.low=e|0,this.high=t|0,this.unsigned=!!o}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1});function s(e){return(e&&e.__isLong__)===!0}r.isLong=s;var F={},w={};function u(e,t){var o,f,g;return t?(e>>>=0,(g=0<=e&&e<256)&&(f=w[e],f)?f:(o=h(e,(e|0)<0?-1:0,!0),g&&(w[e]=o),o)):(e|=0,(g=-128<=e&&e<128)&&(f=F[e],f)?f:(o=h(e,e<0?-1:0,!1),g&&(F[e]=o),o))}r.fromInt=u;function a(e,t){if(isNaN(e)||!isFinite(e))return t?O:l;if(t){if(e<0)return O;if(e>=A)return B}else{if(e<=-U)return L;if(e+1>=U)return H}return e<0?a(-e,t).neg():h(e%S|0,e/S|0,t)}r.fromNumber=a;function h(e,t,o){return new r(e,t,o)}r.fromBits=h;var x=Math.pow;function N(e,t,o){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return l;if(typeof t=="number"?(o=t,t=!1):t=!!t,o=o||10,o<2||36<o)throw RangeError("radix");var f;if((f=e.indexOf("-"))>0)throw Error("interior hyphen");if(f===0)return N(e.substring(1),t,o).neg();for(var g=a(x(o,8)),c=l,y=0;y<e.length;y+=8){var _=Math.min(8,e.length-y),p=parseInt(e.substring(y,y+_),o);if(_<8){var E=a(x(o,_));c=c.mul(E).add(a(p))}else c=c.mul(g),c=c.add(a(p))}return c.unsigned=t,c}r.fromString=N;function d(e){return e instanceof r?e:typeof e=="number"?a(e):typeof e=="string"?N(e):h(e.low,e.high,e.unsigned)}r.fromValue=d;var I=65536,R=1<<24,S=I*I,A=S*S,U=A/2,k=u(R),l=u(0);r.ZERO=l;var O=u(0,!0);r.UZERO=O;var q=u(1);r.ONE=q;var G=u(1,!0);r.UONE=G;var Z=u(-1);r.NEG_ONE=Z;var H=h(-1,2147483647,!1);r.MAX_VALUE=H;var B=h(-1,-1,!0);r.MAX_UNSIGNED_VALUE=B;var L=h(0,-2147483648,!1);r.MIN_VALUE=L;var n=r.prototype;return n.toInt=function(){return this.unsigned?this.low>>>0:this.low},n.toNumber=function(){return this.unsigned?(this.high>>>0)*S+(this.low>>>0):this.high*S+(this.low>>>0)},n.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(L)){var o=a(t),f=this.div(o),g=f.mul(o).sub(this);return f.toString(t)+g.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var c=a(x(t,6),this.unsigned),y=this,_="";;){var p=y.div(c),E=y.sub(p.mul(c)).toInt()>>>0,v=E.toString(t);if(y=p,y.isZero())return v+_;for(;v.length<6;)v="0"+v;_=""+v+_}},n.getHighBits=function(){return this.high},n.getHighBitsUnsigned=function(){return this.high>>>0},n.getLowBits=function(){return this.low},n.getLowBitsUnsigned=function(){return this.low>>>0},n.getNumBitsAbs=function(){if(this.isNegative())return this.eq(L)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,o=31;o>0&&(t&1<<o)==0;o--);return this.high!=0?o+33:o+1},n.isZero=function(){return this.high===0&&this.low===0},n.isNegative=function(){return!this.unsigned&&this.high<0},n.isPositive=function(){return this.unsigned||this.high>=0},n.isOdd=function(){return(this.low&1)===1},n.isEven=function(){return(this.low&1)===0},n.equals=function(t){return s(t)||(t=d(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},n.eq=n.equals,n.notEquals=function(t){return!this.eq(t)},n.neq=n.notEquals,n.lessThan=function(t){return this.comp(t)<0},n.lt=n.lessThan,n.lessThanOrEqual=function(t){return this.comp(t)<=0},n.lte=n.lessThanOrEqual,n.greaterThan=function(t){return this.comp(t)>0},n.gt=n.greaterThan,n.greaterThanOrEqual=function(t){return this.comp(t)>=0},n.gte=n.greaterThanOrEqual,n.compare=function(t){if(s(t)||(t=d(t)),this.eq(t))return 0;var o=this.isNegative(),f=t.isNegative();return o&&!f?-1:!o&&f?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},n.comp=n.compare,n.negate=function(){return!this.unsigned&&this.eq(L)?L:this.not().add(q)},n.neg=n.negate,n.add=function(t){s(t)||(t=d(t));var o=this.high>>>16,f=this.high&65535,g=this.low>>>16,c=this.low&65535,y=t.high>>>16,_=t.high&65535,p=t.low>>>16,E=t.low&65535,v=0,m=0,b=0,T=0;return T+=c+E,b+=T>>>16,T&=65535,b+=g+p,m+=b>>>16,b&=65535,m+=f+_,v+=m>>>16,m&=65535,v+=o+y,v&=65535,h(b<<16|T,v<<16|m,this.unsigned)},n.subtract=function(t){return s(t)||(t=d(t)),this.add(t.neg())},n.sub=n.subtract,n.multiply=function(t){if(this.isZero()||(s(t)||(t=d(t)),t.isZero()))return l;if(this.eq(L))return t.isOdd()?L:l;if(t.eq(L))return this.isOdd()?L:l;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(k)&&t.lt(k))return a(this.toNumber()*t.toNumber(),this.unsigned);var o=this.high>>>16,f=this.high&65535,g=this.low>>>16,c=this.low&65535,y=t.high>>>16,_=t.high&65535,p=t.low>>>16,E=t.low&65535,v=0,m=0,b=0,T=0;return T+=c*E,b+=T>>>16,T&=65535,b+=g*E,m+=b>>>16,b&=65535,b+=c*p,m+=b>>>16,b&=65535,m+=f*E,v+=m>>>16,m&=65535,m+=g*p,v+=m>>>16,m&=65535,m+=c*_,v+=m>>>16,m&=65535,v+=o*E+f*p+g*_+c*y,v&=65535,h(b<<16|T,v<<16|m,this.unsigned)},n.mul=n.multiply,n.divide=function(t){if(s(t)||(t=d(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?O:l;var o,f,g;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return O;if(t.gt(this.shru(1)))return G;g=O}else{if(this.eq(L)){if(t.eq(q)||t.eq(Z))return L;if(t.eq(L))return q;var c=this.shr(1);return o=c.div(t).shl(1),o.eq(l)?t.isNegative()?q:Z:(f=this.sub(t.mul(o)),g=o.add(f.div(t)),g)}else if(t.eq(L))return this.unsigned?O:l;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();g=l}for(f=this;f.gte(t);){o=Math.max(1,Math.floor(f.toNumber()/t.toNumber()));for(var y=Math.ceil(Math.log(o)/Math.LN2),_=y<=48?1:x(2,y-48),p=a(o),E=p.mul(t);E.isNegative()||E.gt(f);)o-=_,p=a(o,this.unsigned),E=p.mul(t);p.isZero()&&(p=q),g=g.add(p),f=f.sub(E)}return g},n.div=n.divide,n.modulo=function(t){return s(t)||(t=d(t)),this.sub(this.div(t).mul(t))},n.mod=n.modulo,n.not=function(){return h(~this.low,~this.high,this.unsigned)},n.and=function(t){return s(t)||(t=d(t)),h(this.low&t.low,this.high&t.high,this.unsigned)},n.or=function(t){return s(t)||(t=d(t)),h(this.low|t.low,this.high|t.high,this.unsigned)},n.xor=function(t){return s(t)||(t=d(t)),h(this.low^t.low,this.high^t.high,this.unsigned)},n.shiftLeft=function(t){return s(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?h(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):h(0,this.low<<t-32,this.unsigned)},n.shl=n.shiftLeft,n.shiftRight=function(t){return s(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?h(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):h(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},n.shr=n.shiftRight,n.shiftRightUnsigned=function(t){if(s(t)&&(t=t.toInt()),t&=63,t===0)return this;var o=this.high;if(t<32){var f=this.low;return h(f>>>t|o<<32-t,o>>>t,this.unsigned)}else return t===32?h(o,0,this.unsigned):h(o>>>t-32,0,this.unsigned)},n.shru=n.shiftRightUnsigned,n.toSigned=function(){return this.unsigned?h(this.low,this.high,!1):this},n.toUnsigned=function(){return this.unsigned?this:h(this.low,this.high,!0)},n.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},n.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24&255,e&255,e>>>8&255,e>>>16&255,e>>>24&255]},n.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255]},r})})(P)),P.exports}var ft=ht();const C=it(ft),ut=3,at=30,gt=2*at+1,z=180/Math.PI;function lt(i,r,s){const F=1<<r;return[(i[0]+s[0])/F,(i[1]+s[1])/F]}function Y(i){return i>=.5?1/3*(4*i*i-1):1/3*(1-4*(1-i)*(1-i))}function ct(i){return[Y(i[0]),Y(i[1])]}function Ft(i,[r,s]){switch(i){case 0:return[1,r,s];case 1:return[-r,1,s];case 2:return[-r,-s,1];case 3:return[-1,-s,-r];case 4:return[s,-1,-r];case 5:return[s,r,-1];default:throw new Error("Invalid face")}}function dt([i,r,s]){const F=Math.atan2(s,Math.sqrt(i*i+r*r));return[Math.atan2(r,i)*z,F*z]}function wt(i){let r=C.fromString(i,!0,10).toString(2);for(;r.length<ut+gt;)r="0"+r;const s=r.lastIndexOf("1"),F=r.substring(0,3),w=r.substring(3,s),u=w.length/2,a=C.fromString(F,!0,2).toString(10);let h=C.fromString(w,!0,2).toString(4);for(;h.length<u;)h="0"+h;return`${a}/${h}`}function pt(i,r,s,F){if(F===0){s===1&&(r[0]=i-1-r[0],r[1]=i-1-r[1]);const w=r[0];r[0]=r[1],r[1]=w}}function mt(i){const r=i.split("/"),s=parseInt(r[0],10),F=r[1],w=F.length,u=[0,0];let a;for(let h=w-1;h>=0;h--){a=w-h;const x=F[h];let N=0,d=0;x==="1"?d=1:x==="2"?(N=1,d=1):x==="3"&&(N=1);const I=Math.pow(2,a-1);pt(I,u,N,d),u[0]+=I*N,u[1]+=I*d}if(s%2===1){const h=u[0];u[0]=u[1],u[1]=h}return{face:s,ij:u,level:a}}function yt(i){const r=i.padEnd(16,"0");return C.fromString(r,16)}const vt=100;function Et({face:i,ij:r,level:s}){const F=[[0,0],[0,1],[1,1],[1,0],[0,0]],w=Math.max(1,Math.ceil(vt*Math.pow(2,-s))),u=new Float64Array(4*w*2+2);let a=0,h=0;for(let x=0;x<4;x++){const N=F[x].slice(0),d=F[x+1],I=(d[0]-N[0])/w,R=(d[1]-N[1])/w;for(let S=0;S<w;S++){N[0]+=I,N[1]+=R;const A=lt(r,s,N),U=ct(A),k=Ft(i,U),l=dt(k);Math.abs(l[1])>89.999&&(l[0]=h);const O=l[0]-h;l[0]+=O>180?-360:O<-180?360:0,u[a++]=l[0],u[a++]=l[1],h=l[0]}}return u[a++]=u[0],u[a++]=u[1],u}function Nt(i){if(typeof i=="string"){if(i.indexOf("/")>0)return i;i=yt(i)}return wt(i.toString())}function Lt(i){const r=Nt(i),s=mt(r);return Et(s)}const _t={getS2Token:{type:"accessor",value:i=>i.token}};class W extends rt{indexToBounds(){const{data:r,getS2Token:s}=this.props;return{data:r,_normalize:!1,positionFormat:"XY",getPolygon:(F,w)=>Lt(s(F,w))}}}W.layerName="S2Layer";W.defaultProps=_t;const bt=[{token:"80858c",value:100},{token:"80858d",value:200},{token:"80858e",value:150},{token:"80858f",value:300},{token:"808590",value:250},{token:"808591",value:180},{token:"808594",value:220},{token:"808595",value:270}],M=new D.Map({container:"map",style:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",center:[-122.4,37.75],zoom:8,pitch:45});M.addControl(new D.NavigationControl,"top-right");M.addControl(new D.ScaleControl({unit:"metric"}),"bottom-right");const j=new nt({layers:[]}),X=new Map,$=new et(M,j,X);let J=100;function xt(){j.setProps({layers:Array.from(X.values())})}function K(){const i="s2-layer",r=new W({id:i,data:bt,getS2Token:s=>s.token,getFillColor:[51,136,255,180],getElevation:s=>s.value,extruded:!0,elevationScale:J,pickable:!0});X.set(i,r),xt(),$.notifyLayerAdded(i)}const V=document.getElementById("elevation"),Ot=document.getElementById("elevationValue");V?.addEventListener("input",()=>{J=parseInt(V.value,10),Ot.textContent=V.value,K()});M.on("load",()=>{M.addControl(j);const i=new tt({collapsed:!0,customLayerAdapters:[$],panelWidth:360});M.addControl(i,"top-right"),K()});
