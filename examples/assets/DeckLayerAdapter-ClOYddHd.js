var i=Object.defineProperty;var n=(s,e,t)=>e in s?i(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var r=(s,e,t)=>n(s,typeof e!="symbol"?e+"":e,t);class y{constructor(e,t,a){r(this,"type","deck");r(this,"map");r(this,"deckOverlay");r(this,"deckLayers");r(this,"changeCallbacks",[]);this.map=e,this.deckOverlay=t,this.deckLayers=a}getLayerIds(){return Array.from(this.deckLayers.keys()).filter(e=>e.startsWith("arc-")||e.startsWith("pointcloud-"))}getLayerState(e){const t=this.deckLayers.get(e);return!t||!t.props?null:{visible:t.props.visible!==!1,opacity:t.props.opacity??1,name:this.getName(e)}}setVisibility(e,t){const a=this.deckLayers.get(e);if(!a||typeof a.clone!="function")return;const c=a.clone({visible:t});this.deckLayers.set(e,c),this.updateOverlay()}setOpacity(e,t){const a=this.deckLayers.get(e);if(!a||typeof a.clone!="function")return;const c=a.clone({opacity:t});this.deckLayers.set(e,c),this.updateOverlay()}getName(e){return e.replace(/^(arc|pointcloud)[-_]/,"").replace(/[-_]/g," ").replace(/\b\w/g,t=>t.toUpperCase())||e}getSymbolType(){return"deck"}notifyLayerAdded(e){this.changeCallbacks.forEach(t=>t("add",e))}notifyLayerRemoved(e){this.changeCallbacks.forEach(t=>t("remove",e))}onLayerChange(e){return this.changeCallbacks.push(e),()=>{const t=this.changeCallbacks.indexOf(e);t>=0&&this.changeCallbacks.splice(t,1)}}updateOverlay(){const e=Array.from(this.deckLayers.values());this.deckOverlay.setProps({layers:e}),this.map.triggerRepaint()}}export{y as D};
