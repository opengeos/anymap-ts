import"./modulepreload-polyfill-B5Qt9EMX.js";import{h as p}from"./maplibre-gl-BZpgQJIL.js";import{M as v}from"./mapbox-overlay-CjL5nCza.js";import{S as h}from"./scatterplot-layer-D0wjM0aN.js";import{H as b}from"./hexagon-layer-Byjcp41x.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./preload-helper-PPVm8Dsz.js";import"./color-CUNNsFV-.js";import"./picking-CN0D5Hbh.js";import"./geometry-U_tfiUzx.js";import"./bounds-utils-Dwf1GVOK.js";import"./composite-layer-dQcQCi_n.js";import"./color-utils-CH0udO2m.js";import"./column-layer-F5K0mWOC.js";import"./polygon-utils-B8iYQ3Og.js";import"./phong-material-bZBFcj6W.js";import"./lighting-Vr4zHQkI.js";import"./phong-shaders-wgsl-3FV41e28.js";import"./gouraud-material-DpEoe11x.js";function L(e=100){const t=["A","B","C"];return Array.from({length:e},(l,r)=>({id:r,latitude:37.8+(Math.random()-.5)*.4,longitude:-122.4+(Math.random()-.5)*.4,value:Math.floor(Math.random()*100)+1,category:t[Math.floor(Math.random()*3)]}))}const g={type:"Feature",geometry:{type:"Polygon",coordinates:[[[-122.5,37.7],[-122.3,37.7],[-122.3,37.9],[-122.5,37.9],[-122.5,37.7]]]},properties:{name:"Area"}},d=L();let n=[...d];const y={dark:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",light:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",streets:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json"},o=new p.Map({container:"map",style:y.dark,center:[-122.4,37.8],zoom:10});o.addControl(new p.NavigationControl,"top-right");const a={points:!0,polygon:!0,hexagon:!1},u=new v({layers:[]});o.on("load",()=>{o.addControl(u),o.addSource("polygon",{type:"geojson",data:g}),o.addLayer({id:"polygon-fill",type:"fill",source:"polygon",paint:{"fill-color":"#00d9ff","fill-opacity":.3}}),o.addLayer({id:"polygon-outline",type:"line",source:"polygon",paint:{"line-color":"#00d9ff","line-width":2}}),c(),f()});function E(){const e=[];return a.points&&e.push(new h({id:"scatterplot",data:n,pickable:!0,opacity:.8,stroked:!0,filled:!0,radiusMinPixels:4,radiusMaxPixels:20,getPosition:t=>[t.longitude,t.latitude],getRadius:t=>t.value*2,getFillColor:t=>[...{A:[255,107,107],B:[107,255,107],C:[107,107,255]}[t.category],200],getLineColor:[255,255,255,100],onHover:t=>B(t)})),a.hexagon&&e.push(new b({id:"hexagon",data:n,pickable:!0,extruded:!0,radius:300,elevationScale:30,getPosition:t=>[t.longitude,t.latitude],colorRange:[[1,152,189],[73,227,206],[216,254,181],[254,237,177],[254,173,84],[209,55,78]]})),e}function c(){u.setProps({layers:E()}),o.getLayer("polygon-fill")&&(o.setLayoutProperty("polygon-fill","visibility",a.polygon?"visible":"none"),o.setLayoutProperty("polygon-outline","visibility",a.polygon?"visible":"none"))}function M(e){a[e]=!a[e],document.getElementById(`toggle-${e}`)?.classList.toggle("active",a[e]),c()}function m(){const e=document.getElementById("valueFilter"),t=document.getElementById("categoryFilter"),l=document.getElementById("valueLabel"),r=parseInt(e?.value||"0"),i=t?.value||"all";l&&(l.textContent=`${r}+`),n=d.filter(s=>!(s.value<r||i!=="all"&&s.category!==i)),c(),f()}function x(){const t=document.getElementById("baseMapSelect")?.value||"dark";o.setStyle(y[t]),o.once("style.load",()=>{o.addSource("polygon",{type:"geojson",data:g}),o.addLayer({id:"polygon-fill",type:"fill",source:"polygon",paint:{"fill-color":"#00d9ff","fill-opacity":.3}}),o.addLayer({id:"polygon-outline",type:"line",source:"polygon",paint:{"line-color":"#00d9ff","line-width":2}}),c()})}function f(){const e=document.getElementById("totalPoints"),t=document.getElementById("filteredPoints"),l=document.getElementById("avgValue");if(e&&(e.textContent=d.length.toString()),t&&(t.textContent=n.length.toString()),l){const r=n.length>0?(n.reduce((i,s)=>i+s.value,0)/n.length).toFixed(1):"0";l.textContent=r}}function B(e){const t=document.getElementById("tooltip");t&&(e.object?(t.style.display="block",t.style.left=`${e.x+10}px`,t.style.top=`${e.y+10}px`,t.innerHTML=`
      <strong>Point ${e.object.id}</strong><br>
      Value: ${e.object.value}<br>
      Category: ${e.object.category}
    `):t.style.display="none")}document.querySelectorAll(".layer-item").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-layer");t&&M(t)})});document.getElementById("valueFilter")?.addEventListener("input",m);document.getElementById("categoryFilter")?.addEventListener("change",m);document.getElementById("baseMapSelect")?.addEventListener("change",x);
